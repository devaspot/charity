%!PS-Adobe-2.0
%%Creator: dvips 5.490 Copyright 1986, 1992 Radical Eye Software
%%Title: thesis.dvi
%%Pages: 122 1
%%BoundingBox: 0 0 612 792
%%EndComments
%DVIPSCommandLine: dvips -o thesis.ps thesis.dvi
%%BeginProcSet: tex.pro
%!
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N /X{S N}
B /TR{translate}N /isls false N /vsize 11 72 mul N /@rigin{isls{[0 -1 1 0 0 0]
concat}if 72 Resolution div 72 VResolution div neg scale isls{Resolution hsize
-72 div mul 0 TR}if Resolution VResolution vsize -72 div 1 add mul TR matrix
currentmatrix dup dup 4 get round 4 exch put dup dup 5 get round 5 exch put
setmatrix}N /@landscape{/isls true N}B /@manualfeed{statusdict /manualfeed
true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N
/IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn begin /FontType 3 N /FontMatrix
fntrx N /FontBBox FBB N string /base X array /BitMaps X /BuildChar{
CharBuilder}N /Encoding IE N end dup{/foo setfont}2 array copy cvx N load 0 nn
put /ctr 0 N[}B /df{/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0
0 sf neg 0 0]N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data
dup length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128
ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127
sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp 0 N
/cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2 index get
S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff ch-yoff ch-height
sub ch-xoff ch-width add ch-yoff setcachedevice ch-width ch-height true[1 0 0
-1 -.1 ch-xoff sub ch-yoff .1 add]{ch-image}imagemask restore}B /D{/cc X dup
type /stringtype ne{]}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1
ne{dup dup length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}
B /I{cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
.99 lt{/FV}{/RV}ifelse load def pop}N /eop{SI restore showpage userdict
/eop-hook known{eop-hook}if}N /@start{userdict /start-hook known{start-hook}
if /VResolution X /Resolution X 1000 div /DVImag X /IE 256 array N 0 1 255{IE
S 1 string dup 0 3 index put cvn put}for 65781.76 div /vsize X 65781.76 div
/hsize X}N /p{show}N /RMat[1 0 0 -1 0 0]N /BDot 260 string N /rulex 0 N /ruley
0 N /v{/ruley X /rulex X V}B /V{}B /RV statusdict begin /product where{pop
product dup length 7 ge{0 7 getinterval dup(Display)eq exch 0 4 getinterval
(NeXT)eq or}{pop false}ifelse}{false}ifelse end{{gsave TR -.1 -.1 TR 1 1 scale
rulex ruley false RMat{BDot}imagemask grestore}}{{gsave TR -.1 -.1 TR rulex
ruley scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /FV{gsave
transform round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail{dup
/delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}B /d{-3 M}
B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{4 M}B /w{0
rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{p 1 w}B /r{p 2 w}
B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p a}B /bos{/SS save N}B
/eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N /vs
792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen false N
/rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B /@scaleunit 100 N
/@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit div /vsc X}B /@hsize{/hs
X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{/CLIP 2 N}B /@hoffset{/ho X}B
/@voffset{/vo X}B /@angle{/ang X}B /@rwi{10 div /rwi X /rwiSeen true N}B /@rhi
{10 div /rhi X /rhiSeen true N}B /@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B
/@ury{/ury X}B /magscale true def end /@MacSetUp{userdict /md known{userdict
/md get type /dicttype eq{userdict begin md length 10 add md maxlength ge{/md
md dup length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{
}N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath clippath
mark{transform{itransform moveto}}{transform{itransform lineto}}{6 -2 roll
transform 6 -2 roll transform 6 -2 roll transform{itransform 6 2 roll
itransform 6 2 roll itransform 6 2 roll curveto}}{{closepath}}pathforall
newpath counttomark array astore /gc xdf pop ct 39 0 put 10 fz 0 fs 2
F/|______Courier fnt invertflag{PaintBlack}if}N /txpose{pxs pys scale ppr
aload pop por{noflips{pop S neg S TR pop 1 -1 scale}if xflip yflip and{pop S
neg S TR 180 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0
get neg sub neg TR}if xflip yflip not and{pop S neg S TR pop 180 rotate ppr 3
get ppr 1 get neg sub neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get
neg TR}if}{noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop
pop 90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get
neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr 0
get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add 2 div 3
1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp{pop pop
showpage pm restore}N end}if}if}N /normalscale{Resolution 72 div VResolution
72 div neg scale magscale{DVImag dup scale}if 0 setgray}N /psfts{S 65781.76
div N}N /startTexFig{/psf$SavedState save N userdict maxlength dict begin
/magscale true def normalscale currentpoint TR /psf$ury psfts /psf$urx psfts
/psf$lly psfts /psf$llx psfts /psf$y psfts /psf$x psfts currentpoint /psf$cy X
/psf$cx X /psf$sx psf$x psf$urx psf$llx sub div N /psf$sy psf$y psf$ury
psf$lly sub div N psf$sx psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy
psf$sy div psf$ury sub TR /showpage{}N /erasepage{}N /copypage{}N /p 3 def
@MacSetUp}N /doclip{psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll
newpath 4 copy 4 2 roll moveto 6 -1 roll S lineto S lineto S lineto closepath
clip newpath moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{
SDict begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial{CLIP
1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto closepath
clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx sub div rhiSeen{
rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR}{rhiSeen{rhi ury lly
sub div dup scale llx neg lly neg TR}if}ifelse CLIP 2 eq{newpath llx lly
moveto urx lly lineto urx ury lineto llx ury lineto closepath clip}if
/showpage{}N /erasepage{}N /copypage{}N newpath}N /@endspecial{count ocount
sub{pop}repeat countdictstack dcount sub{end}repeat grestore SpecialSave
restore end}N /@defspecial{SDict begin}N /@fedspecial{end}B /li{lineto}B /rl{
rlineto}B /rc{rcurveto}B /np{/SaveX currentpoint /SaveY X N 1 setlinecap
newpath}N /st{stroke SaveX SaveY moveto}N /fil{fill SaveX SaveY moveto}N
/ellipse{/endangle X /startangle X /yrad X /xrad X /savematrix matrix
currentmatrix N TR xrad yrad scale 0 0 1 startangle endangle arc savematrix
setmatrix}N end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300 @start /Fa 2 51
df<18F818181818181818181818FF080D7D8C0E>49 D<3E00418080C0C0C000C000C001800300
0400084030407F80FF800A0D7E8C0E>I E /Fb 1 50 df<00200000E00001E0000FE000FFE000
F1E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E000
01E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E000
01E00001E00001E00001E00001E00001E00003F000FFFFC0FFFFC012287BA71D>49
D E /Fc 6 116 df<0F8030C060804000C000C000C04061803E000A097E880D>99
D<0808000000007098B0303060646870060F7D8E0B>105 D<7030303060606060C0C0C0D0E0E0
040E7E8D0A>108 D<73809C40986030C030C030C03188619060E00D097D8812>110
D<0F00308060C040C0C0C0C0C0C18043003C000A097E880F>I<3E4342703C06C2847808097D88
0E>115 D E /Fd 20 118 df<70F8F8F87005057A8410>46 D<00400001C00007C000FFC000F9
C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001
C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001
C0007FFF807FFF8011217AA01C>49 D<03F8000FFE00181F802007C04003C04001E0F801E0FC01
F0FC00F0FC00F07800F03001F00001E00001E00003E00003C0000780000700000E00001C000038
0000700000E0000080000100000200100400100800101000302000207FFFE0FFFFE0FFFFE01421
7CA01C>I<00FC0007FF000E07C01801E01C01E03E01F03E00F03E00F01E01F00C01F00001E000
01C00003C0000700000E0001FE000007800001C00000E00000F000007800007C00007C30007C78
007CFC007CFC007CFC0078F800F84000F03001E01C07C00FFF8001FC0016227DA01C>I<0000C0
0000C00001C00003C00007C00005C00009C00011C00031C00021C00041C00081C00101C00301C0
0201C00401C00801C01801C01001C02001C04001C0C001C0FFFFFFFFFFFF0001C00001C00001C0
0001C00001C00001C00001C0003FFE003FFE18217EA01C>I<1000401E03801FFF001FFE001FFC
0017F00010000010000010000010000010000010000011F8001606001803001001801001C00001
E00000E00000F00000F00000F07000F0F800F0F800F0F800F0F800E0C001E04001C06003C03007
801C0F000FFC0003F00014227CA01C>I<001F8000FFE001E0700380300700780E00F81C00F83C
0070380000780000780000700000F07E00F18380F200C0F400E0F80070F80078F80038F0003CF0
003CF0003CF0003C70003C70003C70003C7800383800383800701C00700E00E00703C003FF0000
FC0016227DA01C>I<4000006000007FFFFC7FFFFC7FFFF8400010C00010800020800040800080
00008000010000020000040000040000080000180000100000300000700000700000700000E000
00E00001E00001E00001E00001E00003E00003E00003E00003E00003E00003E00001C00016237C
A11C>I<00FC0003FF000703C00C00E01800601000303000303000303000303800303C00601F00
401F80C00FE30007FE0001FC0000FF00033FC00C0FE01807F03001F860007860003CC0001CC000
0CC0000CC0000CC0000C6000187000103800601E01C007FF8001FE0016227DA01C>I<00FC0003
FF000F03801C01C03C00E0380070700070700078F00038F00038F00038F0003CF0003CF0003CF0
003C70007C78007C38007C1C00BC0C013C07063C01F83C0000380000780000780000703800707C
00E07C01C07801C0300780380F001FFC0007F00016227DA01C>I<FFFFFFF0FFFFFFF0078001F0
078000700780003007800010078000180780001807800008078000080780100807801008078010
0007801000078030000780700007FFF00007FFF000078070000780300007801000078010000780
1000078010000780000007800000078000000780000007800000078000000780000007800000FF
FE0000FFFE00001D227DA123>70 D<7FFFFFFF007FFFFFFF007801E00F006001E003006001E001
004001E00100C001E00180C001E001808001E000808001E000808001E000808001E000800001E0
00000001E000000001E000000001E000000001E000000001E000000001E000000001E000000001
E000000001E000000001E000000001E000000001E000000001E000000001E000000001E0000000
01E000000001E000000001E000000001E0000000FFFFC00000FFFFC00021227DA127>84
D<00040000000E0000000E0000000E0000001F0000001F0000002F800000278000002780000043
C0000043C00000C3E0000081E0000081E0000100F0000100F0000300F80003FFF8000200780004
003C0004003C0004003C0008001E0018001E003C001F00FE007FE01B1A7F991F>97
D<FFFF801E01E01E00701E00781E003C1E003C1E003C1E003C1E003C1E00781E00F01E01E01FFF
C01E00F01E00781E003C1E001C1E001E1E001E1E001E1E001E1E001C1E003C1E00781E00F0FFFF
C0171A7E991D>I<FFFFF81E00781E00181E00081E000C1E00041E00041E00041E02001E02001E
02001E06001FFE001E06001E02001E02001E02001E00021E00021E00021E00061E00041E00041E
000C1E003CFFFFFC171A7E991C>101 D<003F810001E063000380170006000F000C0007001C00
030038000300780001007800010070000100F0000000F0000000F0000000F0000000F0000000F0
01FFE070001F0078000F0078000F0038000F001C000F000C000F0006000F000380170001E06300
003F81001B1A7E9920>103 D<FFC01E001E001E001E001E001E001E001E001E001E001E001E00
1E001E001E001E001E001E001E001E001E001E001E001E00FFC00A1A7E990F>105
D<FFE0001F00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00
001E00001E00001E00001E00001E00101E00101E00101E00301E00201E00601E00E01E01E0FFFF
E0141A7E991A>108 D<FFFE00001E03C0001E00E0001E00F0001E0078001E0078001E0078001E
0078001E0078001E00F0001E00E0001E03C0001FFE00001E0380001E01E0001E00E0001E00F000
1E00F0001E00F0001E00F0001E00F0001E00F0001E00F0401E0070401E003880FFC01F001A1A7E
991E>114 D<FFC03F801E000E001E0004001E0004001E0004001E0004001E0004001E0004001E
0004001E0004001E0004001E0004001E0004001E0004001E0004001E0004001E0004001E000400
1E0004001E0004000E0008000F000800070010000380200000E0C000003F0000191A7E991F>
117 D E /Fe 17 123 df<07FFFC00E01C01C00C01C00C01C00C01C00803810803810003830003
FF000702000702000702080700100E00100E00100E00200E00601C01E0FFFFC016147F9318>69
D<07FFFC00E01C01C00C01C00C01C00C01C00803820803820003820003FE000704000704000704
000700000E00000E00000E00000E00001C0000FFC00016147F9315>I<07FE0000E00001C00001
C00001C00001C0000380000380000380000380000700000700000700000700200E00400E00400E
00800E01801C0780FFFF0013147F9317>76 D<07FFC000E07001C01801C01C01C01C01C01C0380
380380700380C003FF000703C00701C00700E00700E00E01C00E01C00E01C00E01C21C01C4FF80
7817147F9319>82 D<1FFFF8381C18203818203808403808403810807010007000007000007000
00E00000E00000E00000E00001C00001C00001C00001C0000380003FF8001514809314>84
D<7C000C00180018001800180030003700388030C060C060C060C060C0C180C180C10043006600
38000A147E930F>98 D<07800C4010E031C0600060006000C000C0004020404021801E000B0D7E
8C0F>I<0038006C007C004C00C000C000C007F800C00180018001800180018003000300030003
0003000300060006006600E400C80070000E1A7F9310>102 D<06070600000000384C4C8C9818
1830326262643808147F930C>105 D<0060007000600000000000000000038004C0046008C008
C000C000C0018001800180018003000300030003006600E600CC0078000C1A81930E>I<7C0C18
1818183030303060606060C0D0D0D0D06006147E930A>108 D<30F87C00590C86004E0D06009C
0E0600980C0600180C0600180C060030180C0030180C8030181880301818806030190060300E00
190D7F8C1D>I<30F8590C4E0C9C0C980C180C180C30183019303130316032601C100D7F8C15>I<
03800C6018203030603060306030C060C06040C0608023001E000C0D7E8C10>I<0700188019C0
318038001E000F0003804180E180C10082007C000A0D7E8C10>115 D<02000600060006000C00
FF800C000C001800180018001800300031003100320032001C0009127F910D>I<07100F2010E0
00400080010002000C00102020203840478083000C0D7F8C10>122 D E
/Ff 10 123 df<0780184030C060006000C000C000C000402060C01F000B0B7E8A0E>99
D<07801840304060407F80C000C000C000402020C01F000B0B7E8A0F>101
D<040C0000000000305898983030606464683006127E910B>105 D<0020002000000000000000
000000038004C008C008C000C0018001800180018003000300030003004600CC0078000B178091
0D>I<71F09A189C18981818183030303030323062606460380F0B7E8A13>110
D<07C01820303060106018C030C030C020406021801F000D0B7E8A0F>I<73C05C209860980018
003000300030003000600060000B0B7E8A0E>114 D<0F001080218020003E001F0001808080C0
0083007C00090B7D8A0F>I<381048308C309830183030603060306430E431E80E380E0B7E8A12>
117 D<0E101FE020400080010006000800102020407FC083800C0B7E8A0F>122
D E /Fg 8 58 df<0C003C00CC000C000C000C000C000C000C000C000C000C000C000C000C00FF
8009107E8F0F>49 D<1F00618040C08060C0600060006000C00180030006000C00102020207FC0
FFC00B107F8F0F>I<1F00218060C060C000C0008001800F00008000400060C060C06080406080
1F000B107F8F0F>I<0300030007000F000B001300330023004300C300FFE00300030003000300
1FE00B107F8F0F>I<20803F002C002000200020002F0030802040006000600060C06080C06180
1F000B107F8F0F>I<0780184030C060C06000C000CF00F080E040C060C060C060406060C03080
1F000B107F8F0F>I<1F00318060C060C060C071803F000F00338061C0C060C060C06040406080
1F000B107F8F0F>56 D<1F00318060C0C040C060C060C06040E021E01E600060004060C0608043
003E000B107F8F0F>I E /Fh 14 127 df<0000000000200000000000600000000000C0000000
000180000000000300000000000600000000000C00000000001800000000003000000000006000
00000000C0000000000180000000000300000000000600000000000C0000000000180000000000
300000000000600000000000C0000000000180000000000300000000000600000000000C000000
0000180000000000300000000000600000000000C0000000000180000000000300000000000600
000000000C0000000000180000000000300000000000600000000000C000000000018000000000
0300000000000600000000000C0000000000180000000000300000000000600000000000C00000
0000008000000000002B2C80AA2A>0 D<0100018003C003E003F007F807FC07FE0FFF0FFC1FE0
1F003C007000600080001010808F2A>9 D<00010006000E003C00F807F83FF0FFF07FE03FE01F
E00FC007C003C001800080101066A92A>18 D<0000000000600000000000E00000000001800000
00000700000000000E0000000000180000000000700000000000E0000000000380000000000700
000000000C0000000000380000000000700000000000C000000000038000000000070000000000
0C0000000000380000000000700000000000C0000000000380000000000700000000000C000000
0000380000000000700000000001C0000000000380000000000600000000001C00000000003800
00000000600000000000C000000000008000000000002B21809F2A>26 D<0002001E007E01FE0F
FEFFFEFFFE0FFE01FE007E001E00020F0C7E852A>I<8000F000FC00FF00FFE0FFFEFFFEFFE0FF
00FC00F00080000F0C67852A>45 D<06000600060006000F000F000F001F801F803FC03FC07FE0
7FE07FE0FFF00C0F86A72A>54 D<00400000600000E00000F00001F80001FC0003FC0007FE0007
FF000FFF801FFC001FC0003E0000700000800000110F808E2A>61 D<FFF07FE07FE07FE03FC03F
C01F801F800F000F000F0006000600060006000C0F86902A>63 D<800000000000C00000000000
6000000000003000000000001800000000000C0000000000060000000000030000000000018000
00000000C000000000006000000000003000000000001800000000000C00000000000600000000
0003000000000001800000000000C000000000006000000000003000000000001800000000000C
000000000006000000000003000000000001800000000000C00000000000600000000000300000
0000001800000000000C000000000006000000000003000000000001800000000000C000000000
006000000000003000000000001800000000000C00000000000600000000000300000000000180
0000000000C00000000000600000000000202B2C80AA2A>I<8000600070003C001F001FE00FFC
0FFF07FE07FC07F803F003E003C001800100101080A92A>73 D<0080018003C007C00FC01FE03F
E07FE0FFF03FF007F800F8003C000E000600011010668F2A>82 D<800000000000C00000000000
6000000000003800000000001C000000000006000000000003800000000001C000000000007000
000000003800000000000C000000000007000000000003800000000000C0000000000070000000
00003800000000000C000000000007000000000003800000000000C00000000000700000000000
3800000000000C000000000007000000000003800000000000E000000000007000000000001800
000000000E000000000007000000000001800000000000E00000000000602B21809F2A>90
D<0100000300000380000780000FC0001FC0001FE0003FF0007FF000FFF8001FFC0001FC00003E
00000700000080110F678E2A>126 D E /Fi 20 68 df<C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0021B7A800E>12 D<00000C0000180000380000300000600000E00000
C00001C0000380000380000700000700000E00000E00001C00001C000038000038000078000070
0000F00000F00000E00001E00001E00003C00003C00003C00003C0000780000780000780000F80
000F00000F00000F00001F00001F00001E00001E00001E00003E00003E00003E00003E00003C00
003C00003C00007C00007C00007C00007C00007C00007C00007C00007C0000780000780000F800
00F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F800
00F80000F80000F80000164B748024>48 D<C000006000007000003000001800001C00000C0000
0E000007000007000003800003800001C00001C00000E00000E000007000007000007800003800
003C00003C00001C00001E00001E00000F00000F00000F00000F000007800007800007800007C0
0003C00003C00003C00003E00003E00001E00001E00001E00001F00001F00001F00001F00000F0
0000F00000F00000F80000F80000F80000F80000F80000F80000F80000F800007800007800007C
00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C
00007C00007C00007C164B7F8024>I<FFFCFFFCFFFCE000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E0000E4A73801C>I<FFFCFFFCFFFC001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C001C0E4A80801C>I<E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
FFFCFFFCFFFC0E4A73811C>I<001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001CFF
FCFFFCFFFC0E4A80811C>I<E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0
031B73801C>I<E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0031B75801C>
I<0018007800F001E003C007800F001F001E003E003C007C007C007800F800F800F800F800F800
F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F8000D2570
7E25>I<C000F0007C001E000F00078007C003C001E001F000F000F800F800F8007C007C007C00
7C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C
0E25797E25>I<F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800
F800F800F800F800F800F800F80078007C007C003C003E001E001F000F00078003C001E000F000
7800180D25708025>I<007C007C007C007C007C007C007C007C007C007C007C007C007C007C00
7C007C007C007C007C007C007C007C007C00F800F800F800F001F001E003C007C007800F001E00
7C00F000C0000E25798025>I<007C007C007C007C007C007C007C007C007C007C007C007C007C
007C007C007C007C007C007C007C007C007C007C007C00F800F800F800F001F001E003E003C007
8007000E001C003800F000C000F00038001C000E000700078003C003E001E001F000F000F800F8
00F8007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C00
7C007C007C007C007C007C0E4D798025>I<F800F800F800F800F800F800F800F800F800F800F8
00F800F800F800F800F800F800F800F800F800F800F800F800F80078007C007C003C003C003E00
1E000F000F00078003C001C000E000780018007800E001C003C007800F000F001E003E003C003C
007C007C007800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800F800
F800F800F800F800F800F800F800F8000D4D708025>I<F8F8F8F8F8F8F8F8F8F8F8F8F8F8050E
708025>I<F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F8
0000F80000F80000F80000F80000F800007800007800007C00007C00007C00007C00007C00007C
00007C00007C00003C00003C00003C00003E00003E00003E00003E00001E00001E00001E00001F
00001F00000F00000F00000F00000F800007800007800007800003C00003C00003C00003C00001
E00001E00000E00000F00000F000007000007800003800003800001C00001C00000E00000E0000
07000007000003800003800001C00000C00000E000006000003000003800001800000C164B7482
24>64 D<00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C00007C0000
7C00007C00007C00007C00007C00007C0000780000780000F80000F80000F80000F80000F80000
F80000F80000F80000F00000F00000F00001F00001F00001F00001F00001E00001E00001E00003
E00003E00003C00003C00003C00007C0000780000780000780000F00000F00000F00000F00001E
00001E00001C00003C00003C0000380000780000700000700000E00000E00001C00001C0000380
000380000700000700000E00000C00001C0000180000300000700000600000C00000164B7F8224
>I<F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8051B748024>I<F8F8F8F8
F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8051B6E8024>I
E /Fj 54 126 df<183C3E1E0E0E0E0E0E1C1C38F8F060070F779D1A>39
D<0038007800F001E003C007800F000E001C001C0038003800700070007000E000E000E000E000
E000E000E000E000E000E000700070007000380038001C001C000E000F00078003C001E000F800
7800380D2878A21A>I<6000F00078003C001E000F000780038001C001C000E000E00070007000
70003800380038003800380038003800380038003800700070007000E000E001C001C003800780
0F001E003C007800F00060000D287CA21A>I<00E00000E00000E00000E00000E000F0E1E0FCE7
E07EEFC01FFF0007FC0001F00007FC001FFF007EEFC0FCE7E0F0E1E000E00000E00000E00000E0
0000E00013157D991A>I<183E7E7F3F1F070E0E1CFCF860080D77851A>44
D<7FFFC0FFFFE0FFFFE07FFFC013047D901A>I<3078FCFC7830060676851A>I<01F00007FC000F
FE001F1F001C07003803803803807001C07001C07001C0E000E0E000E0E000E0E000E0E000E0E0
00E0E000E0E000E0E000E0F001E07001C07001C07803C03803803C07801C07001F1F000FFE0007
FC0001F000131E7D9D1A>48 D<00C001C001C003C007C00FC07FC0FDC071C001C001C001C001C0
01C001C001C001C001C001C001C001C001C001C001C001C001C001C07FFF7FFF7FFF101E7B9D1A
>I<03F8000FFE001FFF803C07C07801E07000E0E00070F00070F0007060007000007000007000
00E00000E00001C00003C0000780000F00001E00003C0000780000F00003E00007C0000F00001E
00703C00707FFFF0FFFFF07FFFF0141E7D9D1A>I<03FC000FFF003FFFC03C03E07800E0780070
7800700000700000700000E00001E00007C003FF8003FF0003FFC00003E00000E0000070000078
000038000038600038F00038F00078E000707000E07E03E03FFFC00FFF0001FC00151E7E9D1A>
I<3078FCFC78300000000000000000003078FCFC7830061576941A>58 D<7FFFF0FFFFF8FFFFF8
7FFFF00000000000000000000000007FFFF0FFFFF8FFFFF87FFFF0150C7E941A>61
D<600000F80000FC00007E00003F80000FC00007E00003F80000FC00007E00003F80000FC00007
E00007E0000FC0003F80007E0000FC0003F80007E0000FC0003F80007E0000FC0000F800006000
00131A7D9B1A>I<003800007C00007C00006C0000EE0000EE0000EE0000C60000C60001C70001
C70001C7000183000383800383800383800383800701C00701C007FFC007FFC00FFFE00E00E00E
00E00E00E01E00F01C00707F01FCFF83FE7F01FC171E7F9D1A>65 D<FFFE00FFFF80FFFFC01C03
E01C00E01C00F01C00701C00701C00701C00701C00E01C01E01C07C01FFF801FFF801FFFC01C01
E01C00F01C00701C00381C00381C00381C00381C00381C00781C00F01C01F0FFFFE0FFFFC0FFFF
00151E7E9D1A>I<007C3801FF3807FFF80F83F81E00F81C007838007838003870003870003870
0000E00000E00000E00000E00000E00000E00000E00000E0000070000070003870003838003838
00381C00701E00F00F83E007FFC001FF80007C00151E7E9D1A>I<FFFFF8FFFFF8FFFFF81C0038
1C00381C00381C00381C00001C00001C00001C0E001C0E001C0E001FFE001FFE001FFE001C0E00
1C0E001C0E001C00001C00001C00001C001C1C001C1C001C1C001C1C001CFFFFFCFFFFFCFFFFFC
161E7E9D1A>69 D<7FE000FFE0007FE0000E00000E00000E00000E00000E00000E00000E00000E
00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E001C0E
001C0E001C0E001C0E001C7FFFFCFFFFFC7FFFFC161E7F9D1A>76 D<FE03FEFF03FEFF03FE1D80
701D80701DC0701CC0701CC0701CE0701CE0701C60701C70701C70701C30701C38701C38701C18
701C1C701C1C701C0C701C0E701C0E701C06701C06701C07701C03701C0370FF81F0FF81F0FF80
F0171E7F9D1A>78 D<0FFE003FFF807FFFC07C07C07001C0F001E0E000E0E000E0E000E0E000E0
E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0
F001E0F001E07001C07C07C07FFFC03FFF800FFE00131E7D9D1A>I<FFFE00FFFF80FFFFC01C03
E01C00F01C00701C00781C00381C00381C00381C00381C00781C00701C00F01C03E01FFFC01FFF
801FFE001C00001C00001C00001C00001C00001C00001C00001C00001C0000FF8000FF8000FF80
00151E7E9D1A>I<03F8E00FFEE01FFFE03C07E07801E0F001E0E000E0E000E0E000E0E0000070
00007800003F80001FF80007FF00007FC00007E00000F0000070000038000038600038E00038E0
0038E00070F000F0FE01E0FFFFC0EFFF80E1FE00151E7E9D1A>83 D<7FFFFEFFFFFEFFFFFEE038
0EE0380EE0380EE0380E0038000038000038000038000038000038000038000038000038000038
0000380000380000380000380000380000380000380000380000380000380003FF8003FF8003FF
80171E7F9D1A>I<FFFCFFFCFFFCE000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000FFFCFFFCFFFC0E2776A21A>91 D<FFFCFFFCFFFC001C001C001C001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001CFFFCFFFCFFFC0E277FA21A>93 D<7FFFC0FFFFE0FFFFE07FFFC013047D
7E1A>95 D<1FF0003FFC007FFE00780F00300700000380000380007F8007FF801FFF803F838078
0380700380E00380E00380E00380700780780F803FFFFC1FFDFC07F0FC16157D941A>97
D<7E0000FE00007E00000E00000E00000E00000E00000E00000E00000E3E000EFF800FFFE00FC1
F00F80700F00380E00380E001C0E001C0E001C0E001C0E001C0E001C0E001C0F00380F00780F80
F00FC1E00FFFC00EFF80063E00161E7F9D1A>I<00FF8003FFC00FFFE01F01E03C00C078000070
0000700000E00000E00000E00000E00000E000007000007000007800703C00701F01F00FFFE003
FFC000FE0014157D941A>I<000FC0001FC0000FC00001C00001C00001C00001C00001C00001C0
01F1C007FDC00FFFC01E0FC03C07C07803C07001C0E001C0E001C0E001C0E001C0E001C0E001C0
E001C07003C07003C03807C03E0FC01FFFF807FDFC01F1F8161E7E9D1A>I<01F80007FF000FFF
801E07C03C01C07800E07000E0E00070E00070FFFFF0FFFFF0FFFFF0E000007000007000007800
703C00701F01F00FFFE003FF8000FE0014157D941A>I<0007E0001FF0003FF800787800F03000
E00000E00000E00000E0007FFFF0FFFFF0FFFFF000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E00000E00000E00000E00000E00000E0003FFF807FFFC03FFF80151E7F9D
1A>I<01F87C07FFFE0FFFFE1E078C1C03803801C03801C03801C03801C03801C01C03801E0780
1FFF001FFE0039F8003800003800001C00001FFF801FFFE03FFFF878007C70001CE0000EE0000E
E0000EE0000E70001C78003C3E00F81FFFF007FFC001FF0017217F941A>I<7E0000FE00007E00
000E00000E00000E00000E00000E00000E00000E3E000EFF800FFFC00FC1C00F80E00F00E00E00
E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E07FC3FCFFE7
FE7FC3FC171E7F9D1A>I<00C00001E00001E00000C00000000000000000000000000000000000
00007FE0007FE0007FE00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E00000E00000E0007FFF80FFFFC07FFF80121F7C9E1A>I<FE0000FE0000
FE00000E00000E00000E00000E00000E00000E00000E0FFC0E1FFC0E0FFC0E03C00E07800E0F00
0E1E000E3C000E78000EFC000FFC000FDE000F8F000E07800E03800E01C00E01E00E00F0FFE3FE
FFE3FEFFE3FE171E7F9D1A>107 D<7FE000FFE0007FE00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E0007FFFC0FFFFE07FFFC0131E7D9D1A>I<7CE0E000FF
FBF8007FFFF8001F1F1C001E1E1C001E1E1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C00
1C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C007F1F1F00FFBFBF807F1F1F
00191580941A>I<7E3E00FEFF807FFFC00FC1C00F80E00F00E00E00E00E00E00E00E00E00E00E
00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E07FC3FCFFE7FE7FC3FC17157F941A>I<
01F00007FC001FFF003E0F803C07807803C07001C0E000E0E000E0E000E0E000E0E000E0E000E0
F001E07001C07803C03C07803E0F801FFF0007FC0001F00013157D941A>I<7E3E00FEFF807FFF
E00FC1F00F80700F00380E00380E001C0E001C0E001C0E001C0E001C0E001C0E001C0F00380F00
780F80F00FC1E00FFFC00EFF800E3E000E00000E00000E00000E00000E00000E00000E00000E00
007FC000FFE0007FC00016207F941A>I<01F8E007FEE00FFFE01E07E03C03E07801E07001E0E0
00E0E000E0E000E0E000E0E000E0E000E0E001E07001E07803E03C03E01E0FE00FFFE007FCE001
F0E00000E00000E00000E00000E00000E00000E00000E00000E0000FFE000FFE000FFE17207E94
1A>I<7F81F8FF8FFC7F9FFE03FE1E03F80C03E00003E00003C000038000038000038000038000
0380000380000380000380000380000380007FFF00FFFF007FFF0017157F941A>I<07FB801FFF
807FFF80780780E00380E00380E003807800007FC0001FFC0007FE00003F800007806001C0E001
C0E001C0F003C0FC0780FFFF00EFFE00E3F80012157C941A>I<01800003800003800003800003
80000380000380007FFFE0FFFFE0FFFFE003800003800003800003800003800003800003800003
800003800003800003807003807003807003807001C1E001FFE000FF80003F00141C7F9B1A>I<
7E07E0FE0FE07E07E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E0
0E00E00E00E00E00E00E01E00F03E007FFFC03FFFE00FCFC17157F941A>I<7F83FCFFC7FE7F83
FC0E00E00E00E00E00E00701C00701C00701C003838003838003838001C70001C70001C70000EE
0000EE0000EE00007C00007C0000380017157F941A>I<7FC7F87FCFFC7FC7F80703C003838003
C70001EF0000FE00007C00007800003800007C0000EE0001EE0001C7000383800783C00F01C07F
C7FCFFC7FE7FC7FC17157F941A>120 D<7F83FCFFC7FE7F83FC0E00E00E00E00700E00701C007
01C00381C003838003C38001C38001C70000E70000E70000E600006600006E00003C00003C0000
3C0000380000380000380000700000700030F00078E00071E0007FC0003F80001E000017207F94
1A>I<7FFFF8FFFFF8FFFFF8E000F0E001E0E003C0000780000F00001E00007C0000F80001F000
03C0000780000F00381E00383C0038780038FFFFF8FFFFF8FFFFF815157E941A>I<0007E0001F
E0003FE000780000F00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0
0000E00001E00003C000FF8000FF0000FF800003C00001E00000E00000E00000E00000E00000E0
0000E00000E00000E00000E00000E00000E00000F000007800003FE0001FE00007E013277DA21A
>I<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F060042775A21A>I<7C0000FF0000FF800003C00001E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000F000007800003FE0001FE0003FE000780000F000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00001E00003C000
FF8000FF00007C000013277DA21A>I E /Fk 30 121 df<03FF8007FF801C3000181800301800
601800601800601800C03000C030004060006040002180001E0000110E7F8D14>27
D<60F0F06004047D830A>58 D<60F0F070101020204040040A7D830A>I<0000C00000C00001C0
0001C00003C00005C00005E00008E00008E00010E00020E00020E00040E000C0E00080E001FFF0
010070020070040070040070080070180070FE03FE17177F961A>65 D<001F8200E04403802C07
001C0C001C1C0008380008300008700008600000E00000E00000E00000C00000C00020C00020C0
0040E000406000806001003002001C1C0007E00017177E9619>67 D<07FFFF8000E0038000E001
0000E0010000E0010001C0010001C0010001C0400001C04000038080000381800003FF80000381
8000070100000701020007010200070004000E0004000E000C000E0008000E0018001C007000FF
FFF00019177F961A>69 D<07FFFF8000E0038000E0010000E0010000E0010001C0010001C00100
01C0400001C04000038080000381800003FF800003818000070100000701000007010000070000
000E0000000E0000000E0000000E0000001C000000FFC0000019177F9616>I<07FF0000E00000
E00000E00000E00001C00001C00001C00001C00003800003800003800003800007000007000807
00080700100E00100E00300E00200E00601C01E0FFFFC015177F9618>76
D<07FFF00000E01C0000E0060000E0070000E0070001C0070001C0070001C0070001C00E000380
1C000380700003FF80000380E000070070000700380007003800070038000E0070000E0070000E
0070800E0070801C003100FF801E0019177F961B>82 D<1FFFFE381C0E201C04601C04401C0440
380480380400380000380000700000700000700000700000E00000E00000E00000E00001C00001
C00001C00001C00003C0007FFC0017177F9615>84 D<03FE1FE0007807000078060000380C0000
381800003C1000001C2000001E4000000E8000000F00000007000000070000000F800000138000
0023C0000061C00000C1C0000081E0000100E0000200F000040070001C007000FF03FE001B177F
961D>88 D<FF807F1C001C1E00100E00200E00400F008007018007030007820003840003880003
D00001E00001C00001C00001C00001C0000380000380000380000380000700003FE00018177F96
14>I<071018F0307060706060C060C060C06080C080C480C4C1C446C838700E0E7E8D13>97
D<7C0018001800180018003000300030003000678068C070406060C060C060C060C06080C080C0
8180C10046003C000B177E960F>I<07C00C20107020706000C000C000C00080008000C010C020
60C03F000C0E7E8D0F>I<07C01C20301060106020FFC0C000C000C000C000C010402060C01F00
0C0E7E8D10>101 D<000E0013003700360060006000600060006007FC00C000C000C000C000C0
01800180018001800180018003000300030003006600E600CC007800101D7E9611>I<00E2031E
060E0C0E0C0C180C180C180C101810181018183808F00730003000306060E060C1C07F000F1480
8D11>I<1F0006000600060006000C000C000C000C0018F01B181C081808381830183018303060
30603160616062C022C03C10177E9614>I<0300038003000000000000000000000000001C0024
00460046008C000C0018001800180031003100320032001C0009177F960C>I<00180038001000
000000000000000000000001C0022004300430086000600060006000C000C000C000C001800180
018001806300E300C60078000D1D80960E>I<3E0C0C0C0C181818183030303060606060C0C8C8
C8D07007177E960B>108 D<383C1E0044C6630047028100460301008E0703000C0603000C0603
000C060600180C0600180C0620180C0C20180C0C4030180440301807801B0E7F8D1F>I<383C00
44C6004702004602008E06000C06000C06000C0C00180C00180C40181840181880300880300F00
120E7F8D15>I<07C00C20101020186018C018C018C01880308030C060C0C061803E000D0E7E8D
11>I<38F04518463846308C000C000C000C001800180018001800300030000D0E7F8D10>114
D<07C00C201870187038001E000FC003E000606060E060C0C0C1803F000C0E7E8D10>I<030003
000600060006000600FFC00C000C000C001800180018001800300030803080310031001E000A14
7F930D>I<1C0200260600460600460600860C000C0C000C0C000C0C0018180018188018188018
38800C5900078E00110E7F8D14>I<0F1F0011A18020C38020C300418000018000018000018000
030000030200C30200E70400C5080078F000110E7F8D14>120 D E /Fl
11 62 df<0F0030C0606060604020C030C030C030C030C030C030C030C030C030402060606060
30C00F000C137E9211>48 D<0C001C00EC000C000C000C000C000C000C000C000C000C000C000C
000C000C000C000C00FFC00A137D9211>I<1F0060C06060F070F030603000700070006000C001
C00180020004000810101020207FE0FFE00C137E9211>I<0FC030707038703870380038003000
E00FC0007000380018001C601CF01CF018E03860701FC00E137F9211>I<006000E000E0016002
6006600C600860106020606060C060FFFC0060006000600060006003FC0E137F9211>I<60607F
C07F8044004000400040004F0070C040E0006000700070E070E070E06040E021C01F000C137E92
11>I<07C00C201070207060006000C000CF00D0C0E060C020C030C030C03040306020206010C0
0F000C137E9211>I<40007FFC7FF8401080108020004000800100010003000200060006000E00
0E000E000E000E0004000E147E9311>I<0FC0107020186018601870183C303F600F800FE031F0
6078C01CC00CC00CC00C601830300FC00E137F9211>I<0F00308060404060C020C030C030C030
4030607030B00F30003000200060E040E08041003E000C137E9211>I<7FFFE0FFFFF000000000
0000000000000000000000000000FFFFF07FFFE0140A7E8B19>61 D E /Fm
11 62 df<07C018303018701C600C600CE00EE00EE00EE00EE00EE00EE00EE00EE00E600C600C
701C30181C7007C00F157F9412>48 D<03000700FF000700070007000700070007000700070007
00070007000700070007000700070007007FF00C157E9412>I<0F8030E040708030C038E03840
38003800700070006000C00180030006000C08080810183FF07FF0FFF00D157E9412>I<0FE030
306018701C701C001C00180038006007E000300018000C000E000EE00EE00EC00C401830300FE0
0F157F9412>I<00300030007000F001F001700270047008701870107020704070C070FFFE0070
007000700070007003FE0F157F9412>I<20303FE03FC0240020002000200020002F8030E02070
0030003800384038E038E0388030406020C01F000D157E9412>I<01F00608080C181C301C7000
6000E000E3E0EC30F018F00CE00EE00EE00E600E600E300C3018183007C00F157F9412>I<4000
7FFE7FFC7FF8C008801080200040008000800100010003000200060006000E000E000E000E000E
0004000F167E9512>I<07E018302018600C600C700C78183E101F600FC00FF018F8607C601EC0
0EC006C006C004600C38300FE00F157F9412>I<07C0183030186018E00CE00CE00EE00EE00E60
1E301E186E0F8E000E000C001C70187018603020C01F800F157F9412>I<FFFFFCFFFFFC000000
000000000000000000000000000000FFFFFCFFFFFC160A7E8C1B>61 D E
/Fn 12 107 df<FFFFFF80FFFFFF8019027D8A20>0 D<00000004000000000200000000020000
0000010000000000800000000040FFFFFFFFF8FFFFFFFFF8000000004000000000800000000100
000000020000000002000000000400250E7E902A>33 D<00000300000000030000000001800000
00018000000000C00000000060007FFFFFF000FFFFFFF8000000000E00000000070000000001E0
000000007800000001E0000000038000000006000000001C00FFFFFFF8007FFFFFF00000000060
00000000C000000001800000000180000000030000000003000025187E952A>41
D<C0C0C0C0C0C0E0E0C0C0C0C0C0C0030E7E9000>55 D<FFFFFEFFFFFE00000600000600000600
0006000006000006000006000006000006170B7E8E1C>58 D<0003F0000FF80030F80040780180
780300700700700E00E00E00E01C01801C0000380000380000780000780000700000700000F000
00F00000F00000F00000F00000F00020F80060F801C07C01807E03003F04001FF8000FE000151E
7F9C16>67 D<0000000400FFFFF803FFFFE00400E0001C00E0003801C0003001C0007003C000E0
03C000C00380000003800000078000000780000007000000070000000F0000000E0000000E0000
001E0000001E0000001C0000001C00000038000000380000007000000060000000C0000007FF00
000FFC00001E1D7F9C17>84 D<003C00E001C00180038003800380038003800380038003800380
0380038003800380030007001C00F0001C00070003000380038003800380038003800380038003
800380038003800380018001C000E0003C0E297D9E15>102 D<F0001C00070003000380038003
800380038003800380038003800380038003800380018001C000E0003C00E001C0018003800380
03800380038003800380038003800380038003800380030007001C00F0000E297D9E15>I<0080
01800300030003000600060006000C000C000C00180018001800300030003000600060006000C0
00C0006000600060003000300030001800180018000C000C000C00060006000600030003000300
01800080092A7C9E10>I<C000C0006000600060003000300030001800180018000C000C000C00
060006000600030003000300018001800300030003000600060006000C000C000C001800180018
00300030003000600060006000C000C000092A7E9E10>I<C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C002297B9E0C>I
E /Fo 69 123 df<007E0001C1800301800703C00E03C00E01800E00000E00000E00000E00000E
0000FFFFC00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E
01C00E01C00E01C00E01C00E01C07F87F8151D809C17>12 D<60F0F0F0F0F0F0F0606060606060
60606060606060000000000060F0F060041E7C9D0C>33 D<60F0F8680808081010204080050C7C
9C0C>39 D<004000800100020006000C000C0018001800300030007000600060006000E000E000
E000E000E000E000E000E000E000E000E000E000600060006000700030003000180018000C000C
00060002000100008000400A2A7D9E10>I<800040002000100018000C000C0006000600030003
00038001800180018001C001C001C001C001C001C001C001C001C001C001C001C0018001800180
038003000300060006000C000C00180010002000400080000A2A7E9E10>I<0006000000060000
000600000006000000060000000600000006000000060000000600000006000000060000000600
0000060000FFFFFFE0FFFFFFE00006000000060000000600000006000000060000000600000006
00000006000000060000000600000006000000060000000600001B1C7E9720>43
D<60F0F06004047C830C>46 D<03C00C301818300C300C700E60066006E007E007E007E007E007
E007E007E007E007E007E007E007E00760066006700E300C300C18180C3007E0101D7E9B15>48
D<030007003F00C700070007000700070007000700070007000700070007000700070007000700
07000700070007000700070007000F80FFF80D1C7C9B15>I<07C01830201C400C400EF00FF80F
F807F8077007000F000E000E001C001C00380070006000C00180030006010C01180110023FFE7F
FEFFFE101C7E9B15>I<07E01830201C201C781E780E781E381E001C001C00180030006007E000
30001C001C000E000F000F700FF80FF80FF80FF00E401C201C183007E0101D7E9B15>I<000C00
000C00001C00003C00003C00005C0000DC00009C00011C00031C00021C00041C000C1C00081C00
101C00301C00201C00401C00C01C00FFFFC0001C00001C00001C00001C00001C00001C00001C00
01FFC0121C7F9B15>I<300C3FF83FF03FC020002000200020002000200023E024302818301C20
0E000E000F000F000F600FF00FF00FF00F800E401E401C2038187007C0101D7E9B15>I<00F003
0C06040C0E181E301E300C700070006000E3E0E430E818F00CF00EE006E007E007E007E007E007
600760077006300E300C18180C3003E0101D7E9B15>I<4000007FFF807FFF007FFF0040020080
040080040080080000100000100000200000600000400000C00000C00001C00001800001800003
8000038000038000038000078000078000078000078000078000078000030000111D7E9B15>I<
03E00C301008200C20066006600660067006780C3E083FB01FE007F007F818FC307E601E600FC0
07C003C003C003C00360026004300C1C1007E0101D7E9B15>I<03C00C301818300C700C600EE0
06E006E007E007E007E007E0076007700F300F18170C2707C700060006000E300C780C78187010
203030C00F80101D7E9B15>I<60F0F0600000000000000000000060F0F06004127C910C>I<60F0
F0600000000000000000000060F0F0701010101020204080041A7C910C>I<7FFFFFC0FFFFFFE0
0000000000000000000000000000000000000000000000000000000000000000FFFFFFE07FFFFF
C01B0C7E8F20>61 D<003F800000C0600003001800040004000800020010000100201F00802070
808040E0404040C0384041C0384081803820838038208380382083803820838038208380382081
80382041C0382040C0384040E0784020709880201F0F00100000000800000004000000030001E0
00C01F80003FF0001B1D7E9C20>64 D<000600000006000000060000000F0000000F0000000F00
000017800000178000001780000023C0000023C0000023C0000041E0000041E0000041E0000080
F0000080F0000180F8000100780001FFF80003007C0002003C0002003C0006003E0004001E0004
001E000C001F001E001F00FF80FFF01C1D7F9C1F>I<FFFFC00F00F00F00380F003C0F001C0F00
1E0F001E0F001E0F001E0F001C0F003C0F00780F01F00FFFE00F00780F003C0F001E0F000E0F00
0F0F000F0F000F0F000F0F000F0F001E0F001E0F003C0F0078FFFFE0181C7E9B1D>I<001F8080
00E0618001801980070007800E0003801C0003801C000180380001807800008078000080700000
80F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000700000807800
008078000080380000801C0001001C0001000E000200070004000180080000E03000001FC00019
1E7E9C1E>I<FFFFC0000F00F0000F003C000F000E000F0007000F0007000F0003800F0003C00F
0001C00F0001C00F0001E00F0001E00F0001E00F0001E00F0001E00F0001E00F0001E00F0001E0
0F0001C00F0001C00F0003C00F0003800F0007800F0007000F000E000F001C000F007000FFFFC0
001B1C7E9B20>I<FFFFFC0F003C0F000C0F00040F00040F00060F00020F00020F02020F02000F
02000F02000F06000FFE000F06000F02000F02000F02000F02010F00010F00020F00020F00020F
00060F00060F000C0F003CFFFFFC181C7E9B1C>I<FFFFF80F00780F00180F00080F00080F000C
0F00040F00040F02040F02000F02000F02000F06000FFE000F06000F02000F02000F02000F0200
0F00000F00000F00000F00000F00000F00000F00000F8000FFF800161C7E9B1B>I<001F808000
E0618001801980070007800E0003801C0003801C00018038000180780000807800008070000080
F0000000F0000000F0000000F0000000F0000000F0000000F000FFF0F0000F8070000780780007
8078000780380007801C0007801C0007800E00078007000B800180118000E06080001F80001C1E
7E9C21>I<FFF3FFC00F003C000F003C000F003C000F003C000F003C000F003C000F003C000F00
3C000F003C000F003C000F003C000F003C000FFFFC000F003C000F003C000F003C000F003C000F
003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C00FFF3FFC0
1A1C7E9B1F>I<FFF00F000F000F000F000F000F000F000F000F000F000F000F000F000F000F00
0F000F000F000F000F000F000F000F000F000F000F00FFF00C1C7F9B0F>I<1FFF00F800780078
007800780078007800780078007800780078007800780078007800780078007800787078F878F8
78F878F0F040E021C01F00101D7F9B15>I<FFF03FE00F000F000F000C000F0008000F0010000F
0020000F0040000F0080000F0100000F0200000F0400000F0E00000F1F00000F2F00000F278000
0F4780000F83C0000F01E0000F01E0000F00F0000F00F8000F0078000F003C000F003C000F001E
000F001F000F001F80FFF07FF01C1C7E9B20>I<FFF8000F80000F00000F00000F00000F00000F
00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00080F
00080F00080F00180F00180F00100F00300F00700F01F0FFFFF0151C7E9B1A>I<FF8000FF800F
8000F8000F8000F8000BC00178000BC00178000BC001780009E002780009E002780008F0047800
08F004780008F0047800087808780008780878000878087800083C107800083C107800083C1078
00081E207800081E207800081E207800080F407800080F40780008078078000807807800080780
780008030078001C03007800FF8307FF80211C7E9B26>I<FF007FC00F800E000F8004000BC004
0009E0040009E0040008F0040008F8040008780400083C0400083C0400081E0400080F0400080F
0400080784000807C4000803C4000801E4000801E4000800F40008007C0008007C0008003C0008
003C0008001C0008000C001C000C00FF8004001A1C7E9B1F>I<003F800000E0E0000380380007
001C000E000E001C0007003C00078038000380780003C0780003C0700001C0F00001E0F00001E0
F00001E0F00001E0F00001E0F00001E0F00001E0F00001E0700001C0780003C0780003C0380003
803C0007801C0007000E000E0007001C000380380000E0E000003F80001B1E7E9C20>I<FFFF80
0F00E00F00780F003C0F001C0F001E0F001E0F001E0F001E0F001E0F001C0F003C0F00780F00E0
0FFF800F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0000
FFF000171C7E9B1C>I<FFFF00000F01E0000F0078000F003C000F001C000F001E000F001E000F
001E000F001E000F001C000F003C000F0078000F01E0000FFF00000F03C0000F00E0000F00F000
0F0078000F0078000F0078000F0078000F0078000F0078000F0078100F0078100F0038100F003C
20FFF01C20000007C01C1D7E9B1F>82 D<07E0801C1980300580700380600180E00180E00080E0
0080E00080F00000F800007C00007FC0003FF8001FFE0007FF0000FF80000F800007C00003C000
01C08001C08001C08001C0C00180C00180E00300D00200CC0C0083F800121E7E9C17>I<7FFFFF
C0700F01C0600F00C0400F0040400F0040C00F0020800F0020800F0020800F0020000F0000000F
0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F000000
0F0000000F0000000F0000000F0000000F0000000F0000001F800003FFFC001B1C7F9B1E>I<FF
F07FC00F000E000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F000400
0F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004
000F0004000F0004000700080007800800038010000180100000C020000070C000001F00001A1D
7E9B1F>I<FFE00FF01F0003C00F0001800F0001000F800300078002000780020003C0040003C0
040003C0040001E0080001E0080001F0080000F0100000F0100000F83000007820000078200000
3C4000003C4000003C4000001E8000001E8000001F8000000F0000000F00000006000000060000
000600001C1D7F9B1F>I<FFE0FFE0FF1F001F003C1E001E00180F001F00100F001F00100F001F
001007801F00200780278020078027802003C027804003C043C04003C043C04003E043C04001E0
81E08001E081E08001E081E08000F100F10000F100F10000F100F100007900FA00007A007A0000
7A007A00003E007C00003C003C00003C003C00003C003C00001800180000180018000018001800
281D7F9B2B>I<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0FEFE07297C9E0C>91 D<FEFE0606060606060606060606060606060606060606
0606060606060606060606060606060606FEFE0729809E0C>93 D<1FC000307000783800781C00
301C00001C00001C0001FC000F1C00381C00701C00601C00E01C40E01C40E01C40603C40304E80
1F870012127E9115>97 D<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C
00001C00001C7C001D86001E03001C01801C01C01C00C01C00E01C00E01C00E01C00E01C00E01C
00E01C00C01C01C01C01801E030019060010F800131D7F9C17>I<07E00C301878307870306000
E000E000E000E000E000E00060007004300418080C3007C00E127E9112>I<003F000007000007
0000070000070000070000070000070000070000070000070003E7000C1700180F003007007007
00600700E00700E00700E00700E00700E00700E00700600700700700300700180F000C370007C7
E0131D7E9C17>I<03E00C301818300C700E6006E006FFFEE000E000E000E00060007002300218
040C1803E00F127F9112>I<00F8018C071E061E0E0C0E000E000E000E000E000E00FFE00E000E
000E000E000E000E000E000E000E000E000E000E000E000E000E000E007FE00F1D809C0D>I<00
038003C4C00C38C01C3880181800381C00381C00381C00381C001818001C38000C300013C00010
00003000001800001FF8001FFF001FFF803003806001C0C000C0C000C0C000C06001803003001C
0E0007F800121C7F9215>I<FC00001C00001C00001C00001C00001C00001C00001C00001C0000
1C00001C00001C7C001C87001D03001E03801C03801C03801C03801C03801C03801C03801C0380
1C03801C03801C03801C03801C03801C0380FF9FF0141D7F9C17>I<18003C003C001800000000
0000000000000000000000FC001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C00FF80091D7F9C0C>I<FC00001C00001C00001C00001C00001C00001C00001C0000
1C00001C00001C00001C3FC01C0F001C0C001C08001C10001C20001C40001CE0001DE0001E7000
1C78001C38001C3C001C1C001C0E001C0F001C0F80FF9FE0131D7F9C16>107
D<FC001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C00FF80091D7F9C0C>I<FC7E07E0001C838838001D01
9018001E01E01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C
01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C00FF8FF8FF80
21127F9124>I<FC7C001C87001D03001E03801C03801C03801C03801C03801C03801C03801C03
801C03801C03801C03801C03801C03801C0380FF9FF014127F9117>I<03F0000E1C0018060030
0300700380600180E001C0E001C0E001C0E001C0E001C0E001C06001807003803003001806000E
1C0003F00012127F9115>I<FC7C001D86001E03001C01801C01C01C00C01C00E01C00E01C00E0
1C00E01C00E01C00E01C01C01C01C01C01801E03001D06001CF8001C00001C00001C00001C0000
1C00001C00001C0000FF8000131A7F9117>I<03C1000C3300180B00300F00700700700700E007
00E00700E00700E00700E00700E00700600700700700300F00180F000C370007C7000007000007
00000700000700000700000700000700003FE0131A7E9116>I<FCE01D301E781E781C301C001C
001C001C001C001C001C001C001C001C001C001C00FFC00D127F9110>I<1F9030704030C010C0
10E010F8007F803FE00FF000F880388018C018C018E010D0608FC00D127F9110>I<0400040004
0004000C000C001C003C00FFE01C001C001C001C001C001C001C001C001C001C101C101C101C10
1C100C100E2003C00C1A7F9910>I<FC1F801C03801C03801C03801C03801C03801C03801C0380
1C03801C03801C03801C03801C03801C03801C07800C07800E1B8003E3F014127F9117>I<FF07
E03C03801C01001C01000E02000E020007040007040007040003880003880003D80001D00001D0
0000E00000E00000E00000400013127F9116>I<FF3FCFE03C0F03801C0701801C0701001C0B01
000E0B82000E0B82000E1182000711C4000711C4000720C40003A0E80003A0E80003C0680001C0
700001C0700001803000008020001B127F911E>I<FF07E03C03801C01001C01000E02000E0200
07040007040007040003880003880003D80001D00001D00000E00000E00000E000004000004000
008000008000F08000F10000F300006600003C0000131A7F9116>121 D<7FFC70386038407040
F040E041C003C0038007000F040E041C043C0C380870087038FFF80E127F9112>I
E /Fp 4 79 df<8002C006600C301818300C6006C00380038006C00C6018303018600CC0068002
0F107B8E1A>2 D<040004000400C460E4E03F800E003F80E4E0C4600400040004000B0D7E8D11>
I<040E0E1C1C1C38383070706060C0C0070F7F8F0A>48 D<0000001E0000007E000000FC003000
E000700080007801000078010000780100007C020000BC0200009C0200009E0200009E0400008F
0400010F04000107040001078800020788000203C8000603C8008401F000FC01F000F800F00078
0060001F1880961B>78 D E /Fq 37 123 df<01F807000C0018003800300070007FC0E000E000
E000E000E00060006000300018600F800D127E9111>15 D<01FFF803FFF80FFFF01E1E00180E00
380600700600700600E00E00E00E00E00E00E00C00E01C00E01800E0300060600030C0001F0000
15127E9118>27 D<60F0F06004047C830C>58 D<60F0F0701010101020204080040C7C830C>I<
0001F808000E061800380138006000F001C0007003800070070000300F0000200E0000201C0000
203C0000203C000000780000007800000078000000F0000000F0000000F0000000F0000000F000
0100F0000100F0000100700002007000020030000400380008001C0010000E0060000701800000
FE00001D1E7E9C1E>67 D<01FFFF80003C01E000380070003800380038001C0038001C0070001C
0070001E0070001E0070001E00E0001E00E0001E00E0001E00E0001E01C0003C01C0003C01C000
3C01C000380380007803800070038000F0038000E0070001C0070003800700070007001C000E00
7800FFFFC0001F1C7E9B22>I<01FFFFF8003C0078003800180038001000380010003800100070
001000700010007010100070100000E0200000E0200000E0600000FFE00001C0400001C0400001
C0400001C040000380804003800040038000800380008007000100070001000700030007000600
0E003E00FFFFFC001D1C7E9B1F>I<03FFC0003C00003800003800003800003800007000007000
00700000700000E00000E00000E00000E00001C00001C00001C00001C000038000038000038000
0380000700000700000700000700000F0000FFF000121C7E9B12>73 D<01FFE0003C0000380000
380000380000380000700000700000700000700000E00000E00000E00000E00001C00001C00001
C00001C00003800203800203800203800407000407000C0700180700380E00F0FFFFF0171C7E9B
1C>76 D<01FFFF00003C03C0003800E0003800F00038007000380070007000F0007000F0007000
F0007000E000E001E000E003C000E0078000E01E0001FFF00001C0000001C0000001C000000380
0000038000000380000003800000070000000700000007000000070000000F000000FFE000001C
1C7E9B1B>80 D<01FFFE00003C03C0003800E0003800F00038007000380070007000F0007000F0
007000F0007001E000E001C000E0078000E01E0000FFF00001C0300001C0180001C01C0001C01C
0003801C0003801C0003801C0003801C0007003C0007003C0807003C0807003C100F001E10FFE0
0E20000007C01D1D7E9B20>82 D<000FC100303300400F00800601800603000603000606000406
000407000007000007800003F00001FF0000FFC0003FE00003E00000F000007000003000003020
00302000306000606000606000C0600080F00300CC060083F800181E7E9C19>I<1FFFFFF01C03
807030070030200700206007002040070020400E0020800E0020800E0020000E0000001C000000
1C0000001C0000001C000000380000003800000038000000380000007000000070000000700000
0070000000E0000000E0000000E0000000E0000001E000007FFF00001C1C7F9B18>I<01E30007
17000C0F00180F00380E00300E00700E00700E00E01C00E01C00E01C00E01C00E03880E03880E0
38806078803199001E0E0011127E9116>97 D<3F00070007000E000E000E000E001C001C001C00
1C0039E03A303C1838187018701C701C701CE038E038E038E030E070E060E0C061C023001E000E
1D7E9C12>I<01F0030C0E0C1C1E383C301870007000E000E000E000E000E000E0046008601030
601F800F127E9112>I<0007E00000E00000E00001C00001C00001C00001C00003800003800003
8000038001E7000717000C0F00180F00380E00300E00700E00700E00E01C00E01C00E01C00E01C
00E03880E03880E038806078803199001E0E00131D7E9C16>I<01F007080C0818043808300870
307FC0E000E000E000E000E000E0046008601030600F800E127E9113>I<0001E0000630000E78
000CF0001C60001C00001C00001C00003C0000380000380003FFC0003800003800007000007000
00700000700000700000E00000E00000E00000E00000E00001C00001C00001C00001C00001C000
018000038000038000630000F30000F60000E4000078000015257E9C14>I<007180018B800307
800607800E07000C07001C07001C0700380E00380E00380E00380E00381C00381C00381C00183C
0008F800073800003800003800007000607000F06000F0E000E180007E0000111A7F9114>I<0F
C00001C00001C0000380000380000380000380000700000700000700000700000E3E000EC3000F
03800E03801E03801C03801C03801C0380380700380700380700380E00700E20700E20701C2070
1C40E00C80600700131D7E9C18>I<01C003C003C001800000000000000000000000001C002700
47004700870087000E000E001C001C001C003800388038807080710032001C000A1C7E9B0E>I<
0007000F000F00060000000000000000000000000070009C010C020C021C041C001C001C003800
3800380038007000700070007000E000E000E000E001C061C0F180F300E6007C001024809B11>
I<1F800380038007000700070007000E000E000E000E001C001C001C001C003800380038003800
7000700070007000E400E400E400E40064003800091D7E9C0C>108 D<381F81F04E20C6184640
E81C4680F01C8F00F01C8E00E01C0E00E01C0E00E01C1C01C0381C01C0381C01C0381C01C07038
03807138038071380380E1380380E2700700643003003820127E9124>I<381F004E61804681C0
4701C08F01C08E01C00E01C00E01C01C03801C03801C03801C0700380710380710380E10380E20
70064030038014127E9119>I<00F800030C000E06001C0300180300300300700380700380E007
00E00700E00700E00E00E00E00E01C0060180060300030E0000F800011127E9114>I<07078009
C86008D03008E03011C03011C03801C03801C0380380700380700380700380600700E00700C007
01800783000E86000E78000E00000E00001C00001C00001C00001C00003C0000FF8000151A8191
15>I<383C4E424687470F8E1E8E0C0E000E001C001C001C001C00380038003800380070003000
10127E9113>114 D<01F0060C04040C0E180C1C001F000FE00FF003F80038201C7018F018F010
803060601F800F127E9113>I<00C001C001C001C00380038003800380FFF00700070007000E00
0E000E000E001C001C001C001C00382038203840384018800F000C1A80990F>I<1C00C02701C0
4701C04701C08703808703800E03800E03801C07001C07001C07001C0700180E20180E20180E20
1C1E200C264007C38013127E9118>I<1C02270747074703870187010E010E011C021C021C021C
041804180818081C100C2007C010127E9114>I<1C00C0802701C1C04701C1C04701C0C0870380
40870380400E0380400E0380401C0700801C0700801C0700801C07010018060100180602001C0E
02001C0F04000E13080003E1F0001A127E911E>I<07878008C84010F0C020F1E020E3C040E180
00E00000E00001C00001C00001C00001C000638080F38080F38100E5810084C60078780013127E
9118>I<1C00C02701C04701C04701C08703808703800E03800E03801C07001C07001C07001C07
00180E00180E00180E001C1E000C3C0007DC00001C00001800603800F03000F06000E0C0004180
003E0000121A7E9114>I<038107C10FE6081C1008001000200040008001000200040008041004
2C1877F843F081C010127E9113>I E /Fr 5 59 df<FFFFF0FFFFF014027D881B>0
D<4001C0036006300C18180C30066003C00180018003C006600C301818300C6006C00340011012
7B901B>2 D<020002000200C218F2783AE00F800F803AE0F278C2180200020002000D0E7E8E12>
I<060F0F0E1E1E1C3C383830707060E0C04008117F910A>48 D<FFFFE0FFFFE000006000006000
006000006000006000006000006013097E8B18>58 D E /Fs 54 124 df<0001FF0000001FFFC0
00007F81E00000FC01E00001F807F00003F807F00007F007F00007F007F00007F007F00007F007
F00007F001C00007F000000007F000000007F000000007F03FF800FFFFFFF800FFFFFFF800FFFF
FFF80007F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007
F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003F80007F003F800
07F003F80007F003F80007F003F80007F003F80007F003F80007F003F8007FFF3FFF807FFF3FFF
807FFF3FFF80212A7FA925>12 D<00030006001C0038007800F000E001E003C003C007800F800F
801F001F001F003E003E003E007E007E007E007C00FC00FC00FC00FC00FC00FC00FC00FC00FC00
FC00FC00FC00FC00FC007C007E007E007E003E003E003E001F001F001F000F800F80078003C003
C001E000E000F000780038001C00060003103C7BAC1A>40 D<C000600038001C001E000F000700
078003C003C001E001F001F000F800F800F8007C007C007C007E007E007E003E003F003F003F00
3F003F003F003F003F003F003F003F003F003F003F003E007E007E007E007C007C007C00F800F8
00F801F001F001E003C003C0078007000F001E001C0038006000C000103C7CAC1A>I<1C007F00
7F00FF80FF80FF807F007F001C0009097B8813>46 D<000E00001E00007E0007FE00FFFE00FFFE
00F8FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE
0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE
0000FE0000FE0000FE0000FE007FFFFE7FFFFE7FFFFE17277BA622>49 D<00FF800007FFF0000F
FFFC001E03FE003800FF807C003F80FE003FC0FF001FC0FF001FE0FF000FE0FF000FE07E000FE0
3C001FE000001FE000001FC000001FC000003F8000003F0000007E000000FC000000F8000001F0
000003E00000078000000F0000001E0000003C00E0007000E000E000E001C001C0038001C00600
01C00FFFFFC01FFFFFC03FFFFFC07FFFFFC0FFFFFF80FFFFFF80FFFFFF801B277DA622>I<007F
800003FFF00007FFFC000F80FE001F007F003F807F003F803F803F803F803F803F801F803F801F
003F8000007F0000007F0000007E000000FC000001F8000007F00000FFC00000FFC0000001F800
00007E0000003F0000003F8000001FC000001FC000001FE000001FE03C001FE07E001FE0FF001F
E0FF001FE0FF001FC0FF003FC0FE003F807C007F003F00FE001FFFFC0007FFF00000FF80001B27
7DA622>I<00000E0000001E0000003E0000007E000000FE000000FE000001FE000003FE000007
7E00000E7E00000E7E00001C7E0000387E0000707E0000E07E0000E07E0001C07E0003807E0007
007E000E007E000E007E001C007E0038007E0070007E00E0007E00FFFFFFF8FFFFFFF8FFFFFFF8
0000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE00007FFFF8007FFF
F8007FFFF81D277EA622>I<180003001F801F001FFFFE001FFFFC001FFFF8001FFFF0001FFFC0
001FFF00001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C7FC0001DFF
F8001F80FC001E003F0008003F0000001F8000001FC000001FC000001FE000001FE018001FE07C
001FE0FE001FE0FE001FE0FE001FE0FE001FC0FC001FC078003F8078003F803C007F001F01FE00
0FFFFC0003FFF00000FF80001B277DA622>I<0007F800003FFE0000FFFF0001FC078003F00FC0
07C01FC00F801FC01F801FC01F001FC03F000F803F0000007E0000007E0000007E000000FE0200
00FE1FF000FE3FFC00FE603E00FE801F00FF801F80FF000FC0FF000FC0FE000FE0FE000FE0FE00
0FE0FE000FE07E000FE07E000FE07E000FE07E000FE03E000FE03F000FC01F000FC01F001F800F
801F0007E07E0003FFFC0001FFF800003FC0001B277DA622>I<003FC00001FFF00003FFFC0007
C07E000F003F001E001F001E000F803E000F803E000F803F000F803F800F803FC00F803FF01F00
1FFC1E001FFE3C000FFFF8000FFFE00007FFF80001FFFC0001FFFE0007FFFF000F0FFF801E03FF
C03E01FFC07C007FE07C001FE0F8000FE0F80007E0F80003E0F80003E0F80003E0F80003C07C00
03C07E0007803F000F001FC03F000FFFFC0003FFF800007FC0001B277DA622>56
D<1C007F007F00FF80FF80FF807F007F001C000000000000000000000000000000000000001C00
7F007F00FF80FF80FF807F007F001C00091B7B9A13>58 D<00000780000000000780000000000F
C0000000000FC0000000000FC0000000001FE0000000001FE0000000003FF0000000003FF00000
00003FF00000000077F80000000077F800000000F7FC00000000E3FC00000000E3FC00000001C1
FE00000001C1FE00000003C1FF0000000380FF0000000380FF00000007007F80000007007F8000
000F007FC000000E003FC000000E003FC000001C001FE000001C001FE000003FFFFFF000003FFF
FFF000003FFFFFF00000700007F80000700007F80000F00007FC0000E00003FC0000E00003FC00
01C00001FE0001C00001FE0003C00001FF00FFFE003FFFFCFFFE003FFFFCFFFE003FFFFC2E297E
A833>65 D<FFFFFFF800FFFFFFFF00FFFFFFFFC003F8001FE003F8000FF003F80007F803F80003
F803F80003FC03F80003FC03F80001FC03F80001FC03F80001FC03F80003FC03F80003F803F800
03F803F80007F003F8000FF003F8001FC003F800FF8003FFFFFE0003FFFFFFC003F8000FF003F8
0003F803F80001FC03F80001FE03F80000FE03F80000FE03F80000FF03F80000FF03F80000FF03
F80000FF03F80000FF03F80000FF03F80000FE03F80001FE03F80003FC03F80007FC03F8001FF8
FFFFFFFFE0FFFFFFFFC0FFFFFFFE0028297DA830>I<00007FE0030007FFFC07001FFFFF0F007F
F00F9F00FF0001FF01FC0000FF03F800007F07F000003F0FE000001F1FC000001F1FC000000F3F
8000000F3F800000077F800000077F800000077F00000000FF00000000FF00000000FF00000000
FF00000000FF00000000FF00000000FF00000000FF00000000FF000000007F000000007F800000
007F800000073F800000073F800000071FC00000071FC000000E0FE000000E07F000001C03F800
003C01FC00007800FF0001F0007FF007C0001FFFFF800007FFFE0000007FF00028297CA831>I<
FFFFFFFC0000FFFFFFFF8000FFFFFFFFE00003FC001FF80003FC0003FC0003FC0000FE0003FC00
007F0003FC00003F8003FC00001FC003FC00001FC003FC00000FE003FC00000FE003FC000007F0
03FC000007F003FC000007F003FC000007F003FC000007F803FC000007F803FC000007F803FC00
0007F803FC000007F803FC000007F803FC000007F803FC000007F803FC000007F803FC000007F8
03FC000007F003FC000007F003FC000007F003FC00000FE003FC00000FE003FC00000FC003FC00
001FC003FC00003F8003FC00007F0003FC0000FF0003FC0003FC0003FC001FF800FFFFFFFFF000
FFFFFFFF8000FFFFFFFC00002D297EA834>I<FFFFFFFFE0FFFFFFFFE0FFFFFFFFE003FC001FE0
03FC0007F003FC0001F003FC0001F003FC0000F003FC00007003FC00007003FC00007003FC01C0
7803FC01C03803FC01C03803FC01C03803FC03C00003FC03C00003FC0FC00003FFFFC00003FFFF
C00003FFFFC00003FC0FC00003FC03C00003FC03C00003FC01C00E03FC01C00E03FC01C00E03FC
01C01C03FC00001C03FC00001C03FC00001C03FC00003C03FC00003803FC00007803FC0000F803
FC0001F803FC0003F803FC001FF8FFFFFFFFF0FFFFFFFFF0FFFFFFFFF027297EA82C>I<FFFFFF
FFC0FFFFFFFFC0FFFFFFFFC003FC003FC003FC000FE003FC0003E003FC0001E003FC0001E003FC
0000E003FC0000E003FC0000E003FC0000F003FC01C07003FC01C07003FC01C07003FC01C00003
FC03C00003FC03C00003FC0FC00003FFFFC00003FFFFC00003FFFFC00003FC0FC00003FC03C000
03FC03C00003FC01C00003FC01C00003FC01C00003FC01C00003FC00000003FC00000003FC0000
0003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000FFFFFC0000FFFFFC
0000FFFFFC000024297EA82A>I<00007FE003000007FFFC0700001FFFFF0F00007FF00F9F0000
FF0001FF0001FC0000FF0003F800007F0007F000003F000FE000001F001FC000001F001FC00000
0F003F8000000F003F80000007007F80000007007F80000007007F0000000000FF0000000000FF
0000000000FF0000000000FF0000000000FF0000000000FF0000000000FF0000000000FF000000
0000FF0000FFFFF87F0000FFFFF87F8000FFFFF87F800000FF003F800000FF003F800000FF001F
C00000FF001FC00000FF000FE00000FF0007F00000FF0003F80000FF0001FC0000FF0000FF0001
FF00007FF007FF00001FFFFF9F000007FFFE0F0000007FF003002D297CA835>I<FFFFFCFFFFFC
FFFFFC01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00
01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00
01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00FFFFFCFFFFFCFFFFFC
16297FA819>73 D<FFFFFC0000FFFFFC0000FFFFFC000003FC00000003FC00000003FC00000003
FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000
03FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC0000
0003FC00000003FC00000003FC0001C003FC0001C003FC0001C003FC0001C003FC0003C003FC00
038003FC00038003FC00078003FC00078003FC000F8003FC000F8003FC001F8003FC007F8003FC
01FF00FFFFFFFF00FFFFFFFF00FFFFFFFF0022297EA828>76 D<FFFE0000003FFF80FFFE000000
3FFF80FFFF0000007FFF8003FF0000007FE00003FF0000007FE00003BF800000EFE00003BF8000
00EFE000039FC00001CFE000039FC00001CFE000038FE000038FE000038FE000038FE000038FE0
00038FE0000387F000070FE0000387F000070FE0000383F8000E0FE0000383F8000E0FE0000381
FC001C0FE0000381FC001C0FE0000381FC001C0FE0000380FE00380FE0000380FE00380FE00003
807F00700FE00003807F00700FE00003803F80E00FE00003803F80E00FE00003803F80E00FE000
03801FC1C00FE00003801FC1C00FE00003800FE3800FE00003800FE3800FE000038007F7000FE0
00038007F7000FE000038007F7000FE000038003FE000FE000038003FE000FE000038001FC000F
E000038001FC000FE000038000F8000FE000FFFE00F803FFFF80FFFE00F803FFFF80FFFE007003
FFFF8039297DA840>I<FFFC00007FFFFFFE00007FFFFFFF00007FFF03FF800001C003FFC00001
C003BFE00001C0039FE00001C0039FF00001C0038FF80001C00387FC0001C00383FE0001C00381
FF0001C00380FF8001C003807F8001C003807FC001C003803FE001C003801FF001C003800FF801
C0038007FC01C0038003FC01C0038003FE01C0038001FF01C0038000FF81C00380007FC1C00380
003FE1C00380001FF1C00380000FF1C00380000FF9C003800007FDC003800003FFC003800001FF
C003800000FFC0038000007FC0038000007FC0038000003FC0038000001FC0038000000FC00380
000007C0FFFE000003C0FFFE000001C0FFFE000001C030297EA835>I<0000FFC00000000FFFFC
0000003F807F000000FE001FC00001F80007E00003F00003F00007E00001F8000FE00001FC001F
C00000FE001FC00000FE003F8000007F003F8000007F007F8000007F807F0000003F807F000000
3F807F0000003F80FF0000003FC0FF0000003FC0FF0000003FC0FF0000003FC0FF0000003FC0FF
0000003FC0FF0000003FC0FF0000003FC0FF0000003FC0FF0000003FC07F0000003F807F800000
7F807F8000007F803F8000007F003F8000007F001FC00000FE001FC00000FE000FE00001FC0007
F00003F80003F80007F00001FC000FE00000FE001FC000003FC0FF0000000FFFFC00000000FFC0
00002A297CA833>I<FFFFFFF800FFFFFFFF00FFFFFFFFC003FC003FE003FC0007F003FC0003F8
03FC0003FC03FC0001FC03FC0001FE03FC0001FE03FC0001FE03FC0001FE03FC0001FE03FC0001
FE03FC0001FE03FC0001FC03FC0003FC03FC0003F803FC0007F003FC003FE003FFFFFF8003FFFF
FE0003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC
00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003
FC000000FFFFF00000FFFFF00000FFFFF0000027297EA82E>I<FFFFFFE00000FFFFFFFE0000FF
FFFFFF800003FC003FE00003FC000FF00003FC0007F80003FC0003FC0003FC0001FC0003FC0001
FE0003FC0001FE0003FC0001FE0003FC0001FE0003FC0001FE0003FC0001FE0003FC0001FC0003
FC0003F80003FC0007F80003FC000FE00003FC003FC00003FFFFFE000003FFFFFE000003FC00FF
800003FC003FC00003FC001FE00003FC000FF00003FC0007F80003FC0007F80003FC0007F80003
FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007
F80E03FC0007F80E03FC0003F80E03FC0001FC1CFFFFF000FE1CFFFFF0007FF8FFFFF0000FE02F
297EA832>82 D<00FF00C003FFE1C00FFFF9C01F80FFC03F003FC03E000FC07C0007C07C0007C0
FC0003C0FC0003C0FC0001C0FE0001C0FE0001C0FF000000FFC000007FFC00007FFFE0003FFFF8
001FFFFE001FFFFF0007FFFF8003FFFFC000FFFFC0000FFFE000007FE000001FF000000FF00000
07F0E00003F0E00003F0E00003F0E00003F0F00003E0F00003E0F80007E0FC0007C0FF000F80FF
E01F80E3FFFF00E1FFFC00C01FF0001C297CA825>I<7FFFFFFFFF807FFFFFFFFF807FFFFFFFFF
807F807F807F807C007F800F8078007F80078078007F80078070007F800380F0007F8003C0F000
7F8003C0E0007F8001C0E0007F8001C0E0007F8001C0E0007F8001C0E0007F8001C000007F8000
0000007F80000000007F80000000007F80000000007F80000000007F80000000007F8000000000
7F80000000007F80000000007F80000000007F80000000007F80000000007F80000000007F8000
0000007F80000000007F80000000007F80000000007F80000000007F80000000007F8000000000
7F80000000007F80000000FFFFFFC00000FFFFFFC00000FFFFFFC0002A287EA72F>I<FFFFF000
FFFEFFFFF000FFFEFFFFF000FFFE03FC0000038003FC0000038003FC0000038003FC0000038003
FC0000038003FC0000038003FC0000038003FC0000038003FC0000038003FC0000038003FC0000
038003FC0000038003FC0000038003FC0000038003FC0000038003FC0000038003FC0000038003
FC0000038003FC0000038003FC0000038003FC0000038003FC0000038003FC0000038003FC0000
038003FC0000038003FC0000038003FC0000038003FC0000038001FC0000070001FE0000070000
FE00000E00007F00000E00003F00003C00001FC0007800000FF003F0000007FFFFE0000000FFFF
800000001FFC00002F297EA834>I<03FF80000FFFF0001F01FC003F80FE003F807F003F803F00
3F803F801F003F8000003F8000003F8000003F8000003F80003FFF8001FC3F800FE03F801F803F
803F003F807E003F80FC003F80FC003F80FC003F80FC003F80FC005F807E00DF803F839FFC1FFE
0FFC03F803FC1E1B7E9A21>97 D<FFE00000FFE00000FFE000000FE000000FE000000FE000000F
E000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE1FE00
0FE7FF800FFE07E00FF803F00FF001F80FE000FC0FE000FC0FE0007E0FE0007E0FE0007F0FE000
7F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007E0FE0007E0FE0007E0FE0
00FC0FE000FC0FF001F80FF803F00F9C0FE00F0FFF800E01FC00202A7EA925>I<003FF00001FF
FC0003F03E000FC07F001F807F003F007F003F007F007F003E007E0000007E000000FE000000FE
000000FE000000FE000000FE000000FE000000FE0000007E0000007E0000007F0000003F000380
3F8003801F8007000FE00E0003F83C0001FFF800003FC000191B7E9A1E>I<00007FF000007FF0
00007FF0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007
F0000007F0000007F0000007F0003F87F001FFF7F007F03FF00FC00FF01F8007F03F0007F03F00
07F07E0007F07E0007F07E0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE
0007F0FE0007F07E0007F07E0007F03F0007F03F0007F01F800FF00FC01FF007E07FFF01FFE7FF
007F87FF202A7EA925>I<003FC00001FFF00003E07C000F803E001F801F001F001F003F000F80
7E000F807E000FC07E000FC0FE0007C0FE0007C0FFFFFFC0FFFFFFC0FE000000FE000000FE0000
007E0000007E0000007F0000003F0001C01F0001C00F80038007C0070003F01E0000FFFC00003F
E0001A1B7E9A1F>I<0007F8003FFC007E3E01FC7F03F87F03F07F07F07F07F03E07F00007F000
07F00007F00007F00007F00007F000FFFFC0FFFFC0FFFFC007F00007F00007F00007F00007F000
07F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F000
07F00007F00007F0007FFF807FFF807FFF80182A7EA915>I<007F80F001FFE3F807C0FE1C0F80
7C7C1F003E7C1F003E103F003F003F003F003F003F003F003F003F003F003F003F001F003E001F
003E000F807C0007C0F80005FFE0000C7F8000180000001C0000001C0000001E0000001FFFF800
1FFFFF000FFFFFC007FFFFE003FFFFF00FFFFFF03E0007F07C0001F8F80000F8F80000F8F80000
F8F80000F87C0001F07C0001F03F0007E00FC01F8007FFFF00007FF0001E287E9A22>I<FFE000
00FFE00000FFE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE0
00000FE000000FE000000FE000000FE000000FE07E000FE1FF800FE30FC00FE40FE00FE807E00F
F807F00FF007F00FF007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F0
0FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F0FFFE3F
FFFFFE3FFFFFFE3FFF202A7DA925>I<07000F801FC03FE03FE03FE01FC00F8007000000000000
000000000000000000FFE0FFE0FFE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0
0FE00FE00FE00FE00FE00FE00FE00FE00FE0FFFEFFFEFFFE0F2B7EAA12>I<FFE0FFE0FFE00FE0
0FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00F
E00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0FFFEFFFEFFFE0F2A
7EA912>108 D<FFC07F001FC000FFC1FFC07FF000FFC307E0C1F8000FC407F101FC000FC803F2
00FC000FD803FE00FE000FD003FC00FE000FD003FC00FE000FE003F800FE000FE003F800FE000F
E003F800FE000FE003F800FE000FE003F800FE000FE003F800FE000FE003F800FE000FE003F800
FE000FE003F800FE000FE003F800FE000FE003F800FE000FE003F800FE000FE003F800FE000FE0
03F800FE000FE003F800FE000FE003F800FE00FFFE3FFF8FFFE0FFFE3FFF8FFFE0FFFE3FFF8FFF
E0331B7D9A38>I<FFC07E00FFC1FF80FFC30FC00FC40FE00FC807E00FD807F00FD007F00FD007
F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE0
07F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F0FFFE3FFFFFFE3FFFFFFE3FFF20
1B7D9A25>I<003FE00001FFFC0003F07E000FC01F801F800FC03F0007E03F0007E07E0003F07E
0003F07E0003F0FE0003F8FE0003F8FE0003F8FE0003F8FE0003F8FE0003F8FE0003F8FE0003F8
7E0003F07E0003F03F0007E03F0007E01F800FC00FC01F8007F07F0001FFFC00003FE0001D1B7E
9A22>I<FFE1FE00FFE7FF80FFFE0FE00FF803F00FF001F80FE001FC0FE000FC0FE000FE0FE000
FE0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007E0FE0
00FE0FE000FE0FE000FC0FE001FC0FF001F80FF803F00FFC0FE00FEFFF800FE1FC000FE000000F
E000000FE000000FE000000FE000000FE000000FE000000FE000000FE00000FFFE0000FFFE0000
FFFE000020277E9A25>I<003F807001FFE0F003F071F00FC019F01F800FF03F800FF03F0007F0
7F0007F07F0007F07E0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007F0FE0007
F0FE0007F07F0007F07F0007F03F0007F03F8007F01F800FF00FC01FF007F077F001FFE7F0007F
87F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F000
007FFF00007FFF00007FFF20277E9A23>I<FFC3E0FFC7F8FFCC7C0FD8FE0FD0FE0FD0FE0FF0FE
0FE07C0FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE000
0FE0000FE0000FE0000FE000FFFF00FFFF00FFFF00171B7E9A1B>I<03FE300FFFF03E03F07800
F07000F0F00070F00070F80070FE0000FFE0007FFF007FFFC03FFFE01FFFF007FFF800FFF80007
FC0000FCE0007CE0003CF0003CF00038F80038FC0070FF01E0E7FFC0C1FF00161B7E9A1B>I<00
700000700000700000700000F00000F00000F00001F00003F00003F00007F0001FFFE0FFFFE0FF
FFE007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007
F00007F07007F07007F07007F07007F07007F07007F07003F0E001F8C000FFC0003F0014267FA5
1A>I<FFE07FF0FFE07FF0FFE07FF00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F0
0FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007F00FE007
F00FE007F00FE007F00FE00FF00FE00FF007E017F003F067FF01FFC7FF007F87FF201B7D9A25>
I<FFFE07FFFFFE07FFFFFE07FF07F000E007F000E007F801E003F801C003F801C001FC038001FC
038001FE078000FE070000FF0F00007F0E00007F0E00003F9C00003F9C00003FFC00001FF80000
1FF800000FF000000FF000000FF0000007E0000007E0000003C0000003C000201B7F9A23>I<FF
FC7FFC1FFCFFFC7FFC1FFCFFFC7FFC1FFC0FE00FE001C007F007E0038007F007E0038007F807F0
078003F807F0070003F807F8070001FC0FF80E0001FC0FF80E0001FE1FFC1E0000FE1CFC1C0000
FE1CFE1C0000FF387E3C00007F387E3800007F787F3800003FF03F7000003FF03F7000003FE01F
F000001FE01FE000001FE01FE000000FC00FC000000FC00FC000000FC00FC00000078007800000
07800780002E1B7F9A31>I<FFFC1FFEFFFC1FFEFFFC1FFE07F0078003F8070001FC0F0001FE1E
0000FE3C00007F7800003FF800003FF000001FE000000FE0000007F0000007F800000FF800001F
FC00003DFE000038FF0000787F0000F03F8001E03FC003C01FE003800FE0FFF03FFFFFF03FFFFF
F03FFF201B7F9A23>I<FFFE07FFFFFE07FFFFFE07FF07F000E007F000E007F801E003F801C003
F801C001FC038001FC038001FE078000FE070000FF0F00007F0E00007F0E00003F9C00003F9C00
003FFC00001FF800001FF800000FF000000FF0000007F0000007E0000007E0000003C0000003C0
00000380000003800000078000380700007C070000FE0E0000FE0E0000FE1C0000FE3800007C70
00003FE000000F80000020277F9A23>I<3FFFFF3FFFFF3F00FE3C01FE3803FC7803F87807F070
0FF0700FE0701FC0003FC0003F80007F0000FF0000FE0001FC0703FC0703F80707F0070FF00F0F
E00F1FC00E3FC01E7F803E7F00FEFFFFFEFFFFFE181B7E9A1E>I<FFFFFFFF80FFFFFFFF802102
809122>I E /Ft 1 22 df<00F0000000001C000000000F000000000F000000000F8000000007
8000000007C000000003C000000003C000000003E000000001E000000001E000000001F0000000
00F000000000F000000000F80000000078000000007C000000007C000000003C000000003E0000
00003E000000001E000000001F000000001F000000000F000000000F800000001F800000001F80
00000037C000000067C0000000C3C0000001C3E000000381E000000701E000000E01F000001C00
F000003800F000007000F80000F000780001E000780003C0007C000780003C000F00003C001E00
003E003E00001E007C00001F00F800001F00F000000F00600000078021327CB129>21
D E /Fu 41 125 df<00000FE0000030180000E01C0001C03C0001803C00038038000380000003
80000007000000070000000700000007000000070000000E000000FFFFE0000E00E0000E00E000
0E01C0001C01C0001C01C0001C01C0001C0380001C038000380380003803800038070000380700
003807000070070800700E1000700E1000700E1000700E2000E0062000E003C000E0000000E000
0000C0000001C0000001C0000071800000F1800000F3000000620000003C0000001E2D82A21B>
12 D<0E1E1E1E1E02020404080810204080070F7D840F>44 D<FFF0FFF0FFE00C037C8B11>I<07
000F800F800F000E00000000000000000000000000000000000000000000007000F800F800F000
E00009157A940F>58 D<0000030000000300000007000000070000000F0000000F0000001F0000
002F0000002F0000004F0000004F80000087800000878000010780000207800002078000040780
000407800008078000080780001007800030078000200780007FFF80004007C0008007C0008003
C0010003C0030003C0020003C0040003C0040003C00C0003C03C0007C0FF003FFC1E237DA224>
65 D<00007F00800003808100000E00630000380027000070001F0000E0000E0001C0000E0003
80000E000700000E000F000004000E000004001E000004003C000004003C000008007800000000
78000000007800000000F000000000F000000000F000000000F000000000F000000000E0000000
00E000002000E000002000E000004000E000004000F00000800070000080007000010000380002
000018000400001C0008000006003000000381C0000000FE000000212479A223>67
D<00FFFFFF80000F000780000F000180000F000180001E000180001E000180001E000100001E00
0100003C000100003C000100003C010100003C0100000078020000007802000000780600000078
0E000000FFFC000000F00C000000F00C000000F00C000001E008000001E008000001E008040001
E000080003C000080003C000080003C000100003C000100007800020000780006000078000C000
078001C0000F8007C000FFFFFF800021227DA121>69 D<00FFFFFF000F000F000F0003000F0003
001E0003001E0003001E0002001E0002003C0002003C0002003C0102003C010000780200007802
000078060000780E0000FFFC0000F00C0000F00C0000F00C0001E0080001E0080001E0080001E0
000003C0000003C0000003C0000003C00000078000000780000007800000078000000F800000FF
FC000020227DA120>I<00FFF8000F00000F00000F00001E00001E00001E00001E00003C00003C
00003C00003C0000780000780000780000780000F00000F00000F00000F00001E00001E00001E0
0001E00003C00003C00003C00003C0000780000780000780000780000F8000FFF80015227DA113
>73 D<0007FFC000003C0000003C0000003C00000078000000780000007800000078000000F000
0000F0000000F0000000F0000001E0000001E0000001E0000001E0000003C0000003C0000003C0
000003C00000078000000780000007800000078000000F0000000F0000380F0000780F0000F81E
0000F81E0000F03C0000403800004070000021E000001F8000001A237CA11A>I<00FFFC00000F
8000000F0000000F0000001E0000001E0000001E0000001E0000003C0000003C0000003C000000
3C00000078000000780000007800000078000000F0000000F0000000F0000000F0000001E00000
01E0000001E0002001E0002003C0004003C0004003C0008003C000800780018007800100078003
0007800F000F803E00FFFFFE001B227DA11F>76 D<00FF800007FC000F80000F80000F80001780
000F80001780001780002F000013C0002F000013C0004F000013C0008F000023C0009E000023C0
011E000023C0011E000023C0021E000043C0043C000043C0043C000043C0083C000041E0083C00
0081E01078000081E02078000081E02078000081E04078000101E040F0000101E080F0000101E1
00F0000101E100F0000200F201E0000200F201E0000200F401E0000200F801E0000400F803C000
0400F003C0000400F003C0000C00E003C0001E00C007C000FFC0C07FFC002E227DA12C>I<00FF
000FFC000F8001E0000F800180000FC000800013C001000013C001000011E001000011E0010000
21E002000020F002000020F002000020F0020000407804000040780400004078040000403C0400
00803C080000803E080000801E080000801E080001001F100001000F100001000F100001000790
00020007A000020007A000020003E000020003E000040003C000040001C000040001C0000C0001
C0001E00008000FFC000800026227DA124>I<00FFFFE0000F0038000F001E000F000E001E0007
001E0007001E0007001E0007003C000F003C000F003C000F003C001E0078001E0078003C007800
78007800E000F003C000FFFE0000F0000000F0000001E0000001E0000001E0000001E0000003C0
000003C0000003C0000003C00000078000000780000007800000078000000F800000FFF8000020
227DA121>80 D<0001F020000E0C40001802C0003001C0006001C000E0018000C0018001C00180
01C0018003C0010003C0010003C0000003C0000003E0000001F8000001FF000000FFE000007FF0
00001FF8000003FC0000007C0000003C0000001E0000001E0000001E0020001C0020001C002000
1C00200018006000380060003000700060007000C000C8018000C607000081FC00001B247DA21B
>83 D<1FFFFFF81E03C0381803C0183003C01820078018200780184007801040078010400F0010
800F0010800F0010000F0000001E0000001E0000001E0000001E0000003C0000003C0000003C00
00003C00000078000000780000007800000078000000F0000000F0000000F0000000F0000001E0
000001E0000001E0000001E0000003E00000FFFF00001D2277A123>I<00F8C00185C00705C00E
03800E03801C03803C0380380700780700780700780700F00E00F00E00F00E00F00E10F01C2070
1C20703C20305C40308C400F078014157B9419>97 D<03C03F8003800380038007000700070007
000E000E000E000E001C001CF81D0C1E0E3C0638073807380F700F700F700F700FE01EE01EE01E
E03CE038E038607060E031C01F0010237BA216>I<007E0001C1000301800703800E07801C0780
3C0000380000780000780000780000F00000F00000F00000F00000F00100700100700200300C00
1830000FC00011157B9416>I<00003C0003F80000380000380000380000700000700000700000
700000E00000E00000E00000E00001C000F9C00185C00705C00E03800E03801C03803C03803807
00780700780700780700F00E00F00E00F00E00F00E10F01C20701C20703C20305C40308C400F07
8016237BA219>I<00F803840E021C023C0238027804F018FFE0F000F000E000E000E000E000E0
02E0026004701830600F800F157A9416>I<00003E0000470000CF00018F000186000380000380
000380000700000700000700000700000700000E0000FFF0000E00000E00000E00001C00001C00
001C00001C00001C00003800003800003800003800003800007000007000007000007000007000
00E00000E00000E00000E00000C00001C00001C000718000F18000F300006200003C0000182D82
A20F>I<001F180030B800E0B801C07001C0700380700780700700E00F00E00F00E00F00E01E01
C01E01C01E01C01E01C01E03800E03800E0780060B8006170001E700000700000700000E00000E
00000E00701C00F01800F0300060E0003F8000151F7E9416>I<00F0000FE00000E00000E00000
E00001C00001C00001C00001C000038000038000038000038000070000071F0007218007C0C00F
00E00F00E00E00E00E00E01C01C01C01C01C01C01C01C038038038038038038038070470070870
0E08700E10700610E006206003C016237DA219>I<00C001E001C001C000000000000000000000
0000000000001C002300430043008700870087000E000E001C001C001C00380038003840708070
807080710032001C000B217BA00F>I<01E01FC001C001C001C003800380038003800700070007
0007000E000E000E000E001C001C001C001C0038003800380038007000700070007100E200E200
E200E200640038000B237CA20C>108 D<1C0F80F8002610C10C00476066060087807807008780
780700870070070087007007000E00E00E000E00E00E000E00E00E000E00E00E001C01C01C001C
01C01C001C01C01C001C01C0382038038038403803807040380380708038038030807007003100
3003001E0023157B9428>I<1C0F002631C04740C08780E08780E08700E08700E00E01C00E01C0
0E01C00E01C01C03801C03801C03801C0704380708380E08380E103806107006203003C016157B
941B>I<007E0001C3000381800701C00E01C01C01E03C01E03801E07801E07801E07801E0F003
C0F003C0F00380F00780700700700E00700C0030180018700007C00013157B9419>I<01C1F002
621804741C08780C08700E08700E08701E00E01E00E01E00E01E00E01E01C03C01C03C01C03C01
C07803807003807003C0E003C1C0072380071E000700000700000E00000E00000E00000E00001C
00001C00001C0000FFC000171F7F9419>I<00F8400184C00705C00E03800E03801C03803C0380
380700780700780700780700F00E00F00E00F00E00F00E00F01C00701C00703C00305C0030B800
0F380000380000380000700000700000700000700000E00000E00000E0000FFE00121F7B9416>
I<1C1F002620804741C08783C08703C08701808700000E00000E00000E00000E00001C00001C00
001C00001C000038000038000038000038000070000030000012157B9415>I<00FC0001830002
00800401800C03800C03000C00000F00000FF00007FC0003FE00003E00000F00000700700700F0
0600F00600E004004008002030001FC00011157D9414>I<00C001C001C001C001C00380038003
8003800700FFF8070007000E000E000E000E001C001C001C001C00380038003800381070207020
7040708031001E000D1F7C9E10>I<1E00602300E04380E04381C08381C08701C08701C0070380
0E03800E03800E03801C07001C07001C07001C07081C0E10180E101C0E101C1E200C262007C3C0
15157B941A>I<1E03802307C04387C04383C08381C08700C08700C00700800E00800E00800E00
801C01001C01001C01001C02001C02001C04001C08001C08000C300003C00012157B9416>I<1E
0060E02300E1F04380E1F04381C0F08381C0708701C0308701C030070380200E0380200E038020
0E0380201C0700401C0700401C0700401C0700801C0700801C0701001C0F01000C0F020006138C
0003E0F0001C157B9420>I<03C1E0046210083470103CF02038F0203860203800007000007000
00700000700000E00000E00000E00000E02061C040F1C040F1C080E2C100446200383C0014157D
9416>I<1E00302300704380704380E08380E08700E08700E00701C00E01C00E01C00E01C01C03
801C03801C03801C03801C07001C07001C07001C0F000C3E0003CE00000E00000E00001C00601C
00F03800F03000E0600080C0004380003E0000141F7B9418>I<FFFFFC16017C8C19>123
D<FFFFFFFFFFF82D017B8C32>I E /Fv 10 67 df<00080000380000780001F8003FF800FE7800
C07800007800007800007800007800007800007800007800007800007800007800007800007800
007800007800007800007800007800007800007800007800007800007800007800007800007800
00780000780000780000780000780000780000780000780000780000780000780000780000FC00
7FFFF87FFFF8152F7AAE21>49 D<007F800001FFF0000701F8000C007E0018001F0010000F0020
000F80400007C0400007C0400003E0B00003E0F80003E0FC0003E0FC0003E0FC0003E0780003E0
000003E0000007C0000007C00000078000000F8000000F0000001F0000001E0000003C00000078
00000070000000E0000001C0000003800000070000000E0000000C000000180000003000000060
000000C000200180002003000020060000400C00004008000040100000C03FFFFFC07FFFFF80FF
FFFF80FFFFFF801B2F7DAE21>I<003F800001FFE00003C0F80006003C0008001E0010001F0010
000F003C000F803E000F803E000F803E000F801E000F8000000F8000000F0000000F0000001F00
00001E0000003C0000003800000070000000E0000003800000FF80000000F0000000380000001E
0000000F000000078000000780000007C0000003C0000003E0000003E0300003E0780003E0FC00
03E0FC0003E0FC0003E0F80003C0400007C0400007C06000078030000F0018001E000E003C0007
80F80001FFF000003F80001B307DAE21>I<00000C0000000C0000001C0000001C0000003C0000
007C0000007C000000BC0000013C0000013C0000023C0000063C0000043C0000083C0000183C00
00103C0000203C0000603C0000403C0000803C0001803C0001003C0002003C0002003C0004003C
0008003C0008003C0010003C0020003C0020003C0040003C00C0003C00FFFFFFF8FFFFFFF80000
3C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000
007E00000FFFF0000FFFF01D2F7EAE21>I<0C0003000F801E000FFFFC000FFFF8000FFFE00008
FF0000080000000800000008000000080000000800000008000000080000000800000008000000
080000000800000008000000081FC00008E07000090038000A001C000C000E0008000700000007
8000000780000003C0000003C0000003C0000003E0000003E0000003E0000003E0780003E0F800
03E0F80003E0F80003E0F00003C0C00007C0400007804000078020000F0030000F0018001E000E
003C000780F00001FFE000007F00001B307DAE21>I<0003F800001FFE00003C070000F0008001
E001C003C003C0038007C0070007C00F0003800E0000001E0000001C0000003C0000003C000000
7C0000007C00000078000000781F8000F8607000F8803800F9001C00FA000E00FA000700FC0007
80FC000780FC0003C0FC0003C0F80003C0F80003E0F80003E0F80003E0F80003E0780003E07800
03E0780003E0780003E07C0003E03C0003C03C0003C03C0007C01E0007801E0007000E000F0007
001E0003803C0001E0780000FFE000003F80001B307DAE21>I<20000000380000003FFFFFF03F
FFFFF03FFFFFE07FFFFFE060000040400000804000008040000100800002008000020080000400
000008000000080000001000000020000000200000004000000080000000800000010000000100
0000030000000200000006000000060000000C0000000C0000001C0000001C0000001C0000003C
00000038000000380000007800000078000000780000007800000078000000F8000000F8000000
F8000000F8000000F8000000F8000000F8000000F80000007000001C317CAF21>I<003F800000
FFE00003C0F80007003C000E000E000C0007001C00070018000380380003803800038038000380
380003803C0003803C0003003E0007001F0006001FC00E000FE01C0007F0380003FC600001FEC0
0000FF8000003FC000007FF00000C7F8000303FC000600FE000C007F0018003F8038000FC07000
07C0700003C0600001E0E00001E0E00000E0E00000E0E00000E0E00000E0E00000E0700000C070
0001C038000180380003001C0007000F001E0007C0780001FFF000003F80001B307DAE21>I<00
000300000000000300000000000300000000000780000000000780000000000FC0000000000FC0
000000000FC00000000017E00000000013E00000000013E00000000023F00000000021F0000000
0021F00000000040F80000000040F80000000040F800000000807C00000000807C00000001007E
00000001003E00000001003E00000002003F00000002001F00000002001F00000004000F800000
04000F80000004000F800000080007C00000080007C00000180007E000001FFFFFE000001FFFFF
E00000200003F00000200001F00000200001F00000400000F80000400000F80000400000F80000
8000007C00008000007C00018000007E00010000003E00010000003E00030000003F0003000000
1F00070000001F001F8000003F80FFE00001FFFCFFE00001FFFC2E327EB132>65
D<FFFFFFE000FFFFFFFC0007E0003E0003E0000F8003E00007C003E00003E003E00001E003E000
01F003E00000F003E00000F803E00000F803E00000F803E00000F803E00000F803E00000F803E0
0000F003E00001F003E00001F003E00003E003E00007C003E0000F8003E0001F0003E0007C0003
FFFFF80003E0001F0003E000078003E00003E003E00001F003E00000F803E000007803E000007C
03E000007C03E000003E03E000003E03E000003E03E000003E03E000003E03E000003E03E00000
3E03E000007C03E000007C03E000007C03E00000F803E00001F003E00003E003E00007C007E000
3F80FFFFFFFE00FFFFFFF80027317CB02F>I E /Fw 12 121 df<000001C0000000000001C000
0000000001C0000000000003E0000000000003E0000000000007F0000000000007F00000000000
07F000000000000DF800000000000DF800000000000DF8000000000018FC000000000018FC0000
00000038FE0000000000307E0000000000307E0000000000607F0000000000603F000000000060
3F0000000000C01F8000000000C01F8000000000C01F8000000001800FC000000001800FC00000
0003800FE0000000030007E0000000030007E0000000060003F0000000060003F0000000060003
F00000000C0001F80000000C0001F80000001FFFFFFC0000001FFFFFFC000000180000FC000000
300000FE0000003000007E0000003000007E0000006000003F0000006000003F000000E000003F
800000C000001F800000C000001F800001C000001FC000018000000FC00003C000000FC00007C0
00000FE0001FF000001FF000FFFE0003FFFF80FFFE0003FFFF8031327CB13A>65
D<000007FC000800007FFF80180001FC01E0380007E0007038001F80001878003E00000CF8007C
000006F800F8000003F801F0000001F803E0000000F807E0000000F80FC0000000780FC0000000
781F80000000381F80000000383F00000000383F00000000187F00000000187F00000000187E00
000000187E0000000000FE0000000000FE0000000000FE0000000000FE0000000000FE00000000
00FE0000000000FE0000000000FE0000000000FE00000000007E00000000007E00000000007F00
000000187F00000000183F00000000183F00000000181F80000000181F80000000300FC0000000
300FC00000003007E00000006003E0000000E001F0000000C000F800000180007C00000300003E
00000600001F80000C000007E00038000001FC01E00000007FFF8000000007FC00002D337BB138
>67 D<00003000000000780000000078000000007800000000FC00000000FC00000001FE000000
01BE00000001BE000000031F000000031F000000031F000000060F800000060F8000000E0FC000
000C07C000000C07C000001803E000001803E000003803F000003001F000003001F000006000F8
00007FFFF800007FFFF80000C0007C0000C0007C0001C0007E000180003E000180003E00030000
1F000300001F000700001F800F80001F801FC0001FC0FFE000FFFCFFE000FFFC26257EA42C>97
D<FFFFFF0000FFFFFFE0000FC003F00007C000FC0007C0003E0007C0001F0007C0000F8007C000
07C007C00007C007C00003E007C00003E007C00003F007C00001F007C00001F007C00001F807C0
0001F807C00001F807C00001F807C00001F807C00001F807C00001F807C00001F807C00001F807
C00001F007C00001F007C00001F007C00003E007C00003E007C00007C007C00007C007C0000F80
07C0001F0007C0003E0007C0007C000FC003F800FFFFFFE000FFFFFF000025257DA42D>100
D<FFFFFFFE00FFFFFFFE000FC0007E0007C0001E0007C0000E0007C000060007C000070007C000
070007C000030007C000030007C000030007C00C030007C00C000007C00C000007C00C000007C0
1C000007C03C000007FFFC000007FFFC000007C03C000007C01C000007C00C000007C00C000007
C00C018007C00C018007C000018007C000030007C000030007C000030007C000030007C0000700
07C000070007C0000F0007C0001E000FC000FE00FFFFFFFE00FFFFFFFE0021257DA428>I<FFFE
07FFF0FFFE07FFF00FE0007F0007C0003E0007C0003E0007C0003E0007C0003E0007C0003E0007
C0003E0007C0003E0007C0003E0007C0003E0007C0003E0007C0003E0007C0003E0007C0003E00
07C0003E0007FFFFFE0007FFFFFE0007C0003E0007C0003E0007C0003E0007C0003E0007C0003E
0007C0003E0007C0003E0007C0003E0007C0003E0007C0003E0007C0003E0007C0003E0007C000
3E0007C0003E0007C0003E000FE0007F00FFFE07FFF0FFFE07FFF024257DA42C>104
D<FFFEFFFE0FE007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C0
07C007C007C007C007C007C007C007C007C007C007C007C007C007C007C00FE0FFFEFFFE0F257D
A416>I<FF8000FFF0FFC000FFF007E0001F8007F0000F0007F000060006F8000600067C000600
067C000600063E000600061F000600060F000600060F8006000607C006000603C006000603E006
000601F006000600F806000600F8060006007C060006003E060006003E060006001F060006000F
860006000F8600060007C600060003E600060003E600060001F600060000FE000600007E000600
007E000600003E000600001E000F00001E001F80000E00FFF0000600FFF000060024257DA42C>
110 D<FFFFFE00FFFFFFC00FC007F007C001F807C0007C07C0007E07C0003E07C0003F07C0003F
07C0003F07C0003F07C0003F07C0003F07C0003E07C0007E07C0007C07C001F807C007F007FFFF
C007FFFE0007C0000007C0000007C0000007C0000007C0000007C0000007C0000007C0000007C0
000007C0000007C0000007C0000007C0000007C000000FE00000FFFE0000FFFE000020257DA428
>112 D<FFFFF80000FFFFFF00000FC00FC00007C003F00007C000F80007C000FC0007C0007C00
07C0007E0007C0007E0007C0007E0007C0007E0007C0007E0007C0007C0007C000FC0007C000F8
0007C003F00007C00FC00007FFFF000007FFFE000007C01F000007C007800007C003C00007C003
E00007C001E00007C001F00007C001F00007C001F00007C001F00007C001F80007C001F80007C0
01F80007C001F80C07C001FC0C07C000FC0C0FE0007C18FFFE003E38FFFE001FF000000007C026
267DA42B>114 D<7FFFFFFFE07FFFFFFFE07C00F803E07000F800E07000F800E06000F80060E0
00F80070E000F80070C000F80030C000F80030C000F80030C000F800300000F800000000F80000
0000F800000000F800000000F800000000F800000000F800000000F800000000F800000000F800
000000F800000000F800000000F800000000F800000000F800000000F800000000F800000000F8
00000000F800000000F800000000F800000000F800000001FC0000007FFFF000007FFFF0002425
7EA42A>116 D<7FFE01FFF07FFE01FFF007F8007F8003F0003E0001F000380001F800300000FC
007000007C00E000007E00C000003F018000001F838000000F830000000FC600000007EE000000
03FC00000003F800000001F800000000FC000000007C00000000FE00000001FF000000039F0000
00031F800000060FC000000E07C000000C03E000001803F000003801F800007000F800006000FC
0000C0007E0001C0003E0003C0003F0007C0001F801FE0003FC0FFF000FFFCFFF000FFFC26257E
A42C>120 D E /Fx 52 123 df<00007C00000183000002018000040180000801C0001001C000
2001C0002001C0004001C00040038000800380008003000080070001000E000107FC0001083800
010FDC0002000E0002000E0002000F0002000F0004000F0004000F0004000F0004000F0008001E
0008001E0008001C0008003C0014003800140070001400E0001201C00021838000207C00002000
00002000000040000000400000004000000040000000800000008000000080000000800000001A
2D7EA21C>12 D<007E038007000E001C00380078007000FFF8F000F000E000E000E000E000E000
7000700038061C1807E00F157D9414>15 D<000F000031800060C000E0C001C0E00180E00380E0
0700E00700E00F00E00E00E01E00E01E00E01C01E03C01E03C01E03C01E07FFFC07803C07803C0
7803C0700780F00780F00700F00F00F00E00F00E00E01C00601C0060380070300070600030C000
1180000F000013237EA217>18 D<03800000E00000F00000700000700000780000380000380000
3C00001C00001C00001C00001E00000E00000E00000F00000700000700000780000780000F8000
1B800031C00021C00041C000C1E00180E00300E00600F00C00701C0070380078700038E00038C0
001C16237DA21C>21 D<007FFF8001FFFF8003FFFF800783C0000E01C0001C00E0003800E00038
00E0007000E0007000E0007000E000E001C000E001C000E001C000E0038000E003000060070000
600E0000301800001870000007C0000019157E941C>27 D<70F8F8F87005057C840E>58
D<70F8FCFC7404040404080810102040060F7C840E>I<0000001800000078000001E000000780
00001E00000078000003E000000F8000003C000000F0000003C000000F0000003C000000F00000
00F00000003C0000000F00000003C0000000F00000003C0000000F80000003E000000078000000
1E0000000780000001E000000078000000181D1C7C9926>I<C0000000F00000003C0000000F00
000003C0000000F00000003E0000000F80000001E0000000780000001E0000000780000001E000
00007800000078000001E00000078000001E00000078000001E000000F8000003E000000F00000
03C000000F0000003C000000F0000000C00000001D1C7C9926>62 D<0000008000000001800000
0001C000000003C000000003C000000007C00000000BC00000000BC000000013C000000033C000
000023C000000043C000000043E000000081E000000181E000000101E000000201E000000201E0
00000401E000000C01E000000801E000001001E000001FFFF000002000F000006000F000004000
F000008000F000008000F000010000F000030000F000020000F000040000F8000C0000F8001E00
00F800FF800FFF8021237EA225>65 D<007FFFF8000007800F00000780078000078003C0000F00
01C0000F0001C0000F0001E0000F0001E0001E0001C0001E0003C0001E0003C0001E000780003C
000F00003C001E00003C003C00003C01F000007FFFE00000780078000078003C000078001E0000
F0001E0000F0000E0000F0000F0000F0000F0001E0001E0001E0001E0001E0001E0001E0003C00
03C0003C0003C000780003C000F00003C001C00007C00F8000FFFFFC000023227EA125>I<0000
7F00800003808100000E00630000380027000070001F0000E0000E0001C0000E000380000E0007
00000E000F000004000E000004001E000004003C000004003C0000080078000000007800000000
7800000000F000000000F000000000F000000000F000000000F000000000E000000000E0000020
00E000002000E000004000E000004000F000008000700000800070000100003800020000180004
00001C0008000006003000000381C0000000FE00000021247DA223>I<007FFFF8000007801E00
00078007000007800380000F0001C0000F0001C0000F0000E0000F0000E0001E0000E0001E0000
F0001E0000F0001E0000F0003C0000F0003C0000F0003C0000F0003C0000F000780001E0007800
01E000780001E000780001E000F00003C000F00003C000F000038000F000078001E000070001E0
000E0001E0001E0001E0001C0003C000380003C000700003C000E00003C003800007C00E0000FF
FFF8000024227EA128>I<007FFFFFC000078003C000078000C000078000C0000F0000C0000F00
00C0000F000080000F000080001E000080001E000080001E008080001E008000003C010000003C
010000003C030000003C070000007FFE000000780600000078060000007806000000F004000000
F004000000F004010000F000020001E000020001E000020001E000040001E0000C0003C0000800
03C000180003C000300003C000700007C003F000FFFFFFE00022227EA124>I<007FFFFFC00007
8003C000078000C000078000C0000F0000C0000F0000C0000F000080000F000080001E00008000
1E000080001E008080001E008000003C010000003C010000003C030000003C070000007FFE0000
00780600000078060000007806000000F004000000F004000000F004000000F000000001E00000
0001E000000001E000000001E000000003C000000003C000000003C000000003C000000007C000
0000FFFE00000022227EA120>I<00FFFC0007C0000780000780000F00000F00000F00000F0000
1E00001E00001E00001E00003C00003C00003C00003C0000780000780000780000780000F00000
F00000F00000F00001E00001E00001E00001E00003C00003C00003C00003C00007C000FFFC0016
227EA116>73 D<007FFE000007C0000007800000078000000F0000000F0000000F0000000F0000
001E0000001E0000001E0000001E0000003C0000003C0000003C0000003C000000780000007800
00007800000078000000F0000000F0000000F0001000F0001001E0002001E0002001E0004001E0
004003C000C003C0008003C0018003C0078007C01F00FFFFFF001C227EA121>76
D<007FC00001FF0007C00003E00007C00005E00007C00005E00009E0000BC00009E0000BC00009
E00013C00009E00023C00011E00027800011E00047800011E00047800011E00087800021E0010F
000020F0010F000020F0020F000020F0040F000040F0041E000040F0081E000040F0081E000040
F0101E000080F0203C00008078203C00008078403C00008078803C000100788078000100790078
0001007900780001007A00780002007C00F00002007C00F00002003800F00006003800F0000F00
3001F000FFE0203FFF0030227EA12F>I<007FC003FF0007C000780007C000600005E000200009
E000400009E000400008F000400008F000400010F800800010780080001078008000103C008000
203C010000203E010000201E010000201E010000400F020000400F020000400F02000040078200
0080078400008007C400008003C400008003C400010001E800010001E800010001F800010000F8
00020000F0000200007000020000700006000070000F00002000FFE000200028227EA127>I<00
7FFFF0000007801C000007800F000007800700000F000380000F000380000F000380000F000380
001E000780001E000780001E000780001E000F00003C000F00003C001E00003C003C00003C0070
00007801E000007FFF00000078000000007800000000F000000000F000000000F000000000F000
000001E000000001E000000001E000000001E000000003C000000003C000000003C000000003C0
00000007C0000000FFFC00000021227EA11F>80 D<007FFFE0000007803C000007800E00000780
0700000F000780000F000380000F0003C0000F0003C0001E000780001E000780001E000780001E
000F00003C001E00003C003C00003C007000003C01C000007FFE00000078078000007801C00000
7801E00000F000F00000F000F00000F000F00000F000F00001E001E00001E001E00001E001E000
01E001E00003C003C00003C003C04003C003C04003C001C08007C001C080FFFC00E3000000003C
0022237EA125>82 D<0003F010000E0C2000180260002001E0004000E000C000C0008000C00180
00C0018000C00380008003800080038000000380000003C0000001F0000001FE000000FFE00000
7FF000001FF8000001FC0000003C0000001C0000000E0000000E0000000E0020000C0020000C00
20000C002000080060001800600010007000200070004000C8008000C603000081FC00001C247D
A21E>I<1FFFFFFE1E01E00E1801E0063001E0062003C0062003C0064003C0044003C004400780
04800780048007800400078000000F0000000F0000000F0000000F0000001E0000001E0000001E
0000001E0000003C0000003C0000003C0000003C00000078000000780000007800000078000000
F0000000F0000000F0000000F0000001F00000FFFFC0001F227EA11D>I<FFF8007FC00F80000F
000F00000C000F000008000F000010000F80001000078000200007800060000780004000078000
800007800080000780010000078002000007C002000003C004000003C00C000003C008000003C0
10000003C010000003C020000003E040000003E040000001E080000001E180000001E100000001
E200000001E200000001E400000001F800000000F800000000F000000000E000000000E0000000
00C000000000C000000022237DA11C>86 D<007FFC03FF0007E000F80007C000E00003C0008000
03E001000001E002000001F006000001F00C000000F018000000F81000000078200000007C4000
00007C800000003D000000003E000000001E000000001F000000001F000000002F000000006F80
000000C78000000187C000000103C000000203C000000403E000000801E000001001F000002000
F000004000F800008000F80001800078000300007C000F8000FC00FFE007FFC028227FA128>88
D<FFF8003FE00F80000F000F80000C000F80000800078000100007C000200007C000400003C000
800003E001800001E003000001E002000001F004000000F008000000F010000000F82000000078
400000007CC00000007C800000003D000000003E000000003C000000003C000000003C00000000
3C000000007800000000780000000078000000007800000000F000000000F000000000F0000000
00F000000001F00000003FFF00000023227EA11C>I<007FFFFE007E001E0070003C00E0007800
C000F0008001E0018003E0010003C00100078002000F0002001E0000003C0000007C0000007800
0000F0000001E0000003C00000078000000F8000000F0000001E0000003C00200078002000F000
4001F0004001E0004003C00080078000800F0001801E0003001E0007003C000F0078007E00FFFF
FE001F227DA121>I<00786001C4E00302E00601C00E01C01C01C03C01C0380380780380780380
780380F00700F00700F00700F00708F00E10700E10701E1030262018C6200F01C015157E941A>
97 D<03C0003F80000380000380000380000700000700000700000700000E00000E00000E0000
0E00001C00001C78001D8E001E07003C0700380380380380380780700780700780700780700780
E00F00E00F00E00F00E01E00E01C00601C0060380030700030C0000F000011237DA215>I<003F
0000E0800380C00701C00E03C01C03C03C00003C0000780000780000780000F00000F00000F000
00F000007000407000403001803802001C1C0007E00012157E9415>I<00001E0001FC00001C00
001C00001C0000380000380000380000380000700000700000700000700000E00078E001C4E003
02E00601C00E01C01C01C03C01C0380380780380780380780380F00700F00700F00700F00708F0
0E10700E10701E1030262018C6200F01C017237EA219>I<007C000382000701000E01001C0100
380100780200700400FFF800F00000F00000E00000E00000E00000E00000E00080E00080700300
3004001838000FC00011157D9417>I<00001E00000063800000C7800001C7800001C300000180
00000380000003800000038000000380000007000000070000000700000007000000FFF800000E
0000000E0000000E0000000E0000000E0000000E0000001C0000001C0000001C0000001C000000
1C0000003800000038000000380000003800000038000000700000007000000070000000700000
0060000000E0000000E0000000E0000000C0000070C00000F1800000F1000000620000003C0000
00192D7EA218>I<000F0C00389C00605C00C03801C0380380380780380700700F00700F00700F
00701E00E01E00E01E00E01E00E01E01C00E01C00E03C00605C0031B8001E38000038000038000
0700000700000700700E00F00C00F018006070003FC000161F809417>I<00F0000FE00000E000
00E00000E00001C00001C00001C00001C000038000038000038000038000070000071F00072180
07C0C00F00E00F00E00E00E00E00E01C01C01C01C01C01C01C01C0380380380380380700380704
700708700E08700E08700610E006206003C016237DA21C>I<00E000E001E000C0000000000000
0000000000000000000000001E0023004380438083808380870007000E000E000E001C001C0038
003820384070407040308031001E000B227EA111>I<00F0000FE00000E00000E00000E00001C0
0001C00001C00001C0000380000380000380000380000700000700F00703080704380E08780E10
780E20300E40001C80001F00001FC0001C7000383800383800381C00381C107038207038207038
20701840E00C8060070015237DA219>107 D<01E01FC001C001C001C003800380038003800700
0700070007000E000E000E000E001C001C001C001C0038003800380038007000700070007100E2
00E200E200620064001C000B237DA20F>I<3C07E01F00461830618047201880C087401D00E087
801E00E087801C00E087001C00E00E003801C00E003801C00E003801C00E003801C01C00700380
1C007003801C007007001C007007043800E007083800E00E083800E00E083800E006107001C006
203000C003C026157E942B>I<3C07C04618604720308740388780388700388700380E00700E00
700E00700E00701C00E01C00E01C01C01C01C13801C23803823803823801847001883000F01815
7E941D>I<003E0000C1800380C00700E00E00E01C00F03C00F03C00F07800F07800F07800F0F0
01E0F001E0F001C0F003C0700380700700700600381C001C380007E00014157E9417>I<03C0F0
04631C04740E08780E08700708700708700F00E00F00E00F00E00F00E00F01C01E01C01E01C01E
01C03C03803803803803C07003C0E0072180071E000700000700000E00000E00000E00000E0000
1C00001C00001C0000FFC000181F819418>I<00782001C4600302E00601C00E01C01C01C03C01
C0380380780380780380780380F00700F00700F00700F00700F00E00700E00701E00302E0018DC
000F1C00001C00001C0000380000380000380000380000700000700000700007FF00131F7E9416
>I<3C0F004630C04741C08783C08783C08701808700000E00000E00000E00000E00001C00001C
00001C00001C000038000038000038000038000070000030000012157E9416>I<007E00008100
03008002018006038006030006000007000007F80003FE0001FF00003F00000780000380700380
F00300F00300E002004004003018000FE00011157E9417>I<006000E000E000E000E001C001C0
01C001C00380FFFC0380038007000700070007000E000E000E000E001C001C001C001C08381038
103820182018C007000E1F7F9E12>I<1E00182300384380384380708380708380708700700700
E00E00E00E00E00E00E01C01C01C01C01C01C01C01C21C03841C03841C07840C09880E118803E0
7017157E941C>I<1E00C02301E04381F04380F08380708380308700300700200E00200E00200E
00201C00401C00401C00801C00801C01001C01001C02000C040006080003F00014157E9418>I<
1E0018182300383C4380383E4380701E8380700E83807006870070060700E0040E00E0040E00E0
040E00E0041C01C0081C01C0081C01C0081C01C0101C01C0101C01C0201C03C0400C04C0C00708
E10001F03E001F157E9423>I<01E0F006310C081A1C101A3C201C3C201C18201C000038000038
0000380000380000700000700000700000700860E010F0E010F0E020E170404230803C1F001615
7E941C>I<1E00302300704380704380E08380E08380E08700E00701C00E01C00E01C00E01C01C
03801C03801C03801C03801C07001C07001C07001C0F000C3E0003CE00000E00000E00001C0060
1C00F03800F03000E0600080C0004180003E0000141F7E9418>I<00E01003F02007F860060FC0
08008008010000020000040000080000100000200000C000010000020000040040080080100180
3F830061FE0040FC0080780014157E9417>I E /Fy 36 121 df<70F8F8F87005057C840D>46
D<03F0000E1C001C0E00180600380700700380700380700380700380F003C0F003C0F003C0F003
C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C07003807003807003807807
803807001806001C0E000E1C0003F000121F7E9D17>48 D<018003800F80F38003800380038003
800380038003800380038003800380038003800380038003800380038003800380038003800380
038007C0FFFE0F1E7C9D17>I<03F0000C1C00100E00200700400780800780F007C0F803C0F803
C0F803C02007C00007C0000780000780000F00000E00001C0000380000700000600000C0000180
000300000600400C00401800401000803FFF807FFF80FFFF80121E7E9D17>I<03F0000C1C0010
0E00200F00780F80780780780780380F80000F80000F00000F00000E00001C0000380003F00000
3C00000E00000F000007800007800007C02007C0F807C0F807C0F807C0F00780400780400F0020
0E001C3C0003F000121F7E9D17>I<000600000600000E00000E00001E00002E00002E00004E00
008E00008E00010E00020E00020E00040E00080E00080E00100E00200E00200E00400E00C00E00
FFFFF0000E00000E00000E00000E00000E00000E00000E0000FFE0141E7F9D17>I<1803001FFE
001FFC001FF8001FE00010000010000010000010000010000010000011F000161C00180E001007
001007800003800003800003C00003C00003C07003C0F003C0F003C0E003804003804007002007
00100E000C380003E000121F7E9D17>I<007C000182000701000E03800C07801C078038030038
0000780000700000700000F1F000F21C00F40600F80700F80380F80380F003C0F003C0F003C0F0
03C0F003C07003C07003C07003803803803807001807000C0E00061C0001F000121F7E9D17>I<
4000007FFFC07FFF807FFF80400100800200800200800400000800000800001000002000002000
00400000400000C00000C00001C000018000038000038000038000038000078000078000078000
078000078000078000078000030000121F7D9D17>I<03F0000C0C001006003003002001806001
806001806001807001807803003E03003F06001FC8000FF00003F80007FC000C7E00103F00300F
806003804001C0C001C0C000C0C000C0C000C0C000806001802001001002000C0C0003F000121F
7E9D17>I<03F0000E18001C0C00380600380700700700700380F00380F00380F003C0F003C0F0
03C0F003C0F003C07007C07007C03807C0180BC00E13C003E3C000038000038000038000070030
0700780600780E00700C002018001070000FC000121F7E9D17>I<70F8F8F87000000000000000
00000070F8F8F87005147C930D>I<000100000003800000038000000380000007C0000007C000
0007C0000009E0000009E0000009E0000010F0000010F0000010F0000020780000207800002078
0000403C0000403C0000403C0000801E0000801E0000FFFE0001000F0001000F0001000F000200
07800200078002000780040003C00E0003C01F0007E0FFC03FFE1F207F9F22>65
D<FFFFE0000F80380007801E0007801F0007800F0007800F8007800F8007800F8007800F800780
0F8007800F0007801F0007801E0007803C0007FFF00007803C0007801E0007800F0007800F8007
800780078007C0078007C0078007C0078007C0078007C00780078007800F8007800F0007801F00
0F803C00FFFFF0001A1F7E9E20>I<000FC040007030C001C009C0038005C0070003C00E0001C0
1E0000C01C0000C03C0000C07C0000407C00004078000040F8000000F8000000F8000000F80000
00F8000000F8000000F8000000F8000000F8000000780000007C0000407C0000403C0000401C00
00401E0000800E000080070001000380020001C0040000703800000FC0001A217D9F21>I<FFFF
E0000F803C0007800E000780070007800380078003C0078001E0078001E0078001F0078000F007
8000F0078000F8078000F8078000F8078000F8078000F8078000F8078000F8078000F8078000F8
078000F0078000F0078000F0078001E0078001E0078003C0078003800780070007800E000F803C
00FFFFE0001D1F7E9E23>I<FFFFFF000F800F0007800300078003000780010007800180078000
800780008007800080078080800780800007808000078080000781800007FF8000078180000780
800007808000078080000780800007800020078000200780002007800040078000400780004007
8000C0078000C0078001800F800F80FFFFFF801B1F7E9E1F>I<FFFFFF000F800F000780030007
800300078001000780018007800080078000800780008007800080078080000780800007808000
078080000781800007FF8000078180000780800007808000078080000780800007800000078000
000780000007800000078000000780000007800000078000000FC00000FFFE0000191F7E9E1E>
I<000FE0200078186000E004E0038002E0070001E00F0000E01E0000601E0000603C0000603C00
00207C00002078000020F8000000F8000000F8000000F8000000F8000000F8000000F8000000F8
007FFCF80003E0780001E07C0001E03C0001E03C0001E01E0001E01E0001E00F0001E0070001E0
038002E000E0046000781820000FE0001E217D9F24>I<FFF8FFF80F800F8007800F0007800F00
07800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F
0007FFFF0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F000780
0F0007800F0007800F0007800F0007800F0007800F000F800F80FFF8FFF81D1F7E9E22>I<FFFC
0FC007800780078007800780078007800780078007800780078007800780078007800780078007
80078007800780078007800780078007800FC0FFFC0E1F7F9E10>I<FFFC07FE0FC001F0078000
C00780008007800100078002000780040007800800078010000780200007804000078080000781
8000078380000787C000078BE0000791E00007A0F00007C0F0000780780007803C0007803C0007
801E0007801F0007800F000780078007800780078003C0078003E00FC003F0FFFC1FFE1F1F7E9E
24>75 D<FFFE000FC0000780000780000780000780000780000780000780000780000780000780
000780000780000780000780000780000780000780000780000780010780010780010780010780
0307800207800207800607800E0F803EFFFFFE181F7E9E1D>I<FF80001FF80F80001F80078000
1F0005C0002F0005C0002F0005C0002F0004E0004F0004E0004F000470008F000470008F000470
008F000438010F000438010F000438010F00041C020F00041C020F00041C020F00040E040F0004
0E040F00040E040F000407080F000407080F000407080F000403900F000403900F000401E00F00
0401E00F000401E00F000E00C00F001F00C01F80FFE0C1FFF8251F7E9E2A>I<FF803FF807C007
C007C0038005E0010005E0010004F001000478010004780100043C0100043C0100041E0100040F
0100040F010004078100040781000403C1000401E1000401E1000400F1000400F1000400790004
003D0004003D0004001F0004001F0004000F0004000700040007000E0003001F000300FFE00100
1D1F7E9E22>I<001FC00000F0780001C01C0003800E00070007000E0003801E0003C03C0001E0
3C0001E07C0001F0780000F0780000F0F80000F8F80000F8F80000F8F80000F8F80000F8F80000
F8F80000F8F80000F8F80000F8780000F07C0001F07C0001F03C0001E03E0003E01E0003C00F00
07800700070003800E0001C01C0000F07800001FC0001D217D9F24>I<FFFFE0000F8078000780
1C0007801E0007800F0007800F8007800F8007800F8007800F8007800F8007800F8007800F0007
801E0007801C000780780007FFE000078000000780000007800000078000000780000007800000
078000000780000007800000078000000780000007800000078000000FC00000FFFC0000191F7E
9E1F>I<FFFFC0000F80F00007803C0007801E0007800F0007800F0007800F8007800F8007800F
8007800F8007800F0007800F0007801E0007803C000780F00007FFC0000780C000078070000780
78000780380007803C0007803C0007803C0007803E0007803E0007803E0007803E0207803F0207
801F020FC00F04FFFC0788000001F01F207E9E22>82 D<07E0800C198010078030038060018060
0180E00180E00080E00080E00080F00000F000007800007F00003FF0001FFC000FFE0003FF0000
1F800007800003C00003C00001C08001C08001C08001C08001C0C00180C00380E00300F00600CE
0C0081F80012217D9F19>I<7FFFFFE0780F01E0600F0060400F0020400F0020C00F0030800F00
10800F0010800F0010800F0010000F0000000F0000000F0000000F0000000F0000000F0000000F
0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F000000
0F0000000F0000000F0000001F800007FFFE001C1F7E9E21>I<FFFC3FF80FC007C00780038007
800100078001000780010007800100078001000780010007800100078001000780010007800100
078001000780010007800100078001000780010007800100078001000780010007800100078001
0007800100038002000380020001C0020001C0040000E008000070180000382000000FC0001D20
7E9E22>I<FFF003FF1F8000F80F8000600780004007C0004003E0008001E0008001F0010000F0
030000F80200007C0400003C0400003E0800001E0800001F1000000FB0000007A0000007C00000
03C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C000
0003C0000007C000007FFE00201F7F9E22>89 D<7FFFF87C00F87000F06001E04001E0C003C0C0
03C0800780800F80800F00001E00001E00003C00003C0000780000F80000F00001E00001E00003
C00403C0040780040F80040F000C1E000C1E00083C00183C0018780038F801F8FFFFF8161F7D9E
1C>I<1C003E003E003E001C000000000000000000000000000E007E000E000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E000E00FFC00A1F809E0C>105
D<FF83F81E01E01C00C00E00800E00800E008007010007010003820003820003820001C40001C4
0001EC0000E80000E80000700000700000700000200015147F9318>118
D<7FC3FC0F01E00701C007018003810001C20000E40000EC00007800003800003C00007C00004E
000087000107000303800201C00601E01E01E0FF07FE1714809318>120
D E /Fz 19 107 df<FFFFFFFCFFFFFFFC1E027C8C27>0 D<800002C0000660000C3000181800
300C00600600C003018001830000C600006C00003800003800006C0000C6000183000301800600
C00C006018003030001860000CC000068000021718789727>2 D<00C00000C00000C00000C000
00C000C0C0C0F0C3C038C7000EDC0003F00000C00003F0000EDC0038C700F0C3C0C0C0C000C000
00C00000C00000C00000C00012157D9619>I<00007FC000000003FFF80000000F803E0000003C
0007800000700001C00000C000006000018000003000030000001800060000000C000C00000006
000C00000006001800000003001800000003003000000001803000000001806000000000C06000
000000C06000000000C0C00000000060C00000000060C00000000060C00000000060C000000000
60C00000000060C00000000060C00000000060C00000000060C00000000060C000000000606000
000000C06000000000C06000000000C03000000001803000000001801800000003001800000003
000C00000006000C0000000600060000000C0003000000180001800000300000C0000060000070
0001C000003C00078000000F803E00000003FFF8000000007FC000002B2F7DA332>13
D<03F0000FFC001C0E00300300600180600180C000C0C000C0C000C0C000C0C000C0C000C0C000
C0C000C06001806001803003001C0E000FFC0003F00012147D9519>I<03F0000FFC001FFE003F
FF007FFF807FFF80FFFFC0FFFFC0FFFFC0FFFFC0FFFFC0FFFFC0FFFFC0FFFFC07FFF807FFF803F
FF001FFE000FFC0003F00012147D9519>I<FFFFFFFF7FFFFFFF00000000000000000000000000
00000000000000000000000000000000000000FFFFFFFFFFFFFFFF000000000000000000000000
00000000000000000000000000000000000000007FFFFFFFFFFFFFFF20167D9627>17
D<000000006000000000003000000000003000000000001800000000001800000000000C000000
00000600000000000380FFFFFFFFFFE0FFFFFFFFFFC0000000000380000000000600000000000C
000000000018000000000018000000000030000000000030000000000060002B127D9432>33
D<0000006000000000006000000000003000000000001800000000001800000000000C00000000
00060000000000030000FFFFFFFF8000FFFFFFFFC000000000007000000000001C00000000000F
800000000003E0000000000780000000001E00000000003800000000006000FFFFFFFFC000FFFF
FFFF80000000000700000000000600000000000C00000000001800000000003000000000003000
000000006000000000006000002B1C7D9932>41 D<001FFF007FFF01E0000380000600000C0000
180000300000300000600000600000600000C00000C00000FFFFFFFFFFFFC00000C00000600000
6000006000003000003000001800000C000006000003800001E000007FFF001FFF181E7C9A21>
50 D<C0C0C0C0C0C0C0C0E0E0C0C0C0C0C0C0C0C003127D9400>55 D<00003F000001FF800007
FFC0000E07C0003003C00060038000C003800180078003000700070006000E000E000E0018001C
0010001C0000003C0000003800000038000000780000007000000070000000F0000000F0000000
F0000000F0000000F0000000F0000000F0000000F8000300F80006007C000C007C0018003E0030
003F80C0001FFF80000FFE000003F800001A2480A21A>67 D<00000000000F00000000007F0000
000000FF0000000001FF0000300001FE0000F00001E00000F00003000000F80002000001F80004
000001F80004000001F800040000017C00040000017C00080000013C00080000013C0008000002
3E00100000023E00100000021E00100000021E00100000041F00200000041F00200000040F0020
0000040F80200000080F804000000807804000000807804000000807C04000001007C080000010
03C08000001003E08000002003E08000002001F10000004001F10000004000F9000000C000F900
006180007F00007F80007E00007F00003E0000FF00003C0000FE00001800003C00000000003029
81A629>78 D<0000000018001FFFFFE000FFFFFFC001FFFFFF0006001E00000E001E00001C003C
00003C003C000038003C000078007800007000780000C0007800000000F800000000F000000000
F000000000F000000001F000000001E000000001E000000001E000000003E000000003C0000000
03C000000003C00000000780000000078000000007000000000F000000000E000000001C000000
0018000000003000000001FFE0000003FFC000000FFF00000025237FA21B>84
D<000F0038007000E001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C0
01C001C0038007001E00F0001E000700038001C001C001C001C001C001C001C001C001C001C001
C001C001C001C001C001C001C000E000700038000F10317CA419>102 D<F0001E000700038001
C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C000E000700038
000F0038007000E001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001
C001C0038007001E00F00010317CA419>I<004000C000C0018001800180030003000300060006
000C000C000C00180018001800300030003000600060006000C000C000C000C000600060006000
3000300030001800180018000C000C000C000600060003000300030001800180018000C000C000
400A327BA413>I<C000C000C000600060006000300030003000180018000C000C000C00060006
00060003000300030001800180018000C000C000C000C001800180018003000300030006000600
06000C000C000C0018001800300030003000600060006000C000C000C0000A327DA413>I<C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C002317AA40E>I E /FA 88 124 df<00020000000700000007000000070000
00070000000F8000000F8000000F80000013C0000013C0000013C0000021E0000021E0000021E0
000040F0000040F0000040F0000080F800008078000080780001007C0001003C0001003C000200
3E0002001E0002001E0004001F0004000F0004000F0008000F800800078008000780180007C03C
000FC0FF807FF81D237EA222>3 D<001FE00000F03C0001C00E00078007800F0003C01F0003E0
1E0001E03E0001F03C0000F07C0000F87C0000F87C0000F87C0000F87C0000F87C0000F87C0000
F83C0000F03E0001F03E0001F01E0001E01E0001E00E0001C00F0003C007000380030003000380
07000180060081800604808004044080040840C00C08404008087FC00FF83FC00FF03FC00FF01E
237EA223>10 D<001F83E000706E3000C07C780180F8780380F078070070000700700007007000
070070000700700007007000070070000700700007007000FFFFFFC00700700007007000070070
000700700007007000070070000700700007007000070070000700700007007000070070000700
70000700700007007000070070000700700007007000070078007FE3FF801D2380A21C>I<001F
C0000070200000C010000180380003807800070078000700300007000000070000000700000007
000000070000000700000007000000FFFFF8000700780007003800070038000700380007003800
070038000700380007003800070038000700380007003800070038000700380007003800070038
00070038000700380007003800070038007FE1FF80192380A21B>I<001FD8000070380000C078
000180780003807800070038000700380007003800070038000700380007003800070038000700
380007003800FFFFF8000700380007003800070038000700380007003800070038000700380007
003800070038000700380007003800070038000700380007003800070038000700380007003800
07003800070038007FF3FF80192380A21B>I<000FC07F00007031C08000E00B004001801E00E0
03803E01E007003C01E007001C00C007001C000007001C000007001C000007001C000007001C00
0007001C000007001C0000FFFFFFFFE007001C01E007001C00E007001C00E007001C00E007001C
00E007001C00E007001C00E007001C00E007001C00E007001C00E007001C00E007001C00E00700
1C00E007001C00E007001C00E007001C00E007001C00E007001C00E007001C00E07FF1FFCFFE27
2380A229>I<70F8F8F8F8F8F8F8707070707070707070707070202020202020000000000070F8
F8F87005247CA30E>33 D<7038F87CFC7EFC7E743A040204020402040208040804100810082010
40200F0F7EA218>I<0780000C001840000C0018200018003010007000701C00B0006013FF6000
E008006000E00800C000E008018000E008018000E008030000E008060000E008060000E0080C00
00601018000070101800003010300000182030000018406000000780C03C000000C04200000180
C1000003018100000303808000060300800006030040000C070040001807004000180700400030
0700400060070040006007004000C0070040018003004001800300800300038080030001810006
0000C1000C000042000400003C0022287DA429>37 D<003C000000006200000000C20000000181
000000018100000003810000000381000000038100000003810000000382000000038200000003
84000000038800000001C800000001D000000001E003FF8001C0007C0000E000380001E0003000
01F0002000027000400004700040000838008000183C008000301C010000701E020000700E0200
00F007040000F007880000F003880000F001D00100F000E0010078007003003800B802003C031C
04000E0C0E0C0003F003F00021257EA326>I<70F8FCFC7404040404080810102040060F7CA20E>
I<00200040008001000300060004000C000C00180018003000300030007000600060006000E000
E000E000E000E000E000E000E000E000E000E000E000E000E00060006000600070003000300030
00180018000C000C0004000600030001000080004000200B327CA413>I<800040002000100018
000C000400060006000300030001800180018001C000C000C000C000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000C000C000C001C0018001800180030003000600060004
000C00180010002000400080000B327DA413>I<00018000000180000001800000018000000180
000001800000018000000180000001800000018000000180000001800000018000000180000001
800000018000FFFFFFFEFFFFFFFE00018000000180000001800000018000000180000001800000
018000000180000001800000018000000180000001800000018000000180000001800000018000
1F227D9C26>43 D<70F8FCFC7404040404080810102040060F7C840E>I<FFE0FFE00B027F8B10>
I<70F8F8F87005057C840E>I<0000800001800001800003000003000003000006000006000006
00000C00000C00000C0000180000180000180000300000300000300000600000600000600000C0
0000C00000C0000180000180000180000180000300000300000300000600000600000600000C00
000C00000C0000180000180000180000300000300000300000600000600000600000C00000C000
00C0000011317DA418>I<01F000071C000C06001803003803803803807001C07001C07001C070
01C0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F0
01E0F001E07001C07001C07001C07803C03803803803801C07000C0600071C0001F00013227EA0
18>I<008003800F80F38003800380038003800380038003800380038003800380038003800380
038003800380038003800380038003800380038003800380038007C0FFFE0F217CA018>I<03F0
000C1C001007002007804003C04003C08003E0F003E0F801E0F801E0F801E02003E00003E00003
C00003C0000780000700000E00001C0000180000300000600000C0000180000100000200200400
200800201800603000403FFFC07FFFC0FFFFC013217EA018>I<03F8000C1E0010070020078040
07C07807C07803C07807C03807C0000780000780000700000F00000E0000380003F000001C0000
0F000007800007800003C00003C00003E02003E07003E0F803E0F803E0F003C04003C040078020
0780100F000C1C0003F00013227EA018>I<000200000600000E00000E00001E00001E00002E00
004E00004E00008E00008E00010E00020E00020E00040E00040E00080E00100E00100E00200E00
200E00400E00800E00FFFFF8000E00000E00000E00000E00000E00000E00000E00001F0001FFF0
15217FA018>I<1000801E07001FFF001FFE001FF80013E0001000001000001000001000001000
0010000010F800130E001407001803801003800001C00001C00001E00001E00001E00001E07001
E0F001E0F001E0E001C08001C04003C04003802007001006000C1C0003F00013227EA018>I<00
7E0001C1000300800601C00E03C01C03C0180180380000380000780000700000700000F0F800F3
0C00F40600F40300F80380F801C0F001C0F001E0F001E0F001E0F001E0F001E07001E07001E070
01E03801C03801C01803801C03000C0600070C0001F00013227EA018>I<4000006000007FFFE0
7FFFC07FFFC0400080C00100800100800200800200000400000800000800001000003000002000
00600000600000600000E00000C00000C00001C00001C00001C00001C00003C00003C00003C000
03C00003C00003C00003C00003C00001800013237DA118>I<01F800060E000803001001802001
802000C06000C06000C06000C07000C07801803E01003F02001FC4000FF80003F80003FC00067F
00083F80100F803007C06001C06000E0C000E0C00060C00060C00060C000606000406000C03000
801803000E0E0003F00013227EA018>I<01F000060C000C0600180700380380700380700380F0
01C0F001C0F001C0F001E0F001E0F001E0F001E0F001E07001E07003E03803E01805E00C05E006
19E003E1E00001C00001C00001C0000380000380300300780700780600700C002018001030000F
C00013227EA018>I<70F8F8F870000000000000000000000070F8F8F87005157C940E>I<70F8F8
F870000000000000000000000070F8F8F87808080808101010204040051F7C940E>I<FFFFFFFE
FFFFFFFE0000000000000000000000000000000000000000000000000000000000000000FFFFFF
FEFFFFFFFE1F0C7D9126>61 D<07E01838201C400E800FF00FF00FF00F000F000E001C00380030
006000C000C000800080018001000100010001000100010000000000000000000000038007C007
C007C0038010237DA217>63 D<000FE00000701C00008002000300018004000040080000200800
00201007C01020183008203008084060040440C0078441C0038481C00382838003828380038283
8003828380038283800382838003828380038281C0038241C0038240C007824060078420300B84
201831881007C0F00800000008000000040000000300000E00800078007007C0000FFC001F237D
A226>I<0001800000018000000180000003C0000003C0000003C0000005E0000005E000000DF0
000008F0000008F0000010F800001078000010780000203C0000203C0000203C0000401E000040
1E0000401E0000800F0000800F0000FFFF000100078001000780030007C0020003C0020003C004
0003E0040001E0040001E00C0000F00C0000F03E0001F8FF800FFF20237EA225>I<FFFFF8000F
800E0007800780078003C0078003E0078001E0078001F0078001F0078001F0078001F0078001F0
078001E0078003E0078007C007800F8007803E0007FFFE0007800780078003C0078001E0078001
F0078000F0078000F8078000F8078000F8078000F8078000F8078000F8078001F0078001F00780
03E0078007C00F800F00FFFFFC001D227EA123>I<0007E0100038183000E0063001C001700380
00F0070000F00E0000701E0000701C0000303C0000303C0000307C0000107800001078000010F8
000000F8000000F8000000F8000000F8000000F8000000F8000000F80000007800000078000010
7C0000103C0000103C0000101C0000201E0000200E000040070000400380008001C0010000E002
0000381C000007E0001C247DA223>I<FFFFF0000F801E0007800700078003C0078001C0078000
E0078000F007800078078000780780007C0780003C0780003C0780003C0780003E0780003E0780
003E0780003E0780003E0780003E0780003E0780003E0780003E0780003C0780003C0780007C07
80007807800078078000F0078000E0078001E0078003C0078007000F801E00FFFFF8001F227EA1
25>I<FFFFFFC00F8007C0078001C0078000C00780004007800040078000600780002007800020
0780002007802020078020000780200007802000078060000780E00007FFE0000780E000078060
000780200007802000078020000780200807800008078000080780001007800010078000100780
00300780003007800070078000E00F8003E0FFFFFFE01D227EA121>I<FFFFFFC00F8007C00780
01C0078000C0078000400780004007800060078000200780002007800020078020200780200007
80200007802000078060000780E00007FFE0000780E00007806000078020000780200007802000
078020000780000007800000078000000780000007800000078000000780000007800000078000
000FC00000FFFE00001B227EA120>I<0007F008003C0C1800E0021801C001B8038000F8070000
780F0000381E0000381E0000183C0000183C0000187C0000087800000878000008F8000000F800
0000F8000000F8000000F8000000F8000000F8000000F8001FFF780000F8780000787C0000783C
0000783C0000781E0000781E0000780F00007807000078038000B801C000B800E00318003C0C08
0007F00020247DA226>I<FFFC3FFF0FC003F0078001E0078001E0078001E0078001E0078001E0
078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E007FFFF
E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E00780
01E0078001E0078001E0078001E0078001E0078001E00FC003F0FFFC3FFF20227EA125>I<FFFC
0FC007800780078007800780078007800780078007800780078007800780078007800780078007
80078007800780078007800780078007800780078007800FC0FFFC0E227EA112>I<03FFF0001F
00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F
00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00700F00F80F
00F80F00F80E00F01E00401C0020380018700007C00014237EA119>I<FFFC03FF000FC000F800
078000600007800040000780008000078001000007800200000780040000078008000007801000
0007802000000780400000078080000007818000000783C000000787E000000789E000000788F0
00000790F0000007A078000007C03C000007803C000007801E000007800F000007800F00000780
078000078007C000078003C000078001E000078001E000078000F000078000F8000FC000FC00FF
FC07FF8021227EA126>I<FFFE00000FC000000780000007800000078000000780000007800000
078000000780000007800000078000000780000007800000078000000780000007800000078000
000780000007800000078000000780000007800000078000800780008007800080078000800780
01800780018007800100078003000780030007800F000F803F00FFFFFF0019227EA11E>I<FFC0
0003FF0FC00003F007C00003E005E00005E005E00005E004F00009E004F00009E004F00009E004
780011E004780011E004780011E0043C0021E0043C0021E0043C0021E0041E0041E0041E0041E0
040F0081E0040F0081E0040F0081E004078101E004078101E004078101E00403C201E00403C201
E00401E401E00401E401E00401E401E00400F801E00400F801E00400F801E004007001E00E0070
01E01F007003F0FFE0203FFF28227EA12D>I<FF8007FF07C000F807C0007005E0002004F00020
04F0002004780020047C0020043C0020041E0020041F0020040F002004078020040780200403C0
200401E0200401E0200400F0200400F8200400782004003C2004003E2004001E2004000F200400
0F20040007A0040003E0040003E0040001E0040001E0040000E00E0000601F000060FFE0002020
227EA125>I<000FE00000783C0000E00E0003C00780078003C00F0001E00E0000E01E0000F03C
0000783C0000787C00007C7C00007C7800003C7800003CF800003EF800003EF800003EF800003E
F800003EF800003EF800003EF800003EF800003E7800003C7C00007C7C00007C3C0000783E0000
F81E0000F00F0001E00F0001E0078003C003C0078000E00E0000783C00000FE0001F247DA226>
I<FFFFF0000F803C0007800F0007800780078007C0078003C0078003E0078003E0078003E00780
03E0078003E0078003E0078003C0078007C00780078007800F0007803C0007FFF0000780000007
800000078000000780000007800000078000000780000007800000078000000780000007800000
0780000007800000078000000FC00000FFFC00001B227EA121>I<000FE00000783C0000E00E00
03C00780078003C00F0001E00E0000E01E0000F03E0000F83C0000787C00007C7C00007C780000
3C7800003CF800003EF800003EF800003EF800003EF800003EF800003EF800003EF800003EF800
003E7800003C7C00007C7C00007C3C0000783C0000781E0380F00E0420E00F0831E0078833C003
C83F8000E83E00007C3C02000FFC0200001C0200001C0200001E0600000F0E00000FFC000007FC
000007F8000003F8000001E01F2D7DA226>I<FFFFE000000F803C000007800E00000780078000
078007C000078003C000078003E000078003E000078003E000078003E000078003E000078003C0
00078007C000078007800007800E000007803C000007FFE000000780700000078038000007801C
000007801E000007800E000007800F000007800F000007800F000007800F000007800F80000780
0F800007800F800007800F808007800FC080078007C0800FC003C100FFFC01E2000000007C0021
237EA124>I<03F0200C0C601802603001E07000E0600060E00060E00060E00020E00020E00020
F00000F000007800007F00003FF0001FFE000FFF0003FF80003FC00007E00001E00000F00000F0
000070800070800070800070800070C00060C00060E000C0F000C0C80180C6070081FC0014247D
A21B>I<7FFFFFF87807807860078018400780084007800840078008C007800C80078004800780
048007800480078004000780000007800000078000000780000007800000078000000780000007
800000078000000780000007800000078000000780000007800000078000000780000007800000
078000000780000007800000078000000FC00003FFFF001E227EA123>I<FFFC07FF0FC000F807
800070078000200780002007800020078000200780002007800020078000200780002007800020
078000200780002007800020078000200780002007800020078000200780002007800020078000
20078000200780002007800020078000200380004003C0004003C0004001C0008000E000800060
010000300600001C08000003F00020237EA125>I<FFF0007FC01F80001F000F00000C00078000
0C000780000800078000080003C000100003C000100003E000300001E000200001E000200000F0
00400000F000400000F000400000780080000078008000007C018000003C010000003C01000000
1E020000001E020000001F020000000F040000000F040000000F8C000000078800000007880000
0003D000000003D000000003F000000001E000000001E000000000C000000000C000000000C000
0022237FA125>I<FFF03FFC03FE1F8007E000F80F0003C000700F0003C000200F0003C0002007
8001E00040078001E00040078001E0004003C002F0008003C002F0008003C002F0008001E00478
010001E00478010001E00478010000F0083C020000F0083C020000F0083C020000F8183E060000
78101E04000078101E0400007C101E0400003C200F0800003C200F0800003C200F0800001E4007
9000001E40079000001E40079000000F8003E000000F8003E000000F8003E00000070001C00000
070001C00000070001C0000003000180000002000080002F237FA132>I<FFF0007FC01F80001F
000F80000C00078000080007C000180003E000100001E000200001F000200000F000400000F800
C000007C008000003C010000003E010000001E020000001F040000000F84000000078800000007
D800000003D000000003E000000001E000000001E000000001E000000001E000000001E0000000
01E000000001E000000001E000000001E000000001E000000001E000000001E000000003E00000
003FFF000022227FA125>89 D<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0FEFE07317BA40E>91
D<0804100820102010402040208040804080408040B85CFC7EFC7E7C3E381C0F0F7AA218>I<FE
FE0606060606060606060606060606060606060606060606060606060606060606060606060606
06060606060606FEFE07317FA40E>I<08102020404080808080B8FCFC7C38060F7DA20E>96
D<0FE0001838003C0C003C0E0018070000070000070000070000FF0007C7001E07003C07007807
00700700F00708F00708F00708F00F087817083C23900FC1E015157E9418>I<0E0000FE00001E
00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E1F000E
61C00E80600F00300E00380E003C0E001C0E001E0E001E0E001E0E001E0E001E0E001E0E001E0E
001C0E003C0E00380F00700C80600C41C0083F0017237FA21B>I<01FE000703000C07801C0780
380300780000700000F00000F00000F00000F00000F00000F00000F00000700000780040380040
1C00800C010007060001F80012157E9416>I<0000E0000FE00001E00000E00000E00000E00000
E00000E00000E00000E00000E00000E00000E00000E001F8E00704E00C02E01C01E03800E07800
E07000E0F000E0F000E0F000E0F000E0F000E0F000E0F000E07000E07800E03800E01801E00C02
E0070CF001F0FE17237EA21B>I<01FC000707000C03801C01C03801C07801E07000E0F000E0FF
FFE0F00000F00000F00000F00000F000007000007800203800201C00400E008007030000FC0013
157F9416>I<003C00C6018F038F030F070007000700070007000700070007000700FFF8070007
00070007000700070007000700070007000700070007000700070007000700070007807FF81023
80A20F>I<00007001F198071E180E0E181C07001C07003C07803C07803C07803C07801C07001C
07000E0E000F1C0019F0001000001000001800001800001FFE000FFFC00FFFE03800F060003040
0018C00018C00018C000186000306000303800E00E038003FE0015217F9518>I<0E0000FE0000
1E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E1F80
0E60C00E80E00F00700F00700E00700E00700E00700E00700E00700E00700E00700E00700E0070
0E00700E00700E00700E00700E00700E0070FFE7FF18237FA21B>I<1C003E003E003E001C0000
0000000000000000000000000000000E00FE001E000E000E000E000E000E000E000E000E000E00
0E000E000E000E000E000E000E000E00FFC00A227FA10E>I<01C003E003E003E001C000000000
00000000000000000000000001E00FE001E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E000E000E000E000E000E000E060E0F0C0F18061803E000B2C82A1
0F>I<0E0000FE00001E00000E00000E00000E00000E00000E00000E00000E00000E00000E0000
0E00000E00000E03FC0E01F00E01C00E01800E02000E04000E08000E10000E38000EF8000F1C00
0E1E000E0E000E07000E07800E03C00E01C00E01E00E00F00E00F8FFE3FE17237FA21A>I<0E00
FE001E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E000E00FFE00B237FA20E>I<0E1FC0
7F00FE60E183801E807201C00F003C00E00F003C00E00E003800E00E003800E00E003800E00E00
3800E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E
003800E00E003800E00E003800E00E003800E0FFE3FF8FFE27157F942A>I<0E1F80FE60C01E80
E00F00700F00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00
700E00700E00700E00700E0070FFE7FF18157F941B>I<01FC000707000C01801800C03800E070
0070700070F00078F00078F00078F00078F00078F00078F000787000707800F03800E01C01C00E
038007070001FC0015157F9418>I<0E1F00FE61C00E80600F00700E00380E003C0E001C0E001E
0E001E0E001E0E001E0E001E0E001E0E001E0E003C0E003C0E00380F00700E80E00E41C00E3F00
0E00000E00000E00000E00000E00000E00000E00000E00000E0000FFE000171F7F941B>I<01F8
200704600E02601C01603801E07800E07800E0F000E0F000E0F000E0F000E0F000E0F000E0F000
E07000E07800E03801E01C01E00C02E0070CE001F0E00000E00000E00000E00000E00000E00000
E00000E00000E00000E0000FFE171F7E941A>I<0E3CFE461E8F0F0F0F060F000E000E000E000E
000E000E000E000E000E000E000E000E000E000F00FFF010157F9413>I<0F8830786018C018C0
08C008E008F0007F803FE00FF001F8003C801C800C800CC00CC008E018D0308FC00E157E9413>
I<02000200020002000600060006000E001E003E00FFF80E000E000E000E000E000E000E000E00
0E000E000E000E040E040E040E040E040E040708030801F00E1F7F9E13>I<0E0070FE07F01E00
F00E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00
700E00F00E00F006017003827800FC7F18157F941B>I<FFC1FE1E00780E00300E00200E002007
004007004003808003808003808001C10001C10000E20000E20000E20000740000740000380000
380000380000100017157F941A>I<FF8FF8FF1E01E03C1C01C0180E01C0180E01E0100E01E010
07026020070270200702702003843040038438400384384001C8188001C81C8001C81C8000F00D
0000F00F0000F00F0000600600006006000060060020157F9423>I<FF83FE1F01F00E00C00700
8003810003830001C20000E400007800007800003800003C00004E00008E000187000103800201
C00401E00C00E03E01F0FF03FE17157F941A>I<FFC1FE1E00780E00300E00200E002007004007
004003808003808003808001C10001C10000E20000E20000E20000740000740000380000380000
3800001000001000002000002000002000004000F04000F08000F180004300003C0000171F7F94
1A>I<3FFFC0380380300780200700600E00401C00403C0040380000700000E00001E00001C000
0380400700400F00400E00C01C0080380080780180700780FFFF8012157F9416>I<FFFFFE1701
808C18>I E /FB 57 124 df<00003FF800000003FFFE0000000FF80F8000003FC001C000007F
0007E00000FE000FE00001FE001FF00001FC001FF00003FC001FF00003FC001FF00003FC000FE0
0003FC0007C00003FC0001000003FC0000000003FC0000000003FC0000000003FC0000000003FC
00000000FFFFFFFFF000FFFFFFFFF000FFFFFFFFF00003FC001FF00003FC000FF00003FC000FF0
0003FC000FF00003FC000FF00003FC000FF00003FC000FF00003FC000FF00003FC000FF00003FC
000FF00003FC000FF00003FC000FF00003FC000FF00003FC000FF00003FC000FF00003FC000FF0
0003FC000FF00003FC000FF00003FC000FF00003FC000FF00003FC000FF00003FC000FF00003FC
000FF00003FC000FF00003FC000FF00003FC000FF0007FFFE1FFFF807FFFE1FFFF807FFFE1FFFF
8029327FB12D>12 D<0000600000E00001C0000380000700000E00001C00003C0000780000F800
00F00001F00003E00003E00007C00007C0000FC0000F80001F80001F80001F00003F00003F0000
3F00007F00007E00007E00007E00007E0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000
FE0000FE0000FE0000FE0000FE0000FE0000FE00007E00007E00007E00007E00007F00003F0000
3F00003F00001F00001F80001F80000F80000FC00007C00007C00003E00003E00001F00000F000
00F800007800003C00001C00000E000007000003800001C00000E0000060134879B51F>40
D<800000C00000E000007000003800001C00000E00000F000007800007C00003C00003E00001F0
0001F00000F80000F80000FC00007C00007E00007E00003E00003F00003F00003F00003F80001F
80001F80001F80001F80001FC0001FC0001FC0001FC0001FC0001FC0001FC0001FC0001FC0001F
C0001FC0001FC0001FC0001FC0001F80001F80001F80001F80003F80003F00003F00003F00003E
00007E00007E00007C0000FC0000F80000F80001F00001F00003E00003C00007C0000780000F00
000E00001C0000380000700000E00000C0000080000012487BB51F>I<1E003F007F80FFC0FFC0
FFC0FFC07F803F001E000A0A7A8916>46 D<0001C0000003C000000FC000007FC0001FFFC000FF
FFC000FFBFC000E03FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000
003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC0
00003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003F
C000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC0007FFFFFE07F
FFFFE07FFFFFE01B2E7AAD28>49 D<003FE00001FFFE0007FFFF800F80FFC01E003FE038001FF0
7C000FF87E0007FCFF0007FCFF8007FEFF8007FEFF8003FEFF8003FE7F0003FE3E0007FE000007
FE000007FC000007FC00000FF800000FF800000FF000001FE000001FC000003F8000007F000000
7E000000F8000001F0000003E0000007C000000F0000001E000E003C000E0038000E0070001E00
E0001C01C0001C0300003C07FFFFFC0FFFFFFC1FFFFFFC3FFFFFFC7FFFFFF8FFFFFFF8FFFFFFF8
FFFFFFF81F2E7CAD28>I<001FF80000007FFF000001FFFFC00003E03FE00007800FF0000FC00F
F8001FE007F8001FE007FC001FE007FC001FE007FC001FE007FC000FC007FC00078007FC000000
0FF80000000FF80000000FF00000001FE00000001FC00000003F80000000FE0000003FF8000000
3FFF800000001FE000000007F000000007F800000003FC00000003FE00000001FF00000001FF00
000001FF80000001FF80000001FF801C0001FF803E0001FF807F0001FF80FF8001FF80FF8001FF
00FF8001FF00FF8003FE007F0003FE007E0007FC003C0007F8001FC01FF0000FFFFFC00003FFFF
0000003FF80000212E7DAD28>I<0000007000000000F000000001F000000003F000000007F000
00000FF00000000FF00000001FF00000003FF000000077F0000000F7F0000000E7F0000001C7F0
00000387F000000707F000000F07F000000E07F000001C07F000003807F000007007F00000F007
F00000E007F00001C007F000038007F000070007F0000F0007F0000E0007F0001C0007F0003800
07F000700007F000E00007F000FFFFFFFFE0FFFFFFFFE0FFFFFFFFE000000FF00000000FF00000
000FF00000000FF00000000FF00000000FF00000000FF00000000FF00000000FF000000FFFFFE0
000FFFFFE0000FFFFFE0232E7EAD28>I<0C0000300FC003F00FFFFFE00FFFFFC00FFFFF800FFF
FF000FFFFE000FFFF8000FFFF0000FFF80000E0000000E0000000E0000000E0000000E0000000E
0000000E0000000E0000000E1FF0000E7FFE000FE03F800F800FC00E0007E00C0007F0000007F8
000003FC000003FC000003FC000003FE000003FE180003FE3E0003FE7F0003FEFF0003FEFF0003
FEFF0003FCFF0003FCFE0003FC780007F8780007F03C000FE01E001FC00FC07F8007FFFF0001FF
FC00003FE0001F2E7CAD28>I<0000FF80000007FFE000001FFFF000007F80F80000FE003C0001
F8007C0003F000FE0007F001FE000FE001FE000FE001FE001FC001FE003FC000FC003FC0007800
3FC00000007F800000007F800000007F80000000FF83FC0000FF8FFF8000FF9C0FC000FFB003F0
00FFB001F800FFE001FC00FFC001FE00FFC000FE00FFC000FF00FFC000FF00FF8000FF80FF8000
FF80FF8000FF80FF8000FF807F8000FF807F8000FF807F8000FF807F8000FF803F8000FF003FC0
00FF001FC000FF001FC000FE000FC001FC0007E001FC0003F003F80001FC0FE00000FFFFC00000
3FFF0000000FFC0000212E7DAD28>I<38000000003E000000003FFFFFFFC03FFFFFFFC03FFFFF
FFC03FFFFFFF807FFFFFFF007FFFFFFE007FFFFFFC007FFFFFF800780000380070000070007000
00E000F00001C000E000038000E000070000E00007000000000E000000001C0000000038000000
0038000000007800000000F000000000F000000001F000000001E000000003E000000003E00000
0007E000000007E00000000FC00000000FC00000000FC00000001FC00000001FC00000001FC000
00001FC00000001FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC0
0000003FC00000003FC00000001F800000000F00000022307CAF28>I<000FF80000003FFF0000
00FFFFC00001F80FE00003E003F00007C001F8000F8001F8000F8000FC000F8000FC001F8000FC
001F8000FC001FC000FC001FC000FC001FF000F8001FFC01F8000FFE01F0000FFF83E00007FFE7
C00007FFFF800003FFFE000001FFFF000000FFFFC000003FFFE00001FFFFF00003E3FFF80007C1
FFFC001F807FFE003F001FFF003E0007FF007E0003FF807E0000FF80FC00007F80FC00003F80FC
00001F80FC00001F80FC00001F80FC00001F007E00001F007E00001F007F00003E003F00007C00
1FC000F8000FF007F00003FFFFE00000FFFF8000001FF80000212E7DAD28>I<1E003F007F80FF
C0FFC0FFC0FFC07F803F001E000000000000000000000000000000000000000000000000001E00
3F007F80FFC0FFC0FFC0FFC07F803F001E000A207A9F16>58 D<00000078000000000000780000
00000000FC000000000000FC000000000000FC000000000001FE000000000001FE000000000003
FF000000000003FF000000000007FF800000000007FF800000000007FF80000000000FFFC00000
00000E7FC0000000001E7FE0000000001C3FE0000000001C3FE000000000383FF000000000381F
F000000000781FF800000000700FF800000000700FF800000000E00FFC00000000E007FC000000
01E007FE00000001C003FE00000001C003FE000000038003FF000000038001FF000000078001FF
800000070000FF800000070000FF8000000FFFFFFFC000000FFFFFFFC000001FFFFFFFE000001C
00003FE000003C00003FF000003800001FF000003800001FF000007000001FF800007000000FF8
0000F000000FFC0000E0000007FC0000E0000007FC0001C0000007FE0003E0000003FE00FFFF80
01FFFFFCFFFF8001FFFFFCFFFF8001FFFFFC36317DB03D>65 D<FFFFFFFFE00000FFFFFFFFFE00
00FFFFFFFFFF800000FF0000FFC00000FF00003FF00000FF00001FF80000FF00000FF80000FF00
0007FC0000FF000007FC0000FF000007FE0000FF000003FE0000FF000003FE0000FF000003FE00
00FF000003FE0000FF000007FE0000FF000007FE0000FF000007FC0000FF000007FC0000FF0000
0FF80000FF00001FF00000FF00003FE00000FF0000FF800000FF000FFF000000FFFFFFFE000000
FFFFFFFFC00000FF00001FF00000FF000007F80000FF000003FE0000FF000003FE0000FF000001
FF0000FF000001FF8000FF000000FF8000FF000000FFC000FF000000FFC000FF000000FFC000FF
000000FFC000FF000000FFC000FF000000FFC000FF000000FFC000FF000000FF8000FF000001FF
8000FF000001FF0000FF000003FF0000FF000007FE0000FF00000FFC0000FF00007FF800FFFFFF
FFFFE000FFFFFFFFFF8000FFFFFFFFFC000032317EB039>I<000003FF80018000003FFFF00380
0001FFFFFC07800007FF003F0F80001FF800079F80003FC00001FF8000FF800000FF8001FE0000
007F8003FC0000003F8007FC0000001F8007F80000000F800FF00000000F801FF000000007801F
F000000007803FE000000007803FE000000003807FE000000003807FE000000003807FC0000000
00007FC00000000000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC0
0000000000FFC00000000000FFC00000000000FFC00000000000FFC000000000007FC000000000
007FC000000000007FE000000000007FE000000003803FE000000003803FE000000003801FF000
000003801FF000000007800FF0000000070007F8000000070007FC0000000E0003FC0000001E00
01FE0000001C0000FF8000007800003FC00000F000001FF80003E0000007FF003F80000001FFFF
FE000000003FFFF80000000003FF80000031317CB03A>I<FFFFFFFFF00000FFFFFFFFFF0000FF
FFFFFFFFC00000FF8000FFF00000FF80000FF80000FF800003FE0000FF800001FF0000FF800000
FF8000FF8000007FC000FF8000003FC000FF8000001FE000FF8000001FF000FF8000000FF000FF
8000000FF800FF8000000FF800FF80000007FC00FF80000007FC00FF80000007FC00FF80000007
FC00FF80000007FE00FF80000007FE00FF80000007FE00FF80000007FE00FF80000007FE00FF80
000007FE00FF80000007FE00FF80000007FE00FF80000007FE00FF80000007FE00FF80000007FE
00FF80000007FC00FF80000007FC00FF80000007FC00FF80000007FC00FF8000000FF800FF8000
000FF800FF8000000FF000FF8000001FF000FF8000001FE000FF8000003FE000FF8000007FC000
FF8000007F8000FF800001FF0000FF800003FE0000FF80000FFC0000FF80007FF000FFFFFFFFFF
C000FFFFFFFFFF0000FFFFFFFFF0000037317EB03E>I<FFFFFFFFFFF0FFFFFFFFFFF0FFFFFFFF
FFF000FF80003FF000FF800007F800FF800003F800FF800000F800FF800000F800FF8000007800
FF8000007800FF8000003800FF8000003800FF8000003800FF8000001C00FF8007001C00FF8007
001C00FF8007001C00FF8007000000FF8007000000FF800F000000FF801F000000FF803F000000
FFFFFF000000FFFFFF000000FFFFFF000000FF803F000000FF801F000000FF800F000000FF8007
000000FF8007000000FF8007000700FF8007000700FF8007000700FF8000000E00FF8000000E00
FF8000000E00FF8000000E00FF8000001E00FF8000001E00FF8000003C00FF8000003C00FF8000
007C00FF800000FC00FF800001FC00FF800007FC00FF80003FFCFFFFFFFFFFF8FFFFFFFFFFF8FF
FFFFFFFFF830317EB035>I<FFFFFFFFFFE0FFFFFFFFFFE0FFFFFFFFFFE000FF80007FE000FF80
000FF000FF800003F000FF800001F000FF800001F000FF800000F000FF800000F000FF80000070
00FF8000007000FF8000007000FF8000003800FF8000003800FF8007003800FF8007003800FF80
07000000FF8007000000FF8007000000FF800F000000FF801F000000FF803F000000FFFFFF0000
00FFFFFF000000FFFFFF000000FF803F000000FF801F000000FF800F000000FF8007000000FF80
07000000FF8007000000FF8007000000FF8007000000FF8000000000FF8000000000FF80000000
00FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF80
00000000FF8000000000FF80000000FFFFFFE00000FFFFFFE00000FFFFFFE000002D317EB033>
I<FFFFFF80FFFFFF80FFFFFF8000FF800000FF800000FF800000FF800000FF800000FF800000FF
800000FF800000FF800000FF800000FF800000FF800000FF800000FF800000FF800000FF800000
FF800000FF800000FF800000FF800000FF800000FF800000FF800000FF800000FF800000FF8000
00FF800000FF800000FF800000FF800000FF800000FF800000FF800000FF800000FF800000FF80
0000FF800000FF800000FF800000FF800000FF800000FF800000FF8000FFFFFF80FFFFFF80FFFF
FF8019317EB01E>73 D<FFFFFFE00000FFFFFFE00000FFFFFFE0000000FF8000000000FF800000
0000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF
8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF800000
0000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF
8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF800001
C000FF800001C000FF800001C000FF800001C000FF800003C000FF8000038000FF8000038000FF
8000078000FF8000078000FF8000078000FF80000F8000FF80001F8000FF80003F8000FF80007F
8000FF8000FF0000FF8007FF00FFFFFFFFFF00FFFFFFFFFF00FFFFFFFFFF002A317EB030>76
D<FFFFC000000003FFFFFFFFC000000003FFFFFFFFE000000007FFFF00FFE000000007FF0000EF
F00000000EFF0000EFF00000000EFF0000EFF00000000EFF0000E7F80000001CFF0000E7F80000
001CFF0000E3FC00000038FF0000E3FC00000038FF0000E1FE00000070FF0000E1FE00000070FF
0000E0FF000000E0FF0000E0FF000000E0FF0000E07F800001C0FF0000E07F800001C0FF0000E0
3FC0000380FF0000E03FC0000380FF0000E03FC0000380FF0000E01FE0000700FF0000E01FE000
0700FF0000E00FF0000E00FF0000E00FF0000E00FF0000E007F8001C00FF0000E007F8001C00FF
0000E003FC003800FF0000E003FC003800FF0000E001FE007000FF0000E001FE007000FF0000E0
00FF00E000FF0000E000FF00E000FF0000E000FF00E000FF0000E0007F81C000FF0000E0007F81
C000FF0000E0003FC38000FF0000E0003FC38000FF0000E0001FE70000FF0000E0001FE70000FF
0000E0000FFE0000FF0000E0000FFE0000FF0000E00007FC0000FF0000E00007FC0000FF0000E0
0007FC0000FF0000E00003F80000FF0001F00003F80000FF00FFFFE001F000FFFFFFFFFFE001F0
00FFFFFFFFFFE000E000FFFFFF48317EB04D>I<FFFF800001FFFFC0FFFFC00001FFFFC0FFFFE0
0001FFFFC000FFF0000003E00000FFF8000001C00000EFFC000001C00000E7FC000001C00000E7
FE000001C00000E3FF000001C00000E1FF800001C00000E0FFC00001C00000E07FE00001C00000
E03FE00001C00000E03FF00001C00000E01FF80001C00000E00FFC0001C00000E007FE0001C000
00E003FE0001C00000E001FF0001C00000E001FF8001C00000E000FFC001C00000E0007FE001C0
0000E0003FF001C00000E0001FF001C00000E0001FF801C00000E0000FFC01C00000E00007FE01
C00000E00003FF01C00000E00001FF81C00000E00000FF81C00000E00000FFC1C00000E000007F
E1C00000E000003FF1C00000E000001FF9C00000E000000FFDC00000E0000007FDC00000E00000
07FFC00000E0000003FFC00000E0000001FFC00000E0000000FFC00000E00000007FC00000E000
00003FC00000E00000003FC00000E00000001FC00000E00000000FC00001F000000007C000FFFF
E0000003C000FFFFE0000001C000FFFFE0000001C0003A317EB03F>I<00000FFF0000000000FF
FFF000000007FC03FE0000001FE0007F8000003F80001FC000007F00000FE00001FE000007F800
03FC000003FC0007F8000001FE0007F8000001FE000FF0000000FF001FF0000000FF801FE00000
007F803FE00000007FC03FE00000007FC03FE00000007FC07FC00000003FE07FC00000003FE07F
C00000003FE0FFC00000003FF0FFC00000003FF0FFC00000003FF0FFC00000003FF0FFC0000000
3FF0FFC00000003FF0FFC00000003FF0FFC00000003FF0FFC00000003FF0FFC00000003FF0FFC0
0000003FF07FC00000003FE07FE00000007FE07FE00000007FE07FE00000007FE03FE00000007F
C03FE00000007FC01FF0000000FF801FF0000000FF800FF8000001FF0007F8000001FE0007FC00
0003FE0003FC000003FC0001FE000007F80000FF00000FF000003FC0003FC000001FE0007F8000
0007FC03FE00000000FFFFF0000000000FFF00000034317CB03D>I<FFFFFFFFE000FFFFFFFFFE
00FFFFFFFFFF8000FF8000FFE000FF80003FF000FF80000FF800FF800007FC00FF800007FC00FF
800003FE00FF800003FE00FF800003FF00FF800003FF00FF800003FF00FF800003FF00FF800003
FF00FF800003FF00FF800003FF00FF800003FE00FF800003FE00FF800007FC00FF800007F800FF
80000FF800FF80003FE000FF8000FFC000FFFFFFFF0000FFFFFFF80000FF8000000000FF800000
0000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF
8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF800000
0000FF8000000000FF8000000000FF8000000000FF8000000000FF80000000FFFFFF800000FFFF
FF800000FFFFFF80000030317EB037>I<00000FFF0000000000FFFFF000000007FC03FE000000
1FE0007F8000003FC0003FC000007F00000FE00001FE000007F80003FC000003FC0007FC000003
FE0007F8000001FE000FF8000001FF001FF0000000FF801FF0000000FF803FE00000007FC03FE0
0000007FC03FE00000007FC07FE00000007FE07FC00000003FE07FC00000003FE0FFC00000003F
F0FFC00000003FF0FFC00000003FF0FFC00000003FF0FFC00000003FF0FFC00000003FF0FFC000
00003FF0FFC00000003FF0FFC00000003FF0FFC00000003FF0FFC00000003FF07FC00000003FE0
7FC00000003FE07FE00000007FE07FE00000007FE03FE00000007FC03FE00000007FC01FF00000
00FF801FF0000000FF800FF001F800FF0007F807FC01FE0007FC0E0603FE0003FC0C0303FC0001
FE180387F80000FF1801CFF000003FD801FFC000001FEC01FF80000007FE03FE00000000FFFFF0
000000000FFFF8003000000000F8003000000000FC0030000000007E0070000000007F81F00000
00007FFFF0000000003FFFE0000000003FFFE0000000003FFFE0000000001FFFC0000000000FFF
C0000000000FFF800000000007FF000000000003FE000000000000F800343F7CB03D>I<FFFFFF
FF80000000FFFFFFFFF8000000FFFFFFFFFE00000000FF8003FF80000000FF80007FE0000000FF
80001FF0000000FF80000FF8000000FF80000FF8000000FF80000FFC000000FF800007FC000000
FF800007FE000000FF800007FE000000FF800007FE000000FF800007FE000000FF800007FE0000
00FF800007FE000000FF800007FC000000FF80000FFC000000FF80000FF8000000FF80001FF000
0000FF80003FE0000000FF80007FC0000000FF8003FF00000000FFFFFFF800000000FFFFFFE000
000000FF8007F800000000FF8001FC00000000FF8000FE00000000FF80007F00000000FF80007F
80000000FF80003FC0000000FF80003FC0000000FF80003FE0000000FF80003FE0000000FF8000
3FE0000000FF80003FE0000000FF80003FE0000000FF80003FF0000000FF80003FF0000000FF80
003FF0000000FF80003FF0000000FF80003FF0038000FF80003FF8038000FF80001FF8038000FF
80001FF8030000FF80000FFC0700FFFFFF8003FE0E00FFFFFF8001FFFC00FFFFFF80001FF00039
317EB03C>I<001FF8018000FFFF038003FFFFC78007F007EF800F8000FF801F00007F803E0000
1F803E00000F807C00000F807C00000780FC00000780FC00000780FC00000380FE00000380FE00
000380FF00000000FFC00000007FF00000007FFF8000003FFFF800003FFFFF80001FFFFFF0000F
FFFFF80007FFFFFE0003FFFFFF0000FFFFFF80003FFFFF800001FFFFC000001FFFE0000000FFE0
0000003FE00000001FF00000000FF000000007F060000007F0E0000003F0E0000003F0E0000003
F0E0000003E0F0000003E0F0000003E0F8000007C0FC000007C0FF00000F80FFC0001F00FBFC00
FE00F1FFFFF800E03FFFF000C003FF800024317CB02D>I<7FFFFFFFFFFF007FFFFFFFFFFF007F
FFFFFFFFFF007FC00FF801FF007E000FF8003F007C000FF8001F0078000FF8000F0078000FF800
0F0070000FF8000700F0000FF8000780F0000FF8000780F0000FF8000780E0000FF8000380E000
0FF8000380E0000FF8000380E0000FF8000380E0000FF800038000000FF800000000000FF80000
0000000FF800000000000FF800000000000FF800000000000FF800000000000FF800000000000F
F800000000000FF800000000000FF800000000000FF800000000000FF800000000000FF8000000
00000FF800000000000FF800000000000FF800000000000FF800000000000FF800000000000FF8
00000000000FF800000000000FF800000000000FF800000000000FF800000000000FF800000000
000FF800000000000FF800000000000FF800000000000FF8000000007FFFFFFF0000007FFFFFFF
0000007FFFFFFF000031307DAF38>I<FFFFFC0000FFFFFFFFFC0000FFFFFFFFFC0000FFFF03FF
00000003C001FF000000038001FF800000078000FF800000070000FFC000000700007FC000000E
00007FC000000E00007FE000001E00003FE000001C00003FF000003C00001FF000003800001FF8
00003800000FF800007000000FFC000070000007FC0000E0000007FC0000E0000007FE0001E000
0003FE0001C0000003FF0003C0000001FF000380000001FF800380000000FF800700000000FFC0
0700000000FFC00F000000007FC00E000000007FE01E000000003FE01C000000003FF03C000000
001FF038000000001FF838000000000FF870000000000FF870000000000FFCF00000000007FCE0
0000000007FFE00000000003FFC00000000003FFC00000000001FF800000000001FF8000000000
00FF000000000000FF000000000000FF0000000000007E0000000000007E0000000000003C0000
000000003C00000038317EB03D>86 D<FFFFFF00007FFFC0FFFFFF00007FFFC0FFFFFF00007FFF
C001FFC0000001E00000FFE0000003C000007FE00000038000007FF00000078000003FF800000F
0000001FF800000E0000001FFC00001E0000000FFE00003C00000007FE00003800000007FF0000
7800000003FF80007000000001FF8000E000000000FFC001E000000000FFE001C0000000007FE0
03C0000000003FF00780000000003FF80700000000001FF80F00000000000FFC1E00000000000F
FE1C000000000007FE3C000000000003FF78000000000003FFF0000000000001FFF00000000000
00FFE0000000000000FFC00000000000007FC00000000000007FC00000000000007FC000000000
00007FC00000000000007FC00000000000007FC00000000000007FC00000000000007FC0000000
0000007FC00000000000007FC00000000000007FC00000000000007FC00000000000007FC00000
000000007FC00000000000007FC00000000000007FC00000000000007FC000000000007FFFFF80
000000007FFFFF80000000007FFFFF8000003A317FB03D>89 D<00FFF0000003FFFE00000F803F
80000FC00FE0001FE007F0001FE007F0001FE003F8000FC003FC00078003FC00000003FC000000
03FC00000003FC00000003FC000000FFFC00001FFFFC0000FFE3FC0003FC03FC000FF003FC001F
C003FC003FC003FC007F8003FC007F8003FC00FF0003FC00FF0003FC00FF0003FC00FF0007FC00
FF0007FC007F800DFC003FC019FE001FE070FFF007FFE07FF000FF803FF024207E9F27>97
D<01F8000000FFF8000000FFF8000000FFF80000000FF800000007F800000007F800000007F800
000007F800000007F800000007F800000007F800000007F800000007F800000007F800000007F8
00000007F800000007F800000007F83FE00007F8FFFC0007FBE07F0007FF001F8007FE000FC007
FC000FE007F80007F007F80007F807F80007F807F80003FC07F80003FC07F80003FC07F80003FE
07F80003FE07F80003FE07F80003FE07F80003FE07F80003FE07F80003FE07F80003FE07F80003
FC07F80003FC07F80003FC07F80007F807F80007F807F80007F007FC000FE007FE000FC007E700
3F8007C3C0FE000780FFF80007003FC00027327EB12D>I<000FFF00007FFFC001FC01F003F003
F007E007F80FE007F81FC007F83FC003F03FC001E07F8000007F8000007F800000FF800000FF80
0000FF800000FF800000FF800000FF800000FF800000FF8000007F8000007F8000007F8000003F
C0001C3FC0001C1FC000380FE0003807E0007003F001E001FC07C0007FFF00000FF8001E207D9F
24>I<0000000FC0000007FFC0000007FFC0000007FFC00000007FC00000003FC00000003FC000
00003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC0
0000003FC00000003FC00000003FC00007F83FC0003FFF3FC000FE07BFC003F801FFC007E0007F
C00FE0007FC01FC0003FC03FC0003FC03FC0003FC07F80003FC07F80003FC07F80003FC0FF8000
3FC0FF80003FC0FF80003FC0FF80003FC0FF80003FC0FF80003FC0FF80003FC0FF80003FC07F80
003FC07F80003FC07F80003FC03FC0003FC03FC0003FC01FC0003FC00FE0007FC007E000FFC003
F003FFE001FC0F3FFE007FFE3FFE000FF03FFE27327DB12D>I<000FFC00007FFF8001FC0FC003
F003E007E001F00FE001F81FC000FC3FC000FE3FC000FE7F80007E7F80007F7F80007FFF80007F
FF80007FFFFFFFFFFFFFFFFFFF800000FF800000FF800000FF8000007F8000007F8000007F8000
003FC000071FC000071FC0000E0FE0000E07F0001C03F8007800FE03E0003FFFC00007FE002020
7E9F25>I<0001FE00000FFF80001FC3C0007F07E000FE0FF001FE0FF001FC0FF003FC0FF003FC
07E003FC018003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC0000FF
FFFC00FFFFFC00FFFFFC0003FC000003FC000003FC000003FC000003FC000003FC000003FC0000
03FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC00
0003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC00007FFF
F0007FFFF0007FFFF0001C327EB119>I<001FF007C000FFFE3FE001F83F79F007E00FC3F00FE0
0FE1F00FC007E0E01FC007F0001FC007F0003FC007F8003FC007F8003FC007F8003FC007F8003F
C007F8001FC007F0001FC007F0000FC007E0000FE00FE00007E00FC00003F83F000006FFFE0000
0E1FF000000E000000001E000000001E000000001F000000001F800000001FFFFF80000FFFFFF0
000FFFFFFC0007FFFFFE0003FFFFFF0003FFFFFF800FFFFFFFC01F00007FC07E00001FE07C0000
0FE0FC000007E0FC000007E0FC000007E0FC000007E07E00000FC03E00000F803F00001F800FC0
007E0007F803FC0001FFFFF000001FFF0000242F7E9F28>I<01F8000000FFF8000000FFF80000
00FFF80000000FF800000007F800000007F800000007F800000007F800000007F800000007F800
000007F800000007F800000007F800000007F800000007F800000007F800000007F800000007F8
07F80007F83FFE0007F8783F0007F8C03F8007F9801FC007FB001FC007FE001FE007FC001FE007
FC001FE007FC001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE0
07F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001F
E007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE0FFFFC3FFFFFFFFC3FFFFFFFFC3
FFFF28327DB12D>I<03C00007E0000FF0001FF8001FF8001FF8001FF8000FF00007E00003C000
00000000000000000000000000000000000000000000000000000001F800FFF800FFF800FFF800
0FF80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F800
07F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F800FFFF80
FFFF80FFFF8011337DB217>I<01F8000000FFF8000000FFF8000000FFF80000000FF800000007
F800000007F800000007F800000007F800000007F800000007F800000007F800000007F8000000
07F800000007F800000007F800000007F800000007F800000007F801FFF807F801FFF807F801FF
F807F8003F0007F8003C0007F800780007F800F00007F803C00007F807800007F80F000007F81E
000007F878000007F8FC000007F9FE000007FBFE000007FFFF000007FE7F800007FC7FC00007F8
3FC00007F01FE00007F00FF00007F00FF80007F007FC0007F003FC0007F001FE0007F000FF0007
F000FF8007F0007F8007F0007FC0FFFF81FFFEFFFF81FFFEFFFF81FFFE27327EB12B>107
D<01F800FFF800FFF800FFF8000FF80007F80007F80007F80007F80007F80007F80007F80007F8
0007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F8
0007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F8
0007F80007F80007F80007F80007F80007F80007F80007F800FFFFC0FFFFC0FFFFC012327DB117
>I<03F007F8001FE000FFF03FFE00FFF800FFF0783F01E0FC00FFF0C03F8300FE000FF1801FC6
007F0007F3001FCC007F0007F6001FF8007F8007FC001FF0007F8007FC001FF0007F8007FC001F
F0007F8007F8001FE0007F8007F8001FE0007F8007F8001FE0007F8007F8001FE0007F8007F800
1FE0007F8007F8001FE0007F8007F8001FE0007F8007F8001FE0007F8007F8001FE0007F8007F8
001FE0007F8007F8001FE0007F8007F8001FE0007F8007F8001FE0007F8007F8001FE0007F8007
F8001FE0007F8007F8001FE0007F8007F8001FE0007F8007F8001FE0007F8007F8001FE0007F80
FFFFC3FFFF0FFFFCFFFFC3FFFF0FFFFCFFFFC3FFFF0FFFFC3E207D9F43>I<03F007F800FFF03F
FE00FFF0783F00FFF0C03F800FF1801FC007F3001FC007F6001FE007FC001FE007FC001FE007FC
001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007
F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE0
07F8001FE007F8001FE007F8001FE007F8001FE0FFFFC3FFFFFFFFC3FFFFFFFFC3FFFF28207D9F
2D>I<0007FC0000007FFFC00001FC07F00003F001F80007E000FC000FC0007E001FC0007F003F
C0007F803F80003F807F80003FC07F80003FC07F80003FC0FF80003FE0FF80003FE0FF80003FE0
FF80003FE0FF80003FE0FF80003FE0FF80003FE0FF80003FE07F80003FC07F80003FC07F80003F
C03FC0007F803FC0007F801FC0007F000FE000FE0007E000FC0003F803F80001FE0FF000007FFF
C0000007FC000023207E9F28>I<01F83FE000FFF8FFFC00FFFBE07F00FFFF003F8007FE001FC0
07FC000FE007F8000FF007F80007F807F80007F807F80007FC07F80003FC07F80003FC07F80003
FE07F80003FE07F80003FE07F80003FE07F80003FE07F80003FE07F80003FE07F80003FE07F800
03FC07F80007FC07F80007FC07F80007F807F80007F807F8000FF007FC000FE007FE001FC007FF
003F8007FBC0FE0007F8FFF80007F83FC00007F800000007F800000007F800000007F800000007
F800000007F800000007F800000007F800000007F800000007F800000007F8000000FFFFC00000
FFFFC00000FFFFC00000272E7E9F2D>I<0007F801C0003FFE03C000FE0707C003F8018FC007F0
00CFC00FE000FFC01FE0007FC03FC0007FC03FC0003FC07FC0003FC07FC0003FC07F80003FC0FF
80003FC0FF80003FC0FF80003FC0FF80003FC0FF80003FC0FF80003FC0FF80003FC0FF80003FC0
7F80003FC07F80003FC07FC0003FC03FC0003FC03FC0003FC01FE0007FC00FE0007FC007F000FF
C003F803BFC001FC0F3FC0007FFE3FC0000FF03FC00000003FC00000003FC00000003FC0000000
3FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000
07FFFE000007FFFE000007FFFE272E7D9F2B>I<03F03F00FFF07FC0FFF1C3E0FFF187E00FF30F
F007F60FF007F60FF007FC07E007FC03C007FC000007FC000007F8000007F8000007F8000007F8
000007F8000007F8000007F8000007F8000007F8000007F8000007F8000007F8000007F8000007
F8000007F8000007F8000007F8000007F80000FFFFE000FFFFE000FFFFE0001C207E9F21>I<01
FF860007FFFE001F00FE003C003E0078001E0078000E00F8000E00F8000E00F8000E00FC000000
FF800000FFFC00007FFFC0007FFFF0003FFFF8001FFFFC0007FFFE0001FFFF00003FFF000000FF
8000003F8060001F80E0000F80E0000F80F0000F80F0000F00F8000F00FC001E00FE001C00FF80
7800F3FFF000C07F800019207D9F20>I<001C0000001C0000001C0000001C0000001C0000003C
0000003C0000003C0000007C0000007C000000FC000001FC000003FC000007FC00001FFFFE00FF
FFFE00FFFFFE0003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC0000
03FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC038003FC03
8003FC038003FC038003FC038003FC038003FC038001FC038001FC070000FE0700007F0E00003F
FC000007F000192E7FAD1F>I<01F80007E0FFF803FFE0FFF803FFE0FFF803FFE00FF8003FE007
F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE0
07F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001FE007F8001F
E007F8001FE007F8001FE007F8001FE007F8003FE007F8003FE003F8007FE003F8007FE001FC00
DFF000FE039FFF007FFF1FFF000FFC1FFF28207D9F2D>I<FFFF801FFCFFFF801FFCFFFF801FFC
0FF80003C007F800038007FC00078003FC00070003FE000F0001FE000E0001FF000E0000FF001C
0000FF001C00007F803800007F803800007FC07800003FC07000003FE0F000001FE0E000001FF1
E000000FF1C000000FF9C0000007FB80000007FB80000003FF00000003FF00000003FF00000001
FE00000001FE00000000FC00000000FC00000000780000000078000026207E9F2B>I<FFFF1FFF
E07FF8FFFF1FFFE07FF8FFFF1FFFE07FF80FF000FE0007800FF800FE00078007F800FE00070007
F8007F00070003FC007F000E0003FC00FF800E0003FE00FF801E0001FE00FF801C0001FE01DFC0
1C0001FF01DFC03C0000FF03DFE0380000FF838FE07800007F838FE07000007F8707F07000007F
C707F0F000003FCF07F8E000003FCE03F8E000001FEE03F9C000001FFC01FDC000001FFC01FFC0
00000FFC01FF8000000FF800FF80000007F800FF00000007F0007F00000007F0007F00000003F0
007E00000003E0003E00000001E0003C00000001C0001C000035207E9F3A>I<7FFF807FFC7FFF
807FFC7FFF807FFC03FE000F0001FE001E0000FF003C0000FF807800007FC07800003FE0F00000
1FE1E000000FF3C000000FFF80000007FF00000003FE00000001FE00000000FF00000000FF8000
0000FFC0000001FFC0000003DFE00000078FF00000078FF800000F07FC00001E03FC00003C01FE
00007800FF0000F000FF8000E0007FC001E0003FC0FFFC01FFFFFFFC01FFFFFFFC01FFFF28207F
9F2B>I<FFFF801FFCFFFF801FFCFFFF801FFC0FF80003C007F800038007FC00078003FC000700
03FE000F0001FE000E0001FF000E0000FF001C0000FF001C00007F803800007F803800007FC078
00003FC07000003FE0F000001FE0E000001FF1E000000FF1C000000FF9C0000007FB80000007FB
80000003FF00000003FF00000003FF00000001FE00000001FE00000000FC00000000FC00000000
7800000000780000000070000000007000000000F000000000E000000001E000007C01C00000FE
03C00000FE03800000FE07800000FE0F000000FC1E000000787C0000003FF00000000FC0000000
262E7E9F2B>I<3FFFFFF83FFFFFF83F800FF03E001FE03C003FE038003FC078007F807800FF80
7001FF007001FE007003FE007007FC000007F800000FF800001FF000001FE000003FC000007FC0
0000FF801C00FF001C01FF001C03FE001C03FC001C07FC003C0FF8003C0FF000381FE000783FE0
00F83FC001F87F8007F8FFFFFFF8FFFFFFF81E207E9F24>I<FFFFFFFFFEFFFFFFFFFE27028094
28>I E /FC 59 123 df<000FF000007FFC0001F80E0003E01F0007C03F000F803F000F803F00
0F801E000F800C000F8000000F8000000F8000000F800000FFFFFF00FFFFFF000F801F000F801F
000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F80
1F000F801F000F801F000F801F000F801F000F801F000F801F007FF0FFE07FF0FFE01B237FA21F
>12 D<387CFEFFFF7F3B03030706060C1C18702008117C8610>44 D<387CFEFEFE7C3807077C86
10>46 D<00FE0007FFC00F83E01F01F03E00F83E00F87C007C7C007C7C007CFC007CFC007EFC00
7EFC007EFC007EFC007EFC007EFC007EFC007EFC007EFC007EFC007EFC007EFC007E7C007C7C00
7C7C007C3E00F83E00F81F01F00F83E007FFC000FE0017207E9F1C>48 D<00180000780001F800
FFF800FFF80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F800
01F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F800
01F8007FFFE07FFFE013207C9F1C>I<03FC000FFF003C1FC07007E07C07F0FE03F0FE03F8FE03
F8FE01F87C01F83803F80003F80003F00003F00007E00007C0000F80001F00003E000038000070
0000E01801C0180380180700180E00380FFFF01FFFF03FFFF07FFFF0FFFFF0FFFFF015207D9F1C
>I<00FE0007FFC00F07E01E03F03F03F03F81F83F81F83F81F81F03F81F03F00003F00003E000
07C0001F8001FE0001FF000007C00001F00001F80000FC0000FC3C00FE7E00FEFF00FEFF00FEFF
00FEFF00FC7E01FC7801F81E07F00FFFC001FE0017207E9F1C>I<0000E00001E00003E00003E0
0007E0000FE0001FE0001FE00037E00077E000E7E001C7E00187E00307E00707E00E07E00C07E0
1807E03807E07007E0E007E0FFFFFEFFFFFE0007E00007E00007E00007E00007E00007E00007E0
00FFFE00FFFE17207E9F1C>I<1000201E01E01FFFC01FFF801FFF001FFE001FF8001BC0001800
0018000018000018000019FC001FFF001E0FC01807E01803E00003F00003F00003F80003F83803
F87C03F8FE03F8FE03F8FC03F0FC03F07007E03007C01C1F800FFF0003F80015207D9F1C>I<00
1F8000FFE003F07007C0F00F01F81F01F83E01F83E01F87E00F07C00007C0000FC0800FC7FC0FC
FFE0FD80F0FF00F8FE007CFE007CFC007EFC007EFC007EFC007E7C007E7C007E7C007E3C007C3E
007C1E00F80F00F00783E003FFC000FF0017207E9F1C>I<6000007800007FFFFE7FFFFE7FFFFC
7FFFF87FFFF87FFFF0E00060E000C0C00180C00300C00300000600000C00001C00001800003800
00780000780000F00000F00000F00001F00001F00001F00003F00003F00003F00003F00003F000
03F00003F00001E00017227DA11C>I<00FE0003FFC00703E00E00F01C00F01C00783C00783E00
783F00783F80783FE0F01FF9E01FFFC00FFF8007FFC003FFE007FFF01E7FF83C1FFC7807FC7801
FEF000FEF0003EF0001EF0001EF0001CF8001C7800383C00381F01F00FFFC001FF0017207E9F1C
>I<01FE0007FF800F83E01E01F03E00F07C00F87C0078FC007CFC007CFC007CFC007EFC007EFC
007EFC007E7C00FE7C00FE3E01FE1E037E0FFE7E07FC7E00207E00007C00007C1E007C3F00F83F
00F83F00F03F01E01E03C01C0F800FFE0003F80017207E9F1C>I<387CFEFEFE7C380000000000
000000387CFEFEFE7C3807167C9510>I<000070000000007000000000F800000000F800000000
F800000001FC00000001FC00000003FE00000003FE00000003FE00000006FF000000067F000000
0E7F8000000C3F8000000C3F800000183FC00000181FC00000381FE00000300FE00000300FE000
00600FF000006007F00000E007F80000FFFFF80000FFFFF800018001FC00018001FC00038001FE
00030000FE00030000FE000600007F000600007F00FFE00FFFF8FFE00FFFF825227EA12A>65
D<FFFFFF8000FFFFFFE00007F001F80007F000FC0007F0007E0007F0007E0007F0007F0007F000
7F0007F0007F0007F0007F0007F0007F0007F0007E0007F000FE0007F000FC0007F003F80007FF
FFF00007FFFFF00007F001FC0007F0007E0007F0003F0007F0003F8007F0001F8007F0001FC007
F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0003F8007F0003F8007F0007F00
07F001FE00FFFFFFF800FFFFFFC00022227EA128>I<0003FE0080001FFF818000FF01E38001F8
003F8003E0001F8007C0000F800F800007801F800007803F000003803F000003807F000001807E
000001807E00000180FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000
FE00000000FE000000007E000000007E000001807F000001803F000001803F000003801F800003
000F8000030007C000060003F0000C0001F800380000FF00F000001FFFC0000003FE000021227D
A128>I<FFFFFF8000FFFFFFF00007F003FC0007F0007E0007F0003F0007F0001F8007F0000FC0
07F00007E007F00007E007F00007F007F00003F007F00003F007F00003F007F00003F807F00003
F807F00003F807F00003F807F00003F807F00003F807F00003F807F00003F807F00003F807F000
03F007F00003F007F00003F007F00007E007F00007E007F0000FC007F0001F8007F0003F0007F0
007E0007F003FC00FFFFFFF000FFFFFF800025227EA12B>I<FFFFFFFCFFFFFFFC07F000FC07F0
003C07F0001C07F0000C07F0000E07F0000E07F0000607F0180607F0180607F0180607F0180007
F0380007F0780007FFF80007FFF80007F0780007F0380007F0180007F0180007F0180307F01803
07F0000307F0000607F0000607F0000607F0000E07F0000E07F0001E07F0003E07F001FCFFFFFF
FCFFFFFFFC20227EA125>I<FFFFFFF8FFFFFFF807F001F807F0007807F0003807F0001807F000
1C07F0001C07F0000C07F0000C07F0180C07F0180C07F0180007F0180007F0380007F0780007FF
F80007FFF80007F0780007F0380007F0180007F0180007F0180007F0180007F0000007F0000007
F0000007F0000007F0000007F0000007F0000007F00000FFFFE000FFFFE0001E227EA123>I<00
03FE0040001FFFC0C0007F00F1C001F8003FC003F0000FC007C00007C00FC00003C01F800003C0
3F000001C03F000001C07F000000C07E000000C07E000000C0FE00000000FE00000000FE000000
00FE00000000FE00000000FE00000000FE00000000FE000FFFFC7E000FFFFC7F00001FC07F0000
1FC03F00001FC03F00001FC01F80001FC00FC0001FC007E0001FC003F0001FC001FC003FC0007F
80E7C0001FFFC3C00003FF00C026227DA12C>I<FFFF83FFFEFFFF83FFFE07F0001FC007F0001F
C007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F000
1FC007F0001FC007F0001FC007F0001FC007FFFFFFC007FFFFFFC007F0001FC007F0001FC007F0
001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007
F0001FC007F0001FC007F0001FC007F0001FC007F0001FC0FFFF83FFFEFFFF83FFFE27227EA12C
>I<FFFFE0FFFFE003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003
F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003
F80003F80003F80003F80003F80003F80003F800FFFFE0FFFFE013227FA115>I<FFFFE000FFFF
E00007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007
F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F00000
07F0001807F0001807F0001807F0001807F0003807F0003807F0007007F0007007F000F007F001
F007F007F0FFFFFFF0FFFFFFF01D227EA122>76 D<FFF000000FFFFFF800001FFF07F800001FE0
06FC000037E006FC000037E006FC000037E0067E000067E0067E000067E0063F0000C7E0063F00
00C7E0061F800187E0061F800187E0060FC00307E0060FC00307E0060FC00307E00607E00607E0
0607E00607E00603F00C07E00603F00C07E00601F81807E00601F81807E00601F81807E00600FC
3007E00600FC3007E006007E6007E006007E6007E006003FC007E006003FC007E006001F8007E0
06001F8007E006001F8007E006000F0007E0FFF00F00FFFFFFF00600FFFF30227EA135>I<FFF8
001FFEFFFC001FFE07FC0000C007FE0000C006FF0000C0067F8000C0063FC000C0061FE000C006
0FE000C0060FF000C00607F800C00603FC00C00601FE00C00600FE00C00600FF00C006007F80C0
06003FC0C006001FE0C006000FF0C0060007F0C0060007F8C0060003FCC0060001FEC0060000FF
C00600007FC00600007FC00600003FC00600001FC00600000FC006000007C006000003C0060000
03C0FFF00001C0FFF00000C027227EA12C>I<0007FC0000003FFF800000FC07E00003F001F800
07E000FC000FC0007E001F80003F001F80003F003F00001F803F00001F807F00001FC07E00000F
C07E00000FC0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE0000
0FE0FE00000FE0FE00000FE07E00000FC07F00001FC07F00001FC03F00001F803F80003F801F80
003F000FC0007E0007E000FC0003F001F80000FC07E000003FFF80000007FC000023227DA12A>
I<FFFFFF00FFFFFFE007F007F007F001FC07F000FC07F0007E07F0007E07F0007F07F0007F07F0
007F07F0007F07F0007F07F0007E07F0007E07F000FC07F001FC07F007F007FFFFE007FFFF0007
F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F00000
07F0000007F0000007F00000FFFF8000FFFF800020227EA126>I<0007FC0000003FFF800000FC
07E00003F001F80007E000FC000FC0007E001F80003F001F80003F003F00001F803F00001F807F
00001FC07E00000FC07E00000FC0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0
FE00000FE0FE00000FE0FE00000FE0FE00000FE07E00000FC07F00001FC07F00001FC03F00001F
803F81F03F801F83F83F000FC70C7E0007E606FC0003F607F80000FF07E000003FFF80000007FF
80200000038020000003C020000003E0E0000003FFE0000001FFC0000001FFC0000000FFC00000
00FF800000007F000000001E00232C7DA12A>I<FFFFFE0000FFFFFFC00007F007F00007F001F8
0007F000FC0007F0007E0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F000
7F0007F0007E0007F000FC0007F001F80007F007F00007FFFFC00007FFFF800007F00FE00007F0
07F00007F003F80007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007
F001FC0007F001FC0007F001FC0607F000FE0607F000FF0CFFFF803FF8FFFF800FF027227EA12A
>I<01FC0407FF8C1F03FC3C007C7C003C78001C78001CF8000CF8000CFC000CFC0000FF0000FF
E0007FFF007FFFC03FFFF01FFFF80FFFFC03FFFE003FFE0003FF00007F00003F00003FC0001FC0
001FC0001FE0001EE0001EF0003CFC003CFF00F8C7FFE080FF8018227DA11F>I<7FFFFFFF807F
FFFFFF807E03F80F807803F807807003F803806003F80180E003F801C0E003F801C0C003F800C0
C003F800C0C003F800C0C003F800C00003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F800000003F800000003F800000003F800000003F800000003F8
00000003F800000003F800000003F800000003F800000003F800000003F800000003F8000003FF
FFF80003FFFFF80022227EA127>I<FFFF803FFCFFFF803FFC07F000018007F000018007F00001
8007F000018007F000018007F000018007F000018007F000018007F000018007F000018007F000
018007F000018007F000018007F000018007F000018007F000018007F000018007F000018007F0
00018007F000018007F000018007F000018007F000018007F000018003F000030003F800030001
F800060000FC000E00007E001C00003F80F800000FFFE0000001FF000026227EA12B>I<FFFF80
0FFEFFFF800FFE07F00000C007F80000C003F800018003F800018001FC00030001FC00030001FE
00070000FE00060000FF000600007F000C00007F800C00003F801800003F801800003FC0380000
1FC03000001FE03000000FE06000000FF060000007F0C0000007F0C0000007F9C0000003F98000
0003FD80000001FF00000001FF00000000FE00000000FE00000000FE000000007C000000007C00
000000380000000038000027227FA12A>I<FFFF800FFEFFFF800FFE07F80000C007F80001C003
FC00018001FE00030001FE00070000FF00060000FF000C00007F801C00003FC01800003FC03000
001FE07000000FF06000000FF0E0000007F8C0000003FD80000003FF80000001FF00000001FE00
000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE
00000000FE00000000FE00000000FE00000000FE0000001FFFF000001FFFF00027227FA12A>89
D<07FC001FFF803F07C03F03E03F01E03F01F01E01F00001F00001F0003FF003FDF01FC1F03F01
F07E01F0FC01F0FC01F0FC01F0FC01F07E02F07E0CF81FF87F07E03F18167E951B>97
D<FF000000FF0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F00
00001F0000001F0000001F0000001F0FE0001F3FF8001FF07C001F801E001F001F001F000F801F
000F801F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000F80
1F001F801F801F001FC03E001EE07C001C3FF800180FC0001A237EA21F>I<00FF8007FFE00F83
F01F03F03E03F07E03F07C01E07C0000FC0000FC0000FC0000FC0000FC0000FC00007C00007E00
007E00003E00301F00600FC0E007FF8000FE0014167E9519>I<0001FE000001FE0000003E0000
003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E00
01FC3E0007FFBE000F81FE001F007E003E003E007E003E007C003E00FC003E00FC003E00FC003E
00FC003E00FC003E00FC003E00FC003E00FC003E007C003E007C003E003E007E001E00FE000F83
BE0007FF3FC001FC3FC01A237EA21F>I<00FE0007FF800F87C01E01E03E01F07C00F07C00F8FC
00F8FC00F8FFFFF8FFFFF8FC0000FC0000FC00007C00007C00007E00003E00181F00300FC07003
FFC000FF0015167E951A>I<003F8000FFC001E3E003C7E007C7E00F87E00F83C00F80000F8000
0F80000F80000F80000F8000FFFC00FFFC000F80000F80000F80000F80000F80000F80000F8000
0F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80007FF8007FF800
13237FA211>I<03FC1E0FFF7F1F0F8F3E07CF3C03C07C03E07C03E07C03E07C03E07C03E03C03
C03E07C01F0F801FFF0013FC003000003000003800003FFF801FFFF00FFFF81FFFFC3800FC7000
3EF0001EF0001EF0001EF0001E78003C7C007C3F01F80FFFE001FF0018217E951C>I<FF000000
FF0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000
001F0000001F0000001F07E0001F1FF8001F307C001F403C001F803E001F803E001F003E001F00
3E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F
003E001F003E001F003E00FFE1FFC0FFE1FFC01A237EA21F>I<1C003E007F007F007F003E001C
000000000000000000000000000000FF00FF001F001F001F001F001F001F001F001F001F001F00
1F001F001F001F001F001F001F001F00FFE0FFE00B247EA310>I<FF000000FF0000001F000000
1F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000
001F00FF801F00FF801F0038001F0060001F01C0001F0380001F0700001F0E00001F1C00001F7E
00001FFF00001FCF00001F0F80001F07C0001F03E0001F01E0001F01F0001F00F8001F007C001F
003C00FFE0FFC0FFE0FFC01A237EA21E>107 D<FF00FF001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00
1F001F001F001F00FFE0FFE00B237EA210>I<FF07F007F000FF1FFC1FFC001F303E303E001F40
3E403E001F801F801F001F801F801F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00
1F001F001F001F001F001F001F001F001F001F001F00FFE0FFE0FFE0FFE0FFE0FFE02B167E9530
>I<FF07E000FF1FF8001F307C001F403C001F803E001F803E001F003E001F003E001F003E001F
003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E00
1F003E00FFE1FFC0FFE1FFC01A167E951F>I<00FE0007FFC00F83E01E00F03E00F87C007C7C00
7C7C007CFC007EFC007EFC007EFC007EFC007EFC007EFC007E7C007C7C007C3E00F81F01F00F83
E007FFC000FE0017167E951C>I<FF0FE000FF3FF8001FF07C001F803E001F001F001F001F801F
001F801F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F001F80
1F001F801F803F001FC03E001FE0FC001F3FF8001F0FC0001F0000001F0000001F0000001F0000
001F0000001F0000001F0000001F000000FFE00000FFE000001A207E951F>I<FE1F00FE3FC01E
67E01EC7E01E87E01E87E01F83C01F00001F00001F00001F00001F00001F00001F00001F00001F
00001F00001F00001F00001F0000FFF000FFF00013167E9517>114 D<0FF3003FFF00781F0060
0700E00300E00300F00300FC00007FE0007FF8003FFE000FFF0001FF00000F80C00780C00380E0
0380E00380F00700FC0E00EFFC00C7F00011167E9516>I<018000018000018000018000038000
0380000780000780000F80003F8000FFFF00FFFF000F80000F80000F80000F80000F80000F8000
0F80000F80000F80000F80000F80000F81800F81800F81800F81800F81800F830007C30003FE00
00F80011207F9F16>I<FF01FE00FF01FE001F003E001F003E001F003E001F003E001F003E001F
003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E00
1F007E001F00FE000F81BE0007FF3FC001FC3FC01A167E951F>I<FFE01FE0FFE01FE00F800600
0F8006000FC00E0007C00C0007E01C0003E0180003E0180001F0300001F0300000F8600000F860
00007CC000007CC000007FC000003F8000003F8000001F0000001F0000000E0000000E00001B16
7F951E>I<FFE7FF07F8FFE7FF07F81F007800C00F807801800F807C01800F807C018007C07E03
0007C0DE030007E0DE070003E0DF060003E18F060001F18F0C0001F38F8C0001FB079C0000FB07
D80000FE03D800007E03F000007E03F000007C01F000003C01E000003800E000001800C0002516
7F9528>I<FFE07FC0FFE07FC00F801C0007C0380003E0700003F0600001F8C00000F98000007F
8000003F0000001F0000001F8000003FC0000037C0000063E00000C1F00001C0F8000380FC0007
007E000E003E00FF80FFE0FF80FFE01B167F951E>I<FFE01FE0FFE01FE00F8006000F8006000F
C00E0007C00C0007E01C0003E0180003E0180001F0300001F0300000F8600000F86000007CC000
007CC000007FC000003F8000003F8000001F0000001F0000000E0000000E0000000C0000000C00
000018000078180000FC380000FC300000FC60000069C000007F8000001F0000001B207F951E>
I<7FFFF07FFFF07C03E07007C0600FC0E01F80C01F00C03E00C07E0000FC0000F80001F00003F0
3007E03007C0300F80701F80703F00603E00E07C03E0FFFFE0FFFFE014167E9519>I
E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
0 bop 601 329 a FC(THE)19 b(UNIVERSITY)f(OF)h(CALGAR)-5 b(Y)258
594 y FB(Implemen)n(ting)26 b(the)h(Charit)n(y)f(Abstract)i(Mac)n(hine)1007
859 y(b)n(y)776 1123 y(Dale)f(Barry)g(Y)-7 b(ee)918 1403 y
FC(A)19 b(THESIS)264 1492 y(SUBMITTED)f(TO)h(THE)f(F)-6 b(A)n(CUL)h(TY)21
b(OF)e(GRADUA)-5 b(TE)19 b(STUDIES)173 1582 y(IN)g(P)-5 b(AR)g(TIAL)19
b(FULFILLMENT)f(OF)h(THE)f(REQUIREMENTS)g(F)n(OR)h(THE)563
1672 y(DEGREE)f(OF)h(MASTER)24 b(OF)h(SCIENCE)486 1901 y(DEP)-5
b(AR)g(TMENT)19 b(OF)g(COMPUTER)25 b(SCIENCE)759 2131 y(CALGAR)-5
b(Y,)19 b(ALBER)-5 b(T)g(A)800 2221 y(SEPTEMBER,)18 b(1995)774
2449 y FA(c)760 2451 y Fz(\015)h FC(Dale)f(Barry)g(Y)-5 b(ee)19
b(1995)p eop
%%Page: 2 2
1 bop 601 189 a FC(THE)19 b(UNIVERSITY)f(OF)h(CALGAR)-5 b(Y)565
279 y(F)f(A)n(CUL)h(TY)21 b(OF)e(GRADUA)-5 b(TE)19 b(STUDIES)200
452 y FA(The)i(undersigned)h(certify)e(that)i(they)f(ha)o(v)o(e)g(read,)h
(and)h(recomme)o(nd)c(to)j(the)f(F)l(acult)o(y)g(of)150 541
y(Graduate)f(Studies)f(for)h(acceptance,)f(a)h(thesis)f(en)o(titled,)f
(\\Implemen)n(ting)f(the)i(Charit)o(y)g(Ab-)150 631 y(stract)11
b(Mac)o(hine")g(submitted)e(b)o(y)i(Dale)g(Barry)g(Y)l(ee)f(in)h(partial)g
(ful\014llmen)o(t)d(of)j(the)g(requiremen)o(ts)150 721 y(for)17
b(the)f(degree)f(of)i(MASTER)f(OF)g(SCIENCE.)p 1050 935 900
2 v 1050 992 a(Sup)q(ervisor,)g(Dr.)21 b(R.)16 b(Co)q(c)o(k)o(ett)1050
1082 y(Departmen)o(t)f(of)h(Computer)g(Science)p 1050 1251
V 1050 1308 a(Dr.)21 b(K.)16 b(Lo)q(ose)1050 1397 y(Departmen)o(t)f(of)h
(Computer)g(Science)p 1050 1567 V 1050 1624 a(Dr.)21 b(C.)16
b(La\015amme)1050 1714 y(Departmen)o(t)f(of)h(Mathematics)f(&)h(Statistics)
150 2600 y(Date)p 269 2600 750 3 v 1037 2700 a Fy(ii)p eop
%%Page: 3 3
2 bop 1642 647 a FB(Abstract)p 150 689 1800 2 v 150 876 a FA(This)15
b(thesis)g(describ)q(es)g(a)g(series)f(of)i(three)e(abstract)i(mac)o(hines,)d
(with)i(asso)q(ciated)h(compilation)150 966 y(pro)q(cedures,)g(for)g(the)g
(Charit)o(y)g(programming)f(language.)22 b(Eac)o(h)16 b(mac)o(hine)e(is)i(a)h
(re\014nemen)o(t)d(of)150 1055 y(the)i(previous,)g(getting)g(closer)g(to)g
(the)g(lev)o(el)e(of)j(the)f(ph)o(ysical)f(mac)o(hine.)200
1145 y(The)k(curren)o(t)g(C)h(implem)o(en)n(tation)d(of)j(Charit)o(y)f(is)h
(based)g(on)g(the)f(last)h(of)g(these)f(mac)o(hines)150 1235
y(and)c(is)g(roughly)g(t)o(w)o(en)o(t)o(y)f(times)e(faster)k(than)f(the)g
(original)f(SML)i(implem)o(e)o(n)o(tation,)c(whic)o(h)j(w)o(as)150
1324 y(based)i(on)f(the)h(\014rst.)1031 2700 y Fy(iii)p eop
%%Page: 4 4
3 bop 1281 633 a FB(Ac)n(kno)n(wledgemen)n(ts)p 150 689 1800
2 v 150 876 a FA(I)14 b(w)o(ould)g(lik)o(e)e(to)j(express)e(m)o(y)g(sincere)g
(gratitude)h(to)g(Dr.)21 b(Co)q(c)o(k)o(ett)13 b(for)i(his)f(unlimited)d
(supp)q(ort,)150 966 y(encouragemen)o(t,)i(and)i(patience)e(as)i(he)f(guided)
h(me)d(through)k(the)e(pro)q(cess)h(of)g(researc)o(hing)e(and)150
1055 y(completing)g(this)i(thesis.)21 b(It)15 b(has)g(b)q(een)g(a)h(rew)o
(arding)f(exp)q(erience)e(w)o(orking)j(with)f(Dr.)21 b(Co)q(c)o(k)o(ett)150
1145 y(and)c(learning)f(from)f(him.)200 1235 y(Sp)q(ecial)k(thanks)i(to)g
(the)f(Charit)o(y)g(group:)30 b(T)l(om)19 b(F)l(ukushima,)g(Marc)h(Sc)o(hro)q
(eder,)h(Charles)150 1324 y(T)l(uc)o(k)o(ey)l(,)11 b(and)j(P)o(eter)e(V)l
(esely)l(.)18 b(Their)13 b(participation)f(in)h(the)f(Charit)o(y)h(pro)s
(ject)f(w)o(as)h(fundamen)o(tal)150 1414 y(to)k(the)f(success)g(of)g(this)g
(thesis.)200 1504 y(In)g(addition,)g(I)f(am)h(grateful)g(for)g(the)g(supp)q
(ort)i(and)e(encouragemen)o(t)f(of)h(friends)g(in)g(the)g(de-)150
1593 y(partmen)o(t,)e(esp)q(ecially:)19 b(Ulric)o(h)14 b(Hensel,)h(Ying)g
(Liu,)h(Camille)d(Sinanan,)j(and)h(Da)o(vid)e(Sp)q(o)q(oner.)200
1683 y(T)l(o)k(m)o(y)d(family:)23 b(thank)18 b(y)o(ou)h(for)f(y)o(our)g
(understanding)h(and)g(patience.)26 b(It)18 b(enabled)g(me)f(to)150
1773 y(p)q(ersev)o(ere)e(and)i(complete)d(m)o(y)g(thesis.)1032
2700 y Fy(iv)p eop
%%Page: 5 5
4 bop 1635 647 a FB(Con)n(ten)n(ts)p 150 689 1800 2 v 150 846
a FC(Appro)n(v)m(al)19 b(Sheet)1391 b(ii)150 931 y(Abstract)1539
b(iii)150 1016 y(Ac)n(kno)n(wledgemen)n(ts)1289 b(iv)150 1100
y(Con)n(ten)n(ts)1552 b(v)150 1185 y(List)18 b(of)h(T)-5 b(ables)1392
b(viii)150 1270 y(List)18 b(of)h(Figures)1398 b(ix)150 1355
y(Chapter)19 b(1.)28 b(In)n(tro)r(duction)1172 b(1)150 1414
y FA(1.1.)24 b(Structure)16 b(of)h(the)f(Thesis)9 b Fx(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)58 b FA(2)150 1499 y FC(Chapter)19 b(2.)28
b(Bac)n(kground)1189 b(4)150 1559 y FA(2.1.)24 b(The)17 b Fx(\025)p
FA({calculus)i Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)58 b FA(4)150 1619 y(2.2.)24 b(Ev)m(aluation)17
b(tec)o(hniques)10 b Fx(:)e(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)58
b FA(5)150 1679 y(2.3.)24 b(Implem)o(en)o(ti)o(ng)14 b(functional)i
(languages)10 b Fx(:)g(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)58 b FA(8)223 1738 y(2.3.1.)24 b(SECD)17 b(mac)o(hine)i
Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)58 b
FA(9)223 1798 y(2.3.2.)24 b(Com)o(binators)i Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(12)223 1858 y(2.3.3.)24
b(Other)16 b(implem)o(en)o(tations)d Fx(:)7 b(:)i(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f
(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(17)150 1943 y FC(Chapter)19 b(3.)28 b(The)18 b(Charit)n(y)h(programming)
d(language)572 b(19)150 2003 y FA(3.1.)24 b(Basic)16 b(t)o(yp)q(es)g(and)h
(terms)6 b Fx(:)h(:)i(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(20)150 2062 y(3.2.)24 b(Inductiv)o(e)15 b(datat)o(yp)q(es)10
b Fx(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(21)223 2122 y(3.2.1.)24 b(Bo)q(oleans)17 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(21)223
2182 y(3.2.2.)24 b(Natural)17 b(n)o(um)o(b)q(ers)7 b Fx(:)g(:)i(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(23)223 2242 y(3.2.3.)24
b(Lists)14 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(25)223 2301 y(3.2.4.)24
b(Success)16 b(or)h(F)l(ail)e(datat)o(yp)q(e)c Fx(:)f(:)f(:)g(:)f(:)h(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(27)150 2361 y(3.3.)24 b(Coinductiv)o(e)15 b(datat)o(yp)q(es)24
b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(28)223
2421 y(3.3.1.)24 b(In\014nite)16 b(lists)21 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(28)223 2481 y(3.3.2.)24
b(Colists)17 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(30)150 2541 y(3.4.)24 b(P)o(assing)17
b(functions)g(as)f(parameters)26 b Fx(:)8 b(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(31)150
2600 y(3.5.)24 b(Other)16 b(examples)6 b Fx(:)h(:)i(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(32)1038 2700
y Fy(v)p eop
%%Page: 6 6
5 bop 150 141 a FC(Chapter)19 b(4.)28 b(The)18 b(Charit)n(y)h(Abstract)g(Mac)
n(hine)f(:)25 b(basics)491 b(33)150 201 y FA(4.1.)24 b(Categorical)17
b(com)o(binators)e(and)i(their)e(t)o(yp)q(es)d Fx(:)d(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(33)223 261 y(4.1.1.)24 b(T)o(yp)q(es)9
b Fx(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)33 b FA(34)223 321 y(4.1.2.)24 b(Categorical)17
b(com)o(binators)12 b Fx(:)c(:)h(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(34)223 382
y(4.1.3.)24 b(Equations)17 b(b)q(et)o(w)o(een)f(com)o(binators)c
Fx(:)7 b(:)i(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(36)150 442 y(4.2.)24 b(Com)o(binators)16 b(for)h(pro)q(ducts)22
b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(36)150 502 y(4.3.)24
b(T)l(ranslating)17 b(to)g(com)o(binators)e Fx(:)9 b(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(39)223 562 y(4.3.1.)24 b(Resolving)16 b(v)m(ariable)g(scop)q(e)8
b Fx(:)i(:)f(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)33 b FA(40)150 622 y(4.4.)24 b(Ev)m(aluation)17
b(of)g(categorical)f(com)o(binators)h Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(42)150 682 y(4.5.)24 b(The)17
b(basic)f(Charit)o(y)g(abstract)h(mac)o(hine)11 b Fx(:)6 b(:)j(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(43)150
742 y(4.6.)24 b(F)l(unction)16 b(parameters)f Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)33 b FA(46)150 830 y FC(Chapter)19 b(5.)28
b(The)18 b(Charit)n(y)h(Abstract)g(Mac)n(hine)f(:)25 b(datat)n(yp)r(es)396
b(52)150 890 y FA(5.1.)24 b(Inductiv)o(e)15 b(datat)o(yp)q(es)10
b Fx(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(52)223 950 y(5.1.1.)24 b(Strong)18 b(datat)o(yp)q(es)26
b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(53)223
1010 y(5.1.2.)24 b(Mapping)17 b(o)o(v)o(er)e(inductiv)o(e)g(datat)o(yp)q(es)7
b Fx(:)i(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f
(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(55)223 1070 y(5.1.3.)24 b(The)17 b(fold)f(com)o(binator)22
b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(57)223 1130 y(5.1.4.)24
b(The)17 b(case)f(com)o(binator)f Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(59)150 1190 y(5.2.)24 b(T)l(ranslation)17 b(to)g(com)o(binators)e
Fx(:)9 b(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(60)150 1251 y(5.3.)24
b(Rewrite)15 b(rules)h(and)h(mac)o(hine)d(transitions)f Fx(:)c(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(60)150 1311
y(5.4.)24 b(Examples)15 b(of)i(inductiv)o(e)d(datat)o(yp)q(es)e
Fx(:)d(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)33 b FA(61)223 1371 y(5.4.1.)24 b(Bo)q(oleans)17 b Fx(:)9
b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(62)223 1431 y(5.4.2.)24 b(Natural)17 b(n)o(um)o(b)q(ers)7
b Fx(:)g(:)i(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(64)223
1491 y(5.4.3.)24 b(Lists)14 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(65)150
1551 y(5.5.)24 b(Coinductiv)o(e)15 b(Datat)o(yp)q(es)e Fx(:)d(:)f(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)33 b FA(69)223 1611 y(5.5.1.)24 b(Mapping)17
b(o)o(v)o(er)e(coinductiv)o(e)g(data)i(t)o(yp)q(es)c Fx(:)c(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(69)223 1671 y(5.5.2.)24
b(Unfold)16 b(com)o(binator)d Fx(:)c(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(71)223 1731 y(5.5.3.)24 b(Record)16 b(com)o(binator)8
b Fx(:)g(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(72)150 1791
y(5.6.)24 b(T)l(ranslation)17 b(to)g(com)o(binators)e Fx(:)9
b(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)33 b FA(72)150 1851 y(5.7.)24 b(Rewrite)15
b(rules)h(and)h(mac)o(hine)d(transitions)f Fx(:)c(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(72)150 1912 y(5.8.)24
b(Examples)15 b(of)i(coinductiv)o(e)d(com)o(binators)6 b Fx(:)i(:)h(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(73)223
1972 y(5.8.1.)24 b(Streams)16 b(and)g(in\014nite)g(lists)j
Fx(:)9 b(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)33 b FA(73)150 2060 y FC(Chapter)19 b(6.)28
b(Implem)o(en)n(ting)15 b(The)k(Charit)n(y)g(Abstract)f(Mac)n(hine)337
b(76)150 2120 y FA(6.1.)24 b(Designing)17 b(a)f(new)h(abstract)g(mac)o(hine)k
Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)33 b FA(77)223 2180 y(6.1.1.)24 b(The)17 b(abstract)g(mac)o(hine)e
Fx(:)9 b(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(77)223 2240 y(6.1.2.)24
b(Sharing)17 b(in)f(pro)q(ducts)g Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(79)223 2300 y(6.1.3.)24 b(Mapping)17 b(o)o(v)o(er)e(pro)q(ducts)i(and)g
(the)f(t)o(yp)q(e)g(1)26 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(79)223 2360 y(6.1.4.)24 b(Compiling)15 b(categorical)h(com)o(binators)i
Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(80)150 2420 y(6.2.)24 b(Inductiv)o(e)15 b(Datat)o(yp)q(es)23
b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b
FA(80)223 2480 y(6.2.1.)24 b(Compiling)15 b(inductiv)o(e)f(com)o(binators)6
b Fx(:)i(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(82)223 2540 y(6.2.2.)24 b(P)o(artial)16 b(ev)m(aluation)h(of)f(inductiv)
o(e)f(op)q(erators)10 b Fx(:)g(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)
h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(83)223 2600 y(6.2.3.)24 b(Example:)c(Compiling)15 b(the)h(app)q(end)h
(function)7 b Fx(:)i(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(84)1032
2700 y Fy(vi)p eop
%%Page: 7 7
6 bop 150 141 a FA(6.3.)24 b(Coinductiv)o(e)15 b(Datat)o(yp)q(es)e
Fx(:)d(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(85)223 201
y(6.3.1.)24 b(Lazy)17 b(coinductiv)o(e)d(datat)o(yp)q(es)h
Fx(:)8 b(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)33 b FA(85)223 261 y(6.3.2.)24 b(Adding)16 b(sharing)h(to)g
(coinductiv)o(e)d(datat)o(yp)q(es)5 b Fx(:)10 b(:)f(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)33 b FA(87)150 320 y(6.4.)24 b(Adding)16 b(the)g(Natural)g(n)o(um)o(b)q
(ers)f(as)i(primitiv)o(e)c(t)o(yp)q(es)i Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(88)150 380 y(6.5.)24 b(Displa)o(ying)16 b(coinductiv)o(e)e(datat)o(yp)q
(es)26 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)33 b FA(90)150 465 y FC(Chapter)19 b(7.)28 b(Linearizing)16
b(the)j(abstract)f(mac)n(hine)647 b(93)150 525 y FA(7.1.)24
b(Basic)16 b(com)o(binators)k Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)33 b FA(94)150 584 y(7.2.)24 b(The)17 b(linear)e(datat)o(yp)q
(es)d Fx(:)e(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(96)150 644 y(7.3.)24 b(Linear)17 b(inductiv)o(e)d(datat)o(yp)q(es)23
b Fx(:)9 b(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(97)150 704 y(7.4.)24
b(Linear)17 b(coinductiv)o(e)d(datat)o(yp)q(es)23 b Fx(:)9
b(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)33 b FA(99)150 764 y(7.5.)24 b(Linear)17 b(natural)f(n)o(um)o
(b)q(ers)k Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g FA(101)150
824 y(7.6.)24 b(Linear)17 b(function)f(\(macro\))f(passing)27
b Fx(:)8 b(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g FA(102)150 908 y FC(Chapter)19 b(8.)28 b(Results)17
b(and)i(Conclusions)829 b(104)150 993 y(Bibliograph)n(y)1401
b(106)150 1078 y(App)r(endix)18 b(A.)28 b(F)-5 b(ormal)17 b(De\014nition)h
(of)h(Charit)n(y)670 b(109)150 1137 y FA(A.1.)23 b(V)l(ariable)16
b(bases)25 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g FA(109)150 1197 y(A.2.)23 b(T)l(erms)13 b Fx(:)8
b(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g FA(109)150 1257 y(A.3.)23 b(Abstracted)16
b(maps)c Fx(:)d(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
FA(111)150 1342 y FC(App)r(endix)18 b(B.)27 b(A)19 b(sample)e(Charit)n(y)i
(program)713 b(112)150 1401 y FA(B.1.)23 b(Quic)o(ksort)10
b Fx(:)e(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g FA(112)1025 2700 y Fy(vii)p eop
%%Page: 8 8
7 bop 1473 647 a FB(List)27 b(of)f(T)-7 b(ables)p 150 689 1800
2 v 223 846 a FA(4.1)50 b(State)17 b(transition)f(rules)g(for)g(the)g
(calling)g(a)h(function)h Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(48)223
906 y(4.2)50 b(State)17 b(transition)f(rules)g(for)g(the)g(returning)h(from)e
(a)h(function)27 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)33 b FA(49)223 1007 y(6.1)50 b(State)17 b(transition)f(rules)g(for)g
(the)g(basic)h(instructions)f Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(79)223
1067 y(6.2)50 b(State)17 b(transition)f(rule)g(for)g(mapping)g(o)o(v)o(er)f
(pro)q(ducts)25 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(80)223 1127 y(6.3)50
b(State)17 b(transition)f(rules)g(for)g(the)g(inductiv)o(e)f(datat)o(yp)q(es)
h Fx(:)9 b(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)33 b FA(82)223 1186 y(6.4)50 b(Additional)16 b(state)g
(transition)h(rules)f(for)g(datat)o(yp)q(es)7 b Fx(:)j(:)f(:)g(:)g(:)g(:)g(:)
g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(83)223 1246 y(6.5)50 b(State)17 b(transition)f(rules)g(for)g(the)g
(records)7 b Fx(:)i(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33
b FA(86)223 1306 y(6.6)50 b(State)17 b(transition)f(rules)g(for)g(the)g
(destructors)h(and)g(up)q(dating)g(a)g(closure)c Fx(:)c(:)g(:)g(:)g(:)g(:)g
(:)33 b FA(88)223 1366 y(6.7)50 b(State)17 b(transition)f(for)h
Fx(N)k FA(datat)o(yp)q(e)e Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(89)223 1425 y(6.8)50 b(State)17
b(transition)f(for)h Fx(N)k FA(\\case")c(instruction)8 b Fx(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)33 b FA(89)223 1485 y(6.9)50 b(State)17
b(transition)f(for)h Fx(N)k FA(\\fold")c(instruction)e Fx(:)9
b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)33 b FA(90)223 1587 y(7.1)50
b(State)17 b(transition)f(rules)g(for)g(the)g(basic)h(instructions)f
Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)33 b FA(96)223 1646 y(7.2)50 b(State)17
b(transition)f(rules)g(for)g(the)g(inductiv)o(e)f(datat)o(yp)q(es)h
Fx(:)9 b(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)33 b FA(99)223 1706 y(7.3)50 b(State)17 b(transition)f(rules)g
(for)g(the)g(building)g(closures)10 b Fx(:)f(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
FA(101)223 1766 y(7.4)50 b(State)17 b(transition)f(rules)g(for)g(up)q(dating)
i(a)e(closure)9 b Fx(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g FA(101)223
1826 y(7.5)50 b(State)17 b(transition)f(for)h Fx(N)k FA(datat)o(yp)q(e)e
Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
FA(102)223 1885 y(7.6)50 b(State)17 b(transition)f(for)h(linear)e(function)h
(passing)h Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g FA(103)223
1945 y(7.7)50 b(State)17 b(transition)f(for)h(linear)e(function)h(passing)h
Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g FA(103)1019 2700 y Fy(viii)p
eop
%%Page: 9 9
8 bop 1437 633 a FB(List)27 b(of)g(Figures)p 150 689 1800 2
v 223 846 a FA(6.1)50 b(The)17 b(inductiv)o(e)d(com)o(binator)25
b Fx(:)9 b(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)
g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)33 b FA(81)223 947 y(7.1)50 b(A)16 b(view)g(of)g(the)g
(induct)g(instruction)27 b Fx(:)9 b(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)g
(:)g(:)g(:)g(:)g(:)g(:)33 b FA(97)1032 2700 y Fy(ix)p eop
%%Page: 1 10
9 bop 1574 523 a Fw(Chapter)34 b Fv(1)1506 647 y FB(In)n(tro)r(duction)p
150 689 1800 2 v 150 876 a FA(F)l(unctional)16 b(programming)e(languages)j
(promote)f(a)g(st)o(yle)f(of)h(writing)g(programs)g(where)g(small)150
966 y(functions)j(are)f(glued)h(together)f(through)i(comp)q(osition)e(and)h
(function)f(application)h(to)g(build)150 1056 y(larger)e(programs.)24
b(This)18 b(idea)f(of)g(building)g(b)o(y)f(comp)q(osing)h(is)g(not)h(new,)f
(as)h(it)f(is)g(encouraged)150 1146 y(through)25 b(structured)e(programming)f
(in)i(imp)q(erativ)o(e)c(languages.)45 b(Ho)o(w)o(ev)o(er,)23
b(unlik)o(e)f(these)150 1237 y(imp)q(erativ)o(e)c(languages,)23
b(functional)e(languages)i(do)e(not)h(generally)e(allo)o(w)h(manipulation)f
(of)150 1327 y(the)i(global)h(state)f(of)h(the)f(system)f(through)i
(commands.)38 b(Rather,)24 b(the)e(abilit)o(y)f(to)h(mo)q(dify)150
1417 y(the)f(state)h(has)g(b)q(een)f(remo)o(v)o(ed,)f(eliminating)f(\\side)j
(e\013ects")f(asso)q(ciated)i(with)e(unexp)q(ected)150 1507
y(state)c(manipulation.)22 b(This)17 b(mak)o(es)e(functions)i(\\referen)o
(tially)d(transparen)o(t".)24 b(A)16 b(language)i(is)150 1597
y(referen)o(tially)c(transparen)o(t)j(if,)f(whenev)o(er)g(a)h(function)g(is)f
(giv)o(en)g(the)h(same)e(argumen)o(ts,)h(it)g(will)150 1687
y(pro)o(vide)i(the)g(same)f(answ)o(er.)28 b(In)18 b(imp)q(erativ)o(e)e
(languages)j(the)f(presence)g(of)g(state)h(\(eg:)26 b(global)150
1777 y(v)m(ariables\))13 b(destro)o(ys)g(this)h(transparency)l(.)20
b(Lac)o(k)13 b(of)h(referen)o(tial)d(transparency)j(can)f(complicate)150
1867 y(the)j(in)o(teraction)f(b)q(et)o(w)o(een)h(mo)q(dules,)e(sometimes)g
(resulting)h(in)h(unexp)q(ected)g(b)q(eha)o(vior.)200 1957
y(There)c(has)h(b)q(een)f(m)o(uc)o(h)e(supp)q(ort)j(and)g(argumen)o(tation)e
(for)i(using)g(functional)e(programming)150 2047 y(languages)17
b([Bac78,)f(Hug89)q(])g(b)q(ecause)g(of)h(adv)m(an)o(tages)g(suc)o(h)f(as:)
253 2150 y Fz(\017)21 b FA(implici)o(t)13 b(memory)h(managemen)o(t)253
2240 y Fz(\017)21 b FA(p)q(olymorphic)14 b(datat)o(yp)q(es)j(and)g(higher)f
(order)g(functions)253 2330 y Fz(\017)21 b FA(referen)o(tial)14
b(transparency)253 2420 y Fz(\017)21 b FA(suitabilit)o(y)14
b(for)j(implem)o(e)o(n)o(tation)d(on)j(parallel)e(mac)o(hines)253
2510 y Fz(\017)21 b FA(shorter)16 b(and)h(more)e(abstract)i(programs)253
2600 y Fz(\017)k FA(mathematical)13 b(foundations)k(and)g(formal)e(seman)o
(tics)1039 2700 y Fy(1)p eop
%%Page: 2 11
10 bop 834 33 a Fy(1.)24 b(INTR)o(ODUCTION)660 b(2)253 141
y Fz(\017)21 b FA(pattern)16 b(matc)o(hing)f(and)h(expressiv)o(e)f(syn)o(tax)
150 244 y(Despite)23 b(these)g(adv)m(an)o(tages,)j(functional)d(programming)e
(languages)k(are)e(still)f(widely)h(con-)150 334 y(sidered)c(to)h(b)q(e)g(of)
g(academic)e(and/or)j(educational)f(in)o(terest)e(only)l(.)32
b(T)l(raditional)20 b(imp)q(erativ)o(e)150 424 y(languages)15
b(mirror)d(more)g(closely)h(mac)o(hine)e(arc)o(hitecture)h(and)j(th)o(us)e
(are)h(able)f(to)h(pro)q(duce)g(pro-)150 515 y(grams)e(whic)o(h)f(are)h(more)
f(resource)h(e\016cien)o(t)e(when)j(compared)e(with)h(their)f(functional)h(v)
o(ersions.)150 605 y(In)19 b(fact,)g(past)h(measuremen)o(ts)c(of)k(cen)o
(tral)e(pro)q(cessor)i(usage,)g(memory)d(usage)j(and)f(resp)q(onse)150
695 y(times)f(of)j(imp)q(erativ)o(e)c(programs)j(illustrate)f(the)h(sup)q
(erior)g(resource)g(usage)h(o)o(v)o(er)e(functional)150 785
y(language)e(coun)o(terparts)g([P)o(au91].)200 875 y(Considerable)f(study)h
(has)g(b)q(een)f(dev)o(oted)g(to)g(designing)h(ev)m(aluators)g(and)g
(compilers)d(whic)o(h)150 965 y(close)j(the)h(e\016ciency)d(gap)k(b)q(et)o(w)
o(een)e(functional)g(languages)i(and)f(imp)q(erativ)o(e)d(languages.)27
b(In-)150 1055 y(deed,)20 b(there)f(is)g(still)g(considerably)g(more)f
(researc)o(h)h(to)i(b)q(e)e(done)h(b)q(efore)g(it)f(will)g(b)q(e)h(p)q
(ossible)150 1146 y(to)e(implem)o(en)n(t)d(a)i(functional)g(language)i(whose)
f(p)q(erformance)e(is)h(comparable)f(to)i(traditional)150 1236
y(imp)q(erativ)o(e)c(languages.)200 1326 y(Compilers)19 b(for)j(functional)e
(languages)j(often)e(generate)g(co)q(de)g(whic)o(h)f(is)h(executed)f(b)o(y)h
(an)150 1416 y Fu(abstr)n(act)e(machine)p FA(.)27 b(These)18
b(abstract)g(mac)o(hines)e(sim)o(ulate)g(the)h(basic)h(op)q(eration)h(of)f
(ph)o(ysical)150 1506 y(mac)o(hines)d(in)h(soft)o(w)o(are.)22
b(Cho)q(osing)c(the)e(basic)h(op)q(erations,)g(the)f(strategy)h(for)g(ev)m
(aluating)f(the)150 1596 y(op)q(erations,)g(and)f(the)f(compilation)f(to)j
(the)e(op)q(erations)i(are)f(cen)o(tral)e(issues)i(in)f(the)h(implem)o(en-)
150 1686 y(tation)i(of)f(functional)g(languages.)200 1776 y(Charit)o(y)24
b(is)g(a)g(categorical)g(language.)46 b(This)25 b(means)e(its)h(foundations)i
(are)e(in)g(category)150 1867 y(theory)l(,)d(although)g(it)f(is)g(similar)e
(in)i(programming)f(st)o(yle)g(to)i(functional)f(languages.)34
b(Th)o(us,)150 1957 y(Charit)o(y)18 b(faces)g(v)o(ery)f(m)o(uc)o(h)f(the)i
(same)g(implem)o(en)n(tation)e(issues)i(as)h(con)o(v)o(en)o(tional)e
(functional)150 2047 y(languages.)33 b(This)20 b(thesis)g(will)e(explore)h
(the)h(issues)g(in)o(v)o(olv)o(ed)d(in)j(implem)o(en)n(ting)d(Charit)o(y)j(b)
o(y)150 2137 y(sho)o(wing)d(its)e(ev)o(olution)g(from)g(a)h(basic)g(high)g
(lev)o(el)e(Charit)o(y)i(abstract)g(mac)o(hine)e(to)i(lo)o(w)o(er)f(lev)o(el)
150 2227 y(\\linear")h(mac)o(hine)e(that)j(closely)e(mirrors)g(the)h(op)q
(eration)h(of)g(a)f(ph)o(ysical)g(mac)o(hine.)150 2395 y FB(1.1.)42
b(Structure)27 b(of)g(the)f(Thesis)200 2510 y FA(Chapter)16
b(2)h(surv)o(eys)e(general)h(bac)o(kground)g(and)h(related)e(researc)o(h)h
(in)f(the)h(implem)o(en)o(tation)150 2600 y(of)c(existing)g(functional)g
(languages.)21 b(Next,)11 b(c)o(hapter)h(3)g(in)o(tro)q(duces)g(the)g(Charit)
o(y)f(programming)p eop
%%Page: 3 12
11 bop 834 33 a Fy(1.)24 b(INTR)o(ODUCTION)660 b(3)150 141
y FA(language)18 b(and)g(explores)f(its)g(main)f(features)h(through)h
(programming)e(examples.)22 b(Chapter)c(4)150 231 y(describ)q(es)j(a)g(v)o
(ery)f(basic)i(Charit)o(y)f(abstract)g(mac)o(hine)f(con)o(taining)h(only)g(a)
g(few)g(op)q(erations.)150 320 y(The)16 b(addition)g(of)h(datat)o(yp)q(es)g
(greatly)f(expands)g(the)g(p)q(o)o(w)o(er)g(of)h(the)e(language,)i(and)g(c)o
(hapter)f(5)150 410 y(sho)o(ws)j(ho)o(w)f(datat)o(yp)q(es)h(are)f(incorp)q
(orated.)27 b(Chapter)18 b(6)h(sho)o(ws)f(the)g(implem)o(en)o(tation)d(of)j
(the)150 500 y(\\b)o(yte)e(co)q(ded")i(Charit)o(y)e(abstract)i(mac)o(hine)c
(where)j(the)f(co)q(de)h(compiled)e(for)i(this)g(mac)o(hine)d(is)150
589 y(executed)20 b(in)h(soft)o(w)o(are.)36 b(Optimizations)19
b(to)j(stream)e(line)g(the)h(\\b)o(yte)g(co)q(ded")h(mac)o(hine)d(are)150
679 y(in)o(tro)q(duced)14 b(in)f(c)o(hapter)h(7.)21 b(Finally)l(,)12
b(c)o(hapter)i(8)g(presen)o(ts)g(the)f(results)h(of)g(the)g(implem)o(en)o
(tation)150 769 y(and)j(discusses)f(p)q(ossible)h(future)f(w)o(ork.)p
eop
%%Page: 4 13
12 bop 1574 509 a Fw(Chapter)34 b Fv(2)1529 633 y FB(Bac)n(kground)p
150 689 1800 2 v 150 876 a FA(T)l(raditionally)l(,)14 b(functional)g
(languages)i(ha)o(v)o(e)e(b)q(een)g(translated)h(to)g(the)f
Fx(\025)p FA({calculus)h(b)q(efore)g(fur-)150 966 y(ther)k(translation)g(to)g
(a)h(lo)o(w)o(er)e(lev)o(el)e(language.)30 b(The)19 b(SECD)h(mac)o(hine)d(w)o
(as)i(one)g(of)g(the)g(\014rst)150 1057 y(abstract)h(mac)o(hines)e(to)i
(implem)o(en)n(t)d(the)i Fx(\025)p FA({calculus.)32 b(More)19
b(imp)q(ortan)o(tly)l(,)f(the)h(SECD)i(ma-)150 1147 y(c)o(hine)11
b(pro)o(vided)g(a)i(standard)g(for)g(sp)q(ecifying)e(and)i(reasoning)g(ab)q
(out)g(the)f(design)g(of)h(an)f(abstract)150 1237 y(mac)o(hine)h(using)i
(state)h(transition)f(rules.)20 b(This)15 b(c)o(hapter)g(describ)q(es)f(the)h
Fx(\025)p FA({calculus)g(and)h(some)150 1327 y(of)j(its)f(more)f(common)g(ev)
m(aluation)h(tec)o(hniques.)27 b(Sev)o(eral)17 b(abstract)i(mac)o(hines)d
(whic)o(h)i(imple-)150 1417 y(men)o(t)h(these)h(tec)o(hniques)g(are)h
(discussed)f(in)h(detail.)34 b(Beginning)20 b(with)h(the)g(SECD)g(mac)o(hine)
150 1507 y(and)d(leading)g(to)g(more)e(recen)o(t)h(dev)o(elopmen)o(ts)d(suc)o
(h)k(as)g(the)g(Categorical)g(Abstract)f(Mac)o(hine)150 1597
y(\(CAM\))k(and)h(the)f(Spineless)g(T)l(agless)h(G{mac)o(hine,)e(the)h(ev)m
(aluation)h(tec)o(hniques)e(presen)o(ted)150 1687 y(here)15
b(con)o(tribute)g(to)h(the)f(dev)o(elopmen)o(t)e(of)j(the)g(Charit)o(y)f
(abstract)h(mac)o(hine)e(describ)q(ed)h(in)g(the)150 1777 y(rest)h(of)h(this)
f(thesis.)150 1945 y FB(2.1.)42 b(The)27 b Ft(\025)p FB({calculus)200
2060 y FA(When)14 b(implem)o(en)o(ti)o(ng)e(a)j(functional)f(language,)i(it)e
(is)g(practical)g(to)g(separate)h(the)g(high)f(lev)o(el)150
2150 y(programming)g(language,)j(with)e(all)h(its)f(syn)o(tactic)g(em)o(b)q
(ellishm)o(en)n(ts,)e(from)i(the)g(lo)o(w)h(lev)o(el)e(lan-)150
2240 y(guage.)23 b(An)16 b(in)o(termediate)d(represen)o(tation)j(serv)o(es)f
(as)j(an)e(in)o(terface)f(b)q(et)o(w)o(een)h(the)g(t)o(w)o(o)g(lev)o(els,)150
2330 y(making)g(high)h(lev)o(el)e(syn)o(tax)h(and)i(lo)o(w)e(lev)o(el)f
(implem)o(en)o(tation)f(of)j(the)g(language)h(indep)q(enden)o(t)150
2420 y(of)h(eac)o(h)g(other.)29 b(By)19 b(far,)g(the)g(most)f(common)f(in)o
(termediate)f(represen)o(tation)i(for)h(functional)150 2510
y(programming)h(languages)j(is)e(the)g Fx(\025)p FA({calculus.)37
b(The)22 b Fx(\025)p FA({calculus)g(pro)o(vides)e(a)i(notation)h(for)150
2600 y(functions)d(where)f(all)h(of)g(the)g(\\syn)o(tactic)f(sugar")i(asso)q
(ciated)g(with)f(programs)g(written)f(at)i(a)1039 2700 y Fy(4)p
eop
%%Page: 5 14
13 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)675 b(5)150
141 y FA(higher)22 b(lev)o(el)f(is)h(remo)o(v)o(ed,)g(resulting)g(in)g(a)h
(succinct)f(notation)h(with)f(four)h(basic)g(syn)o(tactic)150
234 y(constructs:)716 301 y Fx(exp)41 b FA(::=)f Fx(C)231 b
FA(constan)o(t)938 391 y Fx(v)256 b FA(v)m(ariable)938 480
y Fx(exp)16 b(exp)45 b FA(application)938 570 y Fx(\025v)r(:exp)65
b FA(abstraction)150 654 y(Examples)15 b(of)h Fx(\025)p FA({expressions)520
768 y(8)278 b(a)17 b(constan)o(t)520 858 y(+)264 b(a)17 b(constan)o(t)g
(primitiv)n(e)c(function)520 948 y Fx(x)274 b FA(a)17 b(v)m(ariable)520
1037 y Fx(\025x:)p FA(2)11 b(+)g Fx(x)120 b FA(an)17 b(abstraction)g(\(add)g
(2)f(to)h(a)g(n)o(um)o(b)q(er\))520 1127 y(\()p Fx(\025x:)p
FA(2)11 b(+)g Fx(x)p FA(\))16 b(3)42 b(an)17 b(application)150
1230 y(Constan)o(ts)e(are)f(not)g(needed)g(in)f(the)h Fx(\025)p
FA({calculus,)g(as)h(the)e(other)h(three)g(constructs)g(can)g(b)q(e)g(used)
150 1323 y(to)j(represen)o(t)e(them,)f(but)j(it)e(is)h(more)f(con)o(v)o
(enien)o(t)f(to)j(include)e(them)g(in)h(the)g(language.)150
1526 y FB(2.2.)42 b(Ev)l(aluation)26 b(tec)n(hniques)200 1644
y FA(Ev)m(aluation)17 b(of)g(a)g Fx(\025)p FA({expression)g(is)f(done)h
(either)e(b)o(y)h(ev)m(aluating)h(a)g(constan)o(t)g(\(eg:)k(the)c(con-)150
1737 y(stan)o(t)23 b(primitiv)n(e)c(function)k(+\))f(or)h(through)g(the)f
(con)o(v)o(ersion)g(rules,)h(the)f(fundamen)o(tal)f(one)150
1829 y(b)q(eing)h Fx(\014)s FA({reduction.)36 b Fx(\014)s FA({reduction)21
b(will)f(substitute)i(all)f(o)q(ccurrences)g(of)h(a)g(v)m(ariable)f(in)h(an)
150 1922 y(abstraction)17 b(with)f(a)h(v)m(alue.)k(F)l(or)16
b(example,)614 2036 y(\()p Fx(\025x:)p FA(2)11 b(+)g Fx(x)p
FA(\))16 b(3)42 b Fz(!)g FA(2)11 b(+)g(3)115 b(substitution)916
2126 y Fz(!)42 b FA(5)126 b(ev)m(aluation)16 b(of)h(+)200 2229
y(Ev)m(aluating)c(either)f(a)h(constan)o(t)g(or)g(an)g(application)f(via)g
Fx(\014)s FA({reduction)g(is)g(called)g(a)h(reduction.)150
2322 y(A)j(single)f(reduction)h(of)g(a)h Fx(\025)p FA({expression)g(is)f
(denoted)g(b)o(y)f Fz(!)p FA(,)h(and)h(when)f(no)g(more)f(reductions)150
2415 y(are)g(p)q(ossible,)f(the)h(expression)f(is)g(said)h(to)g(b)q(e)g(in)f
(reduced)g(or)h(normal)f(form.)19 b(Ev)m(aluation)d(of)f(an)150
2508 y(expression)k(is)g(done)h(through)h(an)f(iteration)f(of)g(reductions)h
(un)o(til)e(normal)h(form)f(is)h(reac)o(hed.)150 2600 y(The)g(three)g(main)f
(reduction)h(strategies)g(for)g(ev)m(aluating)h Fx(\025)p FA({expressions)g
(are)f(b)o(y{v)m(alue,)g(b)o(y{)p eop
%%Page: 6 15
14 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)675 b(6)150
141 y FA(name,)15 b(and)h(b)o(y{need)g(ev)m(aluation.)150 271
y Fs(b)n(y{v)l(alue)24 b(ev)l(aluation)150 377 y FA(The)16
b(b)o(y{v)m(alue)g(strategy)g(\(also)h(kno)o(wn)f(as)h(eager)f(ev)m
(aluation\))g(ev)m(aluates)g(all)g(argumen)o(ts)f(to)i(a)150
471 y(function)f(b)q(efore)g(the)g(function)g(is)g(ev)m(aluated.)22
b(In)15 b(the)h(expression)712 603 y(\()p Fx(\025x:)p FA(\()p
Fx(\025y)r(:y)c FA(+)f Fx(x)p FA(\))16 b(2\))g(\(\()p Fx(\025z)r(:z)d
FA(+)e(3\))17 b(3\))150 735 y(a)g(b)o(y{v)m(alue)f(strategy)g(w)o(ould)g
(reduce)g(the)g(expression)g(b)o(y)g(replacing)f(the)h Fx(z)i
FA(with)e(3)h(\014rst:)380 849 y(\()p Fx(\025x:)p FA(\()p Fx(\025y)r(:y)12
b FA(+)f Fx(x)p FA(\))16 b(2\))h(\(\()p Fx(\025z)r(:z)c FA(+)e(3\))16
b(3\))42 b Fz(!)f FA(\()p Fx(\025x:)p FA(\()p Fx(\025y)r(:y)12
b FA(+)f Fx(x)p FA(\))16 b(2\))h(\(3)11 b(+)g(3\))1098 938
y Fz(!)41 b FA(\()p Fx(\025x:)p FA(\()p Fx(\025y)r(:y)12 b
FA(+)f Fx(x)p FA(\))16 b(2\))h(6)1098 1028 y Fz(!)41 b FA(\()p
Fx(\025x:)p FA(2)12 b(+)27 b Fx(x)p FA(\))16 b(6)1098 1118
y Fz(!)41 b FA(2)12 b(+)f(6)1098 1207 y Fz(!)41 b FA(8)150
1353 y Fs(b)n(y{name)23 b(ev)l(aluation)150 1459 y FA(A)13
b(b)o(y{name)f(strategy)h(replaces)g(the)g(v)m(ariables)g(in)g(a)h(function)f
(with)g(the)g(expressions)g(to)h(whic)o(h)150 1553 y(they)20
b(refer.)31 b(That)21 b(is,)f(a)h(function)e(do)q(es)i(not)g(ev)m(aluate)e
(its)h(argumen)o(t)f(b)q(efore)h(substitution,)150 1647 y(but)d(rather)f
(substitutes)h(the)f(b)q(o)q(dy)h(of)g(the)f(argumen)o(t.)21
b(Only)15 b(when)i(a)g(function)f(requires)f(the)150 1742 y(v)m(alue)h(of)h
(its)f(argumen)o(t)f(do)q(es)i(it)f(actually)g(ev)m(aluate)g(it.)21
b(A)16 b(b)o(y{name)f(strategy)h(w)o(ould)h(reduce)150 1836
y(the)f(example)e(in)i(the)g(previous)g(section)g(as)h(follo)o(ws:)452
1950 y(\()p Fx(\025x:)p FA(\()p Fx(\025y)r(:y)12 b FA(+)f Fx(x)p
FA(\))16 b(2\))h(\()p Fx(\025z)r(:z)c FA(+)e(3\))41 b Fz(!)h
FA(\()p Fx(\025y)r(:y)12 b FA(+)f(\()p Fx(\025z)r(:z)i FA(+)e(3\)\))16
b(2\))1091 2040 y Fz(!)42 b FA(2)11 b(+)g(\(\()p Fx(\025z)r(:z)i
FA(+)e(3\))17 b(3\))1091 2129 y Fz(!)42 b FA(2)11 b(+)g(\(3)h(+)f(3\))1091
2219 y Fz(!)42 b FA(2)11 b(+)g(6)1091 2309 y Fz(!)42 b FA(8)150
2412 y(A)16 b(dra)o(wbac)o(k)g(of)h(this)f(ev)m(aluation)h(strategy)g(is)f
(when)g(a)h(v)m(ariable)f(o)q(ccurs)h(m)o(ultiple)c(times)i(in)h(a)150
2506 y(function.)21 b(F)l(or)16 b(example,)857 2600 y(\()p
Fx(\025x:x)10 b FA(+)h Fx(x)p FA(\))16 b(\(2)c(+)f(3\))p eop
%%Page: 7 16
15 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)675 b(7)150
141 y FA(w)o(ould)14 b(require)f(the)g(argumen)o(t)g(2)6 b(+)g(3)16
b(to)e(b)q(e)h(ev)m(aluated)e(t)o(wice,)g(as)i(in)e(the)h(follo)o(wing)g
(reduction:)614 255 y(\()p Fx(\025x:x)c FA(+)h Fx(x)p FA(\))16
b(\(2)c(+)f(3\))41 b Fz(!)h FA(\(2)11 b(+)g(3\))h(+)f(\(2)g(+)g(3\))1041
345 y Fz(!)42 b FA(5)11 b(+)g(\(2)h(+)f(3\))1041 434 y Fz(!)42
b FA(5)11 b(+)g(5)1041 524 y Fz(!)42 b FA(10)150 669 y Fs(b)n(y{need)23
b(ev)l(aluation)150 787 y FA(A)g(b)o(y{need)f(ev)m(aluation)i(strategy)f
(\(also)h(referred)e(to)i(as)g(lazy)e(ev)m(aluation\))i(is)f(a)g(b)o(y{name)
150 893 y(ev)m(aluation)16 b(strategy)h(whic)o(h)f Fu(shar)n(es)f
FA(the)h(v)m(alues)g(of)h(argumen)o(ts.)k(That)c(is,)e(argumen)o(ts)h(to)g
(the)150 999 y(function)h(are)h(ev)m(aluated)f(at)h(most)f(once.)25
b(The)18 b(ev)m(aluated)f(argumen)o(t)g(shares)h(its)f(result)g(with)150
1105 y(the)k(rest)f(of)i(the)e(expression.)35 b(F)l(or)21 b(example,)f(in)h
(the)f(reduction)h(b)q(elo)o(w,)g(the)g(v)m(alue)g(of)g Fx(f)26
b FA(is)150 1210 y(sho)o(wn)17 b(on)g(the)f(righ)o(t:)658 1324
y(let)f Fx(f)53 b FA(=)47 b(\(2)12 b(+)f(3\))16 b(in)p 1179
1351 2 90 v 890 1414 a(\()p Fx(\025x:x)11 b FA(+)g Fx(x)p FA(\))16
b Fx(f)p 1179 1441 V 47 w(f)j FA(=)14 b(\(2)d(+)g(3\))799 1504
y Fz(!)41 b Fx(f)17 b FA(+)11 b Fx(f)p 1179 1531 V 197 w(f)19
b FA(=)14 b(\(2)d(+)g(3\))799 1593 y Fz(!)41 b FA(\(2)12 b(+)f(3\))g(+)g
Fx(f)p 1179 1620 V 80 w(f)19 b FA(=)14 b(\(2)d(+)g(3\))799
1683 y Fz(!)41 b FA(5)12 b(+)f Fx(f)p 1179 1710 V 324 w(f)19
b FA(=)14 b(5)799 1773 y Fz(!)41 b FA(5)12 b(+)f(5)p 1179 1800
V 324 w Fx(f)19 b FA(=)14 b(5)799 1862 y Fz(!)41 b FA(10)p
1179 1889 V 385 w Fx(f)19 b FA(=)14 b(5)150 1965 y(Notice)20
b(that)h(the)f(syn)o(tax)h(has)g(b)q(een)g(extended)e(to)i(add)h(a)f(let)f
(statemen)o(t)f(whic)o(h)g(binds)i(the)150 2071 y(name)12 b
Fx(f)19 b FA(to)14 b(the)g(expression)f(\(2)6 b(+)g(3\).)20
b(Sev)o(eral)12 b(steps)i(in)f(the)g(reduction)h(ha)o(v)o(e)e(b)q(een)i(sa)o
(v)o(ed)f(since)150 2177 y(the)19 b(v)m(alue)f(of)h Fx(f)25
b FA(is)18 b(only)h(computed)e(once)i(and)h(the)e(second)h(reference)e(to)j
Fx(f)k FA(will)18 b(return)g(the)150 2283 y(precomputed)d(answ)o(er.)200
2389 y(The)i(c)o(hoice)f(of)h(ev)m(aluation)g(order)g(has)h(implications)d
(for)i(the)g(n)o(um)o(b)q(er)e(of)j(reductions)f(that)150 2495
y(m)o(ust)e(b)q(e)h(p)q(erformed.)k(In)15 b(the)h(extreme)e(case,)h(the)h
(argumen)o(t)f(to)h(a)h(function)f(con)o(tains)g(an)g(ex-)150
2600 y(pression)d(whic)o(h)g(reduces)f(in\014nitely)l(.)19
b(This)13 b(causes)g(the)g(en)o(tire)f(expression)h(nev)o(er)f(to)h
(terminate)p eop
%%Page: 8 17
16 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)675 b(8)150
141 y FA(under)16 b(a)h(b)o(y{v)m(alue)f(strategy:)436 255
y(\()p Fx(\025x:\025y)r(:y)r FA(\)\(\()p Fx(\025z)r(:z)r(z)r
FA(\)\()p Fx(\025z)r(:z)r(z)r FA(\)\))39 b Fz(!)i FA(\()p Fx(\025x:\025y)r
(:y)r FA(\)\(\()p Fx(\025z)r(:z)r(z)r FA(\)\()p Fx(\025z)r(:z)r(z)r
FA(\)\))1025 345 y Fz(!)g FA(\()p Fx(\025x:\025y)r(:y)r FA(\)\(\()p
Fx(\025z)r(:z)r(z)r FA(\)\()p Fx(\025z)r(:z)r(z)r FA(\)\))1025
434 y Fz(!)g Fx(:::)200 537 y FA(A)16 b(b)o(y{need)f(ev)m(aluation)i(of)f
(the)g(ab)q(o)o(v)o(e)g(expression)g(is:)663 670 y(\()p Fx(\025x:\025y)r(:y)r
FA(\)\(\()p Fx(\025z)r(:z)r(z)r FA(\)\()p Fx(\025z)r(:z)r(z)r
FA(\)\))39 b Fz(!)j Fx(\025y)r(:y)150 792 y FA(where)18 b(after)h(one)g
(reduction,)f(the)h(expression)f(is)h(in)f(normal)g(form.)27
b(The)19 b(\014rst)g(argumen)o(t)f(to)150 882 y(the)13 b(leftmost)e(lam)o(b)q
(da)h(expression)h(has)h(b)q(een)f(discarded,)g(eliminating)d(the)j
(in\014nite)f(reduction.)150 972 y(A)i(b)o(y{need)f(ev)m(aluation)i(strategy)
f(will)f(alw)o(a)o(ys)h(ha)o(v)o(e)f(no)i(more)e(\(and)i(usually)e(less\))h
(reductions)150 1062 y(than)19 b(a)f(b)o(y{v)m(alue)g(strategy)l(.)27
b(Ho)o(w)o(ev)o(er)17 b(there)g(is)h(an)h(o)o(v)o(erhead)e(as)i(ev)m
(aluation)f(of)h(argumen)o(ts)150 1152 y(m)o(ust)13 b(b)q(e)i(susp)q(ended.)
21 b(This)15 b(requires)e(extra)h(storage)i(for)e(the)h(susp)q(ensions,)g(or)
g(\\closures".)21 b(In)150 1242 y(all)13 b(casees)h(where)g(the)f(reduction)h
(of)g(an)g(expression)g(terminates,)e(b)q(oth)j(the)e(b)o(y{v)m(alue)h(and)g
(the)150 1331 y(b)o(y{need)i(strategy)i(will)d(reduce)h(to)i(the)e(same)g
(result)h(as)g(the)g(reduction)f(system)g(is)g(con\015uen)o(t)150
1421 y(\(Ch)o(urc)o(h{Rosser)22 b([FH88]\).)36 b(Also,)23 b(if)e(the)g
(normal)g(form)f(exists,)i(the)f(b)o(y{need)g(strategy)h(is)150
1511 y(guaran)o(teed)17 b(to)f(\014nd)h(it.)150 1676 y FB(2.3.)42
b(Implemen)n(ting)26 b(functional)f(languages)200 1791 y FA(Often)17
b(a)h(functional)f(language)h(is)f(implem)o(en)o(ted)d(b)o(y)j(de\014ning)g
(an)h(abstract)g(mac)o(hine)e(that)150 1881 y(details)22 b(ho)o(w)g(the)g(ev)
m(aluation)g(of)h(an)g(expression)f(is)g(to)g(pro)q(ceed.)39
b(This)22 b(abstract)h(mac)o(hine)150 1971 y(replaces)15 b(the)g(real)g(mac)o
(hine)e(for)j(the)f(purp)q(ose)i(of)e(formally)f(mo)q(delling,)g(sim)o
(ulating,)f(optimiz-)150 2061 y(ing,)20 b(and)f(reasoning)h(ab)q(out)h(an)f
(ev)m(aluation)f(tec)o(hnique.)28 b(An)19 b(abstract)h(mac)o(hine)d(allo)o
(ws)i(the)150 2151 y(designer)g(to)h(concen)o(trate)f(on)h(de\014ning)f(ho)o
(w)h(the)g(state)f(of)h(the)g(system)e(ev)o(olv)o(es)g(to)h(another)150
2241 y(state)14 b(through)h(state)f(transition)g(rules.)20
b(This)14 b(facilitates)f(reasoning)h(ab)q(out)i(the)d(design)h(of)g(the)150
2331 y(basic)i(op)q(erations)i(at)e(an)h(abstract,)f(formal)g(lev)o(el.)200
2421 y(This)f(section)g(in)o(tro)q(duces)g(sev)o(eral)f(di\013eren)o(t)g
(approac)o(hes)i(to)f(building)g(abstract)g(mac)o(hines.)150
2510 y(An)h(en)o(vironmen)o(t)d(based)j(SECD)h(mac)o(hine)c(is)j(presen)o
(ted,)e(follo)o(w)o(ed)h(b)o(y)h(sev)o(eral)e(graph)j(reduc-)150
2600 y(ing)g(mac)o(hines.)k(An)c(en)o(vironmen)o(t)d(based)j(implem)o(en)o
(tation)d(asso)q(ciates)k(v)m(ariables)f(with)g(their)p eop
%%Page: 9 18
17 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)675 b(9)150
141 y FA(v)m(alues)16 b(on)h(a)f(\\lo)q(okup)h(stac)o(k".)22
b(Graph)17 b(reduction)e(sc)o(hemes)f(use)i(directed)f(graphs)j(with)e(a)g
(set)150 235 y(of)g(graph)h(reduction)f(rules)g(to)g(reduce)f(the)h(graph)h
(to)f(a)h(normal)e(form.)20 b(Graph)d(reduction)f(im-)150 328
y(plemen)o(ts)d(b)o(y{need)h(\(or)i(lazy\))e(reduction,)h(where)f(a)i(p)q
(ortion)g(of)f(a)h(graph)g(is)f(o)o(v)o(erwritten)e(with)150
421 y(an)h(equiv)m(alen)o(t)d(simpler)h(graph)i(so)g(that)f(subsequen)o(t)g
(visits)g(to)g(that)h(p)q(ortion)g(of)g(the)f(graph)h(will)150
515 y(simply)f(return)i(an)h(answ)o(er)f(in)g(normal)f(form.)20
b(The)15 b(ease)g(with)g(whic)o(h)g(shared)g(sub)q(expressions)150
608 y(are)g(represen)o(ted)e(graphically)h(pro)o(vides)g(a)h(more)e(in)o
(tuitiv)o(e)f(approac)o(h)j(to)g(b)o(y{need)f(ev)m(aluation)150
702 y(than)j(en)o(vironmen)o(t)c(based)k(ev)m(aluation)f(strategies)h(do.)150
899 y Fs(2.3.1.)32 b(SECD)22 b(mac)n(hine)150 1029 y FA(The)c(SECD)h(mac)o
(hine)d([Lan64)r(])h(pro)o(vides)h(an)h(implem)o(en)n(tation)d(of)j(the)f
Fx(\025)p FA({calculus)g(in)g(a)g(me-)150 1122 y(c)o(hanical)13
b(and)i(straigh)o(tforw)o(ard)g(manner.)k(The)14 b(abstract)h(mac)o(hine)d
(for)i(Charit)o(y)g(shall)g(use)g(the)150 1215 y(same)h(format)h(for)g
(describing)g(the)g(state)g(transitions.)200 1309 y(The)23
b(SECD)g(mac)o(hine)e(has)i(four)g(stac)o(ks)g(whic)o(h)f(determine)e(the)j
(state)g(of)g(the)g(mac)o(hine.)150 1402 y(These)16 b(stac)o(ks)g(are:)253
1512 y Fz(\017)21 b FA(S)16 b(stac)o(k,)f(stac)o(k)h(of)h(in)o(termediate)c
(v)m(alues)253 1605 y Fz(\017)21 b FA(E)16 b(stac)o(k,)f(the)h(en)o(vironmen)
o(t)e(used)i(for)h(v)m(ariable)f(lo)q(okup)253 1699 y Fz(\017)21
b FA(C)16 b(stac)o(k,)f(the)h(co)q(de)h(stream)253 1792 y Fz(\017)k
FA(D)16 b(stac)o(k,)f(the)h(dump)g(\(a)g(stac)o(k)g(of)h(stac)o(ks\))150
1902 y(State)j(transitions)h(de\014ne)f(ho)o(w)h(the)f(SECD)h(mac)o(hine)e
(is)h(to)h(ev)o(olv)o(e)d(from)h(one)i(state)g(to)f(the)150
1995 y(next.)33 b(The)21 b(curren)o(t)e(state)i(is)f(giv)o(en)g(b)o(y)g(the)g
(con)o(ten)o(ts)g(of)g(eac)o(h)g(of)h(the)f(four)h(stac)o(ks)f(at)h(an)o(y)
150 2088 y(giv)o(en)15 b(time)f(and)j(transitions)g(are)f(denoted:)684
2224 y Fx(S)44 b(E)g(C)h(D)f Fz(!)d Fx(S)1126 2207 y Fr(0)1179
2224 y Fx(E)1218 2207 y Fr(0)1271 2224 y Fx(C)1310 2207 y Fr(0)1363
2224 y Fx(D)1404 2207 y Fr(0)150 2350 y FA(where)16 b(the)g(state)h(of)g(the)
f(mac)o(hine)e(matc)o(hing)h(the)i(left)e(side)h(of)h(the)f(arro)o(w)i(is)e
(transformed)g(to)150 2443 y(a)h(new)f(state)g(on)h(the)f(righ)o(t)g(side)g
(of)g(the)g(arro)o(w.)200 2522 y(The)h(SECD)h(mac)o(hine)c(pro)o(vided)j(an)g
(implem)o(en)o(tation)d(of)j(the)g Fx(\025)p FA({calculus)g(where)g(applica-)
150 2600 y(tion)12 b(of)g(expression)f(as)h(w)o(ell)e(as)j(abstraction)f(and)
g(substitution)g(of)g(v)m(ariables)f(are)h(implem)o(en)o(te)o(d.)p
eop
%%Page: 10 19
18 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)653 b(10)150
141 y FA(The)14 b(state)g(transitions)g(of)g(the)g(SECD)h(mac)o(hine)c(as)k
(presen)o(ted)e(in)g([FH88])g(follo)o(w.)20 b(State)14 b(tran-)150
230 y(sition)i(1)g(stops)h(the)f(execution)e(in)i(the)g(mac)o(hine)d(when)k
(the)e(co)q(de)h(stac)o(k)g(and)g(dump)f(stac)o(k)h(are)150
318 y(empt)o(y)l(.)21 b(State)c(transition)g(2)g(loads)g(the)g(mac)o(hine)e
(with)h(the)h(stac)o(ks)g(stored)g(after)g(an)g(applica-)150
407 y(tion)d(of)g(a)h(function)f(to)g(its)g(argumen)o(t)f(has)i(b)q(een)f
(completed.)k(The)c(notation)h Fx(:)f FA(is)g(used)g(to)g(push)150
495 y(an)h(item)d(on)o(to)j(the)f(top)h(of)g(a)g(stac)o(k)f(\(eg:)20
b(2)p Fx(:s)15 b FA(is)f(stac)o(k)g(with)g(2)h(on)g(top)g(and)g(then)g
Fx(s)p FA(\).)20 b(An)14 b(empt)o(y)150 584 y(co)q(de)i(stream)g(is)g
(denoted)g(with)g Fx(\017)g FA(as)h(the)f Fx(C)k FA(stac)o(k.)p
553 627 995 2 v 552 702 2 75 v 614 702 V 636 679 a Fq(S)71
b(E)44 b(C)g(D)284 b(S)1226 664 y Fp(0)1307 679 y Fq(E)1340
664 y Fp(0)1393 679 y Fq(C)1426 664 y Fp(0)1479 679 y Fq(D)1514
664 y Fp(0)p 1546 702 V 553 703 995 2 v 552 778 2 75 v 574
756 a Fo(1)p 614 778 V 41 w Fq(x:s)41 b(e)56 b(\017)h Fo([)13
b(])198 b Fn(!)148 b Fo(STOP)p 1546 778 V 552 853 V 574 830
a(2)p 614 853 V 41 w Fq(x:s)41 b(e)56 b(\017)h Fo(\()p Fq(s)916
815 y Fp(0)928 830 y Fq(;)7 b(e)966 815 y Fp(0)977 830 y Fq(;)g(c)1014
815 y Fp(0)1026 830 y Fo(\))p Fq(:d)40 b Fn(!)h Fq(x:s)1254
815 y Fp(0)1307 830 y Fq(e)1326 815 y Fp(0)1393 830 y Fq(c)1411
815 y Fp(0)1479 830 y Fq(d)p 1546 853 V 553 854 995 2 v 170
930 a FA(In)19 b(transition)h(3,)g(when)g(a)g(v)m(ariable)f(is)h(encoun)o
(tered)f(on)h(the)f(co)q(de)h(stream,)f(a)h(lo)q(okup)g(in)o(to)150
1019 y(the)e(E)g(stac)o(k)g(is)g(p)q(erformed)f(to)h(replace)g(the)g(v)m
(ariable)f(with)h(its)g(actual)h(v)m(alue.)26 b(The)18 b(v)m(ariable)150
1107 y(\(or)g(a)f(primitiv)o(e)d(function)j(suc)o(h)g(as)h(+\))f(is)g(tagged)
i(with)e(an)h(ID)f(and)h(placed)f(on)g(the)g(S)h(stac)o(k.)150
1196 y(F)l(or)c Fx(\025)h FA(abstractions)g(tagged)h(with)e(LAM,)f(the)h
(SECD)h(mac)o(hine)d(stac)o(ks)j(the)f(curren)o(t)f(v)m(ariables)150
1285 y(and)24 b(argumen)o(ts)e(to)i(the)f(abstraction)h(on)o(to)g(the)f(S)g
(stac)o(k)g(as)h(sho)o(wn)g(b)o(y)f(transition)h(4.)42 b(A)150
1373 y(closure)17 b(\(tagged)i(with)e(CLO\))i(holds)f(the)f(b)q(o)q(dy)i(of)f
(the)g(abstraction,)g(the)f(v)m(ariables)h(and)g(the)150 1462
y(en)o(vironmen)o(t.)p 339 1505 1422 2 v 338 1579 2 75 v 401
1579 V 422 1557 a Fq(S)45 b(E)e(C)351 b(D)126 b(S)1134 1542
y Fp(0)1521 1557 y Fq(E)1554 1542 y Fp(0)1607 1557 y Fq(C)1640
1542 y Fp(0)1693 1557 y Fq(D)1728 1542 y Fp(0)p 1760 1579 V
339 1581 1422 2 v 338 1656 2 75 v 360 1633 a Fo(3)p 401 1656
V 41 w Fq(s)51 b(e)k Fo(ID\()p Fq(x)p Fo(\))p Fq(:c)248 b(d)55
b Fn(!)41 b Fo(lo)q(okup\()p Fq(x;)7 b(e)p Fo(\))p Fq(:s)1355
1618 y Fp(0)1521 1633 y Fq(e)67 b(c)h(d)p 1760 1656 V 338 1731
V 360 1708 a Fo(4)p 401 1731 V 41 w Fq(s)51 b(e)k Fo(LAM\()p
Fq(v)q(ar)q(s;)7 b(body)q Fo(\))p Fq(:c)42 b(d)55 b Fn(!)41
b Fo(CLO)q(\()p Fq(body)q(;)7 b(v)q(ar)q(s;)g(e)p Fo(\))p Fq(:s)42
b(e)67 b(c)h(d)p 1760 1731 V 339 1732 1422 2 v 167 1808 a FA(State)17
b(transition)g(5)g(and)h(6)f(sho)o(ws)g(ho)o(w)h(application)e(is)h(handled.)
23 b(The)17 b(application)f(sym)o(b)q(ol)150 1897 y(`@')d(on)i(the)f(co)q(de)
h(stac)o(k)f(causes)g(the)g(\014rst)h(t)o(w)o(o)f(argumen)o(ts)f(on)i(top)g
(of)f(the)h(stac)o(k)e(to)i(b)q(e)g(applied)150 1985 y(together.)41
b(In)23 b(transition)g(5)g(a)g(closure)g(on)g(top)g(of)g(the)g(S)g(stac)o(k)f
(causes)i(the)e(b)q(o)q(dy)i(of)f(the)150 2074 y(abstraction)d(to)f(b)q(e)g
(executed)e(and)j(the)e(v)m(ariables)h(to)g(b)q(e)g(b)q(ound)h(to)g(its)e(v)m
(alue.)29 b(A)19 b(primitiv)n(e)150 2162 y(function)g(suc)o(h)g(as)h(+)f(on)g
(top)h(of)g(the)e(S)i(stac)o(k)f(is)g(applied)f(to)i(the)f(next)f(argumen)o
(t)g(on)i(the)f(S)150 2251 y(stac)o(k)d(in)g(transition)g(6.)p
174 2294 1753 2 v 173 2369 2 75 v 235 2369 V 257 2346 a Fq(S)507
b(E)44 b(C)73 b(D)126 b(S)1154 2331 y Fp(0)1320 2346 y Fq(E)1353
2331 y Fp(0)1600 2346 y Fq(C)1633 2331 y Fp(0)1746 2346 y Fq(D)1781
2331 y Fp(0)p 1925 2369 V 174 2370 1753 2 v 173 2445 2 75 v
195 2423 a Fo(5)p 235 2445 V 41 w(CLO\()p Fq(body)q(;)7 b(v)q(ar)q(s;)g(e)581
2408 y Fp(0)593 2423 y Fo(\))p Fq(:)p Fo(\()p Fq(ar)q(g)q(:s)p
Fo(\))42 b Fq(e)56 b Fo(@)p Fq(:c)41 b(d)55 b Fn(!)41 b Fo([)13
b(])156 b(\()p Fq(v)q(ar)q(s;)7 b(ar)q(g)q Fo(\))p Fq(:e)1547
2408 y Fp(0)1600 2423 y Fo([)p Fq(body)q Fo(])41 b(\()p Fq(s;)7
b(e;)g(c)p Fo(\))p Fq(:d)p 1925 2445 V 173 2520 V 195 2497
a Fo(6)p 235 2520 V 41 w(PRIM\()p Fq(f)t Fo(\))p Fq(:)p Fo(\()p
Fq(ar)q(g)q(:s)p Fo(\))226 b Fq(e)56 b Fo(@)p Fq(:c)41 b(d)55
b Fn(!)41 b Fq(f)t Fo(\()p Fq(ar)q(g)q Fo(\))p Fq(:s)i(e)261
b(c)128 b(d)p 1925 2520 V 174 2522 1753 2 v 163 2600 a FA(Giv)o(en)12
b(an)h(application)f(\(APP\))h(of)g(t)o(w)o(o)g(expressions)g
Fx(f)5 b(a)p FA(,)13 b(transition)g(7)g(of)g(the)g(SECD)g(mac)o(hine)p
eop
%%Page: 11 20
19 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)653 b(11)150
141 y FA(\014rst)12 b(ev)m(aluates)f(a,)h(then)f(f)g(and)h(\014nally)f(the)g
(application)g(b)q(efore)g(the)g(application)g(@)g(tak)o(es)g(place.)p
402 194 1296 2 v 401 269 2 75 v 464 269 V 485 246 a Fq(S)45
b(E)e(C)316 b(D)126 b(S)1162 231 y Fp(0)1216 246 y Fq(E)1249
231 y Fp(0)1302 246 y Fq(C)1335 231 y Fp(0)1630 246 y Fq(D)1665
231 y Fp(0)p 1697 269 V 402 270 1296 2 v 401 345 2 75 v 423
323 a Fo(7)p 464 345 V 41 w Fq(s)51 b(e)k Fo(APP)q(\()p Fq(f)t(un;)7
b(ar)q(g)q Fo(\))p Fq(:c)41 b(d)55 b Fn(!)41 b Fq(s)62 b(e)67
b(ar)q(g)q(:)p Fo(\()p Fq(f)t(un:)p Fo(\(@)p Fq(:c)p Fo(\)\))42
b Fq(d)p 1697 345 V 402 347 1296 2 v 200 561 a FA(As)23 b(an)h(example)e(of)i
(ho)o(w)g(the)f(SECD)i(mac)o(hine)c(reduces)i(an)h(expression,)h(consider)e
(the)150 683 y Fx(\025)p FA({expression)17 b(\()p Fx(\025x:x)10
b FA(+)h(2\))17 b(3.)k(The)c(SECD)g(co)q(de)f(for)h(this)f(expression)g(is)
366 843 y Fx(AP)7 b(P)g FA(\()p Fx(LAM)e FA(\()p Fx(I)t(D)q
FA(\()p Fx(x)p FA(\))p Fx(;)j(AP)f(P)g FA(\()p Fx(I)t(D)q FA(\(+\))p
Fx(;)h(AP)f(P)g FA(\()p Fx(I)t(D)q FA(\(2\))p Fx(;)h(I)t(D)q
FA(\()p Fx(x)p FA(\)\)\)\))p Fx(;)g(I)t(D)q FA(\(3\)\))150
1002 y(where)16 b(the)g(+)g(is)g(in)g(in\014x)g(notation.)331
1110 y Fx(S)63 b(E)49 b(C)1273 b(D)p 219 1138 1662 2 v 331
1201 a FA([)16 b(])49 b([)16 b(])41 b(APP\(LAM\(ID\()p Fx(x)p
FA(\))p Fx(;)8 b FA(APP)o(\(ID\(+\))p Fx(;)g FA(APP\(ID)o(\(2\))p
Fx(;)g FA(ID\()p Fx(x)p FA(\)\)\)\))p Fx(;)g FA(ID\(3\)\))42
b([)15 b(])240 1291 y Fz(!)41 b FA([)16 b(])49 b([)16 b(])41
b(ID\(3\))p Fx(:)p FA(\(LAM\(ID\()p Fx(x)p FA(\))p Fx(;)8 b
FA(APP)o(\(ID\(+\))p Fx(;)g FA(APP)o(\(ID\(2\))p Fx(;)g FA(ID\()p
Fx(x)p FA(\)\)\)\))p Fx(:)p FA(@\))101 b([)15 b(])240 1381
y Fz(!)41 b FA([3])g([)16 b(])41 b(LAM\(ID\()p Fx(x)p FA(\))p
Fx(;)8 b FA(APP)o(\(ID\(+\))p Fx(;)g FA(APP\(ID\(2\))p Fx(;)g
FA(ID\()p Fx(x)p FA(\)\)\)\))p Fx(:)p FA(@)269 b([)15 b(])150
1484 y(Encoun)o(tering)i(a)h(LAM)f(instruction)f(on)i(the)f(co)q(de)g(stac)o
(k)g(causes)h(a)f(closure)g(to)h(b)q(e)f(placed)g(on)150 1606
y(the)f(S)g(stac)o(k.)356 1710 y Fx(S)1242 b(E)48 b(C)d(D)p
243 1738 1614 2 v 264 1801 a Fz(!)d FA(CLO\(APP\(ID\(+\))p
Fx(;)8 b FA(APP\(ID)o(\(2\))p Fx(;)g FA(ID\()p Fx(x)p FA(\)\))p
Fx(;)g FA(LAM\(ID)o(\()p Fx(x)p FA(\))p Fx(;)g FA([)16 b(]\)\))p
Fx(:)p FA(3\))41 b([)15 b(])41 b(@)h([)16 b(])150 1904 y(Next,)e(the)g
(application)h(@)f(causes)h(the)g(ev)m(aluation)g(of)g(the)f(closure)g(where)
h(the)f(v)m(ariable)h Fx(x)f FA(will)150 2026 y(b)q(e)i(replaced)g(with)g(3.)
478 2140 y Fx(S)74 b(E)145 b(C)700 b(D)p 366 2169 1368 2 v
387 2231 a Fz(!)41 b FA([)16 b(])60 b([\()p Fx(x;)8 b FA(3\)])41
b(APP\(ID)o(\(+\))p Fx(;)8 b FA(APP\(ID\(2\))p Fx(;)g FA(ID\()p
Fx(x)p FA(\)\)\))41 b([\([)15 b(])p Fx(;)8 b(\017;)g FA([)15
b(]\)])387 2321 y Fz(!)41 b FA([)16 b(])60 b([\()p Fx(x;)8
b FA(3\)])41 b(APP\(ID)o(\(2\))p Fx(;)8 b FA(ID\()p Fx(x)p
FA(\)\))p Fx(:)p FA(\(ID)o(\(+\))p Fx(:)p FA(@\))101 b([\([)15
b(])p Fx(;)8 b(\017;)g FA([)15 b(]\)])387 2411 y Fz(!)41 b
FA([)16 b(])60 b([\()p Fx(x;)8 b FA(3\)])41 b(ID)o(\()p Fx(x)p
FA(\))p Fx(:)p FA(\(ID)o(\(2\))p Fx(:)p FA(\(ID\(+\))p Fx(:)p
FA(@\))p Fx(:)p FA(@\))160 b([\([)15 b(])p Fx(;)8 b(\017;)g
FA([)15 b(]\)])387 2500 y Fz(!)41 b FA([3])52 b([\()p Fx(x;)8
b FA(3\)])41 b(ID)o(\(2\))p Fx(:)p FA(\(\(ID\(+\))p Fx(:)p
FA(@\))p Fx(:)p FA(@\))294 b([\([)15 b(])p Fx(;)8 b(\017;)g
FA([)15 b(]\)])387 2590 y Fz(!)41 b FA(2)p Fx(:)p FA(3)h([\()p
Fx(x;)8 b FA(3\)])41 b(\(ID)o(\(+\))p Fx(:)p FA(\(@)p Fx(:)p
FA(@\)\))425 b([\([)15 b(])p Fx(;)8 b(\017;)g FA([)15 b(]\)])p
eop
%%Page: 12 21
20 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)653 b(12)150
141 y FA(Finally)l(,)13 b(the)i(mac)o(hine)d(is)j(in)f(a)i(p)q(osition)f(to)g
(ev)m(aluate)g(the)f(v)m(alues)h(stac)o(k)o(ed)f(up)h(on)g(the)g(S)g(stac)o
(k:)734 255 y Fx(S)166 b(E)145 b(C)96 b(D)p 622 284 856 2 v
643 346 a Fz(!)41 b FA(+)p Fx(:)p FA(2)p Fx(:)p FA(3)82 b([\()p
Fx(x;)8 b FA(3\)])41 b(@)p Fx(:)p FA(@)g([\([)15 b(])p Fx(;)8
b(\017;)g FA([)15 b(]\)])643 436 y Fz(!)41 b FA(\(+)17 b(2\))p
Fx(:)p FA(3)41 b([\()p Fx(x;)8 b FA(3\)])41 b(@)93 b([\([)15
b(])p Fx(;)8 b(\017;)g FA([)15 b(]\)])643 526 y Fz(!)41 b FA(5)172
b([\()p Fx(x;)8 b FA(3\)])41 b([)16 b(])87 b([\([)15 b(])p
Fx(;)8 b(\017;)g FA([)15 b(]\)])643 615 y Fz(!)41 b FA(5)172
b([)16 b(])137 b Fx(\017)111 b FA([)16 b(])200 718 y(The)e(SECD)h(mac)o(hine)
d(describ)q(ed)h(ab)q(o)o(v)o(e)h(executes)f(in)h(a)g(b)o(y{v)m(alue)g
(manner,)f(since)g(an)i(argu-)150 809 y(men)o(t)e(is)h(ev)m(aluated)g(b)q
(efore)h(the)f(expression)g(is)h(ev)m(aluated.)20 b(There)14
b(are)h(also)g(b)o(y{need)f(v)m(arian)o(ts)150 900 y(of)20
b(the)f(SECD)h(mac)o(hine)d(that)j(ev)m(aluate)g(the)f(function)g(b)q(efore)h
(the)f(argumen)o(ts.)30 b(These)19 b(b)o(y{)150 991 y(need)c(mac)o(hines)f
(actually)h(susp)q(end)i(the)e(ev)m(aluation)h(of)g(an)h(argumen)o(t)d(un)o
(til)h(the)h(argumen)o(t)e(is)150 1081 y(needed.)200 1172 y(T)l(urner)h([T)l
(ur79])g(observ)o(ed)g(that)g(the)g(SECD)h(mac)o(hine)c(sp)q(ends)k
(considerable)f(time)e(lo)q(oking)150 1263 y(up)24 b(v)m(ariables)g(and)g
(their)f(actual)h(v)m(alues)g(from)e(the)i(E)g(stac)o(k)f(to)h(p)q(erform)f
(a)h(substitution.)150 1354 y(The)17 b(com)o(binator)f(based)i(mac)o(hines)e
(describ)q(ed)g(in)h(the)g(next)g(section)g(solv)o(e)g(this)g(problem)f(b)o
(y)150 1444 y(eliminating)e(free)h(v)m(ariables)h(from)g(an)g(expression.)150
1625 y Fs(2.3.2.)32 b(Com)n(binators)150 1749 y FA(One)23 b(of)g(the)f
(problems)g(with)g(in)o(termediate)e(languages)k(suc)o(h)f(as)g(the)g
Fx(\025)p FA({calculus)g(rev)o(olv)o(es)150 1840 y(around)17
b(substituting)g(v)m(ariables)f(prop)q(erly)l(.)21 b(Substitution)16
b(requires)f(determining)f(where)i(free)150 1931 y(v)m(ariables)e(in)f(the)h
Fx(\025)p FA({expression)g(o)q(ccur)g(and)h(the)e(impact)g(of)h(substituting)
g(another)g(parameter)150 2022 y(in)o(to)k(the)f(expression.)27
b(F)l(or)18 b(instance,)f(expression)h(\()p Fx(\025x:\025y)r(:x)11
b FA(+)i Fx(y)r FA(\))k Fx(y)j FA(7)e(ma)o(y)e(app)q(ear)j(to)g(ha)o(v)o(e)
150 2112 y(the)d(follo)o(wing)g(reduction:)669 2226 y(\()p
Fx(\025x:\025y)r(:x)10 b FA(+)h Fx(y)r FA(\))16 b Fx(y)i FA(7)42
b Fz(!)f FA(\()p Fx(\025y)r(:y)12 b FA(+)f Fx(y)r FA(\))16
b(7)1082 2316 y Fz(!)41 b FA(7)12 b(+)f(7)150 2419 y(In)18
b(this)g(expression,)f(the)h Fx(y)i FA(b)q(eing)e(substituted)g(is)f(free,)h
(but)g(after)g(it)f(is)h(substituted)g(for)g(the)150 2510 y
Fx(x)d FA(in)g(the)g(lam)o(b)q(da)f(abstraction,)i(it)e(b)q(ecomes)g(b)q
(ound.)22 b(The)16 b(correct)e(substitution)i(w)o(ould)f(ha)o(v)o(e)150
2600 y(pro)q(duced)21 b Fx(y)15 b FA(+)e(7,)21 b(if)f(the)g
Fx(y)h FA(passed)g(as)g(an)f(argumen)o(t)f(is)h(di\013eren)o(tiated)f(from)g
(the)h Fx(y)i FA(in)d(the)p eop
%%Page: 13 22
21 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)653 b(13)150
141 y FA(expression:)671 218 y(\()p Fx(\025x:\025z)r(:x)10
b FA(+)h Fx(z)r FA(\))16 b Fx(y)i FA(7)42 b Fz(!)f FA(\()p
Fx(\025z)r(:y)13 b FA(+)e Fx(z)r FA(\))16 b(7)1082 307 y Fz(!)41
b Fx(y)13 b FA(+)e(7)150 392 y(During)17 b(substitution)g(of)h(a)f(v)m
(ariable)f(in)h(a)g Fx(\025)p FA({expression,)g(lo)q(cally)g(b)q(ound)h(v)m
(ariables)e(m)o(ust)g(b)q(e)150 481 y(renamed)f(to)h(a)o(v)o(oid)g(name)f
(clashes)h(as)h(sho)o(wn)g(ab)q(o)o(v)o(e.)200 571 y(Com)o(binators)j(are)h
(closed)f(lam)o(b)q(da)g(expressions)g(that)h(ha)o(v)o(e)f(no)h(free)f(v)m
(ariables.)35 b(F)l(or)20 b(ex-)150 661 y(ample,)d Fx(\025x:x)h
FA(is)g(a)g(com)o(binator)g(while)f Fx(\025x:y)j FA(is)e(not,)h(since)e(the)h
Fx(x)g FA(in)g(the)g(former)f(expression)150 750 y(b)q(ound)h(to)f
Fx(\025x)p FA(,)f(while)g(the)g Fx(y)j FA(in)d(the)g(later)h(expression)f(is)
g(un)o(b)q(ound.)24 b(Com)o(binators)16 b(eliminate)150 840
y(free)f(v)m(ariables)i(in)f(a)g Fx(\025)p FA({expression)h(to)g(a)o(v)o(oid)
e(the)h(problem)f(with)h(substitution.)200 930 y(The)f(Miranda)g(system)f([T)
l(ur85])h(is)f(impleme)o(n)o(ted)e(with)j(the)f(T)l(urner)h(set)g([T)l(ur79)q
(])f(of)i(com)o(bi-)150 1019 y(nators.)22 b(This)17 b(system)d(con)o(tains)j
(three)e(\014xed)h(com)o(binators)1285 1001 y Fm(1)1304 1019
y FA(:)771 1133 y(S)52 b(=)42 b Fx(\025f)s(:\025x:\025\033)o(:)p
FA(\()p Fx(f)5 b(\033)r FA(\)\()p Fx(x\033)r FA(\))771 1223
y(K)41 b(=)h Fx(\025x:\025\033)o(:x)771 1313 y FA(I)61 b(=)42
b Fx(\025x:x)150 1416 y FA(whic)o(h)14 b(can)h(represen)o(t)f(an)o(y)h(lam)o
(b)q(da)f(expression.)20 b(There)15 b(are)g(sev)o(eral)e(translation)j
(algorithms)150 1505 y(from)h(the)h Fx(\025)p FA({calculus)g(to)g(these)g
(com)o(binators,)f(eac)o(h)g(di\013ering)h(in)g(the)g(n)o(um)o(b)q(er)e(of)i
(com)o(bina-)150 1595 y(tors)j(generated.)35 b(T)o(ypically)l(,)20
b(the)h(en)o(vironmen)o(t)d Fx(\033)k FA(is)f(created)f(as)i(a)f(means)f(of)h
(storing)g(the)150 1685 y(free)16 b(v)m(ariables)h(of)h(an)f(expression)g(b)q
(efore)g(the)g(expression)g(is)f(ev)m(aluated.)24 b(The)17
b(S)g(com)o(binator)150 1774 y(ev)m(aluates)h(eac)o(h)g(of)g(the)g
Fx(f)24 b FA(and)19 b Fx(x)f FA(in)f(the)h(en)o(vironmen)o(t)e
Fx(\033)k FA(b)q(efore)e(applying)g Fx(f)24 b FA(to)18 b Fx(x)p
FA(.)27 b(The)18 b(K)150 1864 y(com)o(binator)c(eliminates)e(the)j(en)o
(vironmen)o(t.)j(The)c(small)g(set)g(of)i(com)o(binators)e(is)g(amenable)g
(to)150 1954 y(implem)o(en)o(tati)o(on)g(on)j(a)g(mac)o(hine,)d(since)h(eac)o
(h)h(com)o(binator)f(corresp)q(onds)j(to)e(simple)e(and)j(me-)150
2043 y(c)o(hanical)12 b(instructions.)20 b(Com)o(binators)13
b(eliminate)d(the)j(need)g(to)g(handle)g(v)m(ariable)g(substitution)150
2133 y(and)k(the)f(scop)q(e)h(of)f(v)m(ariables.)200 2223 y(The)i(relativ)o
(e)e(ease)j(with)f(whic)o(h)f(com)o(binators)h(can)g(b)q(e)g(impleme)o(n)o
(ted)d(mak)o(es)i(a)h(com)o(bina-)150 2312 y(tor)f(based)g(impleme)o(n)o
(tation)d(desirable.)22 b(T)l(ranslation)c(and)f(ev)m(aluation)g(are)g
(straigh)o(tforw)o(ard,)150 2402 y(furthermore)g(the)h(e\016ciency)f(of)i
(the)f(execution)g(can)h(b)q(e)g(impro)o(v)o(ed)d(b)o(y)i(enlarging)h(the)f
(set)h(of)150 2492 y(com)o(binators.)g(The)14 b(problem)d(of)j(v)m(ariable)f
(scop)q(e)h(and)f(substitution)h(are)f(resolv)o(ed)g(quite)f(easily)p
150 2530 250 2 v 200 2586 a Fl(1)218 2601 y Fo(The)j(I)f(com)o(binator)e(can)
i(b)q(e)g(de\014ned)h(in)f(terms)f(of)h(S)f(and)h(K)g(b)o(y)g(I)g(=)g(S)g(K)g
(K.)p eop
%%Page: 14 23
22 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)653 b(14)150
141 y FA(at)14 b(the)f(translation)i(stage.)21 b(In)13 b(addition,)h(the)f
(exp)q(ensiv)o(e)g(lo)q(okup)h(step)f(of)h(the)g(SECD)g(mac)o(hine)150
233 y(is)i(a)o(v)o(oided)g(during)g(execution.)150 361 y Fs(Sup)r(ercom)n
(binators)150 465 y FA(Hughes)24 b([Hug84])g(p)q(oin)o(ted)f(out)i(that)f
(the)f(amoun)o(t)g(of)i(computation)e(p)q(erformed)f(b)o(y)i(eac)o(h)150
557 y(com)o(binator)19 b(is)h(relativ)o(ely)d(small.)31 b(In)20
b(addition,)g(man)o(y)f(com)o(binators)g(are)h(often)g(needed)g(to)150
649 y(represen)o(t)e(a)h(function.)28 b(Hughes)19 b(therefore)f(prop)q(osed)i
(the)e(in)o(tro)q(duction)h(of)g(sup)q(ercom)o(bina-)150 742
y(tors)j(in)e(order)h(to)h(reduce)e(the)h(n)o(um)o(b)q(er)e(of)i(com)o
(binators)f(required)g(to)i(express)e(a)i(function.)150 834
y(Sup)q(ercom)o(binators)h(ha)o(v)o(e)f(a)i(distinct)e(adv)m(an)o(tage)j(o)o
(v)o(er)d(T)l(urner)h(com)o(binators)g(in)g(that)g(the)150
926 y(gran)o(ularit)o(y)15 b(of)i(eac)o(h)e(com)o(binator)g(is)g(larger)h
(since)f(eac)o(h)h(function)f(added)i(to)f(the)g(system)e(will)150
1018 y(create)i(a)g(new)h(set)f(of)g(sup)q(ercom)o(binators.)200
1111 y(In)11 b(a)h(sup)q(ercom)o(binator,)g(free)e(v)m(ariables)i(are)g
(eliminated)d(from)h(the)i Fx(\025)g FA(expression)f(b)o(y)g(making)150
1203 y(all)i(of)g(the)g(free)f(v)m(ariables)h(parameters)f(of)i(the)f
(expression.)20 b(This)13 b(pro)q(cess)h(of)f(remo)o(ving)e(all)i(free)150
1295 y(v)m(ariables)i(from)g(a)g Fx(\025)p FA({expression)h(is)g(also)g(kno)o
(wn)f(as)h Fx(\025)p FA({lifting.)21 b(Hughes)15 b(extends)g
Fx(\025)p FA({lifting)h(to)150 1387 y(abstract)j(whole)f(sub)q(expressions)g
(con)o(taining)g(free)g(v)m(ariables.)26 b(These)18 b(expressions)g(are)g
(then)150 1479 y(used)e(as)h(argumen)o(ts)f(to)g(the)g(original)g
(expression.)200 1572 y(The)h(example)e(b)q(elo)o(w)i(sho)o(ws)i(ho)o(w)e(a)h
(free)f(v)m(ariable)g(can)g(b)q(e)g(eliminated)e(b)o(y)i(translation)h(of)150
1664 y Fx(\025)p FA({expression)f(to)f(sup)q(ercom)o(binators.)21
b(In)16 b(the)g(original)g Fx(\025)p FA({expression:)523 1793
y Fx(f)22 b(x)13 b FA(=)h(\()p Fx(g)k FA(\()p Fx(\025y)r(:x)11
b Fz(\002)f Fx(x)h FA(+)g Fx(y)r FA(\))16 b(3\))c(+)f(\()p
Fx(g)18 b FA(\()p Fx(\025y)r(:x)10 b Fz(\002)h Fx(x)g FA(+)g
Fx(y)r FA(\))16 b(4\))150 1923 y(the)g(v)m(ariable)g Fx(x)g
FA(is)g(free)f(in)h(b)q(oth)h Fx(\025)p FA({abstractions.)200
2015 y(Applying)i(the)h Fx(\025)p FA({lifting)g(algorithm)f(\(c)o(hapter)h(6)
g(of)k([Jon]\))c(w)o(ould)g(create)g(a)g(new)g(sup)q(er-)150
2107 y(com)o(binator)15 b Fx(g)431 2089 y Fr(0)459 2107 y FA(and)i
(rede\014ne)f Fx(f)21 b FA(as)c(follo)o(ws:)739 2221 y Fx(g)764
2203 y Fr(0)792 2221 y Fx(x)f(y)43 b FA(=)e Fx(\025y)r(:x)11
b Fz(\002)g Fx(x)f FA(+)h Fx(y)739 2311 y(f)21 b(x)91 b FA(=)41
b(\()p Fx(g)1026 2293 y Fr(0)1054 2311 y Fx(x)16 b FA(3\))c(+)f(\()p
Fx(g)1246 2293 y Fr(0)1274 2311 y Fx(x)16 b FA(4\))150 2416
y(The)e(sup)q(ercom)o(binator)f Fx(g)642 2398 y Fr(0)668 2416
y FA(holds)h(the)f(en)o(tire)g(expression)g(where)h(the)f(previously)g(free)g
(v)m(ariable)150 2508 y Fx(x)i FA(is)f(no)o(w)i(b)q(ound)g(to)f(the)g(extra)g
(parameter)e Fx(x)p FA(.)21 b(The)15 b(sup)q(ercom)o(binator)f
Fx(f)20 b FA(no)c(longer)f(con)o(tains)150 2600 y(an)o(y)h(free)g(v)m
(ariables.)p eop
%%Page: 15 24
23 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)653 b(15)150
144 y Fs(The)22 b(Categorical)g(Abstract)h(Mac)n(hine)g(\(CAM\))200
405 y FA(The)18 b(Categorical)g(Abstract)g(Mac)o(hine)f(\(CAM\))h(is)g(an)g
(abstract)h(mac)o(hine)d(based)i(on)h(com-)150 529 y(binators)k(deriv)o(ed)d
(from)h(category)h(theory:)32 b(they)22 b(include)f(the)g(comp)q(osition)h
(and)g(iden)o(tit)o(y)150 653 y(com)o(binators.)h(T)l(o)18
b(this)f(system,)e(pro)q(ducts)j(and)g(exp)q(onen)o(tials)f(are)g(added,)g
(giving)g(the)g(basic)150 778 y(rewrite)h(rules)g(of)i(the)e(CAM)h(mac)o
(hine.)27 b(The)19 b(ev)m(aluation)g(of)g(these)g(com)o(binators)f(can)h
(easily)150 902 y(b)q(e)d(transformed)g(to)h(mac)o(hine)d(instructions.)200
1026 y(The)k(equations)g(b)q(elo)o(w)g(pro)o(vide)f(basic)h(equations)g(from)
e(category)j(theory)e(\(juxtap)q(osition)150 1150 y(is)f(application\).)614
1230 y(\()p Fx(Ass)p FA(\))73 b(\()p Fx(x)11 b Fz(\016)g Fx(y)r
FA(\))16 b Fx(z)160 b FA(=)41 b Fx(x)16 b FA(\()p Fx(y)i(z)r
FA(\))614 1319 y(\()p Fx(F)7 b(st)p FA(\))76 b Fx(F)7 b(st)29
b(<)14 b(x;)8 b(y)15 b(>)50 b FA(=)41 b Fx(x)614 1409 y FA(\()p
Fx(S)s(nd)p FA(\))69 b Fx(S)s(nd)31 b(<)14 b(x;)8 b(y)15 b(>)41
b FA(=)g Fx(y)614 1499 y FA(\()p Fx(dpair)q FA(\))g Fx(<)14
b(x;)8 b(y)15 b(>)30 b(z)106 b FA(=)41 b Fx(<)14 b(x)i(z)r(;)8
b(y)18 b(z)e(>)614 1588 y FA(\()p Fx(d)p FA(\003\))97 b(\003\()p
Fx(x)p FA(\))16 b Fx(y)i(z)157 b FA(=)41 b Fx(x)16 b FA(\()p
Fx(y)r(;)8 b(z)r FA(\))614 1678 y(\()p Fx(app)p FA(\))82 b
Fx(App)17 b FA(\()p Fx(x;)8 b(y)r FA(\))122 b(=)41 b Fx(x)16
b(y)614 1768 y FA(\()p Fx(q)r(uote)p FA(\))40 b(\()827 1750
y Fr(0)839 1768 y Fx(x)p FA(\))16 b Fx(y)220 b(x)150 1855 y
FA(The)19 b(\()p Fx(Ass)p FA(\))g(giv)o(es)f(the)h(asso)q(ciativ)o(e)g
(equations.)31 b(The)19 b(equations)g(\()p Fx(F)7 b(st)p FA(\))19
b(and)g(\()p Fx(S)s(nd)p FA(\))h(are)f(the)150 1979 y(pro)s(jections)14
b(on)h(a)g(pair,)g(while)f(\()p Fx(dpair)q FA(\))g(is)h(the)f(distributiv)o
(e)f(rule.)20 b(Currying)15 b(is)f(accomplished)150 2103 y(b)o(y)j(the)h(\()p
Fx(d)p FA(\003\))g(while)f(an)i(application)f(is)f(de\014ned)h(b)o(y)g(the)f
(equation)h(\()p Fx(app)p FA(\).)27 b(The)18 b(\()p Fx(q)r(uote)p
FA(\))f(is)h(a)150 2228 y(constan)o(t.)200 2352 y(The)d(state)h(of)f(the)g
(abstract)h(mac)o(hine)d(is)i(a)h(triple)e(\()p Fx(V)s(;)8
b(C)q(;)g(D)q FA(\))16 b(with)f(state)h(transitions)f(in)g(the)150
2476 y(form:)783 2600 y(\()p Fx(V)s(;)8 b(C)q(;)g(D)q FA(\))14
b(=)-8 b Fz(\))14 b FA(\()p Fx(V)1139 2580 y Fr(0)1151 2600
y Fx(;)8 b(C)1212 2580 y Fr(0)1223 2600 y Fx(;)g(D)1286 2580
y Fr(0)1298 2600 y FA(\))p eop
%%Page: 16 25
24 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)653 b(16)150
141 y FA(The)16 b(state)h(transitions)f(of)h(this)f(mac)o(hine)e(deriv)o(ed)h
(from)g(the)h(ab)q(o)o(v)o(e)g(equations)h(are:)533 255 y Fx(V)218
b(C)145 b(D)84 b FA(=)-8 b Fz(\))41 b Fx(V)1243 237 y Fr(0)1393
255 y Fx(C)1432 237 y Fr(0)1484 255 y Fx(D)1525 237 y Fr(0)533
345 y Fz(h)p Fx(v)576 352 y Fm(0)596 345 y Fx(;)8 b(v)642 352
y Fm(1)661 345 y Fz(i)99 b Fx(f)5 b(st:c)75 b(d)99 b FA(=)-8
b Fz(\))41 b Fx(v)1228 352 y Fm(0)1393 345 y Fx(c)70 b(d)533
434 y Fz(h)p Fx(v)576 441 y Fm(0)596 434 y Fx(;)8 b(v)642 441
y Fm(1)661 434 y Fz(i)99 b Fx(snd:c)68 b(d)99 b FA(=)-8 b Fz(\))41
b Fx(v)1228 441 y Fm(1)1393 434 y Fx(c)70 b(d)533 524 y(v)779
506 y Fr(0)791 524 y Fx(k)r(:c)106 b(d)99 b FA(=)-8 b Fz(\))41
b Fx(k)164 b(c)70 b(d)533 614 y(v)222 b FA(\003\()p Fx(c)853
596 y Fr(0)864 614 y FA(\))p Fx(:c)41 b(d)99 b FA(=)-8 b Fz(\))41
b FA(\()p Fx(c)1244 596 y Fr(0)1272 614 y Fx(v)r FA(\))76 b
Fx(c)70 b(d)533 703 y(v)222 b Fz(h)p Fx(:c)126 b(d)99 b FA(=)-8
b Fz(\))41 b Fx(v)165 b(c)70 b(v)r(:d)533 793 y(v)557 800 y
Fm(0)779 793 y Fx(;)8 b(:c)123 b(v)r(:d)59 b FA(=)-8 b Fz(\))41
b Fx(v)165 b(c)70 b(v)1508 800 y Fm(0)1528 793 y Fx(:d)533
883 y(v)557 890 y Fm(1)779 883 y Fz(i)p Fx(:c)126 b(v)983 890
y Fm(0)1003 883 y Fx(:d)41 b FA(=)-8 b Fz(\))41 b(h)p Fx(v)1247
890 y Fm(0)1267 883 y Fx(;)8 b(v)1313 890 y Fm(1)1332 883 y
Fz(i)42 b Fx(c)70 b(d)533 972 y Fz(h)p Fx(k)r(:)17 b(v)634
979 y Fm(0)653 972 y Fx(;)8 b(v)699 979 y Fm(1)718 972 y Fz(i)42
b Fx(app:c)71 b(d)99 b FA(=)-8 b Fz(\))41 b(h)p Fx(v)1247 979
y Fm(0)1267 972 y Fx(;)8 b(v)1313 979 y Fm(1)1332 972 y Fz(i)42
b Fx(d)533 1062 y(v)222 b(\017)160 b(d)99 b FA(=)-8 b Fz(\))156
b FA(STOP)150 1168 y(The)17 b(\()p Fx(dpair)q FA(\))g(com)o(binator)f
(distributes)h(a)g(v)m(alue)g(o)o(v)o(er)f(a)h(pair)g(and)h(is)e(split)h(in)o
(to)f(three)h(op)q(era-)150 1269 y(tions)h(in)f(the)g(CAM)g(mac)o(hine.)22
b(The)17 b(\\)p Fz(h)p FA(")i(pushes)e(the)h(curren)o(t)e(v)m(alue)h
Fx(v)i FA(on)f(the)f(dump,)f(while)150 1371 y(the)k(\\)p Fx(;)p
FA(")h(sw)o(aps)g(the)f(v)m(alue)g(of)h(the)f(dump)g(with)g(the)g(v)m(alue)g
(stac)o(k.)33 b(Lastly)l(,)22 b(the)e(\\)p Fz(i)p FA(")h(creates)150
1472 y(a)e(pair)f(with)g(the)g(v)m(alue)g(stac)o(k)g(and)h(top)f(of)h(the)f
(dump)f(stac)o(k.)27 b(F)l(or)18 b(example,)e(if)i(the)g(curren)o(t)150
1574 y(con\014guration)f(of)g(the)f(mac)o(hine)e(is:)897 1688
y Fx(V)53 b(C)148 b(D)p 876 1716 348 2 v 897 1779 a(v)57 b
Fz(h)p Fx(c)1018 1786 y Fm(0)1038 1779 y Fx(;)8 b(c)1081 1786
y Fm(1)1100 1779 y Fz(i)42 b Fx(d)150 1882 y FA(where)15 b
Fx(c)311 1889 y Fm(0)345 1882 y FA(:)e Fx(v)i Fz(!)f Fx(v)499
1889 y Fm(0)534 1882 y FA(and)i Fx(c)649 1889 y Fm(1)683 1882
y FA(:)d Fx(v)i Fz(!)f Fx(v)837 1889 y Fm(1)856 1882 y FA(.)21
b(The)16 b(mac)o(hine)e(w)o(ould)h(execute)f(from)h(this)g(initial)g(state)
150 1984 y(as)i(follo)o(ws:)823 2050 y Fx(V)160 b(C)149 b(D)p
802 2079 496 2 v 823 2142 a(v)164 b Fz(h)p Fx(c)1051 2149 y
Fm(0)1072 2142 y Fx(;)8 b(c)1115 2149 y Fm(1)1134 2142 y Fz(i)42
b Fx(d)823 2231 y(v)164 b(c)1032 2238 y Fm(0)1052 2231 y Fx(;)8
b(c)1095 2238 y Fm(1)1115 2231 y Fz(i)61 b Fx(v)r(:d)823 2321
y(v)847 2328 y Fm(0)1011 2321 y Fx(;)8 b(c)1054 2328 y Fm(1)1074
2321 y Fz(i)102 b Fx(v)r(:d)823 2411 y(v)164 b(c)1032 2418
y Fm(1)1052 2411 y Fz(i)124 b Fx(v)1219 2418 y Fm(0)1238 2411
y Fx(:d)823 2500 y(v)847 2507 y Fm(1)1011 2500 y Fz(i)165 b
Fx(v)1219 2507 y Fm(0)1238 2500 y Fx(:d)823 2590 y Fz(h)p Fx(v)866
2597 y Fm(0)885 2590 y Fx(;)8 b(v)931 2597 y Fm(1)951 2590
y Fz(i)41 b Fx(\017)164 b(d)p eop
%%Page: 17 26
25 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)653 b(17)150
141 y FA(In)21 b(the)g(dev)o(elopmen)o(t)e(of)i(the)g(Charit)o(y)g(abstract)h
(mac)o(hine)e(in)h(Chapters)h(5)g(to)f(7)h(w)o(e)f(adapt)150
233 y(the)c(CAM)g(mac)o(hine)e(to)j(ev)m(aluate)f(a)h(di\013eren)o(t)f(set)g
(of)h(categorical)f(com)o(binators.)24 b(The)17 b(ab)q(o)o(v)o(e)150
324 y(execution)k(of)i(the)f(implem)o(en)o(tati)o(on)e(of)j(the)f(pair)h(com)
o(binator)e(is)h(particularly)f(in)o(teresting)150 415 y(since)15
b(w)o(e)h(will)f(incorp)q(orate)i(the)f(same)f(ev)m(aluation)i(tec)o(hnique)d
(on)j(pro)q(ducts)g(in)f(c)o(hapter)g(7.)150 600 y Fs(2.3.3.)32
b(Other)22 b(implemen)n(tations)150 726 y FA(Compiled)f(implem)o(en)o(tati)o
(ons)g(attempt)g(to)i(reconcile)e(the)i(v)m(astly)f(di\013eren)o(t)g(approac)
o(hes)i(of)150 817 y(graph)17 b(reducers,)f(stac)o(k)g(based,)g(and)h(com)o
(binator)e(implem)o(en)o(tations)f(with)i(curren)o(t)f(compiler)150
908 y(tec)o(hnology)i(for)h(imp)q(erativ)o(e)d(languages.)26
b(T)l(o)18 b(implem)o(en)n(t)d(functional)i(languages)i(on)f(curren)o(t)150
1000 y(mac)o(hines,)f(compiled)g(implem)o(en)n(tations)g(b)q(orro)o(w)j(hea)o
(vily)d(from)h(their)g(imp)q(erativ)o(e)e(coun)o(ter-)150 1091
y(parts,)d(while)e(trying)h(to)g(retain)f(the)h(optimizations)f(and)h(formal)
f(framew)o(ork)f(of)i(the)g(traditional)150 1182 y(functional)k(paradigm.)150
1309 y Fs(Spineless)23 b(T)-6 b(agless)22 b(G{mac)n(hine)200
1504 y FA(The)d(spineless)g(tagless)g(G{mac)o(hine)f([Jon92)q(])h(is)g(a)g
(syn)o(thesis)g(of)g(the)g(G{mac)o(hine)f([Kie85)o(])150 1595
y(and)j(the)e(TIM)h([FW87])f(mac)o(hine,)g(b)q(orro)o(wing)i(the)e(b)q(est)i
(of)f(b)q(oth)h(arc)o(hitectures.)30 b(The)20 b(aim)150 1687
y(of)d(this)g(mac)o(hine)e(is)i(to)g(unify)g(man)o(y)f(of)h(the)g(principles)
e(of)j(traditional)f(compiler)d(tec)o(hnology)150 1778 y(with)k(those)h(of)g
(functional)f(language)i(compilers.)25 b(The)19 b(discussion)g(of)f(the)h
(spineless)f(tagless)150 1869 y(G{mac)o(hine)d(b)q(egins)h(b)o(y)g(in)o(tro)q
(ducing)g(the)g(G{mac)o(hine)f(and)i(TIM)f(mac)o(hine.)200
1961 y(The)h(main)f(idea)g(b)q(ehind)i(the)e(G{mac)o(hine)g(is)h(to)g(pro)o
(vide)f(a)i(compiled)d(implem)o(en)n(tation)g(of)150 2052 y(some)h(term)f
(logic)i(in)o(to)f(G{co)q(de.)24 b(This)17 b(G{co)q(de)h(p)q(erforms)e(a)i
(linear)e(sequence)g(of)h(op)q(erations)150 2143 y(to)j(construct,)g(tra)o(v)
o(erse)e(and)i(reduce)f(the)g(graph)i(in)e(the)g(heap.)32 b(The)19
b(pro)q(cess)h(of)g(compiling)150 2235 y(\015attens)e(the)g(tree)f(structure)
h(of)g(the)g(expression)g(in)o(to)f(G{co)q(de)i(in)f(a)g(p)q(ost\014x)h
(form.)25 b(That)19 b(is,)150 2326 y(the)f(c)o(hildren)e(of)j(an)f
(expression)g(are)g(ev)m(aluated)g(b)q(efore)g(a)g(no)q(de.)28
b(A)17 b(simple)f(example)g(w)o(ould)150 2418 y(b)q(e)23 b(the)f(p)q
(ost\014x)h(ev)m(aluation)g(of)g(arithmetic)d(expressions.)40
b(Lazy)22 b(graph)i(reduction)e(in)g(this)150 2509 y(mac)o(hine)13
b(is)h(ac)o(hiev)o(ed)f(b)o(y)i(o)o(v)o(erwriting)e(\(up)q(dating\))j(the)f
(ro)q(ot)h(no)q(de)f(after)g(the)g(expression)f(has)150 2600
y(b)q(een)i(ev)m(aluated.)p eop
%%Page: 18 27
26 bop 851 33 a Fy(2.)24 b(BA)o(CK)o(GR)o(OUND)653 b(18)200
141 y FA(The)19 b(TIM)f(mac)o(hine)f(con)o(tains)i(only)g(three)f
(instructions:)27 b(tak)o(e,)18 b(push)i(and)g(en)o(ter.)28
b(These)150 231 y(three)14 b(instructions)h(build,)f(tra)o(v)o(erse)f(and)j
(ev)m(aluate)e(the)h(sup)q(ercom)o(binator)f(expression)g(repre-)150
320 y(sen)o(ted)f(as)i(a)f(graph.)21 b(Compiling)13 b(the)g(term)f(logic)i
(to)g(TIM)f(mac)o(hine)f(instructions)i(is)f(a)h(pro)q(cess)150
410 y(of)21 b(\015attening)g(as)h(in)e(the)g(G{mac)o(hine)g(and)h(tupling)g
(shared)g(expressions)g(so)g(that)g(common)150 500 y(sub)q(expressions)c(are)
f(only)g(ev)m(aluated)g(once.)200 589 y(The)g(push)i(instruction)e(pushes)h
(an)g(argumen)o(t)f(on)o(to)h(the)f(stac)o(k.)22 b(When)17
b(there)f(are)g(enough)150 679 y(argumen)o(ts)22 b(on)h(the)f(stac)o(k)g(to)h
(ev)m(aluate)f(the)g(expression,)h(a)g(tak)o(e)f(instruction)g(tak)o(es)g
(these)150 769 y(argumen)o(ts)e(and)h(builds)g(a)g(frame.)33
b(Argumen)o(ts)19 b(in)h(a)h(frame)f(are)h(accessed)f(b)o(y)g(en)o(tering)g
(it.)150 858 y(The)f(TIM)f(mac)o(hine)e(is)j(a)g(spineless)f(mac)o(hine)e(in)
j(that)g(there)f(is)g(no)h(spine)g(to)g(tra)o(v)o(erse.)27
b(The)150 948 y(spine)12 b(of)g(an)g(expression)g(refers)f(to)i(the)e(un)o
(winding)h(of)g(an)h(expression)e(\(graph\))i(to)g(\014nd)f(the)g(next)150
1038 y(reduction.)21 b(The)16 b(TIM)g(do)q(es)h(not)g(require)e(an)o(y)h(un)o
(winding)g(since)g(the)g(compiled)e(instructions)150 1127 y(build)i(and)g
(reduce)g(the)g(graph.)200 1217 y(As)d(the)f(name)g(implies,)e(the)j
(spineless)f(tagless)i(G{mac)o(hine)d(is)i(spineless)f(in)h(the)f(sense)h(of)
g(the)150 1307 y(TIM)j(mac)o(hine.)j(Ho)o(w)o(ev)o(er,)14 b(this)i(mac)o
(hine)f(is)h(also)h(tagless)f(b)q(ecause)h(ob)s(jects)f(in)g(this)g(mac)o
(hine)150 1396 y(p)q(oin)o(t)f(to)f(actual)h(co)q(de)g(instead)f(of)h(using)g
(a)f(tag)i(to)e(di\013eren)o(tiate)g(t)o(w)o(o)g(ob)s(jects.)20
b(Similar)12 b(to)j(the)150 1486 y(G{mac)o(hine,)g(ob)s(jects)i(in)g(this)g
(system)f(p)q(oin)o(t)h(to)h(the)f(actual)g(co)q(de)g(to)h(execute,)e(a)o(v)o
(oiding)g(the)150 1576 y(cost)h(of)f(in)o(terpreting)f(some)g(instruction.)
200 1665 y(The)22 b(implem)o(en)n(tation)e(of)i(the)g(Charit)o(y)g(abstract)g
(mac)o(hine)e(will)h(use)h(the)g(tec)o(hniques)f(of)150 1755
y(lazy)13 b(graph)h(reduction)f(to)h(ev)m(aluate)f(com)o(binators)g(compiled)
e(to)j(\\macro)f(co)q(de".)21 b(Th)o(us,)13 b(man)o(y)150 1845
y(tec)o(hniques)18 b(in)o(tro)q(duced)i(in)f(this)h(section)f(con)o(tribute)g
(to)h(the)g(dev)o(elopmen)o(t)d(of)j(the)f(Charit)o(y)150 1934
y(abstract)i(mac)o(hine.)32 b(F)l(or)20 b(example,)f(the)h(closure)h(mec)o
(hanism)c(of)j(the)h(TIM)f(mac)o(hine)e(is)i(in-)150 2024 y(corp)q(orated)g
(in)o(to)e(the)h(ev)m(aluation)g(of)g(coinductiv)o(e)e(com)o(binators.)28
b(The)19 b(ev)m(aluation)g(of)g(these)150 2114 y(com)o(binators)e(are)i(susp)
q(ended)g(un)o(til)e(their)h(ev)m(aluation)h(is)f(forced)g(b)o(y)g(applying)g
(a)h(destructor)150 2203 y(\(more)c(on)i(the)f(implem)o(e)o(n)o(tation)e(can)
i(b)q(e)h(found)f(in)g(c)o(hapter)g(6\).)p eop
%%Page: 19 28
27 bop 1574 509 a Fw(Chapter)34 b Fv(3)681 633 y FB(The)27
b(Charit)n(y)f(programming)i(language)p 150 689 1800 2 v 150
877 a FA(This)18 b(c)o(hapter)g(describ)q(es)g(the)g(programming)f(language)i
(Charit)o(y)l(.)27 b(While)17 b(the)h(language)h(has)150 968
y(foundations)g(in)f(category)g(theory)g(\(see)g([CF92]\),)g(one)g(do)q(es)h
(not)f(require)f(an)o(y)h(kno)o(wledge)g(of)150 1058 y(it)h(to)h(write)g
(programs.)31 b(Charit)o(y)20 b(programs)g(resem)o(ble)d(those)j(written)f
(in)g(other)h(functional)150 1149 y(languages,)c(where)f(a)g(collection)f(of)
h(simple)e(functions)i(are)g(com)o(bined)e(together)j(to)f(pro)q(duce)h(a)150
1240 y(program.)k(In)11 b(addition,)h(features)g(suc)o(h)f(as)h(strong)h(t)o
(yp)q(e)e(c)o(hec)o(king,)f(whic)o(h)h(resolv)o(e)g(the)g(t)o(yp)q(es)h(of)
150 1330 y(all)17 b(functions)h(at)h(compile)c(time,)h(ensure)i(that)g(comp)q
(osed)g(functions)g(are)g(compatible.)24 b(This)150 1421 y(t)o(yp)q(e)e(c)o
(hec)o(king)e(mec)o(hanism)f(guaran)o(tees)j(t)o(yp)q(e)g(mismatc)o(h)d
(errors)j(can)h(nev)o(er)d(arise)i(at)h(run)150 1512 y(time.)200
1603 y(User)11 b(de\014ned)h(p)q(olymorphic)f(datat)o(yp)q(es)h(are)g(the)g
(building)g(blo)q(c)o(ks)g(of)g(Charit)o(y)g(programs.)19 b(A)150
1693 y(cen)o(tral)11 b(feature)h(of)g(Charit)o(y)g(is)g(the)f(separation)i
(of)g(the)e(datat)o(yp)q(es)i(in)o(to)f(t)o(w)o(o)g(classes:)19
b(inductiv)o(e)150 1784 y(and)f(coinductiv)o(e.)24 b(Inductiv)o(e)16
b(datat)o(yp)q(es)i(include)f(man)o(y)f(familiar)f(data)k(structures)f(used)f
(in)150 1875 y(computer)f(science,)f(suc)o(h)i(as)h(a)g(lists)f(and)h(trees.)
23 b(The)18 b(pure)f(inductiv)o(e)e(datat)o(yp)q(es)j(are)f(\014nite.)150
1965 y(Coinductiv)o(e)g(datat)o(yp)q(es)i(suc)o(h)f(as)h(in\014nite)e(lists)h
(are)g(the)g(dual)g(of)h(the)f(inductiv)o(e)e(datat)o(yp)q(es.)150
2056 y(Coinductiv)o(e)d(datat)o(yp)q(es)j(suc)o(h)e(as)h(colists)f(and)i
(cotrees)e(are)g(p)q(oten)o(tially)l(,)g(but)h(not)g(necessarily)l(,)150
2147 y(in\014nite)g(in)h(nature.)200 2238 y(The)22 b(Charit)o(y)g(language)i
(has)f(a)g(v)o(ery)e(simple)f(syn)o(tax,)j(with)f(only)h(six)f(basic)g(op)q
(erations)150 2328 y(for)17 b(data)i(manipulation,)c(as)j(w)o(ell)e(as)i(a)g
(means)e(of)h(de\014ning)h(b)q(oth)g(datat)o(yp)q(es)g(and)f(functions.)150
2419 y(De\014ning)i(a)g(datat)o(yp)q(e)g(in)f(this)h(system)e(generates)i
(three)f(of)h(the)g(six)f(op)q(erations)i(for)f(manip-)150
2510 y(ulating)g(data.)30 b(The)19 b(inductiv)o(e)e(datat)o(yp)q(es)j(pro)q
(duce)f(the)g(op)q(erations)h(case,)f(fold)g(and)h(map)1925
2492 y Fk(L)150 2600 y FA(while)15 b(the)h(coinductiv)o(e)f(datat)o(yp)q(es)i
(yield)d(the)i(op)q(erations)i(record,)d(unfold)i(and)g(map)1783
2582 y Fk(R)1811 2600 y FA(.)1027 2700 y Fy(19)p eop
%%Page: 20 29
28 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(20)200 141 y FA(Charit)o(y)22 b(programs)g(are)h(strongly)f(normalizing,)g
(in)g(the)g(sense)g(that)h(terms)e(will)g(alw)o(a)o(ys)150
231 y(reduce)16 b(to)i(a)g(normal)e(form)g(after)h(a)h(\014nite)f(series)f
(of)i(reductions.)24 b(General)17 b(recursion,)g(whic)o(h)150
321 y(sometimes)10 b(has)15 b(b)q(een)e(called)f(the)i(\\goto)g(of)g
(functional)f(languages",)j(is)d(not)h(p)q(ermitted)d(in)i(this)150
410 y(language.)22 b(Th)o(us,)16 b(the)g(p)q(ossibilit)o(y)f(of)h(writing)g
(in\014nitely)e(recursiv)o(e)g(functions)i(is)g(eliminated.)150
500 y(Charit)o(y)d(promotes)g(a)g(disciplined)f(st)o(yle)g(of)i(programming)e
(where)h(data)h(can)g(only)f(b)q(e)g(accessed)150 590 y(and)i(manipulated)f
(through)i(one)e(of)i(three)e(op)q(erations)i(deliv)o(ered)c(b)o(y)i(datat)o
(yp)q(e)h(declarations.)200 680 y(Charit)o(y)20 b(programs)g(are)g(expressed)
g(in)g(a)g(term)f(logic)g(whic)o(h)h(will)f(b)q(e)h(describ)q(ed)g(through)
150 769 y(examples)14 b(in)i(the)g(remainder)f(of)h(this)g(c)o(hapter.)150
932 y FB(3.1.)42 b(Basic)26 b(t)n(yp)r(es)h(and)g(terms)200
1047 y FA(There)16 b(are)g(t)o(w)o(o)g(basic)g(t)o(yp)q(es)g(in)g(Charit)o
(y:)253 1149 y Fz(\017)21 b FA(1)16 b(\(unit\))253 1239 y Fz(\017)21
b(\002)16 b FA(\(pro)q(ducts\).)150 1341 y(These)h(t)o(w)o(o)g(basic)g(t)o
(yp)q(es)g(come)e(equipp)q(ed)h(with)h(term)f(formation)g(rules.)23
b(The)17 b(unit)g(t)o(yp)q(e)f(has)150 1431 y(the)g(term)f(formation)g(rule:)
p 998 1555 104 2 v 998 1600 a(\(\))f(:)f(1)150 1771 y(whic)o(h)k(allo)o(ws)g
(in)o(tro)q(duction)g(of)h(a)f(basic)h(term)d(\(the)i(0{tuple\).)25
b(Giv)o(en)16 b(the)h(t)o(yp)q(es)g(\(or)h(terms\))150 1861
y(on)i(the)f(top)i(line,)d(the)i(term)e(on)i(the)f(b)q(ottom)g(line)g(can)h
(b)q(e)f(inferred.)31 b(The)19 b(ab)q(o)o(v)o(e)h(rule)f(sa)o(ys)150
1950 y(that)e(\\from)e(nothing,)i(a)f(term)f(\(\))h(can)g(b)q(e)h(pro)q
(duced)f(whic)o(h)g(has)h(t)o(yp)q(e)f(1".)200 2040 y(The)h(term)f(formation)
g(rules)h(for)g(pro)q(ducts)i(describ)q(e)d(ho)o(w)i(pairs)f(and)h(the)f(pro)
s(jections)g(are)150 2130 y(created:)634 2275 y Fx(a)d FA(:)f
Fx(A)48 b(b)14 b FA(:)f Fx(B)p 619 2284 285 2 v 619 2330 a
FA(\()p Fx(a;)8 b(b)p FA(\))13 b(:)g Fx(A)e Fz(\002)g Fx(B)986
2270 y(x)j FA(:)f Fx(A)e Fz(\002)g Fx(B)p 986 2284 206 2 v
992 2330 a(P)1023 2337 y Fm(0)1043 2330 y FA(\()p Fx(x)p FA(\))j(:)f
Fx(A)1275 2270 y(x)h FA(:)f Fx(A)e Fz(\002)g Fx(B)p 1275 2284
V 1279 2330 a(P)1310 2337 y Fm(1)1331 2330 y FA(\()p Fx(x)p
FA(\))i(:)g Fx(B)200 2408 y FA(In)20 b(addition,)i(Charit)o(y)e(pro)o(vides)g
(a)h(means)f(of)h(abstracting)h(terms)d(similar)f(to)k(the)e
Fx(\025)h FA(ab-)150 2498 y(straction)16 b(of)h(c)o(hapter)f(2.)21
b(Charit)o(y)16 b(abstractions)i(are)e(written)g(as:)586 2600
y Fj({)25 b(v)g(=>)g(t)g(})p eop
%%Page: 21 30
29 bop 517 33 a Fy(3.)19 b(THE)g(CHARITY)h(PR)o(OGRAMMING)d(LANGUA)o(GE)320
b(21)150 141 y FA(and)17 b(ha)o(v)o(e)e(the)h(follo)o(wing)g(term)f
(formation)g(rule:)915 290 y Fx(v)g Fz(2)f Fx(A)49 b(t)13 b
FA(:)g Fx(B)p 861 302 379 2 v 861 348 a Fz(f)p Fx(v)i Fz(7!)e
Fx(t)p Fz(g)h FA(::)f Fx(A)g Fz(!)h Fx(B)150 428 y FA(where)h
Fx(v)h FA(is)f(a)g(v)m(ariable)g(base)g(\(a)h(sequence)e(of)h(v)m(ariables,)g
(see)f(app)q(endix)h(A\))g(and)h Fx(t)e FA(is)h(the)g(term)150
518 y(b)q(eing)i(abstracted.)24 b(Note)16 b(that)i(abstractions)g(are)f(not)g
(terms.)22 b(Rather,)16 b(they)h(are)g(\014rst)g(order)150
608 y(functions)f(as)h(indicated)f(b)o(y)f(the)h(\(::\).)200
697 y(Ev)m(aluation)h(of)f(functions)h(is)f(done)g(with)g(the)g(rule:)859
837 y Fx(f)j FA(::)13 b Fx(A)h Fz(!)f Fx(B)52 b(t)13 b FA(:)g
Fx(A)p 859 857 382 2 v 967 903 a(f)5 b FA(\()p Fx(t)p FA(\))14
b(:)f Fx(B)150 983 y FA(whic)o(h,)i(giv)o(en)g(a)i(function)f
Fx(f)22 b FA(and)17 b(a)f(term)f Fx(t)p FA(,)g(forms)h(a)g(new)g(term)f
Fx(f)5 b FA(\()p Fx(t)p FA(\).)150 1145 y FB(3.2.)42 b(Inductiv)n(e)25
b(datat)n(yp)r(es)200 1259 y FA(Inductiv)o(e)13 b(datat)o(yp)q(es)j(pro)o
(vide)e(the)h(classical)f(data)i(structures)f(of)g(computer)f(science.)19
b(The)150 1349 y(syn)o(tax)d(for)h(inductiv)o(e)d(datat)o(yp)q(e)j
(de\014nitions)f(is:)583 1463 y(data)h Fx(L)p FA(\()p Fx(A)p
FA(\))c Fz(\000)-8 b(!)13 b Fx(S)k FA(=)42 b Fx(c)1057 1470
y Fm(1)1090 1463 y FA(:)14 b Fx(E)1154 1470 y Fm(1)1173 1463
y FA(\()p Fx(A;)8 b(S)s FA(\))49 b Fz(\000)-9 b(!)41 b Fx(S)980
1553 y Fz(j)1036 1520 y FA(.)1036 1536 y(.)1036 1553 y(.)980
1642 y Fz(j)h Fx(c)1057 1649 y Fk(n)1094 1642 y FA(:)13 b Fx(E)1157
1649 y Fk(n)1181 1642 y FA(\()p Fx(A;)8 b(S)s FA(\))41 b Fz(\000)-9
b(!)41 b Fx(S:)150 1748 y FA(This)17 b(de\014nition)g(in)o(tro)q(duces)g(a)h
(new)f(t)o(yp)q(e)g Fx(L)h FA(and)g(constructors)g Fx(c)1417
1755 y Fk(i)1448 1748 y FA(\()p Fx(i)d FA(=)h(1)p Fx(:::n)p
FA(\).)24 b(The)17 b(t)o(yp)q(e)g Fx(L)150 1838 y FA(is)h(parametric)e(ab)q
(out)k(a)e(t)o(yp)q(e)g(v)m(ariable)f(A)h(\(whic)o(h)f(stands)i(for)g(a)f
(\014nite)f(sequence)g(of)i(t)o(yp)q(es\).)150 1928 y(The)i(constructors)g
Fx(c)557 1935 y Fm(1)597 1928 y FA(through)h Fx(c)807 1935
y Fk(n)851 1928 y FA(are)e(used)h(in)f(building)g(elemen)o(ts)e(of)i(t)o(yp)q
(e)h Fx(L)p FA(\()p Fx(A)p FA(\).)33 b(They)150 2017 y(ha)o(v)o(e)15
b(t)o(yp)q(es:)792 2107 y Fx(c)813 2114 y Fk(i)841 2107 y FA(:)e
Fx(E)904 2114 y Fk(i)919 2107 y FA(\()p Fx(A;)8 b(L)p FA(\()p
Fx(A)p FA(\)\))13 b Fz(!)g Fx(L)p FA(\()p Fx(A)p FA(\))150
2215 y(where)j(the)g(state)g(v)m(ariable)g Fx(S)j FA(has)e(b)q(een)g(replace)
e(with)h Fx(L)p FA(\()p Fx(A)p FA(\).)150 2389 y Fs(3.2.1.)32
b(Bo)r(oleans)150 2511 y FA(One)11 b(of)g(the)g(most)g(basic)g(datat)o(yp)q
(es)g(is)g(the)g(b)q(o)q(olean)i(t)o(yp)q(e.)19 b(Bo)q(olean)11
b(and)h(its)f(t)o(w)o(o)g(constructors,)150 2600 y(false)16
b(and)h(true,)e(are)i(deliv)o(ered)d(to)i(the)g(system)f(b)o(y)h(the)g
(declaration:)p eop
%%Page: 22 31
30 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(22)534 201 y Fj(data)25 b(bool)f(->)h(C)g(=)g(false:)f(1)h(->)g(C)919
261 y(|)g(true)f(:)i(1)f(->)g(C.)150 366 y FA(In)15 b(this)g(de\014nition,)f
(the)h(domain)g(t)o(yp)q(e)g Fx(E)s FA(\()p 959 366 15 2 v
17 w Fx(;)8 b(C)t FA(\))15 b(equals)g(the)g(basic)g(t)o(yp)q(e)f(1)i(for)f(b)
q(oth)i(construc-)150 457 y(tors.)200 549 y(A)e(function)h(is)f(de\014ned)h
(in)g(c)o(harit)o(y)e(using)i(the)g Fj(def)f FA(k)o(eyw)o(ord.)20
b(These)c(de\014nitions)f(ha)o(v)o(e)g(the)150 640 y(form:)534
746 y Fj(def)25 b(f\(v\))f(=)h(t.)150 851 y FA(where)15 b Fj(f)g
FA(is)g(a)h(function)f(name,)f Fj(v)h FA(is)g(a)h(v)m(ariable)f(base,)g(and)h
Fj(t)f FA(is)g(a)h(term.)j(De\014ning)c(a)h(function)150 942
y(really)f(de\014nes)h(an)h(abstraction)g(with)f(a)h(lab)q(el)f(since:)631
1048 y Fj(def)24 b(f)h(=)h Fz(f)f Fj(v)g(=>)g(t)h Fz(g)16 b(\021)g
Fj(def)24 b(f\(v\))h(=)g(t)200 1153 y FA(Some)15 b(common)g(functions)h
(using)h(the)g(b)q(o)q(olean)h(t)o(yp)q(e)e(are)h(the)f(b)q(o)q(olean)i
Fj(and)p FA(,)d Fj(or)p FA(,)h(and)h Fj(not)150 1244 y FA(de\014ned)f(in)g
(Charit)o(y)g(as:)150 1378 y Fj(def)25 b(and\(x,y\))d(=)256
b(def)25 b(or\(x,y\))e(=)281 b(def)25 b(not\(x\))227 1438 y({)g(true\(\))49
b(=>)25 b(y)256 b({)25 b(true\(\))49 b(=>)25 b(y)256 b({)26
b(true\(\))49 b(=>)25 b(false)227 1498 y(|)g(false\(\))e(=>)i(false)152
b(|)25 b(false\(\))e(=>)i(false)152 b(|)26 b(false\(\))d(=>)i(true)227
1557 y(})g(\(x\).)460 b(})25 b(\(x\).)460 b(})26 b(\(x\).)150
1663 y FA(These)18 b(three)f(functions)h(in)o(tro)q(duce)f(the)g(case)h(op)q
(eration,)h(the)e(\014rst)h(of)g(the)g(three)f(op)q(erations)150
1754 y(used)d(in)g(manipulating)f(the)h(v)m(alues)g(of)h(inductiv)o(e)d
(datat)o(yp)q(es.)21 b(The)15 b(case)f(op)q(eration)h(examines)150
1846 y(the)k(\\ro)q(ot")i(of)e(the)g(data)h(elemen)o(t)d(to)i(determine)e
(whic)o(h)h(action)h(to)h(p)q(erform.)29 b(The)19 b(general)150
1937 y(form)c(of)i(the)f(case)g(construct)g(is:)809 1988 y
Fi(8)809 2026 y(>)809 2038 y(>)809 2051 y(>)809 2063 y(>)809
2076 y(<)809 2150 y(>)809 2163 y(>)809 2175 y(>)809 2188 y(>)809
2200 y(:)874 2041 y Fx(c)895 2048 y Fm(1)915 2041 y FA(\()p
Fx(v)958 2048 y Fm(1)977 2041 y FA(\))41 b Fz(7!)h Fx(t)1147
2048 y Fm(1)1055 2098 y FA(.)1055 2114 y(.)1055 2131 y(.)866
2221 y Fx(c)887 2228 y Fk(n)911 2221 y FA(\()p Fx(v)954 2228
y Fk(n)977 2221 y FA(\))f Fz(7!)h Fx(t)1147 2228 y Fk(n)1191
1988 y Fi(9)1191 2026 y(>)1191 2038 y(>)1191 2051 y(>)1191
2063 y(>)1191 2076 y(=)1191 2150 y(>)1191 2163 y(>)1191 2175
y(>)1191 2188 y(>)1191 2200 y(;)1236 2125 y FA(\()p Fx(t)p
FA(\))150 2326 y(where)20 b Fx(c)316 2333 y Fk(i)351 2326 y
FA(is)g(a)h(constructor)g(of)g(a)g(data)g(t)o(yp)q(e,)g Fx(v)1084
2333 y Fk(i)1118 2326 y FA(is)f(the)g(parameter)g(of)g(the)h(constructor)g
(\(a)150 2418 y(v)m(ariable)d(base,)g(see)g(app)q(endix)g(A\),)g
Fx(t)859 2425 y Fk(i)890 2418 y FA(is)g(the)g(phrase)h(to)f(ev)m(aluate)g
(when)g(the)g(corresp)q(onding)150 2509 y(constructor)e(is)f(encoun)o(tered)g
(and)h Fx(t)f FA(is)h(the)f(term)f(b)q(eing)i(cased)f(o)o(v)o(er.)20
b(In)c(the)f Fj(and)g FA(example,)e(a)150 2600 y(case)k(o)o(v)o(er)f
Fj(x)g FA(determines)f(whether)h Fj(x)h FA(is)g Fj(true)e FA(or)i
Fj(false)p FA(.)22 b(In)16 b(the)h(case)g(of)g Fj(true)p FA(,)e(the)i(v)m
(alue)f Fj(y)p eop
%%Page: 23 32
31 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(23)150 141 y FA(is)16 b(returned,)f(otherwise,)h(in)g(the)g(case)g(of)h
Fj(false)p FA(,)d(a)i Fj(false)f FA(v)m(alue)h(is)g(returned.)200
232 y(In)h(general,)g(the)g(case)g(term)e(formation)i(rule)g(deliv)o(ered)e
(to)i(the)g(system)f(up)q(on)i(declaration)150 323 y(of)f(a)f(datat)o(yp)q(e)
h Fx(L)f FA(is:)740 477 y Fz(f)p Fx(e)788 484 y Fk(i)815 477
y Fz(7!)e Fx(t)897 484 y Fk(i)910 477 y Fz(g)g FA(::)f Fx(E)1026
484 y Fk(i)1040 477 y FA(\()p Fx(A;)8 b(L)p FA(\()p Fx(A)p
FA(\)\))13 b Fz(!)h Fx(C)p 740 500 621 2 v 747 545 a Fz(f)p
Fx(c)793 552 y Fk(i)807 545 y FA(\()p Fx(e)849 552 y Fk(i)862
545 y FA(\))g Fz(7!)g Fx(t)977 552 y Fk(i)991 545 y Fz(g)1016
527 y Fk(n)1016 558 y(i)p Fm(=1)1089 545 y FA(::)f Fx(L)p FA(\()p
Fx(A)p FA(\))g Fz(!)h Fx(C)150 714 y FA(Giv)o(en)20 b(a)i(phrase)f(for)h(eac)
o(h)e(constructor)i(of)f(datat)o(yp)q(e)h Fx(L)p FA(,)g(the)f(case)g(op)q
(erator)h(can)f(b)q(e)h(con-)150 805 y(structed.)e(The)15 b(function)f(ev)m
(aluation)g(rule)f(in)o(tro)q(duced)h(in)g(the)g(last)h(section)e(can)i(no)o
(w)g(b)q(e)f(used)150 896 y(to)20 b(apply)f(the)g(case)h(to)g(a)g(term)e
(\(an)h(elemen)o(t)e(of)j(a)g(datat)o(yp)q(e\))f(to)h(pro)q(duce)g(an)g(answ)
o(er.)31 b(An)150 987 y(example)14 b(of)j(ev)m(aluation)f(in)g(Charit)o(y)g
(w)o(ould)g(b)q(e:)458 1120 y Fj(>)25 b(and\(true,)d(false\).)458
1180 y(>)j(false)f(:)h(bool)150 1361 y Fs(3.2.2.)32 b(Natural)23
b(n)n(um)n(b)r(ers)150 1485 y FA(The)16 b(\(unary\))h(natural)f(n)o(um)o(b)q
(ers)f(are)h(deliv)o(ered)e(b)o(y)i(the)g(follo)o(wing)g(Charit)o(y)g
(declaration:)534 1619 y Fj(data)25 b(nat)f(->)h(C)g(=)h(zero:)d(1)j(->)f(C)
893 1678 y(|)h(succ:)d(C)j(->)f(C.)150 1783 y FA(The)16 b(elemen)o(ts)e(of)i
(nat)h(are)f Fj(zero)p FA(,)f Fj(succ\(zero)o(\))p FA(,)e Fj(succ\(succ)o
(\(ze)o(ro\))o(\))p FA(,)g(and)j(so)h(on.)200 1874 y(T)l(o)22
b(determine)c(if)j(a)h(natural)f(n)o(um)o(b)q(er)f(is)h(o)q(dd,)i(one)e
(could)h(start)f(b)o(y)g(returning)g(a)h Fj(false)150 1965
y FA(as)e(the)f(answ)o(er)h(when)f(a)h Fj(zero)d FA(is)j(encoun)o(tered.)29
b(Eac)o(h)19 b(subsequen)o(t)g(application)g(of)h(a)f Fj(succ)150
2055 y FA(w)o(ould)g(negate)h(the)f(answ)o(er)h(un)o(til)e(all)h
Fj(succ)p FA('s)f(are)h(exhausted.)31 b(F)l(or)19 b(example,)f(to)h(see)g(if)
g(the)150 2146 y(n)o(um)o(b)q(er)10 b Fj(succ\(succ\()o(zer)o(o\))o(\))f
FA(is)i(o)q(dd,)j(using)e(the)f(ab)q(o)o(v)o(e)h(algorithm,)f(one)h(w)o(ould)
g(replace)e Fj(zero)150 2237 y FA(b)o(y)17 b Fj(false)f FA(resulting)h(in)g
Fj(succ\(succ\()o(fa)o(lse)o(\)\))p FA(.)22 b(Up)q(on)c(seeing)f(a)h
Fj(succ)e FA(the)h(answ)o(er)h(it)f(holds)150 2328 y(w)o(ould)g(b)q(e)g(in)o
(v)o(erted)e(arriving)i(at)g Fj(succ\(true\))o FA(.)k(Finally)l(,)15
b(the)i(last)g Fj(succ)f FA(in)o(v)o(erts)f(the)i(answ)o(er)150
2419 y(one)f(more)f(time)f(pro)q(ducing)j(the)f(result)g(of)h
Fj(false)p FA(.)200 2510 y(T)l(ransforming)e(a)g(natural)h(n)o(um)o(b)q(er)d
(in)i(this)g(manner)f(is)h(done)g(through)i(the)d(fold)i(op)q(eration.)150
2600 y(Ho)o(w)o(ev)o(er,)d(the)i(fold)h(op)q(eration)g(do)q(es)g(not)g(start)
g(at)g(the)f(\\leaf)s(")h(of)g(the)f(datat)o(yp)q(e,)h(or)f(the)g
Fj(zero)p eop
%%Page: 24 33
32 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(24)150 141 y FA(when)16 b(pro)q(cessing)h(the)f(natural)g(n)o(um)o(b)q
(ers.)k(Instead,)15 b(the)h(ro)q(ot)h(is)f(examined)e(\014rst,)i(and)h(based)
150 254 y(on)k(the)g(data)h(de\014nition,)f(an)h(appropriate)f(action)h(is)e
(tak)o(en.)35 b(In)21 b(the)g(example)e(ab)q(o)o(v)o(e,)i(the)150
366 y(n)o(um)o(b)q(er)11 b Fj(succ\(succ\()o(ze)o(ro\))o(\))p
FA(,)f(the)i Fj(succ)g FA(is)g(encoun)o(tered)g(\014rst.)20
b Fj(succ)11 b FA(is)i(de\014ned)f(recursiv)o(ely)l(,)150 478
y(meaning)g(the)g(v)m(alue)g(of)h(its)g(argumen)o(t)e(m)o(ust)h(b)q(e)g
(examined)f(\014rst)i(b)q(efore)g(in)o(v)o(erting)e(the)h(answ)o(er.)150
591 y(Ev)o(en)o(tually)l(,)i(the)i Fj(zero)f FA(constructor)i(with)f(a)h(t)o
(yp)q(e)e Fj(1)h FA(\(no)h(parameters\))e(will)h(return)g(a)g
Fj(false)p FA(,)150 703 y(allo)o(wing)g(the)g(algorithm)f(to)i(con)o(tin)o
(ue)e(as)i(b)q(efore.)200 815 y(In)g(general,)h(the)g(fold)g(op)q(eration)g
(con)o(tains)g(t)o(w)o(o)g(stages,)h(\\top)g(do)o(wn")f(and)h(\\b)q(ottom)f
(up".)150 928 y(The)11 b(\\top)i(do)o(wn")f(stage)g(tra)o(v)o(erses)f
(through)h(the)f(en)o(tire)f(data)i(structure)g(searc)o(hing)f(for)g(the)g
(leaf)150 1040 y(no)q(des.)21 b(When)12 b(the)g(leaf)g(no)q(des)h(are)g
(found,)g(the)f(\\b)q(ottom)h(up")g(stage)g(commenc)o(es.)k(Pro)q(cessing)150
1153 y(o)q(ccurs)g(at)f(eac)o(h)g(no)q(de,)g(returning)h(up)f(to)o(w)o(ards)h
(the)f(ro)q(ot.)200 1265 y(The)g(de\014nition)g(of)g(the)g
Fj(odd)g FA(function,)f(using)i(the)f(fold)g(op)q(eration)h(is:)534
1420 y Fj(def)25 b(odd\(n\))e(=)663 1479 y({|)i(zero:)e(\(\))51
b(=>)25 b(false)688 1539 y(|)h(succ:)d(ans)i(=>)g(not\(ans\))688
1599 y(|})g(\(n\).)150 1746 y FA(T)l(o)18 b(see)f(if)g(a)g(n)o(um)o(b)q(er)f
(is)h(ev)o(en,)f(one)h(could)g(\014rst)h(see)f(if)g(the)g(n)o(um)o(b)q(er)e
(is)i(o)q(dd,)h(then)g(in)o(v)o(ert)d(this)150 1859 y(answ)o(er.)534
2006 y Fj(def)25 b(even\(n\))e(=)i(not\(odd\(n\)\))o(.)200
2154 y FA(T)l(o)17 b(add)h(t)o(w)o(o)e(natural)h(n)o(um)o(b)q(ers)f
(together,)g(the)h Fj(zero)e FA(constructor)i(of)h(the)e(\014rst)h(n)o(um)o
(b)q(er)e(is)150 2266 y(replaced)g(with)h(the)g(second)h(n)o(um)o(b)q(er:)534
2421 y Fj(def)25 b(add\(x,y\))e(=)663 2481 y({|)i(zero:)e(\(\))i(=>)g(y)688
2541 y(|)h(succ:)d(n)51 b(=>)25 b(succ\(n\))688 2600 y(|})g(\(x\).)p
eop
%%Page: 25 34
33 bop 517 33 a Fy(3.)19 b(THE)g(CHARITY)h(PR)o(OGRAMMING)d(LANGUA)o(GE)320
b(25)200 141 y FA(As)15 b(sho)o(wn)g(b)o(y)g(the)g(example)e(ab)q(o)o(v)o(e,)
h(the)h(fold)g(construct)g(is)g(used)g(to)h(manipulate)d(b)q(oth)j(the)150
231 y(structure)g(and)h(elemen)o(ts)c(of)k(a)f(datat)o(yp)q(e.)22
b(The)16 b(syn)o(tax)g(for)h(the)f(fold)g(is:)810 292 y Fi(8)810
329 y(>)810 342 y(>)810 354 y(>)810 367 y(>)810 379 y(<)810
454 y(>)810 466 y(>)810 479 y(>)810 491 y(>)810 504 y(:)830
292 y(\014)830 317 y(\014)830 342 y(\014)830 367 y(\014)830
392 y(\014)830 417 y(\014)830 441 y(\014)830 466 y(\014)830
491 y(\014)830 516 y(\014)872 345 y Fx(c)893 352 y Fm(1)927
345 y FA(:)d Fx(v)978 352 y Fm(1)1039 345 y Fz(7!)41 b Fx(t)1148
352 y Fm(1)1057 401 y FA(.)1057 418 y(.)1057 435 y(.)865 524
y Fx(c)886 531 y Fk(n)923 524 y FA(:)13 b Fx(v)974 531 y Fk(n)1039
524 y Fz(7!)41 b Fx(t)1148 531 y Fk(n)1192 292 y Fi(\014)1192
317 y(\014)1192 342 y(\014)1192 367 y(\014)1192 392 y(\014)1192
417 y(\014)1192 441 y(\014)1192 466 y(\014)1192 491 y(\014)1192
516 y(\014)1189 292 y(9)1189 329 y(>)1189 342 y(>)1189 354
y(>)1189 367 y(>)1189 379 y(=)1189 454 y(>)1189 466 y(>)1189
479 y(>)1189 491 y(>)1189 504 y(;)1235 429 y FA(\()p Fx(t)p
FA(\))150 627 y(where)17 b(as)g(in)g(the)f(case)h(construct,)g(eac)o(h)f
(constructor)h Fx(c)1216 634 y Fk(i)1247 627 y FA(of)h(a)f(data)h(t)o(yp)q(e)
e(with)h(parameter)e Fx(v)1936 634 y Fk(i)150 717 y FA(will)g(execute)g(the)h
(corresp)q(onding)h Fx(t)832 724 y Fk(i)862 717 y FA(when)f(the)g(fold)g(is)h
(applied)e(to)i(an)f(elemen)o(t)e Fx(t)p FA(.)21 b(The)16 b(term)150
807 y(formation)h(rule)f(describing)h(the)g(fold)g(sa)o(ys)h(that)g(\\giv)o
(en)f(maps)f(for)i(eac)o(h)f(constructor)h(of)f(the)150 896
y(t)o(yp)q(e)f Fx(L)g FA(to)h(some)f(other)g(t)o(yp)q(e)g Fx(C)t
FA(,)f(the)h(fold)h(op)q(erator)g(can)g(b)q(e)f(inferred)g(from)f(the)h(com)o
(binator)150 986 y(of)h(these)e(maps".)21 b(The)c(term)d(formation)i(rule)f
(for)i(the)f(fold)g(is)g(sho)o(wn)h(b)q(elo)o(w:)774 1136 y
Fz(f)p Fx(e)822 1143 y Fk(i)850 1136 y Fz(7!)c Fx(t)931 1143
y Fk(i)945 1136 y Fz(g)h FA(::)f Fx(E)1061 1143 y Fk(i)1075
1136 y FA(\()p Fx(A;)8 b(C)t FA(\))13 b Fz(!)g Fx(C)p 748 1158
605 2 v 748 1205 a Fz(f)-17 b(j)p Fx(c)791 1212 y Fk(i)819
1205 y FA(:)13 b Fx(e)869 1212 y Fk(i)897 1205 y Fz(7!)h Fx(t)979
1212 y Fk(i)992 1205 y Fz(j)-16 b(g)1014 1181 y Fk(n)1014 1220
y(i)p Fm(=1)1087 1205 y FA(::)13 b Fx(L)p FA(\()p Fx(A)p FA(\))h
Fz(!)g Fx(C)150 1344 y Fs(3.2.3.)32 b(Lists)150 1466 y FA(Lists)17
b(are)f(de\014ned)g(in)g(Charit)o(y)g(b)o(y)g(the)g(datat)o(yp)q(e)g
(de\014nition:)534 1594 y Fj(data)25 b(list\(A\))e(->)i(C)g(=)g(nil)g(:)g(1)
128 b(->)25 b(C)996 1654 y(|)g(cons:)f(A)h(*)g(C)h(->)f(C.)150
1753 y FA(The)e(datat)o(yp)q(e)h Fj(list)e FA(and)i(its)f(t)o(w)o(o)g
(constructors,)j Fj(nil)c FA(and)i Fj(cons)p FA(,)f(are)g(deliv)o(ered)f(to)h
(the)150 1843 y(system)15 b(b)o(y)h(this)g(de\014nition.)k(Elemen)o(ts)14
b(of)j(this)f(datat)o(yp)q(e)h(are)f(generated)g(b)o(y)g(constructors:)780
1957 y(nil)d(:)41 b(1)15 b Fz(!)e FA(list\(A\))742 2046 y(cons)h(:)41
b(A)11 b Fz(\002)g FA(list\(A\))h Fz(!)i FA(list)o(\()p Fx(A)p
FA(\))150 2152 y(The)21 b Fj(nil)e FA(constructor)i(has)h(no)f(parameters,)f
(as)h(indicated)f(b)o(y)g(its)h(domain)e(t)o(yp)q(e)i Fj(1)f
FA(\(unit\),)150 2242 y(while)g(the)g Fj(cons)f FA(constructor)i(has)g(a)g
(parameter)e Fj(A)h FA(in)g(its)g(domain.)33 b(Th)o(us,)21
b(an)g(elemen)o(t)d(of)150 2331 y Fj(list)h FA(w)o(ould)i(lo)q(ok)g(lik)o(e)e
Fj(cons\()p Fx(a)780 2338 y Fm(0)797 2331 y Fj(,)25 b(cons\()p
Fx(a)1004 2338 y Fm(1)1022 2331 y Fj(,)g(...,nil\)\)\))o FA(.)32
b(This)20 b(is)h(represen)o(ted)e(b)o(y)h(the)150 2421 y(short)d(hand)g
(notation)g([)p Fx(a)632 2428 y Fm(0)651 2421 y Fx(;)8 b(a)699
2428 y Fm(1)718 2421 y Fx(;)g(:::)p FA(].)200 2511 y(An)16
b(example)f(of)h(casing)h(o)o(v)o(er)f(lists)g(is)h(the)f(function)h
Fj(isEmpty)d FA(whic)o(h)i(tests)g(whether)h(a)g(list)150 2600
y(is)f(empt)o(y:)p eop
%%Page: 26 35
34 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(26)534 201 y Fj(def)25 b(isEmpty\(l\))d(=)637 261 y({)j(nil)g(\(\))153
b(=>)25 b(true)637 320 y(|)g(cons\(a,)e(l'\))i(=>)g(false)637
380 y(})g(\(l\).)150 484 y FA(Note)15 b(that)h(in)f(the)g(ab)q(o)o(v)o(e)h
(example,)d(the)i(case)g(op)q(erator)i(that)f(transforms)f(an)h(elemen)o(t)c
(of)k(the)150 574 y Fj(list)f FA(datat)o(yp)q(e)h(to)h(an)g(elemen)o(t)c(of)j
(the)g Fj(bool)f FA(datat)o(yp)q(e)i(has)g(t)o(yp)q(e)781 702
y Fx(isE)s(mpty)e FA(:)e Fx(l)q(ist)p FA(\()p Fx(A)p FA(\))f
Fz(!)i Fx(bool)150 830 y FA(and)j(eac)o(h)f(phrase)g(corresp)q(onding)i(its)e
(constructor)g(has)h(t)o(yp)q(e:)751 944 y Fx(nil)77 b FA(:)41
b(1)14 b Fz(!)g Fx(bool)751 1033 y(cons)42 b FA(:)f Fx(A)10
b Fz(\002)h Fx(l)q(ist)p FA(\()p Fx(A)p FA(\))h Fz(!)i Fx(bool)200
1136 y FA(T)l(o)24 b(calculate)f(the)h(length)f(of)h(a)g(list,)h(one)f
(replaces)f(the)h Fj(nil)e FA(in)i(a)g(list)f(with)h(the)f
Fj(zero)150 1227 y FA(constructor)g(and)h(all)e(o)q(ccurrences)g(of)i
Fj(cons)d FA(with)i Fj(succ)p FA(.)39 b(Th)o(us,)25 b(in)d(Charit)o(y)l(,)i
(the)e(length)150 1317 y(function)16 b(is)g(de\014ned)g(as:)560
1450 y Fj(def)25 b(length\(l\))d(=)663 1510 y({|)j(nil:)49
b(\(\))128 b(=>)25 b(zero)688 1569 y(|)h(cons:)d(\(a,)i(n\))g(=>)g(succ\(n\))
688 1629 y(|})g(\(l\).)150 1733 y FA(The)11 b(input)f Fj(cons\()p
Fx(a)525 1740 y Fm(0)543 1733 y Fj(,)25 b(cons\()p Fx(a)750
1740 y Fm(1)768 1733 y Fj(,)g(nil\)\))9 b FA(\(ie:)18 b Fj([)p
Fx(a)1097 1740 y Fm(0)1116 1733 y Fj(,)25 b Fx(a)1193 1740
y Fm(1)1212 1733 y Fj(])p FA(\))11 b(w)o(ould)g(pro)q(duce)g
Fj(succ\(succ)o(\(ze)o(ro\))o(\))150 1823 y FA(when)16 b(the)g
Fj(length)e FA(function)i(is)g(applied)g(to)h(it.)200 1914
y(Supp)q(ose)i(one)g(w)o(an)o(ts)g(to)f(incremen)o(t)e(eac)o(h)i(n)o(um)o(b)q
(er)e(in)i(a)h(list)f(of)h(natural)g(n)o(um)o(b)q(ers)e(\([5,)h(2,)150
2004 y(7]\))e(b)o(y)g(one.)21 b(This)c(can)f(b)q(e)g(done)h(through)g(the)f
(fold)g(construct)h(b)o(y:)560 2137 y Fj(def)25 b(addOne\(l\))d(=)663
2196 y({|)j(nil:)f(\(\))153 b(=>)25 b([)g(])688 2256 y(|)h(cons:\(x,)c(l'\))j
(=>)g(cons\(succ)o(\(x\))o(,)e(l'\))688 2316 y(|})i(\(l\).)150
2420 y FA(Starting)14 b(with)g(the)g(empt)o(y)d(list,)i(eac)o(h)h(elemen)o(t)
c(of)15 b(the)e(list)g(is)h(applied)f(with)h Fj(succ)e FA(and)j
Fj(cons)p FA(ed)150 2510 y(on)o(to)21 b(the)f(fron)o(t)g(of)h(the)f(result)g
(list.)33 b(Since)19 b(it)h(is)g(common)f(to)h(retain)g(the)h(structure)f(of)
g(the)150 2600 y(original)e(datat)o(yp)q(e)h(and)g(c)o(hange)f(the)g
(parametric)e(v)m(ariable)i(\(or)h(the)f(elemen)o(ts)d(of)k(a)g(v)m(alue)f
(of)p eop
%%Page: 27 36
35 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(27)150 141 y FA(the)15 b(datat)o(yp)q(e\),)g(Charit)o(y)g(pro)o(vides)f(a)i
Fu(map)e FA(construct)i(to)f(accomplish)e(this)i(feat.)21 b(The)15
b(syn)o(tax)150 231 y(for)i(the)f(map)f(construct)h(is:)819
392 y Fx(L)860 255 y Fi(8)861 293 y(>)861 305 y(>)861 317 y(>)861
330 y(>)861 342 y(<)861 417 y(>)861 430 y(>)861 442 y(>)861
454 y(>)861 467 y(:)932 308 y Fx(v)956 315 y Fm(1)1017 308
y Fz(7!)41 b Fx(t)1126 315 y Fm(1)1035 365 y FA(.)1035 381
y(.)1035 398 y(.)919 487 y Fx(v)943 494 y Fk(m)1017 487 y Fz(7!)g
Fx(t)1126 494 y Fk(m)1180 255 y Fi(9)1180 293 y(>)1180 305
y(>)1180 317 y(>)1180 330 y(>)1180 342 y(=)1180 417 y(>)1180
430 y(>)1180 442 y(>)1180 454 y(>)1180 467 y(;)1225 392 y FA(\()p
Fx(t)p FA(\))150 572 y(where)11 b Fx(m)h FA(is)f(the)h(n)o(um)o(b)q(er)e(of)i
(parametric)e(t)o(yp)q(e)h(v)m(ariables.)20 b(An)11 b(example)f(of)i(the)f
(map)g(construct)150 662 y(w)o(ould)22 b(b)q(e)g(to)h(apply)f(the)f(function)
h Fx(f)28 b FA(to)22 b(eac)o(h)g(item)e(in)h(a)i(list)e(\(eg:)33
b Fx(map)22 b(f)27 b FA([)p Fx(a)1726 669 y Fm(0)1745 662 y
Fx(;)8 b(a)1793 669 y Fm(1)1812 662 y Fx(;)g(:::)p FA(])22
b(=)150 752 y([)p Fx(f)5 b FA(\()p Fx(a)238 759 y Fm(0)257
752 y FA(\))p Fx(;)j(f)d FA(\()p Fx(a)372 759 y Fm(1)392 752
y FA(\))p Fx(;)j(:::)p FA(]\).)19 b(This)d(map)g(op)q(eration)h(w)o(ould)f(b)
q(e)g(written)g(in)g(Charit)o(y)g(as:)586 855 y Fj(list{f}\([)o(a0,)22
b(a1,)j(...]\).)150 958 y FA(In)13 b(the)g(case)h(of)g(the)f
Fj(addOne)e FA(example)g(ab)q(o)o(v)o(e,)j(this)f(function)g(can)h(b)q(e)g
(rewritten)e(with)i(the)f(map)150 1048 y(construct)j(as:)560
1151 y Fj(def)25 b(addOne'\(L)o(\))e(=)i(list{succ})o(\(L)o(\).)200
1255 y FA(The)16 b(corresp)q(onding)h(term)e(formation)g(rule)h(for)g(the)g
(map)g(op)q(eration)h(is:)914 1408 y Fx(f)938 1415 y Fk(i)966
1408 y FA(::)c Fx(A)1044 1415 y Fk(i)1072 1408 y Fz(!)g Fx(A)1172
1389 y Fr(0)1172 1420 y Fk(i)p 612 1430 876 2 v 612 1475 a
Fx(L)p Fz(f)p Fx(f)694 1482 y Fk(i)708 1475 y Fz(g)733 1457
y Fk(m)733 1488 y(i)p Fm(=1)806 1475 y FA(::)g Fx(L)p FA(\()p
Fx(A)936 1482 y Fm(1)956 1475 y Fx(;)8 b(:::;)g(A)1079 1482
y Fk(m)1110 1475 y FA(\))14 b Fz(!)f Fx(L)p FA(\()p Fx(A)1295
1457 y Fr(0)1295 1488 y Fm(1)1315 1475 y Fx(;)8 b(:::;)g(A)1438
1457 y Fr(0)1438 1488 y Fk(m)1469 1475 y FA(\))150 1554 y(whic)o(h)15
b(sa)o(ys)i(that)f(\\if)g(the)g(maps)g(to)g(transform)g(eac)o(h)f(parametric)
g(t)o(yp)q(e)g(in)h Fx(L)g FA(are)g(giv)o(en,)f(then)150 1644
y(the)h(map)f(o)o(v)o(er)h Fx(L)g FA(can)h(b)q(e)f(inferred".)200
1734 y(Note)i(that)i(the)e Fj(bool)g FA(and)i Fj(nat)d FA(datat)o(yp)q(es)j
(do)f(not)h(ha)o(v)o(e)e(parametric)f(t)o(yp)q(es)i(and)g(ha)o(v)o(e)g(a)150
1825 y(map)c(op)q(eration)j(whic)o(h)d(requires)g(no)i(argumen)o(ts)e(and)i
(so)g(is)f(the)g(trivial)f(iden)o(tit)o(y)f(function!)150 2002
y Fs(3.2.4.)32 b(Success)21 b(or)i(F)-6 b(ail)24 b(datat)n(yp)r(e)150
2125 y FA(The)c(success)g(or)g(fail)f(datat)o(yp)q(e)h(is)g(useful)f(in)h
(raising)g(an)g(\\exception")f(within)h(c)o(harit)o(y)e(pro-)150
2215 y(grams.)j(The)16 b(de\014nition)g(of)g(success)h(or)f(fail)g(is:)534
2347 y Fj(data)25 b(sf\(A\))e(->)i(C)h(=)f(ff)g(:)g(1)g(->)g(C)945
2407 y(|)g(ss)g(:)g(A)g(->)g(C.)150 2510 y FA(The)12 b Fj(sf)f
FA(datat)o(yp)q(e)h(is)f(often)h(used)g(to)g(return)f(answ)o(ers)i(from)d(a)i
(function)g(whic)o(h)f(is)g(only)h(partially)150 2600 y(de\014ned.)30
b(F)l(or)19 b(example,)e(the)i(head)h(of)f(a)h(list)e(is)h(only)g(de\014ned)g
(for)g(non{empt)o(y)f(lists.)30 b(If)18 b(the)p eop
%%Page: 28 37
36 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(28)150 141 y FA(list)15 b(is)g(empt)o(y)l(,)e(an)j(error)f(should)h(b)q(e)g
(pro)q(duced.)22 b(Using)15 b(the)g Fj(sf)g FA(datat)o(yp)q(e,)g
Fj(head)f FA(of)i(an)g(empt)o(y)150 232 y(list)h(will)g(b)q(e)i(the)f
(constructor)g Fj(ff)g FA(\(fail\),)f(while)g(the)h Fj(head)f
FA(of)h(a)h(non{empt)o(y)e(list)g(will)g(b)q(e)h(the)150 322
y(answ)o(er)d(wrapp)q(ed)g(up)g(in)f(the)g Fj(ss)g FA(\(success\))g
(constructor.)21 b(The)15 b(Charit)o(y)f(de\014n)o(tion)g(of)h
Fj(head)e FA(is:)534 455 y Fj(def)25 b(head\(L\))e(=)637 514
y({)i(nil)g(\(\))127 b(=>)25 b(ff\(\))637 574 y(|)g(cons\(a,)e(_\))i(=>)g
(ss\(a\))637 634 y(})g(\(L\).)150 818 y FB(3.3.)42 b(Coinductiv)n(e)25
b(datat)n(yp)r(es)200 933 y FA(Coinductiv)o(e)15 b(t)o(yp)q(es)h(pro)o(vides)
g(a)g(means)g(of)g(represen)o(ting)g(p)q(oten)o(tially)f(in\014nite)h
(structures.)150 1024 y(The)21 b(general)h(form)e(of)i(the)f(coinductiv)o(e)f
(datat)o(yp)q(e)h(is)h(similar)d(to)j(the)f(inductiv)o(e)f(datat)o(yp)q(e)150
1114 y(with)14 b(the)g(exception)f(that)i(the)f(state)h(v)m(ariable)f(should)
g(line)g(up)g(on)h(the)f(left)f(side)h(of)h(the)f(arro)o(w:)577
1228 y(data)j Fx(S)g Fz(\000)-9 b(!)14 b Fx(R)p FA(\()p Fx(A)p
FA(\))42 b(=)f Fx(d)1087 1235 y Fm(1)1121 1228 y FA(:)k Fx(S)16
b Fz(\000)-8 b(!)14 b Fx(E)1357 1235 y Fm(1)1376 1228 y FA(\()p
Fx(A;)8 b(S)s FA(\))995 1318 y Fz(j)1180 1285 y FA(.)1180 1301
y(.)1180 1318 y(.)995 1408 y Fz(j)53 b Fx(d)1087 1415 y Fk(n)1125
1408 y FA(:)41 b Fx(S)16 b Fz(\000)-8 b(!)14 b Fx(E)1357 1415
y Fk(n)1380 1408 y FA(\()p Fx(A;)8 b(S)s FA(\))p Fx(:)150 1513
y FA(This)18 b(de\014nition)e(deliv)o(ers)g(to)i(the)f(system)f(the)h(t)o(yp)
q(e)g Fx(R)p FA(\()p Fx(A)p FA(\))g(and)h(destructors)g Fx(d)1667
1520 y Fk(i)1681 1513 y FA(,)f Fx(i)f FA(=)g(1)p Fx(;)8 b(:::;)g(n)p
FA(.)150 1604 y(An)16 b(elemen)o(t)d(of)k(datat)o(yp)q(e)f
Fx(R)p FA(\()p Fx(A)p FA(\))h(is)f(brok)o(en)f(do)o(wn)i(b)o(y)f(destructors)
g(with)h(t)o(yp)q(e:)786 1731 y Fx(d)811 1738 y Fk(i)839 1731
y FA(:)c Fx(R)p FA(\()p Fx(A)p FA(\))h Fz(!)g Fx(E)1092 1738
y Fk(i)1106 1731 y FA(\()p Fx(A;)8 b(R)p FA(\()p Fx(A)p FA(\)\))150
1910 y Fs(3.3.1.)32 b(In\014nite)24 b(lists)150 2033 y FA(In)16
b(Charit)o(y)g(the)g(in\014nite)f(list)h(datat)o(yp)q(e)g(is)g(deliv)o(ered)e
(b)o(y:)560 2166 y Fj(data)24 b(S)i(->)e(inflist\(A\))e(=)k(head:)d(S)j(->)f
(A)1098 2226 y(|)h(tail:)d(S)j(->)f(S.)150 2329 y FA(where,)19
b(giv)o(en)f(some)g(state)h Fj(S)p FA(,)g(the)f(curren)o(t)g(state)i(is)f
(returned)f(b)o(y)h(the)f(destructor)i Fj(head\(S\))150 2420
y FA(and)f(the)f(next)g(state)h(b)o(y)f Fj(head\(tail)o(\(S\))o(\))p
FA(.)d(In)j(con)o(trast)h(to)g(inductiv)o(e)d(datat)o(yp)q(es,)j(coinduc-)150
2510 y(tiv)o(e)c(datat)o(yp)q(es)i(deliv)o(er)d(the)i(unfold,)g(record,)f
(and)i(map)f(op)q(erations)h(for)g(manipulating)e(their)150
2600 y(v)m(alues.)p eop
%%Page: 29 38
37 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(29)200 141 y FA(The)13 b(unfold)g(construct)g(builds)g(a)h(data)f
(structure)g(one)g(state)h(at)f(a)h(time)d(in)h(a)i(\\lazy")f(manner)150
237 y(\(do)j(only)g(the)g(computations)f(needed)h(to)g(pro)q(duce)g(the)g
(next)f(answ)o(er\))h(.)22 b(The)16 b(unfold)g(has)g(the)150
333 y(form:)811 349 y Fi(0)811 422 y(B)811 447 y(B)811 472
y(B)811 497 y(B)811 523 y(@)839 347 y(\014)839 372 y(\014)839
397 y(\014)839 422 y(\014)839 447 y(\014)839 472 y(\014)839
497 y(\014)839 522 y(\014)839 547 y(\014)839 571 y(\014)853
484 y Fx(v)f Fz(7!)980 400 y Fx(d)1005 407 y Fm(1)1067 400
y FA(:)41 b Fx(t)1140 407 y Fm(1)1067 457 y FA(.)1067 473 y(.)1067
490 y(.)976 580 y Fx(d)1001 587 y Fk(n)1067 580 y FA(:)g Fx(t)1140
587 y Fk(n)1184 347 y Fi(\014)1184 372 y(\014)1184 397 y(\014)1184
422 y(\014)1184 447 y(\014)1184 472 y(\014)1184 497 y(\014)1184
522 y(\014)1184 547 y(\014)1184 571 y(\014)1189 349 y(1)1189
422 y(C)1189 447 y(C)1189 472 y(C)1189 497 y(C)1189 523 y(A)1234
484 y FA(\()p Fx(t)p FA(\))150 664 y(The)16 b(term)f(formation)g(rule)h(for)g
(the)g(unfold)h(is:)810 814 y Fx(v)f Fz(7!)d Fx(t)931 821 y
Fk(i)959 814 y FA(::)g Fx(S)j Fz(!)e Fx(E)1146 821 y Fk(i)1160
814 y FA(\()p Fx(A;)8 b(S)s FA(\))p 750 836 601 2 v 750 883
a(\()-9 b Fz(j)p Fx(v)15 b Fz(7!)f Fx(d)902 890 y Fk(i)930
883 y FA(:)g Fx(t)976 890 y Fk(i)989 883 y Fz(j)-8 b FA(\))1014
859 y Fk(n)1014 898 y(i)p Fm(=1)1087 883 y FA(::)13 b Fx(S)k
Fz(!)c Fx(R)p FA(\()p Fx(A)p FA(\))200 967 y(T)l(o)19 b(pro)q(duce)g(the)f
(in\014nite)g(list)g(of)h(natural)g(n)o(um)o(b)q(ers)e(starting)i(from)f(1,)h
(one)g(w)o(ould)f(de\014ne)150 1063 y(the)e(follo)o(wing)g(Charit)o(y)g
(function;)483 1202 y Fj(def)25 b(nats)f(=)560 1261 y(\(|)h(S)g(=>)g(head:)f
(S)586 1321 y(|)153 b(tail:)24 b(succ\(S\))586 1381 y(|\))h(\(succ\(zer)o
(o\)\))o(.)150 1496 y FA(whic)o(h)12 b(sa)o(ys,)h(giv)o(en)e(the)i(initial)e
(state)h Fj(succ\(zero\))p FA(,)d(the)k(head)f(thread)h(will)e(return)i(the)f
(curren)o(t)150 1592 y(state)19 b(\(in)g(the)f(\014rst)h(case)g
Fj(succ\(zero\))o FA(\),)d(while)i(the)h(tail)f(thread)h(generates)g(the)g
(next)f(state.)150 1688 y(Th)o(us)e(the)g(natural)g(n)o(um)o(b)q(er)e(succ)
794 1670 y Fk(n)817 1688 y FA(\(zero\))i(w)o(ould)f(b)q(e)h(computed)f(b)o(y)
g(head\(tail)1647 1670 y Fk(n)p Fr(\000)p Fm(1)1715 1688 y
FA(\(nats\)\).)22 b(Of)150 1784 y(course)16 b(it)g(w)o(ould)g(b)q(e)g(imp)q
(ossible)e(to)j(generate)f(the)f(en)o(tire)g(in\014nite)g(list:)20
b(the)c(unfold)g(will)f(only)150 1880 y(pro)q(duce)i(the)f(v)m(alues)g
(demanded)f(of)h(it.)200 1976 y(Records)g(are)g(created)g(through)h(the)f
(record)g(construct)h(written)e(as:)900 2038 y Fi(0)900 2112
y(B)900 2136 y(B)900 2161 y(B)900 2186 y(B)900 2213 y(@)961
2090 y Fx(d)986 2097 y Fm(1)1047 2090 y FA(:)41 b Fx(t)1120
2097 y Fm(1)1047 2146 y FA(.)1047 2163 y(.)1047 2179 y(.)957
2269 y Fx(d)982 2276 y Fk(n)1047 2269 y FA(:)g Fx(t)1120 2276
y Fk(n)1164 2038 y Fi(1)1164 2112 y(C)1164 2136 y(C)1164 2161
y(C)1164 2186 y(C)1164 2213 y(A)150 2372 y FA(with)16 b(the)g(term)f
(formation)g(rule:)884 2522 y Fx(t)902 2529 y Fk(i)930 2522
y FA(:)e Fx(E)993 2529 y Fk(i)1007 2522 y FA(\()p Fx(A;)8 b(R)p
FA(\()p Fx(A)p FA(\)\))p 884 2544 332 2 v 898 2590 a(\()p Fx(d)942
2597 y Fk(i)970 2590 y FA(:)14 b Fx(t)1016 2597 y Fk(i)1030
2590 y FA(\))f(:)h Fx(R)p FA(\()p Fx(A)p FA(\))p eop
%%Page: 30 39
38 bop 517 33 a Fy(3.)19 b(THE)g(CHARITY)h(PR)o(OGRAMMING)d(LANGUA)o(GE)320
b(30)150 141 y FA(The)17 b(record)g(construct)h(allo)o(ws)f(elemen)o(ts)d(to)
k(b)q(e)f(added)h(to)f(the)g(head)h(of)f(a)h(coinductiv)o(e)d(data)150
232 y(structure.)22 b(F)l(or)17 b(example,)d(adding)k(the)e(n)o(um)o(b)q(er)f
(zero)i(to)g(the)f(head)h(of)g(the)g Fj(nats)e FA(is)i(ac)o(hiev)o(ed)150
324 y(b)o(y:)458 429 y Fj(def)24 b(zeronats)f(=)i(\(head:)f(zero,)f(tail:)h
(nats\).)150 535 y FA(The)13 b(head)h(of)g(the)f(in\014nite)g(list)f(of)i
(zeronats)g(is)f(then)g Fj(zero)f FA(while)h(the)g(tail)g(of)h
Fj(zeronats)c FA(simply)150 626 y(pro)q(duces)17 b(the)f(in\014nite)f(list)h
(of)g(nats)h(as)g(de\014ned)f(ab)q(o)o(v)o(e.)200 717 y(T)l(o)h(add)f(a)h
(constan)o(t)g(to)f(eac)o(h)g(elemen)o(t)d(of)k(nats,)f(one)h(w)o(ould)f(use)
g(the)g(map)g(op)q(eration:)458 823 y Fj(inflist)23 b({succ})g(\(nats\).)150
928 y FA(This)e(map)g(o)o(v)o(er)f(the)h(coinductiv)o(e)f(datat)o(yp)q(es)i
(is)f(similar)e(to)j(the)f(map)f(o)o(v)o(er)h(the)g(inductiv)o(e)150
1020 y(datat)o(yp)q(es)15 b(where)f(the)g(parametric)f(parameters)g(are)h
(transformed,)g(but)h(the)f(structure)g(of)g(the)150 1111 y(datat)o(yp)q(e)j
(remains)d(the)i(same.)150 1296 y Fs(3.3.2.)32 b(Colists)150
1421 y FA(The)16 b(de\014nition)g(of)h(lists)e(could)h(also)h(ha)o(v)o(e)f(b)
q(een)g(giv)o(en)f(using)i(the)f Fj(sf)f FA(datat)o(yp)q(e)i(as:)458
1495 y Fj(data)24 b(list'\(A\))e(->)j(C)h(=)f(enlist:)e(sf\(A)h(*)h(C\))g(->)
g(C.)150 1600 y FA(where)801 1667 y(\(enlist\(\013\(\)\)\))41
b Fz(\021)g FA(nil\(\))731 1757 y(\(enlist\(ss\(a,c\)\)\))g
Fz(\021)g FA(cons\(a,c\))200 1841 y(Colists)16 b(are)h(the)f(dual)g(of)g(the)
g(inductiv)o(e)f(lists)h(and)g(are)h(de\014ned)f(using)g(the)g
Fj(sf)g FA(datat)o(yp)q(e:)458 1947 y Fj(data)24 b(C)h(->)g(colist\(A\))d(=)k
(delist:)d(C)i(->)g(sf\(A)f(*)h(C\).)150 2052 y FA(Notice)17
b(the)h(symmetry)d(b)q(et)o(w)o(een)j(the)g(domain)f(and)i(co)q(domain)f(of)h
(the)f(inductiv)o(e)e(and)j(coin-)150 2144 y(ductiv)o(e)e(de\014nitions.)29
b(This)19 b(symmetry)d(justi\014es)j(the)f(dual)h(nature)g(of)h(the)e
(coinductiv)o(e)f(and)150 2235 y(the)f(inductiv)o(e)e(datat)o(yp)q(es.)200
2326 y(Elemen)o(ts)f(of)j(the)f(colist)g(can)g(b)q(e)h(\014nite)f(or)g
(in\014nite)g(in)g(nature.)21 b(If)15 b(the)g(colist)g(terminates,)e(it)150
2418 y(do)q(es)19 b(so)g(b)o(y)g(returning)f(a)h(constructor)g
Fj(ff)f FA(from)f Fj(delist)p FA(.)26 b(Otherwise)18 b(the)g(next)g(elemen)o
(t)e(of)150 2509 y(the)g(list)g(along)h(with)f(the)g(next)g(state)g(is)g
(wrapp)q(ed)h(up)g(in)f(the)g Fj(ss)f FA(constructor.)22 b(F)l(or)17
b(example,)150 2600 y(con)o(v)o(erting)e(a)i(list)e(to)i(a)g(colist)e(is)h
(accomplished)f(b)o(y)g(unfolding)i(on)f(the)g(list:)p eop
%%Page: 31 40
39 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(31)458 201 y Fj(def)24 b(list2colis)o(t\(L)o(\))f(=)560 261
y(\(|)i(state)f(=>)h({)g(nil)g(\(\))153 b(=>)24 b(ff)868 320
y(|)h(cons\(a,)e(L'\))i(=>)f(ss\(a,)g(L'\))868 380 y(})h(\(state\))586
440 y(|\))g(\(L\).)150 542 y FA(Applying)15 b Fj(list2colist)e
FA(to)j Fj([1,2,3])e FA(w)o(ould)i(pro)q(duce)h(the)f(colist:)227
674 y Fj(\(delist:)23 b(ss\(1,)534 733 y(\(delist:)g(ss\(2,)842
793 y(\(delist\(ss)o(\(3,)1124 853 y(\(delist:)g(ff\(\)\))1124
913 y(\))1022 972 y(\)\))816 1032 y(\)\))509 1092 y(\))227
1152 y(\))150 1326 y FB(3.4.)42 b(P)n(assing)26 b(functions)g(as)h
(parameters)200 1440 y FA(Normally)13 b(in)j(functional)f(languages,)i
(functions)f(ma)o(y)e(b)q(e)i(higher{order.)21 b(Ho)o(w)o(ev)o(er,)14
b(Char-)150 1530 y(it)o(y)h(is)g(a)h(\014rst)g(order)f(language)i(and)f(do)q
(es)h(not)f(ha)o(v)o(e)e(an)o(y)i(higher)f(order)h(functions.)21
b(That)16 b(is)g(to)150 1620 y(sa)o(y)l(,)j(functions)f(are)h(not)g(\014rst)g
(class)f(citizens)f(in)i(Charit)o(y)l(.)27 b(Com)o(binators)18
b(ma)o(y)l(,)f(ho)o(w)o(ev)o(er,)h(b)q(e)150 1709 y(de\014ned)h(to)h(pass)h
(functions)e(\(as)i(macros\))e(to)h(other)f(functions.)32 b(F)l(or)19
b(example,)f(giv)o(en)h(a)h(list)150 1799 y(of)d(elemen)o(ts,)d(one)j(ma)o(y)
e(w)o(an)o(t)i(to)h Fu(\014lter)g FA(out)f(certain)f(elemen)o(ts.)21
b(Supp)q(ose)d(the)e(list)g Fx(l)i FA(con)o(tains)150 1889
y(natural)f(n)o(um)o(b)q(ers)f(ranging)i(from)e(1)h(to)g(100)h(\(eg.)24
b([1)p Fx(;)8 b FA(2)p Fx(;)g FA(3)p Fx(;)g(:::;)g FA(100]\).)22
b(T)l(o)c(retain)f(only)f(the)h(o)q(dd)150 1978 y(n)o(um)o(b)q(ers)e(of)h
Fx(l)h FA(one)g(ma)o(y)d(write)i(the)g(follo)o(wing)g(function)g(in)g(Charit)
o(y:)278 2110 y Fj(def)25 b(filterOdd)o(s\(L)o(\))e(=)406 2170
y({|)i(nil:)50 b(\(\))25 b(=>)g([)g(])432 2230 y(|)g(cons:)f(\(x,)h(L'\))f
(=>)h({)g(true\(\))49 b(=>)25 b(cons\(x,)e(L'\))919 2289 y(|)i(false\(\))e
(=>)i(L')919 2349 y(})g(\(odd\(x\)\).)432 2409 y(|})g(\(L\).)150
2511 y FA(Starting)14 b(with)f(the)g(empt)o(y)f(list)g(as)j(the)e(result,)g
(eac)o(h)g(item)e(in)i(the)h(list)e(is)i(applied)f(with)g(the)g(o)q(dd)150
2600 y(function)k(to)g(test)g(if)g(it)g(should)g(b)q(e)h(k)o(ept)e(or)i
(discarded.)23 b(If)17 b(the)g(n)o(um)o(b)q(er)e(is)i(o)q(dd,)h(it)f(is)g
Fj(cons)p FA(ed)p eop
%%Page: 32 41
40 bop 514 33 a Fy(3.)24 b(THE)c(CHARITY)f(PR)o(OGRAMMING)e(LANGUA)o(GE)318
b(32)150 141 y FA(on)o(to)17 b(the)f(fron)o(t)g(of)h(the)f(result)f(list.)200
231 y(T)l(o)f(\014lter)f(out)h(the)f(ev)o(en)g(n)o(um)o(b)q(ers,)f(a)i(new)f
(function)h(\014lterEv)o(ens)e(w)o(ould)i(ha)o(v)o(e)f(to)h(b)q(e)f
(de\014ned)150 320 y(with)18 b(the)f(same)g(structure)g(as)h(\014lterOdds,)f
(but)h(a)g(di\013eren)o(t)f(predictate)g(\(replace)f(\\ev)o(en")i(for)150
410 y(\\o)q(dds")23 b(ab)q(o)o(v)o(e\).)34 b(In)21 b(general,)g(when)g
(\014ltering)f(out)h(elemen)o(ts)d(of)j(the)g(list)f(the)g(structure)h(of)150
500 y(eac)o(h)e(function)g(is)g(iden)o(tical)e(with)i(the)g(exception)f(of)i
(the)f(predicate)f(whic)o(h)g(determines)f(the)150 589 y(elemen)o(t)d(to)j
(retain)f(or)i(discard.)23 b(Th)o(us)17 b(one)g(w)o(ould)f(lik)o(e)f(a)j
(general)e(de\014nition)h(of)g(the)f Fj(filter)150 679 y FA(function)g(whic)o
(h)g(has)h(a)f(functional)g(argumen)o(t,)f Fj(pred)p FA(.)20
b(This)c(is)g(ac)o(hiev)o(ed)e(via)i(the)g(de\014nition:)278
811 y Fj(def)25 b(filter)e({pred})h(\(L\))g(=)406 871 y({|)h(nil:)50
b(\(\))25 b(=>)g([)g(])432 931 y(|)g(cons:)f(\(x,)h(L'\))f(=>)h({)g(true\(\))
49 b(=>)25 b(cons\(x,)e(L'\))919 990 y(|)i(false\(\))e(=>)i(L')919
1050 y(})g(\(pred\(x\)\).)432 1110 y(|})g(\(L\).)150 1284 y
FB(3.5.)42 b(Other)26 b(examples)200 1399 y FA(Man)o(y)15 b(other)h(useful)f
(datat)o(yp)q(es)h(can)g(b)q(e)g(de\014ned)f(in)g(Charit)o(y)l(.)21
b(Belo)o(w)14 b(are)i(some)e(examples:)381 1531 y Fj(data)24
b(tree\(A\))f(->)i(C)g(=)g(treeLeaf:)e(1)i(->)g(C)842 1591
y(|)g(treeNode:)e(C)i(*)g(\(A)g(*)g(C\))g(->)g(C.)381 1770
y(data)f(bush\(A\))f(->)i(C)g(=)g(bushLeaf:)e(1)i(->)g(C)842
1830 y(|)g(bushNode:)e(list\(A)g(*)i(C\))g(->)g(C.)381 1949
y(data)f(S)h(->)g(cotree\(A\))d(=)k(detree:)d(S)i(->)g(sf\(S)f(*)h(\(A)g(*)g
(S\)\))381 2069 y(data)f(S)h(->)g(cobush\(A\))d(=)k(debush:)d(S)i(->)g
(sf\(list\(A)d(*)j(S\)\).)150 2171 y FA(Giv)o(en)18 b(these)g(and)h(other)g
(datat)o(yp)q(es,)g(it)f(is)g(p)q(ossible)h(to)g(write)f(programs)g(suc)o(h)h
(as)g(quic)o(ksort)150 2261 y(\(see)d(App)q(endix)g(B\),)f(Ac)o(k)o(ermann's)
f(function)i(\(found)h(in)f([CF92]\),)g(pascal's)h(triangle,)e(to)o(w)o(ers)
150 2350 y(of)23 b(Hanoi,)h(prime)d(n)o(um)o(b)q(ers)h(generation)h(\(using)g
(the)g(siev)o(e)f(of)h(Eratosthenes\),)i(and)e(man)o(y)150
2440 y(others.)p eop
%%Page: 33 42
41 bop 1574 509 a Fw(Chapter)34 b Fv(4)564 633 y FB(The)27
b(Charit)n(y)f(Abstract)i(Mac)n(hine)d(:)36 b(basics)p 150
689 1800 2 v 150 879 a FA(The)16 b(ev)m(aluation)h(strategy)g(for)f(Charit)o
(y)g(programs)g(is)h(determined)c(b)o(y)j(the)g(Charit)o(y)g(abstract)150
972 y(mac)o(hine)e(whic)o(h)i(is)g(an)h(adaptation)h(of)e(the)g(Categorical)h
(Abstract)f(Mac)o(hine)f([CCM85)q(].)21 b(The)150 1066 y(foundations)15
b(of)e(b)q(oth)i(mac)o(hines)c(lie)h(in)h(category)h(theory)l(.)20
b(Ho)o(w)o(ev)o(er)11 b(they)i(di\013er)g(somewhat)g(in)150
1159 y(their)i(selection)f(of)i(rewrite)e(rules,)h(com)o(binators,)f(and)i
(the)f(ev)m(aluation)h(strategy)l(.)21 b(Underlying)150 1252
y(the)e(Charit)o(y)f(abstract)i(mac)o(hine)c(is)j(a)g(t)o(yp)q(ed)g(com)o
(binator)f(theory)g(in)h(whic)o(h)f(programs,)h(ex-)150 1345
y(pressed)e(as)i(com)o(binators,)d(are)h(ev)m(aluated)h(through)g(rewrite)f
(rules.)24 b(T)l(o)18 b(execute)e(a)i(program,)150 1438 y(the)f(Charit)o(y)g
(system)f(m)o(ust)g(\014rst)h(translate)h(the)f(term)f(logic)h(to)g
(categorical)g(com)o(binator)f(ex-)150 1531 y(pressions,)g(and)f(then)h(ev)m
(aluate)f(those)g(expressions)h(with)f(the)g(Charit)o(y)g(abstract)h(mac)o
(hine.)i(A)150 1624 y(set)13 b(of)g(state)g(transition)h(rules)e(deriv)o(ed)f
(from)h(the)h(rewrite)f(rules)h(determine)d(the)j(exact)f(manner)150
1717 y(in)k(whic)o(h)f(the)h(com)o(binator)g(expression)f(is)i(ev)m(aluated.)
200 1810 y(This)j(c)o(hapter)f(will)f(explore)h(the)g(com)o(binators)g(and)h
(rewrite)f(rules)g(that)h(are)f(used)h(in)f(the)150 1903 y(form)o(ulation)10
b(of)i(the)g(state)g(transition)g(rules)f(for)h(the)g(Charit)o(y)f(abstract)i
(mac)o(hine.)k(Sp)q(eci\014cally)l(,)150 1997 y(this)g(c)o(hapter)f(examines)
f(the)i(basic)g(com)o(binators)e(and)j(the)f(function)f(passing)i(mec)o
(hanism)c(of)150 2090 y(the)i(Charit)o(y)g(system.)150 2296
y FB(4.1.)42 b(Categorical)27 b(com)n(binators)g(and)g(their)f(t)n(yp)r(es)
200 2414 y FA(A)16 b(com)o(binator)f(theory)h(consists)g(of)h(a)f(system)f
(of)h(t)o(yp)q(es,)g(a)g(set)g(of)h(primitiv)o(e)12 b(com)o(binators,)150
2507 y(a)17 b(system)f(for)h(building)f(com)o(binator)g(expressions)h(from)f
(the)g(primitiv)o(e)d(com)o(binators,)j(and)i(a)150 2600 y(set)j(of)g(iden)o
(tities)e(b)q(et)o(w)o(een)h(com)o(binator)f(expressions.)36
b(A)20 b(categorical)g(com)o(binator)g(theory)1027 2700 y Fy(33)p
eop
%%Page: 34 43
42 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(34)150 141 y FA(is)18 b(then)g(a)g(com)o(binator)f(theory)h
(where)g(the)g(iden)o(tities)e(b)q(et)o(w)o(een)h(com)o(binators)g(are)h
(deliv)o(ered)150 234 y(from)d(the)h(basic)g(structures)h(found)f(in)g
(category)h(theory)l(.)150 426 y Fs(4.1.1.)32 b(T)n(yp)r(es)150
554 y FA(A)14 b(system)g(of)h(t)o(yp)q(es)f(is)h(generated)f(b)o(y)g(a)i(giv)
o(en)d(set)i(of)g(t)o(yp)q(e)f(constructors)i(with)e(a)h(\014xed)g(arities)
150 646 y(for)i(example:)934 723 y(1)42 b(:)f(\012)1090 705
y Fm(0)1124 723 y Fz(!)14 b FA(\012)893 813 y(list)41 b(:)g(\012)1090
795 y Fm(1)1124 813 y Fz(!)14 b FA(\012)877 902 y(tree)41 b(:)g(\012)1090
884 y Fm(2)1124 902 y Fz(!)14 b FA(\012)150 987 y(The)20 b(arit)o(y)f
(represen)o(ts)f(the)i(n)o(um)o(b)q(er)e(of)i(parameters)e(the)i(giv)o(en)f
(t)o(yp)q(e)g(constructor)h(accepts.)150 1079 y(These)h(parameters)f(pro)o
(vide)g(for)h(a)g(p)q(olymorphic)f(t)o(yp)q(e)g(de\014nition.)35
b(A)20 b(t)o(yp)q(e)h(expression)f(is)150 1172 y(then)h(a)h(term)e(\(in)h
(the)g(free)f(algebraic)h(theory\))h(generated)f(b)o(y)g(the)g(t)o(yp)q(e)g
(constructors,)i(for)150 1264 y(example:)755 1357 y(tree\(list)o(\(1\))p
Fx(;)8 b FA(tree)o(\()p Fx(A;)g FA(list)o(\()p Fx(B)s FA(\)\)\))150
1549 y Fs(4.1.2.)32 b(Categorical)22 b(com)n(binators)150 1677
y FA(Once)h(a)h(t)o(yp)q(e)f(is)h(de\014ned)f(in)h(the)f(system,)h(a)g
(computational)f(framew)o(ork)f(is)h(pro)o(vided)g(in)150 1770
y(whic)o(h)h(categorical)g(com)o(binators)f(manipulate)g(the)h(elemen)o(ts)e
(of)i(a)h(t)o(yp)q(e.)45 b(A)24 b(categorical)150 1862 y(com)o(binator)c(is)h
(a)h(map)f(from)f(one)i(t)o(yp)q(e)e(to)i(another,)h(whic)o(h)e(also)h
(relies)e(on)h(certain)g(input)150 1955 y(parameters.)35 b(A)21
b(categorical)g(com)o(binator)f(system)f(on)j(a)g(t)o(yp)q(e)e(system)g(is)h
(generated)g(from)150 2047 y(primitiv)o(e)13 b(com)o(binators)i(of)i(the)f
(form:)683 2177 y Fx(c)p Fz(f)p Fx(S)759 2184 y Fm(1)792 2177
y Fz(!)e Fx(S)889 2157 y Fr(0)886 2190 y Fm(1)905 2177 y Fx(;)8
b(:::;)g(S)1021 2184 y Fk(n)1057 2177 y Fz(!)14 b Fx(S)1154
2157 y Fr(0)1151 2190 y Fk(n)1174 2177 y Fz(g)g FA(:)f Fx(S)1270
2184 y Fm(0)1304 2177 y Fz(!)h Fx(S)1401 2157 y Fr(0)1398 2190
y Fm(0)150 2307 y FA(where)253 2415 y Fz(\017)21 b Fx(c)16
b FA(is)g(the)g(com)o(binator)f(name,)253 2508 y Fz(\017)21
b Fx(S)329 2515 y Fk(i)343 2508 y FA(,)15 b Fx(S)405 2490 y
Fr(0)402 2520 y Fk(i)433 2508 y FA(are)i(t)o(yp)q(e)e(expressions,)h(and)253
2600 y Fz(\017)21 b Fx(S)329 2607 y Fk(i)356 2600 y Fz(!)14
b Fx(S)453 2582 y Fr(0)450 2613 y Fk(i)481 2600 y FA(is)i(a)h(com)o(binator)e
(t)o(yp)q(e)g(signature.)p eop
%%Page: 35 44
43 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(35)150 141 y FA(The)17 b(ab)q(o)o(v)o(e)h(com)o(binator)e
Fx(c)h FA(accepts)g Fx(n)g FA(input)h(com)o(binators)e(with)h(t)o(yp)q(e)g
(signatures)h Fx(S)1797 148 y Fk(i)1826 141 y Fz(!)e Fx(S)1925
123 y Fr(0)1922 153 y Fk(i)1936 141 y FA(,)150 263 y(to)j(pro)q(duce)f(a)h
(com)o(binator)e(with)h(t)o(yp)q(e)g(signature)g Fx(S)1168
270 y Fm(0)1205 263 y Fz(!)f Fx(S)1305 245 y Fr(0)1302 275
y Fm(0)1322 263 y FA(.)27 b(W)l(e)18 b(ma)o(y)e(alternativ)o(ely)h(write)150
385 y(this)f(as)h(a)g(formation)e(rule:)740 560 y Fx(f)764
567 y Fm(1)798 560 y FA(:)e Fx(S)855 567 y Fm(1)889 560 y Fz(!)g
Fx(S)985 542 y Fr(0)982 572 y Fm(1)1002 560 y Fx(;)8 b(:::;)g(f)1112
567 y Fk(n)1148 560 y FA(:)13 b Fx(S)1205 567 y Fk(n)1243 560
y Fz(!)g Fx(S)1339 542 y Fr(0)1336 572 y Fk(n)p 740 582 620
2 v 818 628 a Fx(c)p Fz(f)p Fx(f)888 635 y Fm(1)907 628 y Fx(;)8
b(:::;)g(f)1017 635 y Fk(n)1039 628 y Fz(g)14 b FA(:)f Fx(S)1135
635 y Fm(0)1169 628 y Fz(!)h Fx(S)1266 610 y Fr(0)1263 640
y Fm(0)150 828 y FA(When)g(suc)o(h)g(a)h(term)d(formation)i(rule)f(is)h(in)o
(tro)q(duced,)g(it)g(is)f(in)o(tro)q(duced)h(parametrically)l(.)k(That)150
950 y(is,)f(w)o(e)g(really)g(in)o(tro)q(duce)g(a)h(family)d(of)j(rules)g(for)
f(eac)o(h,)g(one)h(mem)o(b)q(er)d(for)i(eac)o(h)h(p)q(ossible)f(sub-)150
1071 y(stitution:)371 1247 y Fx(f)395 1254 y Fm(1)429 1247
y FA(:)c(\()p Fx(S)505 1254 y Fm(1)525 1247 y FA(\))544 1254
y Fk(\033)581 1247 y Fz(!)h FA(\()p Fx(S)697 1229 y Fr(0)694
1259 y Fk(n)717 1247 y FA(\))736 1254 y Fk(\033)760 1247 y
Fx(;)8 b(:::;)g(f)870 1254 y Fk(n)906 1247 y FA(:)13 b(\()p
Fx(S)982 1254 y Fk(n)1005 1247 y FA(\))1024 1254 y Fk(\033)1062
1247 y Fz(!)g FA(\()p Fx(S)1177 1229 y Fr(0)1174 1259 y Fk(n)1198
1247 y FA(\))1217 1254 y Fk(\033)p 371 1270 869 2 v 512 1315
a Fx(c)p Fz(f)p Fx(f)582 1322 y Fm(1)602 1315 y Fx(;)8 b(:::;)g(f)712
1322 y Fk(n)734 1315 y Fz(g)13 b FA(:)h(\()p Fx(S)849 1322
y Fm(0)868 1315 y FA(\))887 1322 y Fk(\033)925 1315 y Fz(!)f
FA(\()p Fx(S)1040 1297 y Fr(0)1037 1328 y Fm(0)1057 1315 y
FA(\))1076 1322 y Fk(\033)1261 1282 y FA(for)j(an)o(y)h(substitution)f
Fx(\033)150 1515 y FA(W)l(e)g(can)g(sp)q(ecialize,)f(or)h(instan)o(tiate,)g
(a)g(com)o(binator)f(with)h(the)g(term)f(formation)g(rule:)778
1697 y Fx(e)e FA(:)g Fx(T)870 1704 y Fm(1)904 1697 y Fz(!)g
Fx(T)996 1704 y Fm(2)p 686 1715 423 2 v 686 1760 a FA(\()p
Fx(e)p FA(\))746 1775 y Fk(\033)783 1760 y FA(:)h(\()p Fx(T)859
1767 y Fm(1)878 1760 y FA(\))897 1775 y Fk(\033)934 1760 y
Fz(!)g FA(\()p Fx(T)1046 1767 y Fm(2)1065 1760 y FA(\))1084
1775 y Fk(\033)1128 1727 y FA(sp)q(ecialization)150 1960 y(T)l(o)h(test)g
(whether)f(a)h(com)o(binator)e(expression)i(without)g(t)o(yp)q(e)f
(annotation)i(is)e(v)m(alid,)g(one)h(w)o(ould)150 2082 y(use)h(the)g
(uni\014cation)g(algorithm)g(on)g(t)o(yp)q(es.)200 2204 y(Sev)o(eral)f
(examples)f(of)j(com)o(binators)e(are:)735 2318 y(maplist)n
Fz(f)p Fx(A)f Fz(!)f Fx(B)s Fz(g)41 b FA(:)g(list\()p Fx(A)p
FA(\))13 b Fz(!)h FA(list)o(\()p Fx(B)s FA(\))634 2408 y(pair)p
Fz(f)p Fx(A)f Fz(!)h Fx(B)s(;)8 b(A)13 b Fz(!)g Fx(C)t Fz(g)41
b FA(:)g Fx(A)14 b Fz(!)f FA(pro)q(duct)q(\()p Fx(B)s(;)8 b(C)t
FA(\))489 2497 y(foldlist)o Fz(f)p FA(1)15 b Fz(!)e Fx(C)q(;)8
b(A)j Fz(\002)f Fx(C)18 b Fz(!)13 b Fx(C)t Fz(g)41 b FA(:)g(list\()p
Fx(A)p FA(\))13 b Fz(!)h Fx(C)200 2600 y FA(Com)o(binator)h(expressions)i
(are)f(built)f(up)i(using)f(the)g(follo)o(wing)g(rules:)p eop
%%Page: 36 45
44 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(36)p 849 211 218 2 v 849 254 a Fx(I)17 b FA(:)d
Fx(A)f Fz(!)h Fx(A)1087 224 y FA(iden)o(tit)o(y)633 433 y Fx(e)656
440 y Fm(1)689 433 y FA(:)g Fx(T)746 440 y Fm(1)779 433 y Fz(!)f
Fx(T)871 440 y Fm(2)932 433 y Fx(e)955 440 y Fm(2)988 433 y
FA(:)h Fx(T)1045 440 y Fm(2)1078 433 y Fz(!)g Fx(T)1171 440
y Fm(3)p 612 470 599 2 v 751 512 a Fx(e)774 519 y Fm(1)793
512 y FA(;)8 b Fx(e)838 519 y Fm(2)871 512 y FA(:)13 b Fx(T)927
519 y Fm(1)960 512 y Fz(!)h Fx(T)1053 519 y Fm(3)1231 482 y
FA(comp)q(osition)150 655 y Fs(4.1.3.)32 b(Equations)23 b(b)r(et)n(w)n(een)f
(com)n(binators)150 777 y FA(The)12 b(equations)448 759 y Fm(1)480
777 y FA(b)q(et)o(w)o(een)f(categorical)h(com)o(binators)f(pro)o(vide)g(the)h
(seman)o(tics)e(for)i(the)g(system.)200 867 y(The)k(iden)o(tit)o(y)e(com)o
(binator)h(has)i(the)f(follo)o(wing)g(inference)f(rule:)839
1017 y Fx(e)e FA(:)h Fx(T)932 1024 y Fm(1)965 1017 y Fz(!)f
Fx(T)1057 1024 y Fm(2)p 703 1035 509 2 v 703 1077 a Fx(e)p
FA(;)8 b Fx(I)17 b FA(=)d Fx(e)f FA(=)h Fx(I)t FA(;)8 b Fx(e)13
b FA(:)g Fx(T)1067 1084 y Fm(1)1100 1077 y Fz(!)h Fx(T)1193
1084 y Fm(2)1233 1047 y FA(iden)o(tit)o(y)200 1155 y(Comp)q(osition)i(of)h
(com)o(binators)e(is)h(also)h(asso)q(ciativ)o(e:)509 1334 y
Fx(e)532 1341 y Fm(1)551 1334 y FA(;)8 b Fx(T)602 1341 y Fm(1)635
1334 y Fz(!)14 b Fx(T)728 1341 y Fm(2)789 1334 y Fx(e)812 1341
y Fm(2)831 1334 y FA(;)8 b Fx(T)882 1341 y Fm(2)915 1334 y
Fz(!)14 b Fx(T)1008 1341 y Fm(3)1069 1334 y Fx(e)1092 1341
y Fm(3)1111 1334 y FA(;)8 b Fx(T)1162 1341 y Fm(3)1195 1334
y Fz(!)14 b Fx(T)1288 1341 y Fm(4)p 488 1371 840 2 v 559 1417
a FA(\()p Fx(e)601 1424 y Fm(1)620 1417 y FA(;)8 b Fx(e)665
1424 y Fm(2)684 1417 y FA(\);)g Fx(e)748 1424 y Fm(3)781 1417
y FA(=)14 b Fx(e)856 1424 y Fm(1)875 1417 y FA(;)8 b(\()p Fx(e)939
1424 y Fm(2)959 1417 y FA(;)g Fx(e)1004 1424 y Fm(3)1023 1417
y FA(\))14 b(:)f Fx(T)1112 1424 y Fm(1)1145 1417 y Fz(!)h Fx(T)1238
1424 y Fm(4)1348 1383 y FA(asso)q(ciativit)o(y)200 1585 y(Finally)l(,)j(if)h
(t)o(w)o(o)h(com)o(binator)f(expression)g(are)h(equal,)f(then)g(applying)h
(the)g(substitution)f Fx(\033)150 1674 y FA(to)f(eac)o(h)e(com)o(binator)g
(expression)h(will)f(pro)q(duce)i(equal)f(expressions.)603
1825 y Fx(e)626 1832 y Fm(1)659 1825 y FA(=)e Fx(e)734 1832
y Fm(2)767 1825 y FA(:)g Fx(T)824 1832 y Fm(1)857 1825 y Fz(!)f
Fx(T)949 1832 y Fm(2)p 480 1842 612 2 v 480 1888 a FA(\()p
Fx(e)522 1895 y Fm(1)542 1888 y FA(\))561 1902 y Fk(\033)598
1888 y FA(=)h(\()p Fx(e)692 1895 y Fm(2)711 1888 y FA(\))730
1902 y Fk(\033)767 1888 y FA(:)g(\()p Fx(T)843 1895 y Fm(1)862
1888 y FA(\))881 1902 y Fk(\033)918 1888 y Fz(!)g FA(\()p Fx(T)1030
1895 y Fm(2)1049 1888 y FA(\))1068 1902 y Fk(\033)1112 1854
y FA(substitution)j(congruence)150 2020 y FB(4.2.)42 b(Com)n(binators)27
b(for)g(pro)r(ducts)200 2135 y FA(An)d(0{ary)h(pro)q(duct)g(is)f(called)f(a)i
(\014nal)f(ob)s(ject)g(and)h(is)f(denoted)g(b)o(y)g(the)g(t)o(yp)q(e)f(1.)46
b(The)150 2225 y(com)o(binator)15 b(!)h(is)g(a)h(family)d(of)i(maps)g
(de\014ned)g(b)o(y:)p 800 2363 193 2 v 800 2406 a(!)d(:)h Fx(T)20
b Fz(!)14 b FA(1)1013 2375 y(terminal)g(map)150 2484 y(with)i(equations)h
(giv)o(en)e(b)o(y:)p 150 2524 250 2 v 200 2579 a Fl(1)218 2595
y Fo(W)m(e)f(refer)h(to)f(iden)o(tities)g(as)g(equations)f(to)h(a)o(v)o(oid)f
(am)o(biguit)o(y)p eop
%%Page: 37 46
45 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(37)821 224 y Fx(f)19 b FA(:)14 b Fx(T)20 b Fz(!)13
b FA(1)p 780 244 290 2 v 780 286 a Fx(f)19 b FA(=)e(!)c(:)g
Fx(T)21 b Fz(!)13 b FA(1)1090 255 y(uniqueness)200 371 y(The)k(\014rst)g
(formation)g(rule)f(establishes)h(the)g(existence)e(of)j(a)f(map)f(from)g(ev)
o(ery)g(t)o(yp)q(e)h(in)f(the)150 468 y(system)f(to)h(t)o(yp)q(e)g(1)h(while)
e(the)h(second)h(equation)f(rule)f(states)i(that)g(it)e(is)i(unique.)200
565 y(An)27 b(alternativ)o(e)e(graphical)j(view)e(of)h(com)o(binators)f(and)i
(their)f(equations)g(is)g(obtained)150 661 y(through)22 b Fu(c)n(ommuting)h
(diagr)n(ams)p FA(.)36 b(The)21 b(existence)f(of)i(a)g(natural)g(map)e(\(the)
h(!)g(com)o(binator\))150 758 y(from)15 b(ev)o(ery)g(t)o(yp)q(e)h(in)g(the)g
(system)e(to)j(the)f(\014nal)g(unit)g(is)g(sho)o(wn)h(b)o(y)f(the)g(follo)o
(wing)g(diagram:)881 843 y Fx(X)920 889 y Fh(@)957 925 y(@)993
961 y(@)1029 998 y(@)1066 1034 y(@)1102 1070 y(@)1138 1107
y(@)1059 973 y FA(!)1073 980 y Fk(X)1138 1107 y Fh(R)884 1136
y Fx(Y)877 990 y(c)904 1085 y Fh(?)p 903 1085 2 226 v 940 1125
216 2 v 1028 1172 a FA(!)1042 1179 y Fk(Y)1127 1124 y Fh(-)1184
1136 y FA(1)150 1261 y(where)e(the)h(domain)f(t)o(yp)q(e)g
Fx(Y)26 b FA(is)15 b(transformed)f(to)h(the)f(co)q(domain)h(t)o(yp)q(e)f(1)h
(via)g(the)f(map)g(!)1814 1268 y Fk(Y)1844 1261 y FA(.)21 b(F)l(or)150
1357 y(an)o(y)g(other)f(t)o(yp)q(e)g Fx(X)25 b FA(with)c(a)g(map)f
Fx(c)h FA(:)g Fx(X)26 b Fz(!)21 b Fx(Y)11 b FA(,)21 b(the)g(map)f(!)1335
1364 y Fk(X)1389 1357 y FA(:)h Fx(X)26 b Fz(!)21 b FA(1)g(exists)f(and)h(!)
1858 1364 y Fk(X)1912 1357 y FA(=)150 1454 y Fx(c)p FA(;)8
b(!)207 1461 y Fk(Y)237 1454 y FA(.)27 b(Comm)o(uting)16 b(diagrams)i(pro)o
(vide)g(a)g(graphical)h(means)e(of)i(represen)o(ting)e(the)h(action)h(of)150
1550 y(com)o(binators)c(o)o(v)o(er)h(the)g(t)o(yp)q(es)g(and)g(reasoning)i
(ab)q(out)f(them.)200 1647 y(In)g(addition)h(to)g(the)f(ab)q(o)o(v)o(e)g
(diagram,)g(in)g(order)h(to)g(secure)f(the)g(uniqueness)g(of)h(the)f(!)g
(com-)150 1744 y(binator)g(w)o(e)f(require)e(the)i(follo)o(wing)g(additional)
h(equalit)o(y:)980 1878 y(!)994 1885 y Fm(1)1027 1878 y FA(=)d
Fx(I)1101 1885 y Fm(1)150 2012 y FA(Supp)q(ose)j(no)o(w)g Fx(f)i
FA(:)14 b Fx(X)k Fz(!)13 b FA(1)k(then)735 2135 y Fx(X)p 796
2124 506 2 v 1035 2100 a(f)1273 2123 y Fh(-)1330 2135 y FA(1)774
2181 y Fh(@)810 2217 y(@)847 2253 y(@)883 2290 y(@)919 2326
y(@)956 2362 y(@)992 2399 y(@)847 2323 y FA(!)861 2330 y Fk(X)992
2399 y Fh(R)33 b(\011)-42 b(\000)1103 2362 y(\000)1139 2326
y(\000)1176 2290 y(\000)1212 2253 y(\000)1248 2217 y(\000)1285
2181 y(\000)1205 2323 y FA(!)1219 2330 y Fm(1)1038 2428 y FA(1)150
2504 y(comm)o(utes.)18 b(Th)o(us)831 2600 y(!)845 2607 y Fk(x)880
2600 y FA(=)c Fx(f)5 b FA(;)j(!)997 2607 y Fm(1)1030 2600 y
FA(=)14 b Fx(f)5 b FA(;)j Fx(I)1155 2607 y Fm(1)1188 2600 y
FA(=)14 b Fx(f)p eop
%%Page: 38 47
46 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(38)150 141 y FA(sho)o(wing)17 b(uniqueness)200
234 y(The)i(de\014nition)g(of)g(pro)q(ducts)h(pro)q(duces)g(sev)o(eral)e(com)
o(binators,)g(and)i(w)o(e)f(in)o(tro)q(duce)g(them)150 328
y(b)o(y)d(the)g(follo)o(wing)g(formation)f(and)i(equalit)o(y)e(rules:)718
482 y Fx(f)k FA(:)14 b Fx(C)j Fz(!)d Fx(A)48 b(g)16 b FA(:)d
Fx(C)18 b Fz(!)13 b Fx(B)p 711 502 508 2 v 711 547 a(pair)q
Fz(f)p Fx(f)s(;)8 b(g)r Fz(g)14 b FA(:)f Fx(C)k Fz(!)d Fx(A)d
Fz(\002)f Fx(B)1240 513 y FA(pairing)750 698 y Fx(A)16 b FA(t)o(yp)q(e)48
b Fx(B)19 b FA(t)o(yp)q(e)p 543 718 759 2 v 564 788 a Fx(p)588
795 y Fm(0)622 788 y FA(:)13 b Fx(A)e Fz(\002)f Fx(B)17 b Fz(!)c
Fx(A)42 b(p)966 795 y Fm(1)1000 788 y FA(:)13 b Fx(A)e Fz(\002)f
Fx(B)17 b Fz(!)c Fx(B)1323 729 y FA(pro)s(jections)557 936
y Fx(h)p FA(;)8 b Fx(p)631 943 y Fm(0)665 936 y FA(=)14 b Fx(f)19
b FA(:)13 b Fx(C)18 b Fz(!)13 b Fx(A)41 b(h)p FA(;)8 b Fx(p)1055
943 y Fm(1)1089 936 y FA(:)14 b Fx(C)j Fz(!)d Fx(B)p 536 964
757 2 v 536 974 V 614 1037 a(h)g FA(=)f Fx(pair)q Fz(f)p Fx(f)s(;)8
b(g)r Fz(g)14 b FA(:)f Fx(C)18 b Fz(!)13 b Fx(A)e Fz(\002)g
Fx(B)1334 981 y FA(uniqueness)150 1140 y(Notice)j(that)h(the)f(uniqueness)g
(rule)g(is)h(a)g(t)o(w)o(o)f(w)o(a)o(y)h(rule)f(meaning)f(the)i(equalities)e
(hold)i(in)f(b)q(oth)150 1233 y(directions.)200 1327 y(Expressing)h(pro)q
(ducts)g(\(often)g(expressed)f(with)h(the)f(in\014x)h Fz(\002)p
FA(\))f(with)h(a)g(comm)o(uti)o(ng)e(diagram)150 1420 y(yields:)735
1543 y Fx(X)794 1531 y Fh(\033)p 811 1532 151 2 v 878 1509
a Fx(P)909 1516 y Fm(0)978 1543 y Fx(X)i Fz(\002)c Fx(Y)p 1139
1532 156 2 v 1171 1509 a(P)1202 1516 y Fm(1)1266 1531 y Fh(-)1323
1543 y Fx(Y)774 1589 y Fh(I)-42 b(@)810 1625 y(@)847 1662 y(@)883
1698 y(@)919 1734 y(@)956 1771 y(@)992 1807 y(@)865 1731 y
Fx(f)1067 1807 y Fh(\000)1103 1771 y(\000)1139 1734 y(\000)1176
1698 y(\000)1212 1662 y(\000)1248 1625 y(\000)1285 1589 y(\000)1205
1731 y Fx(g)1285 1589 y Fh(\022)1031 1836 y Fx(C)1050 1600
y Fh(6)p 1049 1590 2 13 v 1049 1627 V 1049 1663 V 1049 1700
V 1049 1736 V 1049 1773 V 1056 1690 a Fz(h)p Fx(f)s(;)8 b(g)r
Fz(i)150 1915 y FA(where)16 b Fz(h)p Fx(f)s(;)8 b(g)r Fz(i)17
b FA(is)f(short)h(hand)f(for)h(the)f Fx(pair)q Fz(f)p Fx(f)s(;)8
b(g)r Fz(g)p FA(.)21 b(The)16 b(pro)q(duct)h(diagram)f(can)g(b)q(e)g(read)h
(as:)299 2024 y(\\giv)o(en)e(a)i(t)o(yp)q(e)f Fx(X)g Fz(\002)10
b Fx(Y)28 b FA(and)17 b(t)o(w)o(o)f(com)o(binators)g Fx(P)1256
2031 y Fm(0)1290 2024 y FA(:)d Fx(X)j Fz(\002)11 b Fx(Y)25
b Fz(!)14 b Fx(X)t FA(,)i Fx(P)1645 2031 y Fm(1)1680 2024 y
FA(:)d Fx(X)j Fz(\002)299 2118 y Fx(Y)26 b Fz(!)15 b Fx(Y)c
FA(,)17 b(and)g(an)o(y)g(t)o(yp)q(e)f(C)i(with)e(com)o(binators)h
Fx(f)j FA(:)15 b Fx(C)j Fz(!)d Fx(X)21 b FA(and)d Fx(g)f FA(:)e
Fx(C)j Fz(!)d Fx(Y)299 2211 y FA(there)21 b(exists)g(a)h(unique)f(com)o
(binator)g Fz(h)p Fx(f)s(;)8 b(g)r Fz(i)22 b FA(suc)o(h)g(that)g
Fz(h)p Fx(f)s(;)8 b(g)r Fz(i)p FA(;)g Fx(P)1567 2218 y Fm(0)1611
2211 y FA(=)23 b Fx(f)k FA(and)299 2304 y Fz(h)p Fx(f)s(;)8
b(g)r Fz(i)p FA(;)g Fx(P)464 2311 y Fm(1)498 2304 y FA(=)14
b Fx(g)r FA(".)200 2414 y(F)l(rom)h(the)h(ab)q(o)o(v)o(e)g(equations)g(w)o(e)
g(can)g(deriv)o(e)f(the)h(distributiv)o(e)e(rule)i(for)g(comp)q(osition)g(o)o
(v)o(er)150 2507 y(pairing:)826 2600 y Fx(f)5 b FA(;)j Fz(h)p
Fx(x;)g(y)r Fz(i)14 b FA(=)g Fz(h)p Fx(f)5 b FA(;)j Fx(x;)g(f)d
FA(;)j Fx(y)r Fz(i)p eop
%%Page: 39 48
47 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(39)150 141 y FA(since)646 208 y Fx(f)5 b FA(;)j
Fz(h)p Fx(x;)g(y)r Fz(i)41 b FA(=)h Fz(h)p Fx(f)5 b FA(;)j
Fz(h)p Fx(x;)g(y)r Fz(i)p FA(;)g Fx(p)1162 215 y Fm(0)1182
208 y Fx(;)g(f)d FA(;)j Fz(h)p Fx(x;)g(y)r Fz(i)p FA(;)g Fx(p)1415
215 y Fm(1)1435 208 y Fz(i)852 298 y FA(=)42 b Fz(h)p Fx(f)5
b FA(;)j Fx(x;)g(f)d FA(;)j Fx(y)r Fz(i)200 382 y FA(In)17
b(the)g(Charit)o(y)h(system,)e(the)h(unit)g(and)i(pro)q(duct)f(t)o(yp)q(es)f
(are)h(built)f(in)g(along)h(with)g(com)o(bi-)150 475 y(nators:)1042
542 y(!)p Fz(fg)41 b FA(:)g Fx(X)19 b Fz(!)13 b FA(1)1005 631
y Fx(P)1036 638 y Fm(0)1056 631 y Fz(fg)41 b FA(:)g Fx(X)16
b Fz(\002)11 b Fx(Y)25 b Fz(!)13 b Fx(X)1005 721 y(P)1036 728
y Fm(1)1056 721 y Fz(fg)41 b FA(:)g Fx(X)16 b Fz(\002)11 b
Fx(Y)25 b Fz(!)13 b Fx(Y)631 811 y(pair)q Fz(f)p Fx(C)18 b
Fz(!)13 b Fx(X)q(;)8 b(C)18 b Fz(!)c Fx(Y)d Fz(g)41 b FA(:)g
Fx(C)18 b Fz(!)13 b Fx(X)j Fz(\002)11 b Fx(Y)150 984 y FB(4.3.)42
b(T)-7 b(ranslating)27 b(to)g(com)n(binators)200 1101 y FA(So)14
b(far,)g(w)o(e)f(ha)o(v)o(e)f(in)o(tro)q(duced)h(the)h(basic)f(t)o(yp)q(es)g
(and)h(com)o(binators)f(for)h(the)f(Charit)o(y)g(system.)150
1194 y(W)l(e)i(no)o(w)g(de\014ne)g(the)g(translation)h Fz(T)27
b FA(from)14 b(Charit)o(y)h(term)e(logic)i(to)h(com)o(binators.)j(This)d
(case{)150 1287 y(based)22 b(translation)g(in)o(v)o(olv)o(es)e(pattern)h
(matc)o(hing)f(o)o(v)o(er)h(a)h(term)e(to)i(pro)q(duce)g(an)g(equiv)m(alen)o
(t)150 1379 y(com)o(binator)13 b(expression.)21 b(Belo)o(w,)13
b(a)i(term)d(matc)o(hing)h(the)i(form)e(on)i(the)f(left)g(side)g(of)g(the)h
(equal)150 1472 y(sign)i(will)e(b)q(e)h(translated)h(to)f(the)g(com)o
(binator)f(on)i(the)f(righ)o(t)g(side,)f(recursiv)o(ely:)330
1586 y(\()p Fx(T)378 1593 y Fm(1)397 1586 y FA(\))42 b Fz(T)21
b FA([)o Fx(v)16 b Fz(7!)d FA(\(\)])h(=)i(!)p Fx(;)330 1676
y FA(\()p Fx(T)378 1683 y Fm(2)397 1676 y FA(\))42 b Fz(T)21
b FA([)o Fx(x)14 b Fz(7!)g Fx(x)p FA(])f(=)g Fx(I)t(;)330 1765
y FA(\()p Fx(T)378 1772 y Fm(3)397 1765 y FA(\))42 b Fz(T)21
b FA([)o(\()p Fx(v)562 1772 y Fm(0)582 1765 y Fx(;)8 b(v)628
1772 y Fm(1)647 1765 y FA(\))14 b Fz(7!)f Fx(x)p FA(])g(=)h
Fx(p)874 1772 y Fk(i)889 1765 y FA(;)8 b Fz(T)21 b FA([)o Fx(v)996
1772 y Fk(i)1024 1765 y Fz(7!)13 b Fx(x)p FA(])24 b(where)16
b Fx(i)e FA(=)f(0)k(if)f Fx(x)g FA(o)q(ccurs)g(in)g Fx(v)1737
1772 y Fm(0)1756 1765 y FA(,)458 1855 y(otherwise)g Fx(i)d
FA(=)h(1)p Fx(;)330 1945 y FA(\()p Fx(T)378 1952 y Fm(4)397
1945 y FA(\))42 b Fz(T)21 b FA([)o Fx(v)16 b Fz(7!)d Fx(p)646
1952 y Fk(i)661 1945 y FA(\()p Fx(t)p FA(\)])g(=)g Fz(T)22
b FA([)o Fx(v)15 b Fz(7!)f Fx(t)p FA(])7 b(;)h Fx(p)1045 1952
y Fk(i)1076 1945 y FA(for)17 b Fx(i)c FA(=)h(0)p Fx(;)8 b FA(1)q
Fx(;)330 2034 y FA(\()p Fx(T)378 2041 y Fm(5)397 2034 y FA(\))42
b Fz(T)21 b FA([)o Fx(v)16 b Fz(7!)d FA(\()p Fx(t)659 2041
y Fm(0)679 2034 y Fx(;)8 b(t)719 2041 y Fm(1)738 2034 y FA(\)])13
b(=)h Fz(hT)21 b FA([)p Fx(v)15 b Fz(7!)f Fx(t)1038 2041 y
Fm(0)1057 2034 y FA(])8 b Fx(;)g Fz(T)21 b FA([)o Fx(v)16 b
Fz(7!)d Fx(t)1283 2041 y Fm(1)1303 2034 y FA(])o Fz(i)p Fx(;)330
2124 y FA(\()p Fx(T)378 2131 y Fm(6)397 2124 y FA(\))42 b Fz(T)21
b FA([)o Fx(v)16 b Fz(7!)d(f)p Fx(w)i Fz(7!)f Fx(t)779 2106
y Fr(0)790 2124 y Fz(g)p FA(\()p Fx(t)p FA(\)])f(=)h Fz(hT)21
b FA([)p Fx(v)15 b Fz(7!)f Fx(t)p FA(])7 b Fx(;)h(I)t Fz(i)p
FA(;)g Fz(T)21 b FA([)o(\()p Fx(w)q(;)8 b(v)r FA(\))13 b Fz(7!)h
Fx(t)1540 2106 y Fr(0)1551 2124 y FA(])150 2230 y(Abstractions)22
b(are)h(translated)f(b)o(y)g(the)g(last)g(translation)h(\()p
Fx(T)1329 2237 y Fm(6)1349 2230 y FA(\).)39 b(This)22 b(m)o(ust)f(propagate)j
(an)150 2322 y(en)o(vironmen)o(t)12 b(to)j(the)g(abstracted)g(term.)k(This)c
(is)g(done)g(using)g(the)g(second)g(comp)q(onen)o(t)f(of)h(the)150
2415 y(pair.)21 b(Th)o(us,)15 b(a)h(v)m(ariable)e(in)h Fx(v)h
FA(is)f(in)g(the)g(second)g(comp)q(onen)o(t)f(of)i(the)f(pair)g(comp)q(osed)f
(with)h(the)150 2508 y(abstraction.)26 b(The)17 b(equiv)m(alence)f(of)i(the)f
(com)o(binator)g(expressions)g(and)h(the)g(term)d(logic,)i(and)150
2600 y(th)o(us)i(the)f(correctness)g(of)h(the)f(translation)h(from)f(term)f
(logic)h(to)h(com)o(binators,)e(is)i(pro)o(v)o(en)e(in)p eop
%%Page: 40 49
48 bop 486 33 a Fy(4.)20 b(THE)f(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(BASICS)293 b(40)150 141 y FA([CS95)q(].)200 233 y(T)l(o)15
b(translate)f(from)g(term)e(logic,)i(one)h(w)o(ould)f(mec)o(hanically)d
(pattern)k(matc)o(h)d(the)j(term)d(with)150 324 y(the)19 b(translation)h
(rules)f(to)h(pro)q(duce)f(a)h(categorical)f(com)o(binator)f(expression.)30
b(F)l(or)20 b(example,)150 416 y(the)c(Charit)o(y)g(expression)637
522 y Fj(\(\(x,y\),z\))22 b(=>)j(p0\(p1\(x,\(y,)o(z\))o(\)\))150
628 y FA(has)17 b(the)f(follo)o(wing)g(translation)h(to)f(com)o(binators:)354
742 y Fz(T)21 b FA([)o(\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(z)r
FA(\))13 b Fz(7!)h Fx(P)722 749 y Fm(0)742 742 y FA(\()p Fx(P)792
749 y Fm(1)812 742 y FA(\()p Fx(x;)8 b FA(\()p Fx(y)r(;)g(z)r
FA(\)\)\)])p 354 761 689 2 v 395 832 a(=)-8 b Fz(\))475 839
y Fk(T)496 844 y Fg(4)556 832 y Fz(T)21 b FA([\(\()p Fx(x;)8
b(y)r FA(\))p Fx(;)g(z)r FA(\))k Fz(7!)i Fx(P)924 839 y Fm(1)944
832 y FA(\()p Fx(x;)8 b FA(\()p Fx(y)r(;)g(z)r FA(\)\)])p 556
851 600 2 v -1 w(;)g Fx(P)1209 839 y Fm(0)395 922 y FA(=)-8
b Fz(\))475 929 y Fk(T)496 934 y Fg(4)556 922 y Fz(T)21 b FA([\(\()p
Fx(x;)8 b(y)r FA(\))p Fx(;)g(z)r FA(\))k Fz(7!)i FA(\()p Fx(x;)8
b FA(\()p Fx(y)r(;)g(z)r FA(\)\)])p 556 941 549 2 v -2 w(;)g
Fx(P)1157 929 y Fm(1)1177 922 y FA(;)g Fx(P)1230 929 y Fm(0)395
1011 y FA(=)-8 b Fz(\))475 1018 y Fk(T)496 1023 y Fg(5)556
1011 y Fz(hT)22 b FA([)o(\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(z)r
FA(\))13 b Fz(7!)g Fx(x)p FA(])p 575 1030 379 2 v Fx(;)8 b
Fz(T)21 b FA([)o(\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(z)r FA(\))13
b Fz(7!)g FA(\()p Fx(y)r(;)8 b(z)r FA(\)])o Fz(i)p FA(;)g Fx(P)1508
1018 y Fm(1)1529 1011 y FA(;)g Fx(P)1582 1018 y Fm(0)395 1101
y FA(=)-8 b Fz(\))475 1108 y Fk(T)496 1113 y Fg(3)556 1101
y Fz(h)p Fx(P)606 1108 y Fm(0)627 1101 y FA(;)8 b Fz(T)21 b
FA([)o(\()p Fx(x;)8 b(y)r FA(\))13 b Fz(7!)h Fx(x)p FA(])p
649 1120 294 2 v -1 w Fx(;)8 b Fz(T)21 b FA([\(\()p Fx(x;)8
b(y)r FA(\))p Fx(;)g(z)r FA(\))k Fz(7!)i FA(\()p Fx(y)r(;)8
b(z)r FA(\)])o Fz(i)p FA(;)g Fx(P)1497 1108 y Fm(1)1517 1101
y FA(;)g Fx(P)1570 1108 y Fm(0)395 1191 y FA(=)-8 b Fz(\))475
1198 y Fk(T)496 1203 y Fg(3)556 1191 y Fz(h)p Fx(P)606 1198
y Fm(0)627 1191 y FA(;)8 b Fx(P)680 1198 y Fm(0)700 1191 y
FA(;)g Fz(T)21 b FA([)o Fx(x)14 b Fz(7!)f Fx(x)p FA(])p 722
1210 209 2 v Fx(;)8 b Fz(T)21 b FA([)o(\(\()p Fx(x;)8 b(y)r
FA(\))p Fx(;)g(z)r FA(\))13 b Fz(7!)g FA(\()p Fx(y)r(;)8 b(z)r
FA(\)])o Fz(i)p FA(;)g Fx(P)1484 1198 y Fm(1)1505 1191 y FA(;)g
Fx(P)1558 1198 y Fm(0)395 1280 y FA(=)-8 b Fz(\))475 1287 y
Fk(T)496 1292 y Fg(3)556 1280 y Fz(h)p Fx(P)606 1287 y Fm(0)627
1280 y FA(;)8 b Fx(P)680 1287 y Fm(0)700 1280 y FA(;)g Fx(I)t(;)g
Fz(T)20 b FA([\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(z)r FA(\))k
Fz(7!)i FA(\()p Fx(y)r(;)8 b(z)r FA(\)])p 770 1299 461 2 v
-1 w Fz(i)p FA(;)g Fx(P)1302 1287 y Fm(1)1322 1280 y FA(;)g
Fx(P)1375 1287 y Fm(0)395 1370 y FA(=)-8 b Fz(\))475 1377 y
Fk(T)496 1382 y Fg(5)556 1370 y Fz(h)p Fx(P)606 1377 y Fm(0)627
1370 y FA(;)8 b Fx(P)680 1377 y Fm(1)700 1370 y FA(;)g Fx(I)t(;)g
Fz(hT)20 b FA([\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(z)r FA(\))k
Fz(7!)i Fx(y)r FA(])p 789 1389 376 2 v -1 w Fx(;)8 b Fz(T)21
b FA([\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(z)r FA(\))k Fz(7!)i
Fx(z)r FA(])o Fz(ii)p FA(;)8 b Fx(P)1652 1377 y Fm(1)1673 1370
y FA(;)g Fx(P)1726 1377 y Fm(0)395 1460 y FA(=)-8 b Fz(\))475
1467 y Fk(T)496 1472 y Fg(3)556 1460 y Fz(h)p Fx(P)606 1467
y Fm(0)627 1460 y FA(;)8 b Fx(P)680 1467 y Fm(1)700 1460 y
FA(;)g Fx(I)t(;)g Fz(h)p Fx(P)820 1467 y Fm(1)839 1460 y FA(;)g
Fz(T)21 b FA([\()p Fx(x;)8 b(y)r FA(\))13 b Fz(7!)g Fx(y)r
FA(])p 861 1479 292 2 v Fx(;)8 b Fz(T)21 b FA([)o(\(\()p Fx(x;)8
b(y)r FA(\))p Fx(;)g(z)r FA(\))13 b Fz(7!)g Fx(z)r FA(])p Fz(ii)p
FA(;)8 b Fx(P)1641 1467 y Fm(1)1661 1460 y FA(;)g Fx(P)1714
1467 y Fm(0)395 1549 y FA(=)-8 b Fz(\))475 1556 y Fk(T)496
1561 y Fg(3)556 1549 y Fz(h)p Fx(P)606 1556 y Fm(0)627 1549
y FA(;)8 b Fx(P)680 1556 y Fm(1)700 1549 y FA(;)g Fx(I)t(;)g
Fz(h)p Fx(P)820 1556 y Fm(0)839 1549 y FA(;)g Fx(P)892 1556
y Fm(1)912 1549 y FA(;)g Fz(T)21 b FA([)p Fx(y)15 b Fz(7!)f
Fx(y)r FA(])p 934 1568 204 2 v -1 w Fx(;)8 b Fz(T)21 b FA([\(\()p
Fx(x;)8 b(y)r FA(\))p Fx(;)g(z)r FA(\))k Fz(7!)i Fx(z)r FA(])o
Fz(ii)p FA(;)8 b Fx(P)1626 1556 y Fm(1)1647 1549 y FA(;)g Fx(P)1700
1556 y Fm(0)395 1639 y FA(=)-8 b Fz(\))475 1646 y Fk(T)496
1651 y Fg(2)556 1639 y Fz(h)p Fx(P)606 1646 y Fm(0)627 1639
y FA(;)8 b Fx(P)680 1646 y Fm(1)700 1639 y FA(;)g Fx(I)t(;)g
Fz(h)p Fx(P)820 1646 y Fm(0)839 1639 y FA(;)g Fx(P)892 1646
y Fm(1)912 1639 y FA(;)g Fx(I)t(;)g Fz(T)21 b FA([)o(\(\()p
Fx(x;)8 b(y)r FA(\))p Fx(;)g(z)r FA(\))13 b Fz(7!)g Fx(z)r
FA(])p 982 1658 376 2 v Fz(ii)p FA(;)8 b Fx(P)1448 1646 y Fm(1)1469
1639 y FA(;)g Fx(P)1522 1646 y Fm(0)395 1729 y FA(=)-8 b Fz(\))475
1736 y Fk(T)496 1741 y Fg(3)556 1729 y Fz(h)p Fx(P)606 1736
y Fm(0)627 1729 y FA(;)8 b Fx(P)680 1736 y Fm(1)700 1729 y
FA(;)g Fx(I)t(;)g Fz(h)p Fx(P)820 1736 y Fm(0)839 1729 y FA(;)g
Fx(P)892 1736 y Fm(1)912 1729 y FA(;)g Fx(I)t(;)g(P)1013 1736
y Fm(1)1033 1729 y FA(;)g Fz(T)21 b FA([)o Fx(z)16 b Fz(7!)e
Fx(z)r FA(])p 1055 1748 203 2 v -1 w Fz(ii)p FA(;)8 b Fx(P)1348
1736 y Fm(1)1369 1729 y FA(;)g Fx(P)1422 1736 y Fm(0)395 1818
y FA(=)-8 b Fz(\))475 1825 y Fk(T)496 1830 y Fg(2)556 1818
y Fz(h)p Fx(P)606 1825 y Fm(0)627 1818 y FA(;)8 b Fx(P)680
1825 y Fm(1)700 1818 y FA(;)g Fx(I)t(;)g Fz(h)p Fx(P)820 1825
y Fm(0)839 1818 y FA(;)g Fx(P)892 1825 y Fm(1)912 1818 y FA(;)g
Fx(I)t(;)g(P)1013 1825 y Fm(1)1033 1818 y FA(;)g Fx(I)t Fz(ii)p
FA(;)g Fx(P)1172 1825 y Fm(1)1192 1818 y FA(;)g Fx(P)1245 1825
y Fm(0)150 1921 y FA(whic)o(h)16 b(is)g(correct,)f(but)h(clearly)f(rather)h
(ine\016cien)o(t!)150 2108 y Fs(4.3.1.)32 b(Resolving)23 b(v)l(ariable)h
(scop)r(e)150 2234 y FA(One)17 b(of)g(the)f(primary)g(reasons)i(for)f(c)o(ho)
q(osing)h(com)o(binators)e(as)h(an)h(in)o(termedi)o(ate)c(represen)o(ta-)150
2325 y(tion)j(is)f(that)h(the)g(ev)m(aluation)g(need)f(not)h(handle)g(v)m
(ariable)f(name)g(clashes)h(and)g(v)m(ariable)f(scop-)150 2417
y(ing)h(problems.)22 b(Access)16 b(to)h(a)g(v)m(ariable)g(outside)f(of)i(the)
e(scop)q(e)h(of)h(a)f(com)o(binator)f(is)g(restricted)150 2509
y(through)h(the)f(use)h(of)f(an)h Fu(envir)n(onment)p FA(.)200
2600 y(T)l(o)g(illustrate)e(ho)o(w)h(the)g(en)o(vironmen)o(t)e(is)i(used)g
(in)g(Charit)o(y)l(,)g(consider)f(the)h(function:)p eop
%%Page: 41 50
49 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(41)304 141 y Fj(def)24 b(f)i(\(x\))e(=)381 234
y({)h(y)g(=>)g(g\(x,)f(y\))h(})g(\(zero\).)150 342 y FA(whic)o(h)15
b(con)o(tains)h(an)h(abstraction)g(whose)f(b)q(o)q(dy)h(accepts)f(a)h
Fj(y)e FA(and)i(calls)e(the)h(function)g Fj(g)p FA(,)f(with)150
435 y Fj(x)e FA(and)h Fj(y)f FA(as)h(input.)21 b(The)13 b(v)m(ariable)g
Fj(y)g FA(is)h(b)q(ound)g(within)f(the)g(scop)q(e)h(of)g(the)f(abstraction,)i
(but)e(the)150 528 y Fj(x)k FA(is)f(not.)24 b(T)l(o)17 b(access)g(the)g(un)o
(b)q(ound)h Fj(x)p FA(,)e(the)h(abstraction)g(is)g(passed)h(a)f(pair)g
(consisting)g(of)g(the)150 620 y(actual)h(argumen)o(t)e(for)i
Fj(y)f FA(\(ie:)23 b Fj(zero)p FA(\),)16 b(and)i(the)g(en)o(vironmen)o(t)d
(\(the)i(actual)h(argumen)o(t)e(for)i Fj(x)p FA(\).)150 713
y(The)g(translation)h(rules)f(tak)o(e)g(in)o(to)g(accoun)o(t)g(the)g(extra)h
(en)o(vironmen)o(t)c(for)k(eac)o(h)f(com)o(binator,)150 806
y(and)f(select)e(either)g(the)h(actual)g(argumen)o(t)g(or)g(en)o(vironmen)o
(t)e(as)i(needed.)200 898 y(Consider)j(the)h(next)f(Charit)o(y)g(program)g
(and)h(its)f(translation)h(whic)o(h)f(illustrates)f(ho)o(w)i(the)150
991 y(en)o(vironmen)o(t)13 b(and)k(ho)o(w)g(scoping)g(problems)e(are)h(a)o(v)
o(oided.)611 1099 y Fj(def)25 b(f\(x\))f(=)h({\(x,y\))f(=>)h(x})g(\({\(x,y\))
e(=>)i(y})f(\(x\)\).)150 1208 y FA(Notice)16 b(the)h(v)m(ariable)f
Fx(x)h FA(is)g(used)g(in)g(more)f(than)h(one)g(con)o(text.)23
b(The)17 b(translation)h(rules)e(deter-)150 1300 y(mine)c(the)i(scop)q(e)g
(of)g(a)g(v)m(ariable)g(b)o(y)f(creating)h(an)g(en)o(vironmen)o(t)e(in)h
(whic)o(h)g(a)i(term)d(is)i(ev)m(aluated.)150 1393 y(In)19
b(fact,)g(translations)h Fx(T)625 1400 y Fm(3)663 1393 y FA(and)g
Fx(T)790 1400 y Fm(6)828 1393 y FA(w)o(ork)f(in)g(conjunction)g(b)o(y)g
(\014rst)g(building)g(the)f(con)o(text)h(\(a)150 1486 y(v)m(ariable)g(base\))
h(in)f(transition)g Fx(T)781 1493 y Fm(6)801 1486 y FA(,)g(and)h(then)f
(accessing)h(the)f(v)m(ariable)g(in)g(the)g(con)o(text)f(with)150
1579 y(transition)e Fx(T)401 1586 y Fm(3)421 1579 y FA(.)21
b(The)16 b(translation)h(of)g(the)f(ab)q(o)o(v)o(e)g(function)g
Fj(f)g FA(is)g(sho)o(wn)h(b)q(elo)o(w:)353 1690 y Fz(T)k FA([)o
Fx(x)14 b Fz(7!)g(f)p FA(\()p Fx(x;)8 b(y)r FA(\))k Fz(7!)i
Fx(x)p Fz(g)p FA(\()p Fz(f)p FA(\()p Fx(x;)8 b(y)r FA(\))13
b Fz(7!)g Fx(y)r Fz(g)p FA(\()p Fx(x)p FA(\)\)])p 353 1709
819 2 v 394 1780 a(=)-8 b Fz(\))474 1787 y Fk(T)495 1792 y
Fg(6)555 1780 y Fz(hT)22 b FA([)o Fx(x)14 b Fz(7!)f(f)p FA(\()p
Fx(x;)8 b(y)r FA(\))13 b Fz(7!)h Fx(y)r Fz(g)p FA(\()p Fx(x)p
FA(\)])p 574 1799 512 2 v -1 w Fx(;)8 b(I)t Fz(i)p FA(;)g Fz(T)20
b FA([\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(x)p FA(\))k Fz(7!)i
Fx(x)p FA(])394 1870 y(=)-8 b Fz(\))474 1877 y Fk(T)495 1882
y Fg(6)555 1870 y Fz(hhT)22 b FA([)p Fx(x)13 b Fz(7!)h Fx(x)p
FA(])p 593 1889 209 2 v -1 w Fx(;)8 b(I)t Fz(i)p FA(;)g Fz(T)21
b FA([)o(\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(x)p FA(\))13 b
Fz(7!)g Fx(y)r FA(])8 b Fx(;)g(I)t Fz(i)p FA(;)g Fz(T)20 b
FA([\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(x)p FA(\))k Fz(7!)i
Fx(x)p FA(])394 1959 y(=)-8 b Fz(\))474 1966 y Fk(T)495 1971
y Fg(2)555 1959 y Fz(hh)p Fx(I)t(;)8 b(I)t Fz(i)p FA(;)g Fz(T)21
b FA([\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(x)p FA(\))k Fz(7!)i
Fx(y)r FA(])p 708 1978 379 2 v -1 w Fx(;)8 b(I)t Fz(i)p FA(;)g
Fz(T)20 b FA([\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(x)p FA(\))k
Fz(7!)i Fx(x)p FA(])394 2049 y(=)-8 b Fz(\))474 2056 y Fk(T)495
2061 y Fg(4)555 2049 y Fz(hh)p Fx(I)t(;)8 b(I)t Fz(i)p FA(;)g
Fx(P)739 2056 y Fm(0)759 2049 y FA(;)g Fz(T)21 b FA([\()p Fx(x;)8
b(y)r FA(\))k Fz(7!)i Fx(y)r FA(])p 781 2068 292 2 v -1 w Fx(;)8
b(I)t Fz(i)p FA(;)g Fz(T)21 b FA([)o(\(\()p Fx(x;)8 b(y)r FA(\))p
Fx(;)g(x)p FA(\))13 b Fz(7!)g Fx(x)p FA(])394 2139 y(=)-8 b
Fz(\))474 2146 y Fk(T)495 2151 y Fg(4)555 2139 y Fz(hh)p Fx(I)t(;)8
b(I)t Fz(i)p FA(;)g Fx(P)739 2146 y Fm(0)759 2139 y FA(;)g
Fx(P)812 2146 y Fm(1)832 2139 y FA(;)g Fz(T)21 b FA([)p Fx(y)15
b Fz(7!)f Fx(y)r FA(])p 854 2158 204 2 v -1 w Fx(;)8 b(I)t
Fz(i)p FA(;)g Fz(T)20 b FA([\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(x)p
FA(\))k Fz(7!)i Fx(x)p FA(])394 2228 y(=)-8 b Fz(\))474 2235
y Fk(T)495 2240 y Fg(2)555 2228 y Fz(hh)p Fx(I)t(;)8 b(I)t
Fz(i)p FA(;)g Fx(P)739 2235 y Fm(0)759 2228 y FA(;)g Fx(P)812
2235 y Fm(1)832 2228 y FA(;)g Fx(I)t(;)g(I)t Fz(i)p FA(;)g
Fz(T)20 b FA([)o(\(\()p Fx(x;)8 b(y)r FA(\))p Fx(;)g(x)p FA(\))13
b Fz(7!)h Fx(x)p FA(])p 969 2247 381 2 v 394 2318 a(=)-8 b
Fz(\))474 2325 y Fk(T)495 2330 y Fg(4)555 2318 y Fz(hh)p Fx(I)t(;)8
b(I)t Fz(i)p FA(;)g Fx(P)739 2325 y Fm(0)759 2318 y FA(;)g
Fx(P)812 2325 y Fm(1)832 2318 y FA(;)g Fx(I)t(;)g(I)t Fz(i)p
FA(;)g Fx(P)1000 2325 y Fm(0)1019 2318 y FA(;)g Fz(T)21 b FA([)o(\()p
Fx(x;)8 b(y)r FA(\))13 b Fz(7!)h Fx(x)p FA(])p 1041 2337 294
2 v 394 2408 a(=)-8 b Fz(\))474 2415 y Fk(T)495 2420 y Fg(4)555
2408 y Fz(hh)p Fx(I)t(;)8 b(I)t Fz(i)p FA(;)g Fx(P)739 2415
y Fm(0)759 2408 y FA(;)g Fx(P)812 2415 y Fm(1)832 2408 y FA(;)g
Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(P)1000 2415 y Fm(0)1019 2408
y FA(;)g Fx(P)1072 2415 y Fm(0)1092 2408 y FA(;)g Fz(T)21 b
FA([)o Fx(x)14 b Fz(7!)g Fx(x)p FA(])p 1114 2427 209 2 v 394
2497 a(=)-8 b Fz(\))474 2504 y Fk(T)495 2509 y Fg(2)555 2497
y Fz(hh)p Fx(I)t(;)8 b(I)t Fz(i)p FA(;)g Fx(P)739 2504 y Fm(0)759
2497 y FA(;)g Fx(P)812 2504 y Fm(1)832 2497 y FA(;)g Fx(I)t(;)g(I)t
Fz(i)p FA(;)g Fx(P)1000 2504 y Fm(0)1019 2497 y FA(;)g Fx(P)1072
2504 y Fm(0)1092 2497 y FA(;)g Fx(I)150 2600 y FA(The)14 b(co)q(de)g
(generated)g(from)e(the)i(translation)h(is)e(unreadable,)h(and)h(is)e
(analogous)j(to)e(an)h(assem-)p eop
%%Page: 42 51
50 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(42)150 141 y FA(bly)16 b(language.)22 b(Ho)o(w)o(ev)o(er,)14
b(the)h(p)q(oin)o(t)i(of)f(the)g(translation)h(w)o(as)f(to)h(remo)o(v)o(e)c
(all)j(v)m(ariables)g(from)150 233 y(the)g(resultan)o(t)g(com)o(binator)g
(expression,)f(whic)o(h)h(has)h(b)q(een)g(successfully)e(accomplished.)20
b(The)150 324 y(translated)13 b(expression)g(ab)q(o)o(v)o(e)f(creates)h(a)g
(few)f(parameter/en)o(vironmen)o(t)e(pairs,)j(then)f(pro)s(jects)150
416 y(out)17 b(the)f(v)m(alue)g(needed.)200 507 y(In)21 b(general,)h(if)f(an)
h(en)o(vironmen)o(t)d(is)j(required,)f(a)h(pair)f(is)h(constructed)f(with)h
(the)f(second)150 599 y(comp)q(onen)o(t)f(used)h(as)h(the)e(previous)h(en)o
(vironmen)o(t.)33 b(T)l(o)21 b(access)g(a)g(particular)g(en)o(vironmen)o(t)
150 691 y(nested)15 b(do)o(wn)g(sev)o(eral)f(la)o(y)o(ers,)g(one)h(m)o(ust)f
(con)o(tin)o(uously)g(pro)s(ject)g(out)i(the)f(second)g(comp)q(onen)o(t)150
782 y(un)o(til)g(the)h(desired)g(en)o(vironmen)o(t)d(is)j(lo)q(cated.)150
969 y FB(4.4.)42 b(Ev)l(aluation)26 b(of)g(categorical)h(com)n(binators)200
1085 y FA(After)17 b(a)i(t)o(yp)q(e)f(and)h(the)f(com)o(binators)g(that)h
(act)f(on)h(that)g(t)o(yp)q(e)f(are)h(declared,)e(the)h(system)150
1177 y(m)o(ust)10 b(describ)q(e)h(the)g(b)q(eha)o(vior)g(as)h(rewrite)f
(rules)g(for)g(eac)o(h)g(com)o(binator.)19 b(These)11 b(are)h(determined)150
1268 y(b)o(y)17 b(the)f(equations)h(b)q(et)o(w)o(een)g(com)o(binators)f(b)o
(y)g(imp)q(osing)g(a)i(direction)e(on)h(the)g(equalit)o(y)l(.)22
b(The)150 1360 y(equations)d(for)h(pro)q(ducts)g(are)f(read)g(as)h(\\the)f
(left)g(side)f(of)i(the)f(equal)g(sign)g(implies)d(the)j(righ)o(t)150
1451 y(side)13 b(of)g(the)g(equal)f(sign".)21 b(As)13 b(a)g(result,)g(the)g
(rewrite)f(rules)g(de\014ned)h(for)g(the)g(basic)g(com)o(binators)150
1543 y(are:)704 1610 y(\()p Fx(R)760 1617 y Fm(1)779 1610 y
FA(\))168 b Fx(z)r FA(;)8 b(!)41 b(=)-8 b Fz(\))41 b FA(!)704
1700 y(\()p Fx(R)760 1707 y Fm(2)779 1700 y FA(\))h Fz(h)p
Fx(x;)8 b(y)r Fz(i)p FA(;)g Fx(P)1007 1707 y Fm(0)1068 1700
y FA(=)-8 b Fz(\))41 b Fx(x)704 1789 y FA(\()p Fx(R)760 1796
y Fm(3)779 1789 y FA(\))h Fz(h)p Fx(x;)8 b(y)r Fz(i)p FA(;)g
Fx(P)1007 1796 y Fm(1)1068 1789 y FA(=)-8 b Fz(\))41 b Fx(y)704
1879 y FA(\()p Fx(R)760 1886 y Fm(4)779 1879 y FA(\))68 b Fx(z)r
FA(;)8 b Fz(h)p Fx(x;)g(y)r Fz(i)41 b FA(=)-8 b Fz(\))41 b(h)p
Fx(z)r FA(;)8 b Fx(x;)g(z)r FA(;)g Fx(y)r Fz(i)704 1969 y FA(\()p
Fx(R)760 1976 y Fm(5)779 1969 y FA(\))154 b Fx(x)p FA(;)8 b
Fx(I)44 b FA(=)-8 b Fz(\))41 b Fx(x)704 2058 y FA(\()p Fx(R)760
2065 y Fm(6)779 2058 y FA(\))154 b Fx(I)t FA(;)8 b Fx(x)40
b FA(=)-8 b Fz(\))41 b Fx(x)150 2143 y FA(Rewrite)18 b(rule)h
Fx(R)473 2150 y Fm(1)513 2143 y FA(reiterates)f(the)h(p)q(oin)o(t)h(that)g
(the)f(!)g(com)o(binator)g(will)f(tak)o(e)h(an)o(y)g(t)o(yp)q(e)g(to)h(1.)150
2234 y(Rules)14 b Fx(R)319 2241 y Fm(2)353 2234 y FA(through)h
Fx(R)572 2241 y Fm(4)607 2234 y FA(describ)q(e)e(the)i(action)f(of)h(the)f
(pro)q(duct)h(com)o(binators.)k(Sp)q(eci\014cally)l(,)13 b
Fx(R)1930 2241 y Fm(2)150 2326 y FA(and)j Fx(R)281 2333 y Fm(3)317
2326 y FA(are)g(the)g(pro)s(jections)f(of)h(a)h(pro)q(duct)f(while)f
Fx(R)1174 2333 y Fm(4)1210 2326 y FA(is)h(the)f(distributiv)o(e)f(la)o(w)i
(for)g(pro)q(ducts)150 2417 y(\(see)e([W)l(al91])g(for)h(more)e(details\).)20
b(Iden)o(tit)o(y)13 b(equations)h(are)h(handled)f(b)o(y)g(the)h(rewrite)e
(rules)h Fx(R)1930 2424 y Fm(5)150 2509 y FA(and)j Fx(R)282
2516 y Fm(6)302 2509 y FA(.)200 2600 y(As)h(an)g(example)e(of)i(a)h
(reduction)f(using)g(the)g(ab)q(o)o(v)o(e)g(rewrite)f(rules,)h(supp)q(ose)h
Fx(x)d FA(:)h Fx(C)j Fz(!)d Fx(X)t FA(,)p eop
%%Page: 43 52
51 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(43)150 141 y Fx(y)18 b FA(:)e Fx(C)k Fz(!)c Fx(Y)c
FA(,)17 b(and)i Fx(z)f FA(:)e Fx(C)k Fz(!)c Fx(Z)22 b FA(are)c(com)o(binator)
f(expressions,)g(and)i Fx(E)g FA(=)e Fz(h)p Fx(x;)8 b Fz(h)p
Fx(y)r(;)g(z)r Fz(ii)p FA(;)g Fx(P)1827 148 y Fm(1)1847 141
y FA(;)g Fx(P)1900 148 y Fm(0)1936 141 y FA(:)150 237 y Fx(C)17
b Fz(!)d Fx(Y)d FA(.)21 b(Then)c(the)f(reduction)f(of)i(this)f(expression)g
Fx(E)j FA(is:)696 351 y Fz(h)p Fx(x;)8 b Fz(h)p Fx(y)r(;)g(z)r
Fz(ii)p FA(;)g Fx(P)948 358 y Fm(1)p 696 370 273 2 v 968 351
a FA(;)g Fx(P)1021 358 y Fm(0)1083 351 y Fz(\))1133 358 y Fk(R)1160
363 y Fg(3)1220 351 y Fz(h)p Fx(y)r(;)g(z)r Fz(i)p FA(;)g Fx(P)1384
358 y Fm(0)p 1220 370 185 2 v 1083 441 a Fz(\))1133 448 y Fk(R)1160
453 y Fg(2)1220 441 y Fx(y)150 544 y FA(The)16 b(part)h(of)f(the)g
(expression)g(that)h(is)f(b)q(eing)h(rewritten)e(b)o(y)h(a)g(rewrite)g(rule)f
(is)h(underlined.)200 640 y(Another)i(example)e(of)i(ev)m(aluation)g(of)h
(the)f(function)g Fj(f\(0,)24 b(\(1,)g(2\)\))h(=)g(1)18 b FA(\(from)f(the)h
(pre-)150 736 y(vious)e(section\):)329 852 y Fz(h)p FA(0)p
Fx(;)8 b Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p FA(;)g Fz(hh)p
Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(P)727 859 y Fm(0)749 852 y
FA(;)g Fx(P)802 859 y Fm(1)822 852 y FA(;)g Fx(I)t(;)g(I)t
Fz(i)p 329 871 607 2 v -1 w FA(;)g Fx(P)989 859 y Fm(0)1009
852 y FA(;)g Fx(P)1062 859 y Fm(0)1082 852 y FA(;)g Fx(I)371
942 y FA(=)-8 b Fz(\))451 949 y Fk(R)478 954 y Fg(4)538 942
y Fz(hh)p FA(0)p Fx(;)8 b Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p
FA(;)g Fz(h)p Fx(I)t(;)g(I)t Fz(i)p 557 961 328 2 v 2 w FA(;)g
Fx(P)938 949 y Fm(0)958 942 y FA(;)g Fx(P)1011 949 y Fm(1)1031
942 y FA(;)g Fx(I)t(;)g Fz(h)p FA(0)p Fx(;)g Fz(h)p FA(1)p
Fx(;)g FA(2)p Fz(ii)p FA(;)g Fx(I)t Fz(i)p FA(;)g Fx(P)1413
949 y Fm(0)1434 942 y FA(;)g Fx(P)1487 949 y Fm(0)1507 942
y FA(;)g Fx(I)371 1032 y FA(=)-8 b Fz(\))451 1039 y Fk(R)478
1044 y Fg(4)538 1032 y Fz(hhh)p FA(0)p Fx(;)8 b Fz(h)p FA(1)p
Fx(;)g FA(2)p Fz(ii)p FA(;)g Fx(I)p 576 1051 242 2 v 6 w(;)g
Fz(h)p FA(0)p Fx(;)g Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p FA(;)g
Fx(I)t Fz(i)p FA(;)g Fx(P)1152 1039 y Fm(0)1174 1032 y FA(;)g
Fx(P)1227 1039 y Fm(1)1247 1032 y FA(;)g Fx(I)t(;)g Fz(h)p
FA(0)p Fx(;)g Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p FA(;)g Fx(I)t
Fz(i)p FA(;)g Fx(P)1629 1039 y Fm(0)1650 1032 y FA(;)g Fx(P)1703
1039 y Fm(0)1723 1032 y FA(;)g Fx(I)371 1121 y FA(=)-8 b Fz(\))451
1128 y Fk(R)478 1133 y Fg(5)538 1121 y Fz(hhh)p FA(0)p Fx(;)8
b Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p Fx(;)g Fz(h)p FA(0)q
Fx(;)g Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(i)q(i)p FA(;)g Fx(I)p
790 1140 V 6 w Fz(i)p FA(;)g Fx(P)1106 1128 y Fm(0)1127 1121
y FA(;)g Fx(P)1180 1128 y Fm(1)1200 1121 y FA(;)g Fx(I)t(;)g
Fz(h)p FA(0)p Fx(;)g Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p FA(;)g
Fx(I)t Fz(i)p FA(;)g Fx(P)1582 1128 y Fm(0)1603 1121 y FA(;)g
Fx(P)1656 1128 y Fm(0)1676 1121 y FA(;)g Fx(I)371 1211 y FA(=)-8
b Fz(\))451 1218 y Fk(R)478 1223 y Fg(5)538 1211 y Fz(hhh)p
FA(0)p Fx(;)8 b Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p Fx(;)g
Fz(h)p FA(0)q Fx(;)g Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(i)q(ii)q
FA(;)g Fx(P)1057 1218 y Fm(0)p 557 1230 523 2 v 1080 1211 a
FA(;)g Fx(P)1133 1218 y Fm(1)1153 1211 y FA(;)g Fx(I)t(;)g
Fz(h)p FA(0)p Fx(;)g Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p FA(;)g
Fx(I)t Fz(i)p FA(;)g Fx(P)1535 1218 y Fm(0)1556 1211 y FA(;)g
Fx(P)1609 1218 y Fm(0)1629 1211 y FA(;)g Fx(I)371 1301 y FA(=)-8
b Fz(\))451 1308 y Fk(R)478 1313 y Fg(2)538 1301 y Fz(hh)p
FA(0)p Fx(;)8 b Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p FA(;)g
Fx(P)802 1308 y Fm(1)p 557 1320 268 2 v 825 1301 a FA(;)g Fx(I)t(;)g
Fz(h)p FA(0)p Fx(;)g Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)p FA(;)g
Fx(I)t Fz(i)p FA(;)g Fx(P)1207 1308 y Fm(0)1228 1301 y FA(;)g
Fx(P)1281 1308 y Fm(0)1301 1301 y FA(;)g Fx(I)371 1390 y FA(=)-8
b Fz(\))451 1397 y Fk(R)478 1402 y Fg(3)538 1390 y Fz(hh)p
FA(1)p Fx(;)8 b FA(2)p Fz(i)p FA(;)g Fx(I)p 557 1409 157 2
v 5 w(;)g Fz(h)p FA(0)p Fx(;)g Fz(h)p FA(1)p Fx(;)g FA(2)p
Fz(ii)p FA(;)g Fx(I)t Fz(i)p FA(;)g Fx(P)1048 1397 y Fm(0)1070
1390 y FA(;)g Fx(P)1123 1397 y Fm(0)1143 1390 y FA(;)g Fx(I)371
1480 y FA(=)-8 b Fz(\))451 1487 y Fk(R)478 1492 y Fg(5)538
1480 y Fz(hh)p FA(1)p Fx(;)8 b FA(2)p Fz(i)p Fx(;)g Fz(h)p
FA(0)p Fx(;)g Fz(h)p FA(1)p Fx(;)g FA(2)p Fz(ii)q FA(;)g Fx(I)t
Fz(i)p FA(;)g Fx(P)1000 1487 y Fm(0)p 538 1499 485 2 v 1022
1480 a FA(;)g Fx(P)1075 1487 y Fm(0)1095 1480 y FA(;)g Fx(I)371
1570 y FA(=)-8 b Fz(\))451 1577 y Fk(R)478 1582 y Fg(2)538
1570 y Fz(h)p FA(1)p Fx(;)8 b FA(2)p Fz(i)p FA(;)g Fx(P)699
1577 y Fm(0)p 538 1589 183 2 v 720 1570 a FA(;)g Fx(I)371 1659
y FA(=)-8 b Fz(\))451 1666 y Fk(R)478 1671 y Fg(2)538 1659
y FA(1;)8 b Fx(I)p 538 1676 72 2 v 371 1749 a FA(=)-8 b Fz(\))451
1756 y Fk(R)478 1761 y Fg(5)538 1749 y FA(1)150 1852 y(Once)13
b(again,)h(notice)f(that)h(the)f(resultan)o(t)g(com)o(binator)g(expression)g
(deriv)o(ed)f(from)g(the)h(transla-)150 1948 y(tion)h(is)g(quite)f
(unreadable)i(but)f(is)g(v)m(ariable)g(free.)19 b(Ev)m(aluation)c(of)g(the)f
(expression)g(ab)q(o)o(v)o(e)g(using)150 2044 y(the)i(rewrite)g(rules)h(do)q
(es)g(pro)q(duce)g(the)g(correct)f(result)g(\(ho)o(w)o(ev)o(er)f(ine\016cien)
o(t)g(the)h(com)o(binator)150 2140 y(expression)g(is\).)150
2384 y FB(4.5.)42 b(The)27 b(basic)f(Charit)n(y)g(abstract)i(mac)n(hine)200
2504 y FA(Ev)m(aluation)23 b(of)g(a)f(com)o(binator)g(expression)g(to)h
(normal)e(form)g(is)h(accomplished)f(through)150 2600 y(state)c(transitions)g
(in)g(the)f(Charit)o(y)h(abstract)g(mac)o(hine.)k(The)16 b(state)h(of)g(the)g
(Charit)o(y)f(abstract)p eop
%%Page: 44 53
52 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(44)150 141 y FA(mac)o(hine)14 b(consists)j(of)f(the)g(tuple)948
253 y(\()p Fx(v)r(;)8 b(c;)g(d;)g(f)d FA(\))150 384 y(where)253
531 y Fz(\017)21 b Fx(v)c FA(is)f(the)g(v)m(alue)g(stac)o(k)g(holding)h(in)o
(termedi)o(ate)d(v)m(alues)i(of)g(a)h(computation,)253 643
y Fz(\017)k Fx(c)16 b FA(is)g(the)g(co)q(de)g(stac)o(k)g(listing)g(the)g
(remaining)e(sequence)i(of)g(instructions)g(to)h(execute)253
755 y Fz(\017)k Fx(d)f FA(is)g(the)g(dump)f(stac)o(k)g(thats)i(holds)g(con)o
(tin)o(uations)e(so)i(that)g(the)e(abstract)i(mac)o(hine)299
867 y(can)16 b(execute)f(instructions)h(sequen)o(tially)253
979 y Fz(\017)21 b Fx(f)g FA(is)16 b(the)g(function)g(stac)o(k)g(holding)h(a)
f(list)g(of)g(functions)h(passed)g(through)g(de\014nitions.)200
1126 y(Computation)d(b)q(egins)i(at)f(an)g(initial)f(state)h(where)f(the)h(v)
m(alue,)f(dump,)g(and)h(function)g(stac)o(ks)150 1238 y(are)d(empt)o(y)l(,)f
(and)i(the)f(co)q(de)h(stac)o(k)f(con)o(tains)g(the)h(com)o(binator)e
(expression.)20 b(When)12 b(the)g(mac)o(hine)150 1350 y(has)g(completed)e
(computation)h(\(ie.)19 b(reac)o(hed)11 b(normal)g(form\),)g(the)g(v)m(alue)h
(stac)o(k)f(holds)h(the)g(result)150 1462 y(while)e(b)q(oth)i(the)f(dump)g
(and)g(co)q(de)h(stac)o(ks)f(are)g(empt)o(y)l(.)17 b(A)11 b(transition)h(in)f
(the)g(mac)o(hine)e(is)i(written)150 1574 y(as:)762 1691 y
Fx(v)43 b(c)f(d)p Fz(j)p Fx(f)47 b Fz(!)41 b Fx(v)1119 1673
y Fr(0)1172 1691 y Fx(c)1193 1673 y Fr(0)1246 1691 y Fx(d)1271
1673 y Fr(0)1283 1691 y Fz(j)p Fx(f)1326 1673 y Fr(0)150 1816
y FA(where)18 b(the)g(\\b)q(efore)h(state")g(of)f(the)g(mac)o(hine)e(is)i
(giv)o(en)f(b)o(y)h Fx(v)r FA(,)g Fx(c)p FA(,)g Fx(d)p FA(,)h(and)g
Fx(f)5 b FA(,)18 b(while)g(the)g(\\after)150 1928 y(state")k(is)f(giv)o(en)f
(b)o(y)g Fx(v)583 1910 y Fr(0)594 1928 y FA(,)i Fx(c)651 1910
y Fr(0)663 1928 y FA(,)g Fx(d)724 1910 y Fr(0)757 1928 y FA(and)g
Fx(f)886 1910 y Fr(0)898 1928 y FA(.)35 b(State)22 b(transition)f(rules)f
(examine)f(the)i(con)o(ten)o(ts)g(of)150 2040 y(the)15 b(\\b)q(efore)g
(states")h(and)g(describ)q(e)e(ho)o(w)i(\(deterministic)o(ally)l(,)11
b(in)k(our)h(abstract)f(mac)o(hine\))e(the)150 2152 y(system)h(is)h(to)h(ev)o
(olv)o(e)e(to)i(the)f(next)g(state)h(of)g(the)f(mac)o(hine.)k(F)l(or)c(most)g
(of)h(the)f(state)h(transition)150 2264 y(rules,)g(the)h(function)g(stac)o(k)
f(is)h(not)h(utilized)d(and)i(the)g(listing)f(for)i(this)e(stac)o(k)h(is)g
(omitted)e(from)150 2376 y(the)h(tables.)200 2488 y(The)d(state)g
(transitions)h(for)f(the)g(primitiv)n(e)d(com)o(binators)i(listed)g(b)q(elo)o
(w)h(are)g(deriv)o(ed)f(directly)150 2600 y(from)j(their)h(rewrite)f(rules:)p
eop
%%Page: 45 54
53 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(45)p 355 184 1391 2 v 354 259 2 75 v 416 259
V 438 237 a Fq(v)149 b(c)177 b(d)p Fn(j)p Fq(f)307 b(v)1184
222 y Fp(0)1333 237 y Fq(c)1351 222 y Fp(0)1488 237 y Fq(d)1510
222 y Fp(0)1521 237 y Fn(j)p Fq(f)1557 222 y Fp(0)p 1744 259
V 355 261 1391 2 v 354 335 2 75 v 375 313 a Fo(1)p 416 335
V 42 w Fq(v)149 b Fo(!)p Fq(:c)k(d)256 b Fn(!)41 b Fo(!)158
b Fq(c)137 b(d)p 1744 335 V 354 410 V 375 388 a Fo(2)p 416
410 V 42 w Fn(h)p Fq(v)474 394 y Fl(0)493 388 y Fq(;)7 b(v)532
394 y Fl(1)550 388 y Fn(i)41 b Fq(P)634 394 y Fl(0)653 388
y Fq(:c)119 b(d)256 b Fn(!)41 b Fq(v)1183 394 y Fl(0)1333 388
y Fq(c)137 b(d)p 1744 410 V 354 485 V 375 462 a Fo(3)p 416
485 V 42 w Fn(h)p Fq(v)474 468 y Fl(0)493 462 y Fq(;)7 b(v)532
468 y Fl(1)550 462 y Fn(i)41 b Fq(P)634 468 y Fl(1)653 462
y Fq(:c)119 b(d)256 b Fn(!)41 b Fq(v)1183 468 y Fl(1)1333 462
y Fq(c)137 b(d)p 1744 485 V 354 560 V 375 537 a Fo(4)p 416
560 V 42 w Fq(v)149 b Fn(h)p Fq(c)641 543 y Fl(0)660 537 y
Fq(;)7 b(c)697 543 y Fl(1)715 537 y Fn(i)p Fq(:c)41 b(d)256
b Fn(!)41 b Fq(v)150 b(c)1351 543 y Fl(0)1488 537 y Fo(pr)1527
547 y Fl(0)1546 537 y Fo(\()p Fq(v)q(;)7 b(c)1620 543 y Fl(1)1639
537 y Fq(;)g(c)p Fo(\))p Fq(:d)p 1744 560 V 354 634 V 375 612
a Fo(5)p 416 634 V 42 w Fq(v)458 618 y Fl(0)607 612 y Fq(\017)178
b Fo(pr)842 622 y Fl(0)860 612 y Fo(\()p Fq(v)q(;)7 b(c)934
618 y Fl(1)953 612 y Fq(;)g(c)p Fo(\))p Fq(:d)40 b Fn(!)h Fq(v)150
b(c)1351 618 y Fl(1)1488 612 y Fo(pr)1527 622 y Fl(1)1546 612
y Fo(\()p Fq(v)1582 618 y Fl(0)1601 612 y Fq(;)7 b(c)p Fo(\))p
Fq(:d)p 1744 634 V 354 709 V 375 687 a Fo(6)p 416 709 V 42
w Fq(v)458 693 y Fl(1)607 687 y Fq(\017)178 b Fo(pr)842 697
y Fl(1)860 687 y Fo(\()p Fq(v)896 693 y Fl(0)915 687 y Fq(;)7
b(c)p Fo(\))p Fq(:d)78 b Fn(!)41 b(h)p Fq(v)1199 693 y Fl(0)1218
687 y Fq(;)7 b(v)1257 693 y Fl(1)1275 687 y Fn(i)42 b Fq(c)137
b(d)p 1744 709 V 354 784 V 375 761 a Fo(7)p 416 784 V 42 w
Fq(v)149 b(\017)178 b Fo(con)o(t)q(\()p Fq(c)p Fo(\))p Fq(:d)116
b Fn(!)41 b Fq(v)150 b(c)137 b(d)p 1744 784 V 354 858 V 375
836 a Fo(8)p 416 858 V 42 w Fq(v)149 b(\017)178 b Fo([)14 b(])240
b Fn(!)211 b Fo(STOP)p 1744 858 V 355 860 1391 2 v 150 936
a FA(T)l(ransitions)15 b(1)f(to)g(3)h(corresp)q(ond)f(closely)f(to)h(the)g
(rewrite)f(rules.)20 b(T)l(ransition)14 b(1)h(is)e(the)h(terminal)150
1026 y(com)o(binator,)20 b(and)h(pro)o(vides)f(a)g(starting)h(p)q(oin)o(t)g
(for)g(all)e(computations.)34 b(T)l(ransitions)21 b(2)f(and)150
1116 y(3)f(are)g(the)f(pro)s(jections)g(for)h(pro)q(ducts.)29
b(T)l(o)19 b(impleme)o(n)o(t)d(the)i(distributiv)o(e)f(rule,)h(transition)h
(4)150 1205 y(sa)o(v)o(es)d Fx(c)295 1212 y Fm(1)331 1205 y
FA(and)h(a)g(cop)o(y)f(of)h Fx(v)h FA(on)f(the)f(dump,)f(then)h(executes)f
Fx(c)1309 1212 y Fm(0)1345 1205 y FA(with)i Fx(v)r FA(.)k(Once)16
b(a)h(result)f Fx(v)1844 1212 y Fm(0)1879 1205 y FA(has)150
1295 y(b)q(een)21 b(computed,)f Fx(v)i FA(is)e(comp)q(osed)g(with)h
Fx(c)978 1302 y Fm(1)1018 1295 y FA(\(transition)g(5\),)h(resulting)e(in)g
Fx(v)1633 1302 y Fm(1)1653 1295 y FA(.)34 b(Finally)l(,)20
b(the)150 1385 y(pair)g Fz(h)p Fx(v)297 1392 y Fm(0)317 1385
y Fx(;)8 b(v)363 1392 y Fm(1)382 1385 y Fz(i)21 b FA(is)f(formed)e(and)j
(left)f(on)g(the)g Fx(v)i FA(stac)o(k.)32 b(T)l(ransition)21
b(7)g(allo)o(ws)f(the)g(mac)o(hine)e(to)150 1474 y(con)o(tin)o(ue)h
(computation)h(from)f(some)g(earlier)g(susp)q(ension)i(and)g(transition)f(8)h
(indicates)f(that)150 1564 y(computation)c(is)g(complete,)d(and)k(that)g(the)
f(v)m(alue)g(is)g(in)g(normal)f(form.)p eop
%%Page: 46 55
54 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(46)200 141 y FA(An)14 b(example)e(of)j(reducing)f(the)g(com)o
(binator)f(expression)i Fz(h)p Fx(x;)8 b Fz(h)p Fx(y)r(;)g(z)r
Fz(ii)p Fx(:P)1531 148 y Fm(1)1551 141 y Fx(:P)1596 148 y Fm(0)1630
141 y FA(to)15 b(normal)e(form)150 235 y(using)k(the)f(abstract)h(mac)o(hine)
d(follo)o(ws:)532 349 y Fx(v)252 b(c)350 b(d)532 438 y FA([)16
b(])232 b Fz(h)p Fx(x;)8 b Fz(h)p Fx(y)r(;)g(z)r Fz(ii)p Fx(:P)1052
445 y Fm(1)1072 438 y Fx(:P)1117 445 y Fm(0)1179 438 y FA([)15
b(])392 528 y(=)-8 b Fz(\))472 535 y Fm(4)532 528 y FA([)16
b(])232 b Fx(x)343 b FA(pr)1225 540 y Fm(0)1244 528 y FA(\([)16
b(])p Fx(;)8 b Fz(h)p Fx(y)r(;)g(z)r Fz(i)p Fx(;)g(P)1493 535
y Fm(1)1513 528 y Fx(:P)1558 535 y Fm(0)1577 528 y FA(\))392
618 y(=)-8 b Fz(\))472 599 y Fr(\003)532 618 y Fx(x)560 599
y Fr(0)808 618 y Fx(\017)351 b FA(pr)1225 629 y Fm(0)1244 618
y FA(\([)16 b(])p Fx(;)8 b Fz(h)p Fx(y)r(;)g(z)r Fz(i)p Fx(;)g(P)1493
625 y Fm(1)1513 618 y Fx(:P)1558 625 y Fm(0)1577 618 y FA(\))392
707 y(=)-8 b Fz(\))472 714 y Fm(5)532 707 y FA([)16 b(])232
b Fz(h)p Fx(y)r(;)8 b(z)r Fz(i)260 b FA(pr)1225 719 y Fm(1)1244
707 y FA(\()p Fx(x)1291 689 y Fr(0)1303 707 y Fx(;)8 b(P)1356
714 y Fm(1)1376 707 y Fx(:P)1421 714 y Fm(0)1440 707 y FA(\))392
797 y(=)-8 b Fz(\))472 804 y Fm(4)532 797 y FA([)16 b(])232
b Fx(y)347 b FA(pr)1225 809 y Fm(0)1244 797 y FA(\([)16 b(])p
Fx(;)8 b(z)r(;)g(\017)p FA(\))p Fx(:)p FA(pr)1473 809 y Fm(1)1493
797 y FA(\()p Fx(x)1540 779 y Fr(0)1552 797 y Fx(;)g(P)1605
804 y Fm(1)1625 797 y Fx(:P)1670 804 y Fm(0)1689 797 y FA(\))392
887 y(=)-8 b Fz(\))472 868 y Fr(\003)532 887 y Fx(y)558 868
y Fr(0)808 887 y Fx(\017)351 b FA(pr)1225 898 y Fm(0)1244 887
y FA(\([)16 b(])p Fx(;)8 b(z)r(;)g(\017)p FA(\))p Fx(:)p FA(pr)1473
898 y Fm(1)1493 887 y FA(\()p Fx(x)1540 868 y Fr(0)1552 887
y Fx(;)g(P)1605 894 y Fm(1)1625 887 y Fx(:P)1670 894 y Fm(0)1689
887 y FA(\))392 976 y(=)-8 b Fz(\))472 983 y Fm(5)532 976 y
FA([)16 b(])232 b Fx(z)348 b FA(pr)1225 988 y Fm(1)1244 976
y FA(\()p Fx(y)1289 958 y Fr(0)1300 976 y Fx(;)8 b(\017)p FA(\))p
Fx(:)p FA(pr)1421 988 y Fm(1)1440 976 y FA(\()p Fx(x)1487 958
y Fr(0)1499 976 y Fx(;)g(P)1552 983 y Fm(1)1572 976 y Fx(:P)1617
983 y Fm(0)1636 976 y FA(\))392 1066 y(=)-8 b Fz(\))472 1048
y Fr(\003)532 1066 y Fx(z)557 1048 y Fr(0)808 1066 y Fx(\017)351
b FA(pr)1225 1078 y Fm(1)1244 1066 y FA(\()p Fx(y)1289 1048
y Fr(0)1300 1066 y Fx(;)8 b(\017)p FA(\))p Fx(:)p FA(pr)1421
1078 y Fm(1)1440 1066 y FA(\()p Fx(x)1487 1048 y Fr(0)1499
1066 y Fx(;)g(P)1552 1073 y Fm(1)1572 1066 y Fx(:P)1617 1073
y Fm(0)1636 1066 y FA(\))392 1156 y(=)-8 b Fz(\))472 1163 y
Fm(6)532 1156 y Fz(h)p Fx(y)577 1137 y Fr(0)589 1156 y Fx(;)8
b(z)636 1137 y Fr(0)647 1156 y Fz(i)142 b Fx(\017)351 b FA(pr)1225
1167 y Fm(1)1244 1156 y FA(\()p Fx(x)1291 1137 y Fr(0)1303
1156 y Fx(;)8 b(P)1356 1163 y Fm(1)1376 1156 y Fx(:P)1421 1163
y Fm(0)1440 1156 y FA(\))392 1245 y(=)-8 b Fz(\))472 1252 y
Fm(6)532 1245 y Fz(h)p Fx(x)579 1227 y Fr(0)591 1245 y Fx(;)8
b Fz(h)p Fx(y)658 1227 y Fr(0)670 1245 y Fx(;)g(z)717 1227
y Fr(0)728 1245 y Fz(ii)42 b Fx(P)839 1252 y Fm(1)859 1245
y Fx(:P)904 1252 y Fm(0)1179 1245 y FA([)15 b(])392 1335 y(=)-8
b Fz(\))472 1342 y Fm(3)532 1335 y Fz(h)p Fx(y)577 1317 y Fr(0)589
1335 y Fx(;)8 b(z)636 1317 y Fr(0)647 1335 y Fz(i)142 b Fx(P)839
1342 y Fm(0)1179 1335 y FA([)15 b(])392 1424 y(=)-8 b Fz(\))472
1431 y Fm(2)532 1424 y Fx(y)558 1406 y Fr(0)808 1424 y Fx(\017)351
b FA([)15 b(])392 1514 y(=)-8 b Fz(\))472 1521 y Fm(8)1054
1514 y FA(STOP)150 1617 y(The)16 b Fz(\003)f FA(in)g(the)h(ab)q(o)o(v)o(e)f
(ev)m(aluation)h(represen)o(ts)f(a)g(series)g(of)h(state)g(transitions)g
(executed)e(b)o(y)h(the)150 1711 y(mac)o(hine)h(b)q(efore)i(arriving)g(at)h
(the)f(giv)o(en)f(state.)28 b(The)18 b(sp)q(eci\014c)f(state)i(transitions)g
(ha)o(v)o(e)e(b)q(een)150 1804 y(omitted)e(to)h(aide)g(in)g(reading)g(and)h
(understanding)g(the)f(op)q(eration)h(of)g(the)f(mac)o(hine.)200
1897 y(Notice)23 b(that)h(the)g(basic)g(t)o(yp)q(es)f Fz(\002)h
FA(and)h(1)f(are)g(ev)m(aluated)g(in)f(an)i(eager)f(fashion.)45
b(Eac)o(h)150 1991 y(comp)q(onen)o(t)15 b(of)i(the)f(pair)g(is)g(ev)m
(aluated)g(b)o(y)g(the)g(mac)o(hine)e(b)q(efore)i(the)g(pair)h(is)f
(constructed.)150 2202 y FB(4.6.)42 b(F)-7 b(unction)26 b(parameters)200
2320 y FA(Charit)o(y)17 b(do)q(es)h(not)f(ha)o(v)o(e)g(higher)g(order)g
(functions,)g(but)g(functions)h(can)f(still)f(b)q(e)h(passed)h(as)150
2414 y(parameters)13 b(and)h(m)o(ust)f(b)q(e)h(treated)f(with)h(care)g(in)f
(the)h(abstract)g(mac)o(hine.)k(P)o(assing)d(functions)150
2507 y(amoun)o(ts)k(to)g(passing)h(the)f(name)f(of)h(a)g(function)g(whic)o(h)
g(will)e(b)q(e)j(expanded)f(to)g(com)o(binators)150 2600 y(when)d(needed)g
(at)g(run)h(time.)i(The)d(\014rst)h(step)f(in)g(passing)h(a)f(function)g(in)o
(v)o(olv)o(es)f(k)o(eeping)g(trac)o(k)p eop
%%Page: 47 56
55 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(47)150 141 y FA(of)18 b(the)g(scop)q(e)h(of)f(the)g
(parameters.)26 b(The)18 b(metho)q(d)f(emplo)o(y)o(ed)e(in)j(this)g(mac)o
(hine)e(is)i(similar)e(to)150 234 y(function)i(parameter)f(passing)i(in)f
(traditional)h(imp)q(erativ)o(e)c(languages)20 b([ASU85)o(]:)25
b(an)19 b(activ)m(a-)150 328 y(tion)13 b(record)g(is)g(created)g(to)h(hold)f
(the)g(state)h(of)f(the)g(mac)o(hine)e(\(also)j(referred)e(to)i(as)g(the)f
(con)o(text\))150 421 y(b)q(efore)19 b(a)h(function)f(call.)28
b(After)19 b(the)g(function)f(call)h(has)h(b)q(een)f(completed,)e(the)i
(state)g(of)g(the)150 514 y(mac)o(hine)14 b(is)i(restored.)22
b(The)16 b(mac)o(hine)e(m)o(ust)h(sa)o(v)o(e)g(the)i(con)o(text)e(so)i(that)g
(the)f(calling)f(function)150 607 y(will)g(con)o(tin)o(ue)g(as)i(exp)q(ected)
e(after)i(the)f(return)g(form)f(the)h(callee.)200 700 y(The)22
b(Charit)o(y)g(abstract)g(mac)o(hine)e(uses)j(a)f(sp)q(ecial)g
Fx(f)27 b FA(stac)o(k)22 b(to)h(hold)f(a)h(set)f(of)g(functions)150
794 y(passed)e(as)f(parameters)f(to)i(another)f(function.)29
b(A)19 b(set)g(of)g(functions)g(passed)h(from)d(a)j(calling)150
887 y(function)c(to)h(a)g(callee)e(function)h(is)g(kno)o(wn)h(as)g(a)g
(frame.)j(These)d(frames)e(are)i(pushed)f(on)o(to)h(the)150
980 y Fx(f)k FA(stac)o(k)16 b(when)g(a)g(function)g(is)g(called)f(and)i(p)q
(opp)q(ed)g(o\013)g(when)f(the)f(called)g(function)h(completes)150
1073 y(execution.)200 1166 y(T)l(o)e(facilitate)e(function)h(passing,)h(t)o
(w)o(o)f(new)h(instructions)f(need)g(to)g(b)q(e)h(in)o(tro)q(duced:)19
b Fx(cal)q(l)13 b FA(and)150 1260 y Fx(sel)q Fz(fg)262 1267
y Fk(i)275 1260 y FA(.)21 b(The)15 b Fx(cal)q(l)h FA(com)o(binator)e(calls)h
(a)g(function,)g(pushing)h(the)f(frame)f(of)i(functions)f(on)o(to)h(the)150
1353 y Fx(f)22 b FA(stac)o(k.)h(The)17 b Fx(sel)g FA(com)o(binator)e(selects)
h(a)h(function)g(from)f(the)g(curren)o(t)g(frame)g(on)h(the)f(top)i(of)150
1446 y(the)e Fx(f)22 b FA(stac)o(k.)200 1539 y(The)16 b(translation)h(from)e
(term)g(logic)g(to)i(com)o(binators)e(follo)o(ws:)361 1653
y(\()p Fx(T)409 1660 y Fm(7)428 1653 y FA(\))41 b Fz(T)21 b
FA([)p Fx(v)15 b Fz(7!)f Fx(f)5 b Fz(f)p Fx(v)731 1660 y Fm(1)764
1653 y Fz(7!)14 b Fx(t)846 1660 y Fm(1)865 1653 y Fx(;)8 b(:::;)g(v)975
1660 y Fk(n)1010 1653 y Fz(7!)14 b Fx(t)1092 1660 y Fk(n)1115
1653 y Fz(g)p FA(\()p Fx(t)p FA(\)])f(=)488 1743 y Fz(hT)22
b FA([)o Fx(v)16 b Fz(7!)d Fx(t)p FA(])8 b Fx(;)g(I)t Fz(i)p
FA(;)g Fx(cal)q(l)q FA(\()p Fx(f)s(;)g FA(\()p Fz(T)19 b FA([)o(\()p
Fx(v)1069 1750 y Fm(1)1088 1743 y Fx(;)8 b(v)r FA(\))13 b Fz(7!)h
Fx(t)1250 1750 y Fm(1)1269 1743 y FA(])8 b Fx(;)g(:::;)g Fz(T)20
b FA([)o(\()p Fx(v)1480 1750 y Fk(n)1503 1743 y Fx(;)8 b(v)r
FA(\))13 b Fz(7!)h Fx(t)1665 1750 y Fk(n)1688 1743 y FA(]\)\))361
1832 y(\()p Fx(T)409 1839 y Fm(8)428 1832 y FA(\))41 b Fz(T)21
b FA([)p Fx(v)15 b Fz(7!)f Fx(f)5 b FA(\()p Fx(t)p FA(\)])13
b(=)h Fz(hT)21 b FA([)p Fx(v)15 b Fz(7!)f Fx(t)p FA(])7 b Fx(;)h
Fz(T)21 b FA([)p Fx(v)15 b Fz(7!)f Fx(\033)r FA(])o Fz(i)p
FA(;)8 b Fx(cal)q(l)q FA(\()p Fx(f)s(;)g FA(\(\)\))361 1922
y(\()p Fx(T)409 1929 y Fm(9)428 1922 y FA(\))41 b Fz(T)21 b
FA([)p Fx(v)15 b Fz(7!)f Fx(f)677 1929 y Fk(i)691 1922 y FA(\()p
Fx(t)p FA(\)])760 1937 y Fk(f)777 1942 y Fg(1)794 1937 y Fk(;:::;f)861
1941 y Ff(n)897 1922 y FA(=)g Fz(hT)22 b FA([)o Fx(v)15 b Fz(7!)f
Fx(t)p FA(])7 b Fx(;)h Fz(T)21 b FA([)p Fx(v)15 b Fz(7!)f Fx(\033)r
FA(])o Fz(i)p FA(;)8 b Fx(sel)1504 1929 y Fk(i)150 2025 y FA(A)j(call)f(to)h
(a)g(function)g(can)g(app)q(ear)h(in)f(t)o(w)o(o)f(di\013eren)o(t)h(forms:)17
b(calling)10 b(with)h(function)g(parameters)150 2118 y(and)23
b(without)g(function)g(parameters.)39 b(T)l(ranslation)23 b
Fx(T)1221 2125 y Fm(7)1263 2118 y FA(calls)f(the)h(function)f
Fx(f)5 b FA(,)24 b(whic)o(h)e(has)150 2212 y(function)13 b(parameters.)19
b(Notice)12 b(that)h(eac)o(h)f(functional)h(parameter)f(has)i(access)e(to)i
(the)e(v)m(ariable)150 2305 y(base)h Fx(v)r FA(,)f(as)h(the)f(function)g(ma)o
(y)f(require)f(access)j(to)f(the)g(en)o(vironmen)o(t.)18 b(The)12
b(extra)g Fx(\033)i FA(is)e(a)g(sp)q(ecial)150 2398 y(v)m(ariable)h(used)g
(to)h(access)f(the)g(external)f(en)o(vironmen)o(t)f(v)m(ariables,)i(those)h
(v)m(ariables)f(outside)g(the)150 2491 y(scop)q(e)k(of)f(the)g(function)g
(passed)h(as)g(a)g(parameter.)j(F)l(or)c(example,)e(in)i(the)g(call)611
2600 y Fj(f)26 b(\(x\))e(=)h(f')g({g\(x\)}\(\).)p eop
%%Page: 48 57
56 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(48)150 141 y FA(where)13 b(f)s(')h(accepts)f(one)h(function)f
(parameter,)g(but)h(the)f(v)m(ariable)g Fj(x)h FA(is)f(outside)h(the)f(scop)q
(e)h(of)g Fj(f')p FA(.)150 235 y(T)l(o)19 b(access)f(this)g(v)m(ariable,)g
(translation)h Fx(T)944 242 y Fm(7)981 235 y FA(creates)f(an)h(en)o(vironmen)
o(t)c(whic)o(h)j(the)f(co)q(de)i(in)f Fj(f')150 328 y FA(can)d(no)o(w)f
(refer)g(to.)21 b(T)l(ranslation)15 b Fx(T)812 335 y Fm(8)845
328 y FA(calls)f(the)g(function)g Fx(f)5 b FA(,)15 b(but)g(do)q(es)g(not)f
(pass)i(an)o(y)e(functions)150 421 y(as)k(parameters.)23 b(T)l(ranslation)18
b Fx(T)774 428 y Fm(9)811 421 y FA(selects)e(the)h(appropriate)h(function)f
(parameter)f(when)h(it)g(is)150 515 y(encoun)o(tered)e(in)h(the)g(co)q(de.)
200 608 y(F)l(unction)11 b(de\014nitions)h(also)g(ha)o(v)o(e)f(t)o(w)o(o)g
(forms,)h(with)f(function)g(parameters)g(and)h(without)g(and)150
702 y(function)i(parameters.)19 b(F)l(unction)14 b(parameters)f(passed)i(to)g
(a)f(function)g(ma)o(y)f(require)g(access)h(to)150 795 y(the)h(v)m(ariables)h
(of)g(the)f(calling)g(functions)h(as)g(describ)q(ed)f(ab)q(o)o(v)o(e.)21
b(T)l(o)16 b(solv)o(e)f(this)g(v)m(ariable)h(scop)q(e)150 888
y(problem,)d(the)i(calling)e(function)i(uses)g(the)g(sp)q(ecial)f(v)m
(ariable)g Fx(\033)j FA(as)e(the)f(external)g(en)o(vironmen)o(t.)150
982 y(F)l(or)i(example,)e(a)j(function)f(con)o(taining)g(sev)o(eral)f
(function)h(parameters:)304 1091 y Fj(def)24 b(foo{f,)g(g,)h(h})g(\(v\))f(=)h
(t)150 1201 y FA(will)15 b(b)q(egin)i(the)f(translation)g(pro)q(cess)h(as:)
868 1332 y Fz(T)k FA([\()p Fx(v)r(;)8 b(\033)r FA(\))k Fz(7!)i
Fx(t)p FA(])1153 1346 y Fk(f)r(;g)q(;h)150 1463 y FA(Notice)c(that)i(the)g
(translation)g(assumes)f Fx(t)g FA(will)g(b)q(e)g(passed)i(a)e(pair,)i(with)e
(the)g(second)h(comp)q(onen)o(t)150 1556 y Fx(\033)18 b FA(pro)o(viding)e
(access)g(to)g(the)g(external)g(en)o(vironmen)o(t.)200 1649
y(The)g(state)h(transitions)g(mak)o(e)e(use)i(of)g(the)f Fx(f)22
b FA(stac)o(k)16 b(to)h(load)g(the)g(functions)f(that)h(are)g(b)q(eing)150
1743 y(passed)c(b)o(y)f(a)h(call.)20 b(The)12 b Fx(sel)h FA(com)o(binator)f
(selects)f(the)i(prop)q(er)g(function)f(and)h(reloads)g(the)g(scop)q(e)150
1836 y(this)j(function)g(acts)h(in.)p 192 1990 1716 2 v 191
2065 2 75 v 274 2065 V 296 2042 a Fq(v)43 b(c)390 b(d)p Fn(j)p
Fq(f)272 b Fn(!)41 b Fq(v)1197 2027 y Fp(0)1251 2042 y Fq(c)1269
2027 y Fp(0)1324 2042 y Fq(d)1346 2027 y Fp(0)1357 2042 y Fn(j)p
Fq(f)1393 2027 y Fp(0)p 1907 2065 V 192 2066 1716 2 v 191 2141
2 75 v 213 2119 a Fo(10)p 274 2141 V 41 w Fq(v)i(cal)q(l)q
Fn(f)p Fq(c)464 2103 y Fp(0)476 2119 y Fq(;)7 b Fo(\()p Fq(c)529
2125 y Fl(1)547 2119 y Fq(;)g(:::;)g(c)639 2125 y Fe(n)659
2119 y Fo(\))p Fn(g)p Fq(:c)41 b(d)304 b Fn(!)41 b Fq(v)55
b(c)1269 2103 y Fp(0)1324 2119 y Fo(RET)p Fn(f)p Fq(c)p Fn(g)p
Fq(:d)p 1907 2141 V 191 2216 V 274 2216 V 767 2193 a(f)537
b Fo(arg)p Fn(f)p Fq(c)1421 2199 y Fl(1)1439 2193 y Fq(;)7
b(:::;)g(c)1531 2199 y Fe(n)1551 2193 y Fn(g)p Fq(:f)p 1907
2216 V 191 2290 V 213 2268 a Fo(11)p 274 2290 V 41 w Fq(v)43
b(sel)q Fn(f)p Fq(i)p Fn(g)p Fq(:c)271 b(d)304 b Fn(!)41 b
Fq(v)55 b(c)1269 2274 y Fe(i)1324 2268 y Fo(reload\(arg)p Fn(f)p
Fq(c)1548 2274 y Fl(1)1566 2268 y Fq(;)7 b(:::;)g(c)1658 2274
y Fe(n)1678 2268 y Fn(g)p Fo(\))p Fq(:)p Fo(con)o(t\()p Fq(c)p
Fo(\))p Fq(:d)p 1907 2290 V 191 2365 V 274 2365 V 767 2343
a Fo(arg)p Fn(f)p Fq(c)864 2349 y Fl(1)882 2343 y Fq(;)g(:::;)g(c)974
2349 y Fe(n)994 2343 y Fn(g)p Fq(:f)277 b(f)p 1907 2365 V 192
2367 1716 2 v 414 2443 a Fd(T)l(able)17 b(4.1.)23 b FA(State)17
b(transition)f(rules)g(for)g(the)g(calling)g(a)h(function)p
eop
%%Page: 49 58
57 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(49)p 437 155 1226 2 v 436 230 2 75 v 519 230
V 541 208 a Fq(v)43 b(c)e(d)p Fn(j)p Fq(f)412 b Fn(!)41 b Fq(v)1233
192 y Fp(0)1287 208 y Fq(c)1305 192 y Fp(0)1358 208 y Fq(d)1380
192 y Fp(0)1391 208 y Fn(j)p Fq(f)1427 192 y Fp(0)p 1662 230
V 437 232 1226 2 v 436 306 2 75 v 458 284 a Fo(12)p 519 306
V 41 w Fq(v)i(\017)f Fo(reload\(arg)p Fn(f)p Fq(c)887 290 y
Fl(1)905 284 y Fq(;)7 b(:::;)g(c)997 290 y Fe(n)1018 284 y
Fn(g)p Fo(\))p Fq(:d)40 b Fn(!)h Fq(v)55 b(\017)f(d)p 1662
306 V 436 381 V 519 381 V 663 359 a(f)675 b Fo(arg)p Fn(f)p
Fq(c)1455 365 y Fl(1)1473 359 y Fq(;)7 b(:::;)g(c)1565 365
y Fe(n)1585 359 y Fn(g)p Fq(:f)p 1662 381 V 436 456 V 458 433
a Fo(13)p 519 456 V 41 w Fq(v)43 b(\017)f Fo(ret)q(\()p Fq(c)p
Fo(\))p Fq(:d)331 b Fn(!)41 b Fq(v)55 b(c)e(d)p 1662 456 V
436 531 V 519 531 V 663 508 a Fo(arg)p Fn(f)p Fq(c)760 514
y Fl(1)779 508 y Fq(;)7 b(:::;)g(c)871 514 y Fe(n)891 508 y
Fn(g)p Fq(:f)414 b(f)p 1662 531 V 437 532 1226 2 v 326 608
a Fd(T)l(able)18 b(4.2.)23 b FA(State)16 b(transition)h(rules)f(for)g(the)g
(returning)g(from)f(a)i(function)200 799 y(In)23 b(transition)h(10,)h(the)f
Fx(f)k FA(stac)o(k)23 b(is)h(loaded)f(with)h(the)f(functions)g(passed)i(to)f
Fx(c)1757 781 y Fr(0)1768 799 y FA(.)43 b(These)150 890 y(functions)21
b(form)e(a)i Fu(fr)n(ame)p FA(.)33 b(Essen)o(tially)l(,)20
b(the)h(mac)o(hine)d(pushes)j(a)g(frame)e(on)o(to)i(the)f Fx(f)26
b FA(stac)o(k)150 982 y(only)21 b(when)g(passing)h(functions)f(to)g(another)g
(function.)35 b(When)21 b(one)g(of)h(the)e(functions)h Fx(c)1882
989 y Fk(i)1917 982 y FA(is)150 1073 y(encoun)o(tered)c(in)g
Fx(c)503 1055 y Fr(0)515 1073 y FA(,)g(the)h(appropriate)g(function)g(from)e
(the)i(curren)o(t)f(frame)f(in)h(the)h Fx(f)23 b FA(stac)o(k)17
b(is)150 1165 y(loaded)h(in)o(to)g(the)g(co)q(de)g(stac)o(k)g(and)h(ev)m
(aluated.)27 b(A)o(t)17 b(this)h(p)q(oin)o(t,)h(the)e(mac)o(hine)f(m)o(ust)h
(load)i(up)150 1256 y(the)d(previous)g(frame)f(of)i Fx(c)642
1263 y Fk(i)656 1256 y FA(,)f(so)h(that)g(this)g(function)f(can)g(executed)f
(with)i(the)f(prop)q(er)h Fx(f)22 b FA(stac)o(k.)150 1347 y(When)15
b Fx(c)312 1354 y Fk(i)340 1347 y FA(has)g(completed)e(ev)m(aluation,)h(the)h
(frame)e(for)i Fx(c)1215 1329 y Fr(0)1241 1347 y FA(m)o(ust)e(b)q(e)i
(reloaded)f(in)o(to)g(the)g Fx(f)20 b FA(stac)o(k)150 1439
y(b)o(y)d(transition)g(12.)26 b(Finally)l(,)16 b(when)h(returning)g(from)g(a)
g(function)h(call,)e(the)h(curren)o(t)g(frame)f(on)150 1530
y(the)g Fx(f)22 b FA(stac)o(k)16 b(m)o(ust)e(b)q(e)j(p)q(opp)q(ed)g(o\013.)
200 1621 y(T)l(o)k(illustrate)f(ho)o(w)h(passing)g(functions)g(w)o(ork)g(in)f
(this)g(mac)o(hine,)g(consider)g(the)g(follo)o(wing)150 1713
y(t)o(w)o(o)c(Charit)o(y)f(functions)h(and)h(their)e(translation)h(to)h(com)o
(binator)d(expressions.)21 b(The)16 b(function)150 1804 y Fj(foo')g
FA(simply)g(applies)h(a)h(macro)f(to)h Fj(x)p FA(.)25 b(The)18
b(in)o(teresting)e(thing)i(ab)q(out)h(this)f(function)f(is)h(that)150
1895 y(since)h Fj(foo')g FA(accepts)g(a)i(macro,)e(it)g(exp)q(ects)h(that)g
(it)g(will)e(b)q(e)i(passed)h(the)f(v)m(alue)f(for)i Fj(x)e
FA(along)150 1987 y(with)f(the)g(en)o(vironmen)o(t)d(of)k(the)f(calling)f
(function.)27 b(In)17 b Fj(foo')g FA(the)h(en)o(vironmen)o(t)d(is)j
(discarded)150 2078 y(with)e(the)g Fx(P)376 2085 y Fm(0)413
2078 y FA(instruction)f(and)i(the)f(macro)g(is)g(applied)f(directly)g(to)h
(the)g(v)m(alue)g(of)h Fj(x)p FA(.)278 2184 y Fj(def)25 b(foo')f({f})g(\(x\))
76 b(=)25 b(f\(x\).)438 2296 y Fo(fo)q(o':)40 b Fn(T)17 b Fo([\()p
Fq(x;)7 b(\033)q Fo(\))k Fn(7!)g Fq(f)t Fo(\()p Fq(x)p Fo(\)])866
2308 y Fe(f)929 2296 y Fn(\))41 b(hT)18 b Fo([)o(\()p Fq(x;)7
b(\033)q Fo(\))k Fn(7!)g Fq(x)p Fo(])6 b Fq(;)h Fn(T)17 b Fo([\()p
Fq(x;)7 b(\033)q Fo(\))k Fn(7!)g Fq(\033)q Fo(])o Fn(i)p Fo(;)c
Fq(sel)1642 2302 y Fl(0)929 2370 y Fn(\))41 b(h)p Fq(P)1055
2376 y Fl(0)1074 2370 y Fo(;)7 b Fn(T)16 b Fo([)p Fq(x)11 b
Fn(7!)g Fq(x)p Fo(])6 b Fq(;)h Fn(T)17 b Fo([)o(\()p Fq(x;)7
b(\033)q Fo(\))k Fn(7!)h Fq(\033)q Fo(])o Fn(i)p Fo(;)7 b Fq(sel)1630
2376 y Fl(0)929 2445 y Fn(\))41 b(h)p Fq(P)1055 2451 y Fl(0)1074
2445 y Fo(;)7 b Fq(I)s(;)g Fn(T)16 b Fo([\()p Fq(x;)7 b(\033)q
Fo(\))k Fn(7!)g Fq(\033)q Fo(])p Fn(i)p Fo(;)c Fq(sel)1470
2451 y Fl(0)929 2520 y Fn(\))41 b(h)p Fq(P)1055 2526 y Fl(0)1074
2520 y Fo(;)7 b Fq(I)s(;)g(P)1160 2526 y Fl(1)1177 2520 y Fo(;)g
Fn(T)17 b Fo([)o Fq(\033)c Fn(7!)e Fq(\033)q Fo(])p Fn(i)p
Fo(;)c Fq(sel)1459 2526 y Fl(0)929 2595 y Fn(\))41 b(h)p Fq(P)1055
2601 y Fl(0)1074 2595 y Fo(;)7 b Fq(I)s(;)g(P)1160 2601 y Fl(1)1177
2595 y Fo(;)g Fq(I)s Fn(i)p Fo(;)g Fq(sel)1302 2601 y Fl(0)p
eop
%%Page: 50 59
58 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(50)200 279 y FA(The)22 b Fj(foo)f FA(function)h(passes)h(an)g
(abstraction)g(to)g Fj(foo')p FA(.)38 b(The)22 b(abstraction)h(refers)f(to)g
(the)150 416 y(v)m(ariable)17 b Fj(y)p FA(,)f(whic)o(h)g(is)g(outside)h(its)g
(scop)q(e.)23 b(Th)o(us,)17 b(the)g(en)o(vironmen)o(t)d(of)j
Fj(foo)f FA(m)o(ust)f(b)q(e)i(passed)150 554 y(along)g(with)f(the)g
(abstraction.)278 752 y Fj(def)25 b(foo\(y\))e(=)i(foo'{x)f(=>)h
(\(x,y\)}\(y\))o(.)241 917 y Fo(fo)q(o)41 b Fn(T)17 b Fo([)p
Fq(y)c Fn(7!)e Fq(f)t(oo)540 902 y Fp(0)553 917 y Fn(f)p Fq(x)g
Fn(7!)g Fo(\()p Fq(x;)c(y)q Fo(\))p Fn(g)p Fo(\()p Fq(y)q Fo(\)])42
b Fn(\))f(hT)17 b Fo([)p Fq(y)c Fn(7!)e Fq(y)q Fo(])d Fq(;)f(I)s
Fn(i)p Fo(;)g Fq(cal)q(l)q Fo(\()p Fq(f)t(oo)1385 902 y Fp(0)1397
917 y Fq(;)g Fn(T)17 b Fo([)o(\()p Fq(x;)7 b(y)q Fo(\))12 b
Fn(7!)f Fo(\()p Fq(x;)c(y)q Fo(\)]\))886 992 y Fn(\))41 b(h)p
Fq(I)s(;)7 b(I)s Fn(i)p Fo(;)g Fq(cal)q(l)q Fo(\()p Fq(f)t(oo)1227
977 y Fp(0)1241 992 y Fq(;)g Fo(\()p Fn(T)16 b Fo([\()p Fq(x;)7
b(y)q Fo(\))12 b Fn(7!)f Fo(\()p Fq(x;)c(y)q Fo(\)])o(\)\))886
1067 y Fn(\))41 b(h)p Fq(I)s(;)7 b(I)s Fn(i)p Fo(;)g Fq(cal)q(l)q
Fo(\()p Fq(f)t(oo)1227 1051 y Fp(0)1241 1067 y Fq(;)g Fo(\()p
Fn(hT)16 b Fo([\()p Fq(x;)7 b(y)q Fo(\))12 b Fn(7!)f Fq(x)p
Fo(])6 b Fq(;)h Fn(T)16 b Fo([\()p Fq(x;)7 b(y)q Fo(\))12 b
Fn(7!)f Fq(y)q Fo(])p Fn(i)p Fo(\)\))886 1141 y Fn(\))41 b(h)p
Fq(I)s(;)7 b(I)s Fn(i)p Fo(;)g Fq(cal)q(l)q Fo(\()p Fq(f)t(oo)1227
1126 y Fp(0)1241 1141 y Fq(;)g Fo(\()p Fn(h)p Fq(P)1319 1147
y Fl(0)1337 1141 y Fo(;)g Fn(T)16 b Fo([)p Fq(x)11 b Fn(7!)g
Fq(x)p Fo(])6 b Fq(;)h Fn(T)17 b Fo([)o(\()p Fq(x;)7 b(y)q
Fo(\))12 b Fn(7!)f Fq(y)q Fo(])p Fn(i)p Fo(\)\))886 1216 y
Fn(\))41 b(h)p Fq(I)s(;)7 b(I)s Fn(i)p Fo(;)g Fq(cal)q(l)q
Fo(\()p Fq(f)t(oo)1227 1201 y Fp(0)1241 1216 y Fq(;)g Fo(\()p
Fn(h)p Fq(P)1319 1222 y Fl(0)1337 1216 y Fo(;)g Fq(I)s(;)g
Fn(T)16 b Fo([\()p Fq(x;)7 b(y)q Fo(\))k Fn(7!)g Fq(y)q Fo(])q
Fn(i)p Fo(\)\))886 1291 y Fn(\))41 b(h)p Fq(I)s(;)7 b(I)s Fn(i)p
Fo(;)g Fq(cal)q(l)q Fo(\()p Fq(f)t(oo)1227 1276 y Fp(0)1241
1291 y Fq(;)g Fo(\()p Fn(h)p Fq(P)1319 1297 y Fl(0)1337 1291
y Fo(;)g Fq(I)s(;)g(P)1423 1297 y Fl(1)1440 1291 y Fo(;)g Fn(T)17
b Fo([)o Fq(y)d Fn(7!)d Fq(y)q Fo(])p Fn(i)p Fo(\)\))886 1365
y Fn(\))41 b(h)p Fq(I)s(;)7 b(I)s Fn(i)p Fo(;)g Fq(cal)q(l)q
Fo(\()p Fq(f)t(oo)1227 1350 y Fp(0)1241 1365 y Fq(;)g Fo(\()p
Fn(h)p Fq(P)1319 1371 y Fl(0)1337 1365 y Fo(;)g Fq(I)s(;)g(P)1423
1371 y Fl(1)1440 1365 y Fo(;)g Fq(I)s Fn(i)p Fo(\)\))200 1552
y FA(The)16 b(execution)f(of)i Fx(f)5 b(oo)p FA(\(8\))18 b(b)o(y)d(the)h
(abstract)h(mac)o(hine)d(is)i(sho)o(wn)h(b)q(elo)o(w:)691 1658
y Fq(v)114 b(c)610 b(d)p Fn(j)p Fq(f)p 568 1682 964 2 v 691
1735 a Fo([)13 b(])97 b(8;)7 b Fn(h)p Fq(I)s(;)g(I)s Fn(i)p
Fo(;)g Fq(cal)q(l)q Fo(\()p Fq(f)t(oo)1123 1720 y Fp(0)1135
1735 y Fq(;)g Fo(\()p Fn(h)p Fq(p)1207 1741 y Fl(0)1225 1735
y Fo(;)g Fq(I)s(;)g(p)1305 1741 y Fl(1)1323 1735 y Fo(;)g Fq(I)s
Fn(i)p Fo(\)\))42 b([)14 b(])589 1809 y Fn(\))631 1794 y Fp(\003)691
1809 y Fo(8)113 b Fn(h)p Fq(I)s(;)7 b(I)s Fn(i)p Fo(;)g Fq(cal)q(l)q
Fo(\()p Fq(f)t(oo)1083 1794 y Fp(0)1096 1809 y Fq(;)g Fo(\()p
Fn(h)p Fq(p)1168 1815 y Fl(0)1186 1809 y Fo(;)g Fq(I)s(;)g(p)1266
1815 y Fl(1)1284 1809 y Fo(;)g Fq(I)s Fn(i)p Fo(\)\))81 b([)14
b(])589 1884 y Fn(\))631 1869 y Fp(\003)691 1884 y Fn(h)p Fo(8)p
Fq(;)7 b Fo(8)p Fn(i)41 b Fq(cal)q(l)q Fo(\()p Fq(f)t(oo)971
1869 y Fp(0)984 1884 y Fq(;)7 b Fo(\()p Fn(h)p Fq(p)1056 1890
y Fl(0)1074 1884 y Fo(;)g Fq(I)s(;)g(p)1154 1890 y Fl(1)1172
1884 y Fo(;)g Fq(I)s Fn(i)p Fo(\)\))193 b([)14 b(])168 1983
y FA(The)j(call)g(to)h(fo)q(o')g(sets)g(up)g(the)g(return)f(from)g(fo)q(o')h
(b)o(y)f(pushing)h(the)g(empt)o(y)d(co)q(de)j(stream)f(on)150
2105 y(the)h(dump)g(\(the)g(co)q(de)g(after)h(the)f(call)f(com)o(binator\))h
(and)h(pushing)g(the)f(function)g(argumen)o(ts)150 2228 y(on)o(to)f(the)f
Fx(f)21 b FA(stac)o(k.)705 2294 y Fq(v)113 b(c)333 b(d)p Fn(j)p
Fq(f)p 601 2318 899 2 v 622 2370 a Fn(\))41 b(h)p Fo(8)p Fq(;)7
b Fo(8)p Fn(i)40 b(h)p Fq(P)881 2376 y Fl(0)900 2370 y Fo(;)7
b Fq(I)s(;)g(P)986 2376 y Fl(1)1004 2370 y Fo(;)g Fq(I)s Fn(i)p
Fo(;)g Fq(sel)1129 2376 y Fl(0)1189 2370 y Fq(r)q(et)p Fo(\()p
Fq(\017)p Fo(\))1189 2445 y Fq(ar)q(g)q Fo(\()p Fn(h)p Fq(p)1305
2451 y Fl(0)1324 2445 y Fo(;)g Fq(I)s(;)g(p)1404 2451 y Fl(1)1422
2445 y Fo(;)g Fq(I)s Fn(i)622 2520 y(\))41 b(h)p Fo(8)p Fq(;)7
b Fo(8)p Fn(i)40 b Fq(sel)888 2526 y Fl(0)1189 2520 y Fo([)14
b(])1189 2595 y Fq(ar)q(g)q Fo(\()p Fn(h)p Fq(p)1305 2601 y
Fl(0)1324 2595 y Fo(;)7 b Fq(I)s(;)g(p)1404 2601 y Fl(1)1422
2595 y Fo(;)g Fq(I)s Fn(i)p eop
%%Page: 51 60
59 bop 484 33 a Fy(4.)24 b(THE)c(CHARITY)f(ABSTRA)o(CT)g(MA)o(CHINE)h(:)f
(BASICS)290 b(51)166 141 y FA(A)16 b Fx(sel)280 148 y Fm(0)315
141 y FA(instruction)g(will)f(load)i(the)f(co)q(de)g(from)f(the)h
Fx(f)22 b FA(stac)o(k)16 b(on)o(to)h(the)f(co)q(de)g(stac)o(k.)683
245 y Fq(v)114 b(c)245 b(d)p Fn(j)p Fq(f)p 580 269 941 2 v
600 321 a Fn(\))41 b(h)p Fo(8)p Fq(;)7 b Fo(8)p Fn(i)41 b(h)p
Fq(P)860 327 y Fl(0)878 321 y Fo(;)7 b Fq(I)s(;)g(P)964 327
y Fl(0)982 321 y Fo(;)g Fq(I)s Fn(i)42 b Fq(ar)q(g)q Fo(\()p
Fn(h)p Fq(p)1196 327 y Fl(0)1215 321 y Fo(;)7 b Fq(I)s(;)g(p)1295
327 y Fl(1)1313 321 y Fo(;)g Fq(I)s Fn(i)p Fo(\))p Fq(:r)q(et)p
Fo(\()p Fq(\017)p Fo(\))600 396 y Fn(\))41 b(h)p Fo(8)p Fq(;)7
b Fo(8)p Fn(i)41 b Fq(\017)246 b(ar)q(g)q Fo(\()p Fn(h)p Fq(p)1196
402 y Fl(0)1215 396 y Fo(;)7 b Fq(I)s(;)g(p)1295 402 y Fl(1)1313
396 y Fo(;)g Fq(I)s Fn(i)p Fo(\))p Fq(:r)q(et)p Fo(\()p Fq(\017)p
Fo(\))600 470 y Fn(\))41 b(h)p Fo(8)p Fq(;)7 b Fo(8)p Fn(i)41
b Fq(\017)246 b(r)q(et)p Fo(\()p Fq(\017)p Fo(\))1080 545 y
Fq(ar)q(g)q Fo(\()p Fn(h)p Fq(p)1196 551 y Fl(0)1215 545 y
Fo(;)7 b Fq(I)s(;)g(p)1295 551 y Fl(1)1313 545 y Fo(;)g Fq(I)s
Fn(i)p Fo(\))600 620 y Fn(\))41 b(h)p Fo(8)p Fq(;)7 b Fo(8)p
Fn(i)41 b Fq(\017)246 b Fo([)13 b(])600 695 y Fn(\))393 b Fo(STOP)166
796 y FA(As)16 b(exp)q(ected,)f(the)h(computation)g(results)g(in)g(\(8)p
Fx(;)8 b FA(8\))16 b(b)q(eing)h(left)e(on)i(top)g(the)f(of)g
Fx(v)i FA(stac)o(k.)p eop
%%Page: 52 61
60 bop 1574 509 a Fw(Chapter)34 b Fv(5)428 633 y FB(The)27
b(Charit)n(y)f(Abstract)h(Mac)n(hine)f(:)36 b(datat)n(yp)r(es)p
150 689 1800 2 v 150 878 a FA(The)17 b(Charit)o(y)f(system)f(can)h(b)q(e)h
(customized)d(b)o(y)i(adding)i(datat)o(yp)q(es.)k(These)17
b(are)f(divided)f(in)o(to)150 969 y(the)i(inductiv)o(e)e(datat)o(yp)q(es)j
(and)g(their)f(dual,)g(the)g(coinductiv)o(e)e(datat)o(yp)q(es.)25
b(Immedi)o(ately)14 b(fol-)150 1061 y(lo)o(wing)23 b(a)h(datat)o(yp)q(e)g
(declaration,)h(three)e(com)o(binators)f(\(map,)i(fold/unfold,)i
(case/record\))150 1152 y(for)20 b(manipulating)f(the)h(datat)o(yp)q(es)g
(are)g(deliv)o(ered)e(to)i(the)f(system.)31 b(Similarly)17
b(to)j(the)g(basic)150 1244 y(com)o(binators,)15 b(those)h(asso)q(ciated)h
(with)f(the)f(datat)o(yp)q(es)i(access)f(v)m(ariables)g(in)f(an)i(en)o
(vironmen)o(t)150 1335 y(similar)c(to)i(the)f(basic)h(com)o(binators.)20
b(This)15 b(c)o(hapter)f(sho)o(ws)h(ho)o(w)g(the)g(inductiv)o(e)e(and)i
(coinduc-)150 1427 y(tiv)o(e)g(datat)o(yp)q(es)h(and)h(the)f(com)o(binators)f
(that)i(manipulate)d(their)i(elemen)o(ts)d(are)j(added)h(to)f(the)150
1518 y(basic)g(Charit)o(y)g(system.)150 1704 y FB(5.1.)42 b(Inductiv)n(e)25
b(datat)n(yp)r(es)200 1821 y FA(When)12 b(an)h(inductiv)o(e)e(datat)o(yp)q(e)
i Fx(L)g FA(is)f(declared,)g(constructors)h(for)g(building)f(elemen)o(ts)d
(of)k(the)150 1912 y(datat)o(yp)q(e,)g(along)g(with)g(three)f(com)o(binators)
f(\(for)i(the)f(case,)h(fold,)g(and)g(map\),)f(are)h(imm)o(ediatel)o(y)150
2004 y(deliv)o(ered)g(to)i(the)f(system.)20 b(Recall)13 b(the)i(de\014nition)
f(of)i(an)f(inductiv)o(e)e(datat)o(yp)q(e)i(is)g(of)g(the)g(form:)583
2118 y(data)i Fx(L)p FA(\()p Fx(A)p FA(\))c Fz(\000)-8 b(!)13
b Fx(S)k FA(=)42 b Fx(c)1057 2125 y Fm(1)1090 2118 y FA(:)14
b Fx(E)1154 2125 y Fm(1)1173 2118 y FA(\()p Fx(A;)8 b(S)s FA(\))49
b Fz(\000)-9 b(!)41 b Fx(S)980 2208 y Fz(j)1036 2174 y FA(.)1036
2191 y(.)1036 2208 y(.)980 2297 y Fz(j)h Fx(c)1057 2304 y Fk(n)1094
2297 y FA(:)13 b Fx(E)1157 2304 y Fk(n)1181 2297 y FA(\()p
Fx(A;)8 b(S)s FA(\))41 b Fz(\000)-9 b(!)41 b Fx(S:)150 2403
y FA(In)16 b(eac)o(h)g(constructor)g Fx(c)599 2410 y Fk(i)630
2403 y FA(of)g Fx(L)p FA(,)g(the)g(domain)g(t)o(yp)q(e)f(expression)h
Fx(E)1386 2410 y Fk(i)1401 2403 y FA(\()p Fx(A;)8 b(S)s FA(\))15
b(is)h(a)h(t)o(yp)q(e)f(where)253 2509 y Fz(\017)21 b Fx(A)15
b FA(is)h(the)g(parametric)f(v)m(ariable,)253 2600 y Fz(\017)21
b Fx(S)e FA(is)d(the)g(state)g(v)m(ariable,)1027 2700 y Fy(52)p
eop
%%Page: 53 62
61 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(53)150 141 y FA(suc)o(h)16 b(that)258
245 y Fx(E)s FA(\()p Fx(A;)8 b(S)s FA(\))41 b(::=)f Fx(A)497
b FA(parametric)14 b(v)m(ariable)493 335 y Fz(j)67 b Fx(S)504
b FA(state)16 b(v)m(ariable)493 425 y Fz(j)67 b FA(1)510 b(unit)16
b(\(basic)g(t)o(yp)q(e\))493 514 y Fz(j)67 b Fx(E)s FA(\()p
Fx(A;)8 b(S)s FA(\))i Fz(\002)h Fx(E)s FA(\()p Fx(A;)d(S)s
FA(\))136 b(pro)q(duct)17 b(\(basic)f(t)o(yp)q(e\))493 604
y Fz(j)67 b Fx(L)p FA(\()p Fx(E)s FA(\()p Fx(A;)8 b(S)s FA(\))p
Fx(;)g(:::;)g(E)s FA(\()p Fx(A;)g(S)s FA(\)\))39 b(other)16
b(datat)o(yp)q(e)h(\(user)f(de\014ned)g(t)o(yp)q(e\))150 783
y Fs(5.1.1.)32 b(Strong)23 b(datat)n(yp)r(es)150 919 y FA(Adding)14
b(strength)h(to)g(datat)o(yp)q(es)g(pro)o(vides)f(a)h(means)f(of)h(accessing)
f(global)h(v)m(alues)g(outside)f(the)150 1016 y(scop)q(e)19
b(of)f(a)h(data)g(structure.)26 b(In)18 b(this)g(sc)o(heme,)e(the)i(en)o
(vironmen)o(t)e(is)i(distributed)f(uniformly)150 1113 y(o)o(v)o(er)c(the)h
(structure)g(of)h(the)e(datat)o(yp)q(e.)21 b(This)15 b(means)e(distributing)h
(the)g(en)o(vironmen)o(t)d(o)o(v)o(er)i(the)150 1210 y(constructors)j(of)g(a)
g(data)g(structure.)21 b(Ho)o(w)o(ev)o(er,)13 b(constructors)k(are)e(simply)f
(com)o(binators)g(with)150 1306 y(t)o(yp)q(es:)792 1403 y Fx(c)813
1410 y Fk(i)841 1403 y FA(:)f Fx(E)904 1410 y Fk(i)919 1403
y FA(\()p Fx(A;)8 b(L)p FA(\()p Fx(A)p FA(\)\))13 b Fz(!)g
Fx(L)p FA(\()p Fx(A)p FA(\))150 1519 y(F)l(or)j(example,)e(the)i(cons)h
(constructor)f(from)f(the)h(list)g(datat)o(yp)q(e)h(is:)746
1653 y Fx(cons)e FA(:)e Fx(A)e Fz(\002)g Fx(l)q(ist)p FA(\()p
Fx(A)p FA(\))h Fz(!)h Fx(l)q(ist)p FA(\()p Fx(A)p FA(\))150
1787 y(Hence,)h(distributing)h(the)h(en)o(vironmen)o(t)d(in)o(to)i(the)g(lo)q
(cal)h(con)o(text)f(of)h(a)g(constructor)g(is)f(view)o(ed)150
1884 y(as)i(distributing)f(the)g(en)o(vironmen)o(t)d(o)o(v)o(er)i(a)i(com)o
(binator.)200 1980 y(T)l(o)11 b(\\strengthen")h(a)f(com)o(binator)f(b)o(y)g
(distributing)h(the)f(en)o(vironmen)o(t)e(in)o(to)j(its)g(lo)q(cal)f(con)o
(text,)150 2077 y(three)15 b(maps)h(\(also)g(com)o(binators\))f(are)h(pro)o
(vided.)k(These)c(maps)f(distribute)g(the)h(en)o(vironmen)o(t)150
2174 y(in)o(to)f(a)h(single)f(lev)o(el)f(of)h(the)h(com)o(binator)e(and)i
(are)g(not)g(recursiv)o(e)e(in)h(nature.)21 b(The)16 b(parametric)150
2271 y(comp)q(onen)o(t)c(of)h(a)h(constructor's)f(t)o(yp)q(e)f(expression)h
Fx(E)1147 2278 y Fk(i)1161 2271 y FA(\()p Fx(A;)8 b(S)s FA(\))k(is)h
(strengthened)g(with)g(the)g(map)1918 2253 y Fm(1)1936 2271
y FA(:)685 2405 y Fx(\022)709 2383 y Fk(E)735 2388 y Ff(i)708
2417 y Fr(:)p Fk(R)774 2405 y FA(:)g Fx(E)837 2412 y Fk(i)851
2405 y FA(\()p Fx(A;)8 b(S)s FA(\))i Fz(\002)h Fx(\033)16 b
Fz(!)d Fx(E)1184 2412 y Fk(i)1198 2405 y FA(\()p Fx(A)e Fz(\002)g
Fx(\033)o(;)d(S)s FA(\))p 150 2524 250 2 v 200 2579 a Fl(1)218
2595 y Fo(The)15 b(subscripted)g Fn(:)p Fq(R)f Fo(refers)h(to)f(the)g
(nonrecursiv)o(e)i(parametric)d(comp)q(onen)o(t.)p eop
%%Page: 54 63
62 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(54)150 141 y FA(while)15 b(the)h(state)h(comp)q
(onen)o(t)e(is)h(strengthened)g(with)1164 123 y Fm(2)1184 141
y FA(:)688 272 y Fx(\022)712 250 y Fk(E)738 255 y Ff(i)711
285 y Fk(R)767 272 y FA(:)e Fx(E)831 279 y Fk(i)845 272 y FA(\()p
Fx(A;)8 b(S)s FA(\))i Fz(\002)h Fx(\033)k Fz(!)f Fx(E)1178
279 y Fk(i)1192 272 y FA(\()p Fx(A;)8 b(S)13 b Fz(\002)e Fx(\033)r
FA(\))150 404 y(or)17 b(in)f(case)g(b)q(oth)h(comp)q(onen)o(ts)e(are)i
(strengthened,)f(w)o(e)f(use:)644 535 y Fx(\022)668 514 y Fk(E)694
519 y Ff(i)723 535 y FA(:)f Fx(E)787 542 y Fk(i)801 535 y FA(\()p
Fx(A;)8 b(S)s FA(\))i Fz(\002)h Fx(\033)k Fz(!)f Fx(E)1134
542 y Fk(i)1148 535 y FA(\()p Fx(A)d Fz(\002)g Fx(\033)o(;)d(S)13
b Fz(\002)e Fx(\033)r FA(\))150 666 y(As)i(in)h(the)f(last)h(c)o(hapter,)f
(the)g(en)o(vironmen)o(t)e(is)i(represen)o(ted)g(b)o(y)g Fx(\033)r
FA(.)20 b(In)13 b(short,)h(adding)h(strength)150 760 y(to)j(a)g(comp)q(onen)o
(t)f(of)h(a)h(t)o(yp)q(e)e(expression)g(will)g(pair)h(up)g(eac)o(h)f(o)q
(ccurrence)g(of)h(the)g(comp)q(onen)o(t)150 854 y(in)d(the)f(curren)o(t)h
(lev)o(el)d(of)k(a)f(data)h(structure)f(with)f(a)i(cop)o(y)e(of)i(the)f(en)o
(vironmen)o(t.)j(F)l(or)d(example,)150 948 y(supp)q(ose)k Fx(l)q(ist)d
FA(is)h(a)h(t)o(yp)q(e)e(of)i(arit)o(y)f(1,)g(and)h Fx(A;)8
b(B)19 b FA(are)f(parametric)d(v)m(ariables,)j(and)f Fx(S)k
FA(the)c(state)150 1042 y(v)m(ariable)f(in)g(the)g(t)o(yp)q(e)g(expression)
735 1178 y Fx(E)s FA(\()p Fx(A;)8 b(S)s FA(\))40 b(=)i Fx(A)10
b Fz(\002)h Fx(l)q(ist)p FA(\()p Fx(B)i Fz(\002)e Fx(S)s FA(\))150
1305 y(Then)16 b(applying)h(the)f(ab)q(o)o(v)o(e)g(three)f(maps)h(w)o(ould)g
(ha)o(v)o(e)g(the)g(follo)o(wing)g(actions:)275 1419 y Fx(\022)299
1396 y Fk(E)325 1401 y Ff(i)298 1431 y Fr(:)p Fk(R)350 1419
y FA(\()p Fx(E)s FA(\))e(:)41 b(\()p Fx(A)10 b Fz(\002)h Fx(l)q(ist)p
FA(\()p Fx(B)i Fz(\002)e Fx(S)s FA(\)\))f Fz(\002)h Fx(\033)43
b Fz(!)f FA(\()p Fx(A)10 b Fz(\002)h Fx(\033)r FA(\))g Fz(\002)f
Fx(l)q(ist)p FA(\(\()p Fx(B)j Fz(\002)e Fx(\033)r FA(\))f Fz(\002)h
Fx(S)s FA(\))285 1508 y Fx(\022)309 1486 y Fk(E)335 1491 y
Ff(i)308 1520 y Fk(R)350 1508 y FA(\()p Fx(E)s FA(\))j(:)41
b(\()p Fx(A)10 b Fz(\002)h Fx(l)q(ist)p FA(\()p Fx(B)i Fz(\002)e
Fx(S)s FA(\)\))f Fz(\002)h Fx(\033)43 b Fz(!)f Fx(A)10 b Fz(\002)h
Fx(l)q(ist)p FA(\()p Fx(B)h Fz(\002)f FA(\()p Fx(S)j Fz(\002)d
Fx(\033)r FA(\)\))285 1598 y Fx(\022)309 1580 y Fk(E)335 1585
y Ff(i)350 1598 y FA(\()p Fx(E)s FA(\))j(:)41 b(\()p Fx(A)10
b Fz(\002)h Fx(l)q(ist)p FA(\()p Fx(B)i Fz(\002)e Fx(S)s FA(\)\))f
Fz(\002)h Fx(\033)43 b Fz(!)f FA(\()p Fx(A)10 b Fz(\002)h Fx(\033)r
FA(\))g Fz(\002)f Fx(l)q(ist)p FA(\(\()p Fx(B)j Fz(\002)e Fx(\033)r
FA(\))f Fz(\002)h FA(\()p Fx(S)j Fz(\002)d Fx(\033)r FA(\)\))150
1704 y(Notice)16 b(that)i(when)g(a)f(datat)o(yp)q(e)h(is)f(encoun)o(tered)g
(in)g(the)g(t)o(yp)q(e)g(expression)g(\(suc)o(h)g(as)h(the)f
Fx(l)q(ist)150 1798 y FA(in)f(the)f(ab)q(o)o(v)o(e)h(example\),)d(the)j
(parameters)f(passed)i(in)o(to)e(the)h(datat)o(yp)q(e)g(are)g(also)g(paired)g
(with)150 1892 y(the)g(en)o(vironmen)o(t)d(in)j(the)g(same)g(w)o(a)o(y)l(.)
200 1985 y(T)l(o)d(apply)g(a)g(function)f(to)h(the)g(parametric)e(comp)q
(onen)o(t)h(or)h(the)f(state)h(comp)q(onen)o(t)f(of)h(a)g(term,)150
2079 y(the)j(follo)o(wing)g(com)o(binator)f(is)h(used:)713
2211 y Fx(E)749 2218 y Fk(i)763 2211 y Fz(f)p Fx(f)s(;)8 b(g)r
Fz(g)13 b FA(:)h Fx(E)964 2218 y Fk(i)978 2211 y FA(\()p Fx(A;)8
b(S)s FA(\))13 b Fz(!)h Fx(E)1221 2218 y Fk(i)1235 2211 y FA(\()p
Fx(A)1291 2190 y Fr(0)1302 2211 y Fx(;)8 b(S)1357 2190 y Fr(0)1368
2211 y FA(\))150 2342 y(where)20 b Fx(f)25 b FA(:)20 b Fx(A)g
Fz(!)g Fx(A)542 2324 y Fr(0)573 2342 y FA(and)g Fx(g)j FA(:)c
Fx(S)k Fz(!)d Fx(S)906 2324 y Fr(0)918 2342 y FA(.)32 b(The)20
b Fx(E)1104 2349 y Fk(i)1118 2342 y Fz(fg)g FA(com)o(binator)f(should)h(not)h
(b)q(e)f(confused)150 2436 y(with)13 b(the)f(t)o(yp)q(e)h Fx(E)481
2443 y Fk(i)495 2436 y FA(\(\).)20 b(Com)o(binators)13 b(acting)g(o)o(v)o(er)
f(a)h(data)h(structure)e(require)g(an)h(en)o(vironmen)o(t.)p
150 2524 250 2 v 200 2579 a Fl(2)218 2595 y Fo(The)i(subscripted)g
Fq(R)f Fo(refers)h(to)f(the)h(recursiv)o(e)g(state)g(comp)q(onen)o(t.)p
eop
%%Page: 55 64
63 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(55)150 141 y FA(Therefore,)15
b(the)h(system)f(is)h(supplied)g(with)g(another)h(com)o(binator:)758
279 y Fx(map)851 258 y Fk(E)877 263 y Ff(i)892 279 y Fz(f)p
Fx(f)s(;)8 b(g)r Fz(g)13 b FA(=)h Fx(\022)1105 258 y Fk(E)1131
263 y Ff(i)1146 279 y FA(;)8 b Fx(E)1204 286 y Fk(i)1218 279
y Fz(f)p Fx(f)s(;)g(g)r Fz(g)150 416 y FA(F)l(or)19 b(example,)e(giv)o(en)h
(the)g(constructor)h Fx(c)945 423 y Fk(j)982 416 y FA(:)f Fx(E)1050
423 y Fk(j)1068 416 y FA(\()p Fx(A;)8 b(S)s FA(\),)18 b Fx(f)24
b FA(:)17 b Fx(A)h Fz(!)g Fx(A)1469 398 y Fr(0)1480 416 y FA(,)h(and)h
Fx(g)g FA(:)e Fx(S)j Fz(!)d Fx(S)1838 398 y Fr(0)1849 416 y
FA(,)h(the)150 516 y Fx(map)243 498 y Fk(E)269 503 y Ff(j)303
516 y FA(com)o(binator)c(will)g(b)q(e:)620 654 y Fx(map)713
633 y Fk(E)739 638 y Ff(j)757 654 y Fz(f)p Fx(f)s(;)8 b(g)r
Fz(g)13 b FA(:)h Fx(E)958 661 y Fk(j)976 654 y FA(\()p Fx(A;)8
b(S)s FA(\))i Fz(\002)h Fx(\033)k Fz(!)f Fx(E)1309 661 y Fk(j)1327
654 y FA(\()p Fx(A)1383 633 y Fr(0)1395 654 y Fx(;)8 b(S)1450
633 y Fr(0)1461 654 y FA(\))150 792 y(where)16 b(eac)o(h)g(comp)q(onen)o(t)f
(of)h(the)g(term)f Fx(E)942 799 y Fk(j)977 792 y FA(is)h(strengthened,)f
(then)i(transformed.)150 1031 y Fs(5.1.2.)32 b(Mapping)23 b(o)n(v)n(er)g
(inductiv)n(e)i(datat)n(yp)r(es)150 1174 y FA(The)d(map)e(com)o(binator)h(is)
g(imp)q(ortan)o(t)g(to)h(Charit)o(y)f(programming.)36 b(Giv)o(en)20
b(an)i(elemen)o(t)d(of)150 1274 y(a)g(datat)o(yp)q(e)g(suc)o(h)g(as)g(the)g
(list)f([)p Fx(a)786 1281 y Fm(0)805 1274 y Fx(;)8 b(:::;)g(a)917
1281 y Fk(n)938 1274 y FA(],)19 b(the)f(map)g(op)q(eration)i(on)f(the)g(list)
f(w)o(ould)h(apply)g(a)150 1374 y(function)d Fx(f)22 b FA(to)16
b(ev)o(ery)f(elemen)o(t,)e(eg:)642 1512 y Fx(map)j Fz(f)p Fx(f)5
b Fz(g)16 b FA([)p Fx(a)886 1519 y Fm(0)905 1512 y Fx(;)8 b(:::;)g(a)1017
1519 y Fk(n)1039 1512 y FA(])13 b(=)h([)p Fx(f)5 b FA(\()p
Fx(a)1206 1519 y Fm(0)1225 1512 y FA(\))p Fx(;)j(:::;)g(f)d
FA(\()p Fx(a)1404 1519 y Fk(n)1426 1512 y FA(\)])200 1649 y(In)14
b(general,)g(applying)h(a)g(map)f(o)o(v)o(er)f(an)i(inductiv)o(e)e(datat)o
(yp)q(e)i(in)f(Charit)o(y)h(requires)e(that)i(the)150 1750
y(term)f(for)j(eac)o(h)e(constructor)i(of)f(the)g(datat)o(yp)q(e)g(b)q(e)h
(\\mapp)q(ed")f(with)g(the)g Fx(map)1640 1732 y Fk(E)1666 1737
y Ff(i)1697 1750 y FA(com)o(binator.)150 1850 y(Giv)o(en)f(a)i(datat)o(yp)q
(e)f Fx(L)p FA(,)g(a)h(map)e(com)o(binator)h(for)g Fx(L)h FA(has)g(t)o(yp)q
(e:)216 1992 y Fx(map)308 1975 y Fk(L)334 1992 y Fz(f)p Fx(A)396
1999 y Fm(1)427 1992 y Fz(\002)11 b Fx(\033)k Fz(!)f Fx(A)621
1975 y Fr(0)621 2005 y Fm(1)640 1992 y Fx(;)8 b(:::;)g(A)763
1999 y Fk(m)805 1992 y Fz(\002)j Fx(\033)k Fz(!)f Fx(A)999
1975 y Fr(0)999 2005 y Fk(m)1032 1992 y Fz(g)41 b FA(:)g Fx(L)p
FA(\()p Fx(A)1242 1999 y Fm(1)1262 1992 y Fx(;)8 b(:::;)g(A)1385
1999 y Fk(m)1416 1992 y FA(\))j Fz(\002)g Fx(\033)k Fz(!)f
Fx(L)p FA(\()p Fx(A)1692 1975 y Fr(0)1692 2005 y Fm(1)1711
1992 y Fx(;)8 b(:::;)g(A)1834 1975 y Fr(0)1834 2005 y Fk(m)1865
1992 y FA(\))150 2125 y(where)16 b Fx(m)g FA(is)g(the)g(n)o(um)o(b)q(er)e(of)
j(parametric)d(t)o(yp)q(es)i(of)h Fx(L)p FA(.)k(The)c(map)e(com)o(binator)g
(is)h(then:)668 2262 y Fx(map)761 2242 y Fk(L)787 2262 y Fz(f)p
Fx(g)r FA(1)p Fx(;)8 b(:::;)g(g)970 2269 y Fk(m)1002 2262 y
Fz(g)14 b FA(=)g Fx(\022)1117 2242 y Fk(L)1143 2262 y FA(;)8
b Fx(L)p Fz(f)p Fx(g)1246 2269 y Fm(1)1266 2262 y Fx(;)g(:::;)g(g)1375
2269 y Fk(m)1407 2262 y Fz(g)150 2400 y FA(where)13 b Fx(\022)312
2382 y Fk(L)352 2400 y FA(recursiv)o(ely)e(strengthens)i(the)h(en)o(tire)e
(data)i(structure)f(of)h Fx(L)p FA(,)f(and)h(then)g Fx(L)p
Fz(f)p Fx(g)1774 2407 y Fm(1)1794 2400 y Fx(;)8 b(:::;)g(g)1903
2407 y Fk(n)1925 2400 y Fz(g)150 2500 y FA(applies)16 b(a)g(map)g(function)g
(o)o(v)o(er)f Fx(L)i FA(as)g(describ)q(ed)e(earlier)g(in)h(this)g(section.)
200 2600 y(The)c(comm)o(uting)d(diagram)j(for)h(the)f(map)f(com)o(binator)g
(b)q(elo)o(w)h(sho)o(ws)h(ho)o(w)g(the)f(en)o(vironmen)o(t)p
eop
%%Page: 56 65
64 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(56)150 141 y FA(is)16 b(distributed)g(o)o(v)o
(er)f(the)h(en)o(tire)f(datat)o(yp)q(e:)292 265 y Fx(E)328
272 y Fk(i)343 265 y FA(\()p Fx(A;)8 b(L)p FA(\()p Fx(A)p FA(\)\))i
Fz(\002)h Fx(\033)p 654 254 854 2 v 989 230 a(c)1010 237 y
Fk(i)1035 230 y Fz(\002)g Fx(I)1479 253 y Fh(-)1536 265 y Fx(L)p
FA(\()p Fx(A)p FA(\))g Fz(\002)g Fx(\033)247 557 y(E)283 564
y Fk(i)297 557 y FA(\()p Fx(A;)d(L)p FA(\()p Fx(A)p FA(\))j
Fz(\002)f Fx(\033)r FA(\))h Fz(\002)g Fx(\033)282 411 y Fz(h)p
Fx(\022)325 389 y Fk(E)351 394 y Ff(i)324 423 y Fk(R)367 411
y Fx(;)d(P)420 418 y Fm(1)440 411 y Fz(i)465 503 y Fh(?)p 464
503 2 210 v 247 850 a Fx(E)283 857 y Fk(i)297 850 y FA(\()p
Fx(A;)g(L)p FA(\()p Fx(A)j Fz(\002)f Fx(\033)r FA(\)\))h Fz(\002)g
Fx(\033)175 704 y(E)211 711 y Fk(i)225 704 y Fz(f)p Fx(I)t(;)d(\022)322
685 y Fk(L)348 704 y Fz(g)j(\002)g Fx(I)465 796 y Fh(?)p 464
610 2 13 v 464 645 V 464 680 V 464 715 V 464 750 V 464 785
V 699 839 106 2 v 720 894 a Fx(\022)744 871 y Fk(E)770 876
y Ff(i)743 906 y Fr(:)p Fk(R)776 838 y Fh(-)834 850 y Fx(E)870
857 y Fk(i)884 850 y FA(\()p Fx(A)g Fz(\002)f Fx(\033)o(;)e(L)p
FA(\()p Fx(A)j Fz(\002)g Fx(\033)r FA(\)\))p 1283 839 225 2
v 1325 886 a Fx(c)1346 893 y Fk(i)1479 838 y Fh(-)1536 850
y Fx(L)p FA(\()p Fx(A)g Fz(\002)g Fx(\033)r FA(\))1635 796
y Fh(?)p 1634 319 2 13 v 1634 354 V 1634 390 V 1634 426 V 1634
462 V 1634 498 V 1634 533 V 1634 569 V 1634 605 V 1634 641
V 1634 676 V 1634 712 V 1634 748 V 1634 784 V 1641 557 a Fx(\022)1665
539 y Fk(L)150 985 y FA(Note)16 b(that)h Fx(a)10 b Fz(\002)h
Fx(b)16 b FA(is)g(shorthand)i(for)e Fz(h)p Fx(P)901 992 y Fm(0)922
985 y FA(;)8 b Fx(a;)g(P)1023 992 y Fm(1)1042 985 y FA(;)g
Fx(b)p Fz(i)p FA(.)21 b(Hence,)646 1143 y Fx(\022)670 1123
y Fk(E)696 1128 y Ff(i)711 1143 y Fz(f)p Fx(I)t(;)8 b(\022)808
1123 y Fk(L)833 1143 y Fz(g)j(\002)g Fx(I)17 b FA(=)d Fz(h)p
Fx(P)1060 1150 y Fm(0)1080 1143 y FA(;)8 b Fx(\022)1126 1123
y Fk(E)1152 1128 y Ff(i)1168 1143 y Fz(f)p Fx(I)t(;)g(\022)1265
1123 y Fk(L)1290 1143 y Fz(g)p Fx(;)g(P)1368 1150 y Fm(1)1388
1143 y FA(;)g Fx(I)t Fz(i)150 1302 y FA(The)21 b(ab)q(o)o(v)o(e)f(diagram)g
(sho)o(ws)i(ho)o(w)f(the)f(en)o(vironmen)o(t)e(is)i(distributed)g(in)o(to)h
(the)f(en)o(tire)f(data)150 1423 y(structure)c(in)g(t)o(w)o(o)g(w)o(a)o(ys.)
21 b(F)l(ollo)o(wing)15 b(the)g(top)h(and)g(left)f(path)h(pro)o(vides)e(the)h
(abstract,)h(general)150 1544 y(view)f(of)g(distributing)g(the)g(en)o
(vironmen)o(t)e(with)i(the)g(com)o(binator)f Fx(\022)1416 1526
y Fk(L)1442 1544 y FA(.)21 b(The)15 b(abstract)h(view)f(can)150
1665 y(b)q(e)h(rewritten)g(in)g(a)g(step)h(wise)e(manner)h(as)h(follo)o(ws:)
215 1830 y(\(1\))22 b(strengthen)16 b(the)g(state)g(comp)q(onen)o(t)g(and)h
(propagate)g(the)f(en)o(vironmen)o(t,)215 1951 y(\(2\))22 b(recursiv)o(ely)12
b(apply)j(the)g(en)o(vironmen)o(t)e(distribution)i(com)o(binator)f
Fx(\022)1580 1933 y Fk(L)1621 1951 y FA(to)i(the)f(recursiv)o(e)299
2072 y(comp)q(onen)o(t)g(and)i(propagate)g(the)f(en)o(vironmen)o(t,)215
2193 y(\(3\))22 b(strengthen)16 b(the)g(parametric)f(comp)q(onen)o(t,)215
2314 y(\(4\))22 b(apply)f(the)g(constructor)g(com)o(binator)f
Fx(c)1071 2321 y Fk(i)1106 2314 y FA(to)i(build)f(a)g(strengthened)g(data)h
(structure)299 2435 y Fx(L)p FA(\()p Fx(A)10 b Fz(\002)h Fx(\033)r
FA(\).)200 2600 y(The)j(rewrite)f(rule)h(for)g(the)g(map)g(com)o(binator)f
(distributes)g(the)h(en)o(vironmen)o(t)e(b)q(efore)i(apply-)p
eop
%%Page: 57 66
65 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(57)150 141 y FA(ing)16 b(the)g(mapp)q(ed)g
(function.)21 b(This)16 b(rewrite)g(rule)f(is)h(deriv)o(ed)f(in)h([CF92])g
(and)h(sho)o(wn)g(b)q(elo)o(w:)341 258 y Fx(c)362 265 y Fk(i)387
258 y Fz(\002)11 b Fx(I)t FA(;)d(map)576 240 y Fk(L)602 258
y Fz(f)p Fx(g)650 265 y Fm(1)670 258 y Fx(;)g(:::;)g(g)779
265 y Fk(n)801 258 y Fz(g)42 b FA(=)-8 b Fz(\))41 b Fx(c)1010
265 y Fk(i)1035 258 y Fz(\002)11 b Fx(I)t FA(;)d Fx(\022)1157
240 y Fk(L)1182 258 y FA(;)g Fx(L)p Fz(f)p Fx(f)d Fz(g)868
348 y FA(=)-8 b Fz(\))41 b(h)p Fx(\022)1032 325 y Fk(E)1058
330 y Ff(i)1031 360 y Fk(R)1073 348 y Fx(;)8 b(P)1126 355 y
Fm(1)1146 348 y Fz(i)p FA(;)g Fx(E)1223 355 y Fk(i)1238 348
y Fz(f)p Fx(I)t(;)g(\022)1335 329 y Fk(L)1360 348 y Fz(g)j(\002)g
Fx(I)t FA(;)d Fx(\022)1518 325 y Fk(E)1544 330 y Ff(i)1517
360 y Fr(:)p Fk(R)1568 348 y FA(;)g Fx(c)1611 355 y Fk(i)1625
348 y FA(;)g Fx(L)p Fz(f)p Fx(f)d Fz(g)868 437 y FA(=)-8 b
Fz(\))41 b(h)p Fx(\022)1032 415 y Fk(E)1058 420 y Ff(i)1031
449 y Fk(R)1073 437 y Fx(;)8 b(P)1126 444 y Fm(1)1146 437 y
Fz(i)p FA(;)g Fx(\022)1211 415 y Fk(E)1237 420 y Ff(i)1210
449 y Fr(:)p Fk(R)1263 437 y FA(;)g Fx(E)1321 444 y Fk(i)1335
437 y Fz(f)p Fx(I)t(;)g(\022)1432 419 y Fk(L)1457 437 y Fz(g)p
FA(;)g Fx(c)1525 444 y Fk(i)1539 437 y FA(;)g Fx(L)p Fz(f)p
Fx(f)d Fz(g)868 527 y FA(=)-8 b Fz(\))41 b Fx(\022)1013 509
y Fk(E)1039 514 y Ff(i)1054 527 y FA(;)8 b Fx(E)1112 534 y
Fk(i)1126 527 y Fz(f)p Fx(I)t(;)g(\022)1223 509 y Fk(L)1248
527 y Fz(g)p FA(;)g Fx(c)1316 534 y Fk(i)1330 527 y FA(;)g
Fx(L)p Fz(f)p Fx(f)d Fz(g)868 617 y FA(=)-8 b Fz(\))41 b Fx(\022)1013
598 y Fk(E)1039 603 y Ff(i)1054 617 y FA(;)8 b Fx(E)1112 624
y Fk(i)1126 617 y Fz(f)p Fx(I)t(;)g(\022)1223 598 y Fk(L)1248
617 y Fz(g)p FA(;)g Fx(E)1331 624 y Fk(i)1345 617 y Fz(f)p
Fx(f)s(;)g(L)p Fz(f)p Fx(f)d Fz(gg)p FA(;)j Fx(c)1599 624 y
Fk(i)868 706 y FA(=)-8 b Fz(\))41 b Fx(\022)1013 688 y Fk(E)1039
693 y Ff(i)1054 706 y FA(;)8 b Fx(E)1112 713 y Fk(i)1126 706
y Fz(f)p Fx(f)d FA(;)j Fx(\022)1226 688 y Fk(L)1252 706 y FA(;)g
Fx(L)p Fz(f)p Fx(f)d Fz(gg)p FA(;)j Fx(c)1454 713 y Fk(i)868
796 y FA(=)-8 b Fz(\))41 b Fx(map)1082 778 y Fk(E)1108 783
y Ff(i)1123 796 y Fz(f)p Fx(f)s(;)8 b(map)1290 778 y Fk(L)1315
796 y Fz(f)p Fx(f)d Fz(gg)p FA(;)j Fx(c)1462 803 y Fk(i)150
899 y FA(This)16 b(rewrite)f(rule)h(can)g(b)q(e)h(in)o(terpreted)d(as)j(\\at)
g(the)f(curren)o(t)f(lev)o(el)f(in)i(a)g(data)h(structure)f(tree,)150
989 y(apply)22 b Fx(f)28 b FA(to)23 b(the)f(parametric)f(comp)q(onen)o(ts)g
(of)i(the)f(structure)g(and)h(recursiv)o(ely)d(apply)i(the)150
1079 y Fx(map)243 1061 y Fk(L)285 1079 y FA(com)o(binator)15
b(to)i(ev)o(ery)d(state)j(comp)q(onen)o(t)e(of)i(the)f(structure".)150
1205 y Fs(Mapping)23 b(o)n(v)n(er)g(t)n(yp)r(es)g(1)f(and)h(pro)r(duct)150
1307 y FA(T)l(o)e(map)e(o)o(v)o(er)g(the)h(basic)h(t)o(yp)q(es)e(1)i(and)g
(pro)q(ducts,)h(t)o(w)o(o)e(new)g(com)o(binators)f(are)h(in)o(tro)q(duced)150
1398 y(in)o(to)c(the)g(system:)940 1512 y Fx(map)1033 1493
y Fm(1)1053 1512 y Fz(fg)41 b FA(:)g Fx(X)16 b Fz(\002)11 b
Fx(\033)k Fz(!)f Fx(X)383 1601 y(map)475 1583 y Fr(\002)505
1601 y Fz(f)p Fx(X)h Fz(\002)c Fx(\033)16 b Fz(!)d Fx(X)786
1583 y Fr(0)798 1601 y Fx(;)8 b(Y)22 b Fz(\002)11 b Fx(\033)k
Fz(!)f Fx(Y)1066 1583 y Fr(0)1078 1601 y Fz(g)41 b FA(:)g(\()p
Fx(X)16 b Fz(\002)11 b Fx(Y)g FA(\))g Fz(\002)g Fx(\033)k Fz(!)f
Fx(X)1594 1583 y Fr(0)1617 1601 y Fz(\002)c Fx(Y)1706 1583
y Fr(0)150 1704 y FA(Since)h(the)g(t)o(yp)q(e)h(1)g(do)q(es)g(not)g(ha)o(v)o
(e)f(an)o(y)h(input)g(parameters,)f(the)g(map)g(o)o(v)o(er)g(1)h(simply)e
(eliminates)150 1794 y(the)k(strength.)21 b(The)13 b(map)h(o)o(v)o(er)f(the)g
(pro)q(duct)i(t)o(yp)q(e)e(strengthens)i(eac)o(h)e(comp)q(onen)o(t)g(of)h
(the)g(pair)150 1885 y(\(b)o(y)j(distributing)h(the)g(en)o(vironmen)o(t\))d
(b)q(efore)j(applying)g(the)g(mapp)q(ed)f(functions)h(to)g(the)g(t)o(w)o(o)
150 1975 y(parametric)d(v)m(alues)h(in)g(the)g(pair)g(com)o(binator.)150
2153 y Fs(5.1.3.)32 b(The)22 b(fold)g(com)n(binator)150 2276
y FA(The)d(purp)q(ose)h(of)f(the)g(fold)g(com)o(binator)f(is)h(to)g(pro)o
(vide)f(a)i(mec)o(hanism)c(for)j(transforming)g(an)150 2367
y(elemen)o(t)12 b(of)j(one)g(user)g(de\014ned)g(datat)o(yp)q(e)h(to)f(an)g
(elemen)o(t)d(of)k(another)f(user)g(de\014ned)g(datat)o(yp)q(e.)150
2457 y(The)h(fold)g(com)o(binator)g(has)h(t)o(yp)q(e:)320 2590
y Fx(f)5 b(ol)q(d)414 2569 y Fk(L)440 2590 y Fz(f)p Fx(E)501
2597 y Fm(1)521 2590 y FA(\()p Fx(A;)j(C)t FA(\))i Fz(\002)g
Fx(\033)16 b Fz(!)d Fx(C)q(;)8 b(:::;)g(E)981 2597 y Fk(n)1003
2590 y FA(\()p Fx(A;)g(C)t FA(\))i Fz(\002)h Fx(\033)k Fz(!)f
Fx(C)t Fz(g)41 b FA(:)g Fx(L)p FA(\()p Fx(A)p FA(\))11 b Fz(\002)f
Fx(\033)16 b Fz(!)d Fx(C)p eop
%%Page: 58 67
66 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(58)150 141 y FA(where)15 b(the)h(input)g(com)o
(binators)e(need)i(to)g(b)q(e)g(strengthened)f(with)h(the)g(en)o(vironmen)o
(t)d Fx(\033)k FA(in)e(the)150 250 y(same)g(w)o(a)o(y)h(as)h(the)f(map)f(com)
o(binator.)200 359 y(The)h(follo)o(wing)f(comm)o(uting)e(diagram)i(deriv)o
(ed)f(in)i([Sp)q(e93])g(de\014nes)f(the)h(action)g(of)g(the)f(fold)150
469 y(com)o(binator:)585 582 y Fx(E)621 589 y Fk(i)635 582
y FA(\()p Fx(A;)8 b(L)p FA(\()p Fx(A)p FA(\)\))i Fz(\002)h
Fx(\033)p 946 571 269 2 v 989 547 a(c)1010 554 y Fk(i)1035
547 y Fz(\002)g Fx(I)1186 570 y Fh(-)1244 582 y Fx(L)p FA(\()p
Fx(A)p FA(\))f Fz(\002)h Fx(\033)540 875 y(E)576 882 y Fk(i)590
875 y FA(\()p Fx(A;)d(L)p FA(\()p Fx(A)p FA(\))i Fz(\002)h
Fx(\033)r FA(\))g Fz(\002)f Fx(\033)575 729 y Fz(h)p Fx(\022)618
706 y Fk(E)644 711 y Ff(i)617 741 y Fk(R)659 729 y Fx(;)e(P)712
736 y Fm(1)732 729 y Fz(i)758 821 y Fh(?)p 757 821 2 210 v
619 1168 a Fx(E)655 1175 y Fk(i)670 1168 y FA(\()p Fx(A;)g(Y)i
FA(\))h Fz(\002)g Fx(\033)412 1021 y(E)448 1028 y Fk(i)462
1021 y Fz(f)p Fx(I)t(;)d FA(fold)614 1000 y Fk(L)640 1021 y
Fz(g)j(\002)g Fx(I)758 1114 y Fh(?)p 757 928 2 13 v 757 963
V 757 998 V 757 1033 V 757 1067 V 757 1102 V 912 1157 383 2
v 1031 1133 a Fx(g)1054 1140 y Fk(i)1266 1156 y Fh(-)1323 1168
y Fx(Y)1343 1117 y Fh(?)p 1342 637 2 13 v 1342 673 V 1342 709
V 1342 745 V 1342 781 V 1342 817 V 1342 853 V 1342 889 V 1342
925 V 1342 961 V 1342 997 V 1342 1033 V 1342 1069 V 1342 1105
V 1348 875 a FA(fold)1428 853 y Fk(L)150 1259 y FA(where)21
b(eac)o(h)f Fx(g)433 1266 y Fk(i)470 1259 y FA(:)h Fx(E)541
1266 y Fk(i)556 1259 y FA(\()p Fx(A;)8 b(Y)i FA(\))k Fz(\002)g
Fx(\033)24 b Fz(!)e Fx(Y)32 b FA(is)21 b(a)g(user)h(de\014ned)e(phrase)i
(used)f(for)g(transforming)150 1368 y(elemen)o(ts)13 b(of)k(t)o(yp)q(e)f
Fx(L)g FA(to)h(elemen)o(ts)c(of)k Fx(y)r FA(.)200 1477 y(F)l(or)i(the)h(ab)q
(o)o(v)o(e)f(fold)h(diagram,)f(follo)o(wing)g(the)h(path)g(of)f(the)h
(diagram)f(starting)h(from)e(the)150 1586 y(top)f(left)e(via)i(the)f(upp)q
(er)h(righ)o(t)f(side,)f(this)i(can)f(b)q(e)h(rewritten)e(as)i(the)g(b)q
(ottom)f(left)f(path.)23 b(This)150 1695 y(rewriting)17 b(giv)o(es)h(the)g
(de\014ning)g(rule)f(of)i(the)e(fold)h(com)o(binator.)26 b(The)18
b(ab)q(o)o(v)o(e)g(diagram)g(can)g(b)q(e)150 1805 y(though)o(t)f(of)f(as:)299
1946 y(Applying)e(the)h(constructor)h Fx(c)870 1953 y Fk(i)900
1946 y FA(to)g(the)f(t)o(yp)q(e)g Fx(E)1187 1953 y Fk(i)1217
1946 y FA(will)f(build)h(an)h(elemen)o(t)d(of)j(the)299 2055
y(datat)o(yp)q(e)h Fx(L)p FA(.)25 b(Applying)17 b(fold)g(to)h
Fx(L)f FA(will)g(transform)f(the)i(elemen)o(t)c(of)k Fx(L)f
FA(to)h(an)299 2164 y(elemen)n(t)f(of)i Fx(Y)11 b FA(.)30 b(Ho)o(w)o(ev)o
(er,)17 b(this)i(can)g(b)q(e)h(regarded)f(as)h(\014rst)f(distributing)g(the)
299 2273 y(en)o(vironmen)o(t)13 b(in)o(to)j(the)h(recursiv)o(e)e(\(state\))h
(comp)q(onen)o(t)g(of)h Fx(E)1466 2280 y Fk(i)1496 2273 y FA(b)o(y)f
(applying)h Fx(\022)q FA(,)299 2382 y(then)g(applying)h(the)f(fold)h(com)o
(binator)f(to)h(eac)o(h)f(recursiv)o(e)f(comp)q(onen)o(t)h(of)h
Fx(E)1774 2389 y Fk(i)1788 2382 y FA(.)299 2491 y(Finally)l(,)13
b(the)i(phrase)g Fx(g)732 2498 y Fk(i)762 2491 y FA(will)f(transform)g(the)h
(expression)g(in)o(to)f(a)i(v)m(alue)f(of)g(t)o(yp)q(e)299
2600 y Fx(Y)c FA(.)p eop
%%Page: 59 68
67 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(59)150 141 y FA(The)16 b(rewrite)f(rule)g(for)h
(the)f(fold)h(com)o(binator)f(can)h(b)q(e)f(deriv)o(ed)g(from)f(the)i
(diagram)f(as)i(follo)o(ws:)386 255 y Fx(c)407 262 y Fk(i)432
255 y Fz(\002)11 b Fx(I)t FA(;)d(fold)609 234 y Fk(L)635 255
y Fz(f)p Fx(g)683 262 y Fm(1)703 255 y Fx(;)g(:::;)g(g)812
262 y Fk(n)834 255 y Fz(g)427 345 y FA(=)-8 b Fz(\))41 b(h)p
Fx(\022)591 323 y Fk(E)617 328 y Ff(i)590 357 y Fk(R)633 345
y Fx(;)8 b(P)686 352 y Fm(1)706 345 y Fz(i)p FA(;)g Fx(E)783
352 y Fk(i)797 345 y Fz(f)p Fx(I)t(;)g FA(fold)949 323 y Fk(L)975
345 y Fz(f)p Fx(g)1023 352 y Fm(1)1043 345 y Fx(;)g(:::;)g(g)1152
352 y Fk(n)1174 345 y Fz(gg)j(\002)g Fx(I)p 747 364 564 2 v
4 w FA(;)d Fx(g)1356 352 y Fk(i)427 434 y FA(=)-8 b Fz(\))41
b(h)p Fx(\022)591 412 y Fk(E)617 417 y Ff(i)590 447 y Fk(R)633
434 y Fx(;)8 b(P)686 441 y Fm(1)706 434 y Fz(i)p FA(;)g Fz(h)p
Fx(P)797 441 y Fm(0)817 434 y FA(;)g Fx(E)875 441 y Fk(i)889
434 y Fz(f)p Fx(I)t(;)g FA(fold)1042 413 y Fk(L)1068 434 y
Fz(f)p Fx(g)1116 441 y Fm(1)1136 434 y Fx(;)g(:::;)g(g)1245
441 y Fk(n)1267 434 y Fz(gg)p Fx(;)g(P)1370 441 y Fm(1)1390
434 y FA(;)g Fx(I)t Fz(i)p 548 454 909 2 v -1 w FA(;)g Fx(g)1501
441 y Fk(i)427 524 y FA(=)-8 b Fz(\))41 b(hh)p Fx(\022)610
502 y Fk(E)636 507 y Ff(i)609 536 y Fk(R)652 524 y Fx(;)8 b(P)705
531 y Fm(1)725 524 y Fz(i)p FA(;)g Fx(P)797 531 y Fm(0)p 567
543 250 2 v 817 524 a FA(;)g Fx(E)875 531 y Fk(i)889 524 y
Fz(f)p Fx(I)t(;)g FA(fold)1042 503 y Fk(L)1068 524 y Fz(f)p
Fx(g)1116 531 y Fm(1)1136 524 y Fx(;)g(:::;)g(g)1245 531 y
Fk(n)1267 524 y Fz(gg)p Fx(;)g Fz(h)p Fx(\022)1382 502 y Fk(E)1408
507 y Ff(i)1381 536 y Fk(R)1423 524 y Fx(;)g(P)1476 531 y Fm(1)1496
524 y Fz(i)p FA(;)g Fx(P)1568 531 y Fm(1)1588 524 y FA(;)g
Fx(I)t Fz(i)p FA(;)g Fx(g)1700 531 y Fk(i)427 614 y FA(=)-8
b Fz(\))41 b(h)p Fx(\022)591 592 y Fk(E)617 597 y Ff(i)590
626 y Fk(R)633 614 y FA(;)8 b Fx(E)691 621 y Fk(i)705 614 y
Fz(f)p Fx(I)t(;)g FA(fold)857 592 y Fk(L)883 614 y Fz(f)p Fx(g)931
621 y Fm(1)951 614 y Fx(;)g(:::;)g(g)1060 621 y Fk(n)1082 614
y Fz(gg)p Fx(;)g Fz(h)p Fx(\022)1197 592 y Fk(E)1223 597 y
Ff(i)1196 626 y Fk(R)1238 614 y Fx(;)g(P)1291 621 y Fm(1)1311
614 y Fz(i)p FA(;)g Fx(P)1383 621 y Fm(1)p 1154 633 V 1404
614 a FA(;)g Fx(I)t Fz(i)p FA(;)g Fx(g)1516 621 y Fk(i)427
703 y FA(=)-8 b Fz(\))41 b(h)p Fx(\022)591 681 y Fk(E)617 686
y Ff(i)590 716 y Fk(R)633 703 y FA(;)8 b Fx(E)691 710 y Fk(i)705
703 y Fz(f)p Fx(I)t(;)g FA(fold)857 682 y Fk(L)883 703 y Fz(f)p
Fx(g)931 710 y Fm(1)951 703 y Fx(;)g(:::;)g(g)1060 710 y Fk(n)1082
703 y Fz(gg)p Fx(;)g(P)1185 710 y Fm(1)1205 703 y FA(;)g Fx(I)p
1154 720 99 2 v 3 w Fz(i)p FA(;)g Fx(g)1316 710 y Fk(i)427
793 y FA(=)-8 b Fz(\))41 b(h)p Fx(\022)591 771 y Fk(E)617 776
y Ff(i)590 805 y Fk(R)p 567 812 66 2 v 633 793 a FA(;)8 b Fx(E)691
800 y Fk(i)705 793 y Fz(f)p Fx(I)t(;)g FA(fold)857 772 y Fk(L)883
793 y Fz(f)p Fx(g)931 800 y Fm(1)951 793 y Fx(;)g(:::;)g(g)1060
800 y Fk(n)1082 793 y Fz(gg)p Fx(;)g(P)1185 800 y Fm(1)1205
793 y Fz(i)p FA(;)g Fx(g)1269 800 y Fk(i)427 883 y FA(=)-8
b Fz(\))41 b(h)p Fx(\022)591 865 y Fk(E)617 870 y Ff(i)633
883 y FA(;)8 b Fx(E)691 890 y Fk(i)705 883 y Fz(f)p Fx(P)761
890 y Fm(0)781 883 y Fx(;)g(I)t Fz(g)p FA(;)g Fx(E)912 890
y Fk(i)925 883 y Fz(f)p Fx(I)t(;)g FA(fold)1077 861 y Fk(L)1103
883 y Fz(f)p Fx(g)1151 890 y Fm(1)1171 883 y Fx(;)g(:::;)g(g)1280
890 y Fk(n)1302 883 y Fz(gg)p 655 902 698 2 v Fx(;)g(P)1405
890 y Fm(1)1425 883 y Fz(i)p FA(;)g Fx(g)1489 890 y Fk(i)427
972 y FA(=)-8 b Fz(\))41 b(h)p Fx(\022)591 954 y Fk(E)617 959
y Ff(i)633 972 y FA(;)8 b Fx(E)691 979 y Fk(i)705 972 y Fz(f)p
Fx(P)761 979 y Fm(0)781 972 y FA(;)g Fx(I)p 730 989 99 2 v
3 w(;)g(I)t FA(;)g(fold)977 951 y Fk(L)1003 972 y Fz(f)p Fx(g)1051
979 y Fm(1)1071 972 y Fx(;)g(:::;)g(g)1180 979 y Fk(n)1202
972 y Fz(gg)p Fx(;)g(P)1305 979 y Fm(1)1325 972 y Fz(i)p FA(;)g
Fx(g)1389 979 y Fk(i)427 1062 y FA(=)-8 b Fz(\))41 b(h)p Fx(\022)591
1044 y Fk(E)617 1049 y Ff(i)633 1062 y FA(;)8 b Fx(E)691 1069
y Fk(i)705 1062 y Fz(f)p Fx(P)761 1069 y Fm(0)781 1062 y Fx(;)g(I)t
FA(;)g(fold)930 1041 y Fk(L)956 1062 y Fz(f)p Fx(g)1004 1069
y Fm(1)1024 1062 y Fx(;)g(:::;)g(g)1133 1069 y Fk(n)1155 1062
y Fz(gg)p 803 1081 403 2 v Fx(;)g(P)1258 1069 y Fm(1)1278 1062
y Fz(i)p FA(;)g Fx(g)1342 1069 y Fk(i)427 1152 y FA(=)-8 b
Fz(\))41 b(h)p Fx(\022)591 1134 y Fk(E)617 1139 y Ff(i)633
1152 y FA(;)8 b Fx(E)691 1159 y Fk(i)705 1152 y Fz(f)p Fx(P)761
1159 y Fm(0)781 1152 y Fx(;)g FA(fold)883 1130 y Fk(L)909 1152
y Fz(f)p Fx(g)957 1159 y Fm(1)977 1152 y Fx(;)g(:::;)g(g)1086
1159 y Fk(n)1108 1152 y Fz(gg)p 567 1171 591 2 v Fx(;)g(P)1211
1159 y Fm(1)1231 1152 y Fz(i)p FA(;)g Fx(g)1295 1159 y Fk(i)427
1241 y FA(=)-8 b Fz(\))41 b(h)p Fx(map)660 1223 y Fk(E)686
1228 y Ff(i)701 1241 y Fz(f)p Fx(P)757 1248 y Fm(0)777 1241
y Fx(;)8 b FA(fold)879 1220 y Fk(L)905 1241 y Fz(f)p Fx(g)953
1248 y Fm(1)973 1241 y Fx(;)g(:::;)g(g)1082 1248 y Fk(n)1104
1241 y Fz(gg)p Fx(;)g(P)1207 1248 y Fm(1)1227 1241 y Fz(i)p
FA(;)g Fx(g)1291 1248 y Fk(i)150 1344 y FA(The)17 b(fold)g(com)o(binator)f
(is)h(a)g(tail)f(recursiv)o(e)g(function)g(applied)h(to)g(all)g(state)g(comp)
q(onen)o(ts)f(of)i(a)150 1445 y(term)d(b)q(efore)h(the)g(phrase)h
Fx(g)675 1452 y Fk(i)705 1445 y FA(is)f(applied.)150 1689 y
Fs(5.1.4.)32 b(The)22 b(case)f(com)n(binator)150 1833 y FA(The)16
b(case)g(op)q(eration)h(is)e(a)i(sp)q(ecial)e(instance)h(of)g(the)g(fold,)f
(where)h(the)g(maps)f(are)h(only)g(applied)150 1934 y(to)j(the)f(\\head")h(v)
m(alue)f(of)g(the)g(data)h(structure)f(\(ie.)27 b(it)18 b(is)g(non{recursiv)o
(e\).)26 b(The)18 b(com)o(binator)150 2035 y(for)f(the)f(case)g(com)o
(binator)f(is:)252 2178 y Fx(case)344 2161 y Fk(L)370 2178
y Fz(f)p Fx(E)431 2185 y Fm(1)451 2178 y FA(\()p Fx(A;)8 b(L)p
FA(\()p Fx(A)p FA(\)\))i Fz(\002)h Fx(\033)k Fz(!)f Fx(C)q(;)8
b(:::;)g(E)981 2185 y Fk(n)1002 2178 y FA(\()p Fx(A;)g(L)p
FA(\()p Fx(A)p FA(\)\))i Fz(\002)h Fx(\033)16 b Fz(!)d Fx(C)t
Fz(g)41 b FA(:)g Fx(L)p FA(\()p Fx(A)p FA(\))11 b Fz(\002)g
Fx(\033)k Fz(!)f Fx(C)150 2311 y FA(The)i(rewrite)g(rule)f(for)i(the)f(case)g
(com)o(binator)f(is:)754 2450 y Fx(c)775 2457 y Fk(i)800 2450
y Fz(\002)c Fx(\033)r FA(;)d Fx(case)p Fz(f)p Fx(h)1048 2457
y Fm(1)1066 2450 y Fx(;)g(:::;)g(h)1180 2457 y Fk(n)1202 2450
y Fz(g)14 b(!)f Fx(h)1332 2457 y Fk(i)150 2588 y FA(where)j
Fx(h)319 2595 y Fk(i)347 2588 y FA(:)d Fx(E)410 2595 y Fk(i)424
2588 y FA(\()p Fx(A;)8 b(L)p FA(\()p Fx(A)p FA(\)\))j Fz(\002)f
Fx(\033)16 b Fz(!)d Fx(C)t FA(.)p eop
%%Page: 60 69
68 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(60)150 149 y FB(5.2.)42 b(T)-7
b(ranslation)27 b(to)g(com)n(binators)200 251 y FA(After)15
b(the)g(translation)i(from)e(term)f(logic)h(to)h(com)o(binators)f(extended)g
(b)q(elo)o(w,)g(all)h(free)f(v)m(ari-)150 329 y(ables)23 b(are)h(eliminated)d
(from)h(the)h(resultan)o(t)g(com)o(binator)g(expression.)42
b(The)24 b(en)o(vironmen)o(t)150 406 y(passing)f(mec)o(hanism)18
b(for)k(the)g(inductiv)o(e)e(com)o(binators)h(is)g(the)h(same)e(as)j(that)f
(for)g(abstrac-)150 483 y(tions.)36 b(Before)20 b(the)h(inductiv)o(e)e(com)o
(binator)h(is)g(called,)h(a)g(pair)g(is)g(created,)g(where)g(the)g(\014rst)
150 560 y(comp)q(onen)o(t)15 b(is)h(the)g(input,)g(while)f(the)h(second)h
(comp)q(onen)o(t)e(is)h(the)g(en)o(vironmen)o(t.)233 663 y
Fo(\()p Fq(T)273 669 y Fl(10)309 663 y Fo(\))41 b Fn(T)17 b
Fo([)p Fq(v)c Fn(7!)e Fq(c)522 669 y Fe(i)536 663 y Fo(\()p
Fq(t)p Fo(\)])g(=)h Fn(T)17 b Fo([)p Fq(v)c Fn(7!)e Fq(t)p
Fo(])6 b(;)h Fq(c)858 669 y Fe(i)885 663 y Fo(where)15 b Fq(c)f
Fo(is)g(a)g(constructor)q Fq(;)233 888 y Fo(\()p Fq(T)273 894
y Fl(11)309 888 y Fo(\))41 b Fn(T)406 767 y Fi(2)406 840 y(6)406
865 y(6)406 890 y(6)406 917 y(4)434 888 y Fq(v)13 b Fn(7!)520
766 y Fi(8)520 803 y(>)520 815 y(>)520 828 y(>)520 840 y(<)520
915 y(>)520 927 y(>)520 940 y(>)520 952 y(:)586 813 y Fq(c)604
819 y Fl(1)622 813 y Fo(\()p Fq(v)658 819 y Fl(1)677 813 y
Fo(\))42 b Fn(7!)f Fq(t)833 819 y Fl(1)750 864 y Fo(.)750 881
y(.)750 898 y(.)578 972 y Fq(c)596 978 y Fe(n)618 972 y Fo(\()p
Fq(v)654 978 y Fe(n)677 972 y Fo(\))h Fn(7!)f Fq(t)833 978
y Fe(n)876 766 y Fi(9)876 803 y(>)876 815 y(>)876 828 y(>)876
840 y(=)876 915 y(>)876 927 y(>)876 940 y(>)876 952 y(;)920
888 y Fo(\()p Fq(t)p Fo(\))967 767 y Fi(3)967 840 y(7)967 865
y(7)967 890 y(7)967 917 y(5)1007 888 y Fo(=)1071 855 y Fn(hT)17
b Fo([)p Fq(v)c Fn(7!)e Fq(t)p Fo(])c Fq(;)g(I)s Fn(i)p Fo(;)g
Fq(case)1412 840 y Fe(L)1437 855 y Fn(f)41 b(T)17 b Fo([\()p
Fq(v)1587 861 y Fl(1)1605 855 y Fq(;)7 b(v)q Fo(\))12 b Fn(7!)f
Fq(t)1741 861 y Fl(1)1760 855 y Fo(])6 b Fq(;)h(:::;)1499 930
y Fn(T)17 b Fo([\()p Fq(v)1587 936 y Fe(n)1609 930 y Fq(;)7
b(v)q Fo(\))12 b Fn(7!)f Fq(t)1745 936 y Fe(n)1768 930 y Fo(])i
Fn(g)p Fq(;)233 1197 y Fo(\()p Fq(T)273 1203 y Fl(12)309 1197
y Fo(\))41 b Fn(T)406 1076 y Fi(2)406 1149 y(6)406 1174 y(6)406
1199 y(6)406 1226 y(4)434 1197 y Fq(v)13 b Fn(7!)520 1075 y
Fi(8)520 1112 y(>)520 1124 y(>)520 1137 y(>)520 1149 y(<)520
1224 y(>)520 1236 y(>)520 1249 y(>)520 1261 y(:)543 1075 y(\014)543
1099 y(\014)543 1124 y(\014)543 1149 y(\014)543 1174 y(\014)543
1199 y(\014)543 1224 y(\014)543 1249 y(\014)543 1274 y(\014)586
1122 y Fq(c)604 1128 y Fl(1)634 1122 y Fo(:)e Fq(v)677 1128
y Fl(1)737 1122 y Fn(7!)41 b Fq(t)835 1128 y Fl(1)752 1173
y Fo(.)752 1190 y(.)752 1207 y(.)578 1281 y Fq(c)596 1287 y
Fe(n)630 1281 y Fo(:)11 b Fq(v)673 1287 y Fe(n)737 1281 y Fn(7!)41
b Fq(t)835 1287 y Fe(n)879 1075 y Fi(\014)879 1099 y(\014)879
1124 y(\014)879 1149 y(\014)879 1174 y(\014)879 1199 y(\014)879
1224 y(\014)879 1249 y(\014)879 1274 y(\014)879 1075 y(9)879
1112 y(>)879 1124 y(>)879 1137 y(>)879 1149 y(=)879 1224 y(>)879
1236 y(>)879 1249 y(>)879 1261 y(;)922 1197 y Fo(\()p Fq(t)p
Fo(\))969 1076 y Fi(3)969 1149 y(7)969 1174 y(7)969 1199 y(7)969
1226 y(5)1009 1197 y Fo(=)1074 1164 y Fn(hT)17 b Fo([)o Fq(v)c
Fn(7!)e Fq(t)p Fo(])c Fq(;)g(I)s Fn(i)p Fo(;)g Fq(f)t(ol)q(d)1415
1146 y Fe(L)1440 1164 y Fn(f)41 b(T)17 b Fo([\()p Fq(v)1590
1170 y Fl(1)1609 1164 y Fq(;)7 b(v)q Fo(\))k Fn(7!)h Fq(t)1745
1170 y Fl(1)1763 1164 y Fo(])7 b Fq(;)g(:::;)1502 1239 y Fn(T)17
b Fo([\()p Fq(v)1590 1245 y Fe(n)1613 1239 y Fq(;)7 b(v)q Fo(\))k
Fn(7!)h Fq(t)1749 1245 y Fe(n)1771 1239 y Fo(])h Fn(g)p Fq(;)233
1506 y Fo(\()p Fq(T)273 1512 y Fl(13)309 1506 y Fo(\))41 b
Fn(T)406 1385 y Fi(2)406 1458 y(6)406 1483 y(6)406 1508 y(6)406
1535 y(4)434 1506 y Fq(v)13 b Fn(7!)e Fq(L)555 1384 y Fi(8)555
1421 y(>)555 1433 y(>)555 1446 y(>)555 1458 y(<)555 1533 y(>)555
1546 y(>)555 1558 y(>)555 1570 y(:)626 1431 y Fq(v)646 1437
y Fl(1)706 1431 y Fn(7!)41 b Fq(t)804 1437 y Fl(1)721 1483
y Fo(.)721 1499 y(.)721 1516 y(.)613 1590 y Fq(v)633 1596 y
Fe(m)706 1590 y Fn(7!)g Fq(t)804 1596 y Fe(m)857 1384 y Fi(9)857
1421 y(>)857 1433 y(>)857 1446 y(>)857 1458 y(=)857 1533 y(>)857
1546 y(>)857 1558 y(>)857 1570 y(;)900 1506 y Fo(\()p Fq(t)p
Fo(\))947 1385 y Fi(3)947 1458 y(7)947 1483 y(7)947 1508 y(7)947
1535 y(5)987 1506 y Fo(=)1051 1473 y Fn(hT)18 b Fo([)o Fq(v)13
b Fn(7!)e Fq(t)p Fo(])c Fq(;)g(I)s Fn(i)p Fo(;)g Fq(map)1393
1458 y Fe(L)1417 1473 y Fn(f)42 b(T)17 b Fo([)o(\()p Fq(v)1567
1479 y Fl(1)1586 1473 y Fq(;)7 b(v)q Fo(\))12 b Fn(7!)f Fq(t)1722
1479 y Fl(1)1741 1473 y Fo(])6 b Fq(;)h(:::;)1480 1548 y Fn(T)17
b Fo([)o(\()p Fq(v)1567 1554 y Fe(m)1599 1548 y Fq(;)7 b(v)q
Fo(\))12 b Fn(7!)f Fq(t)1735 1554 y Fe(m)1766 1548 y Fo(])j
Fn(g)p Fq(;)164 1689 y FA(where)g Fx(n)g FA(is)g(the)g(n)o(um)o(b)q(er)e(of)i
(constructions)h(and)f Fx(m)g FA(is)g(the)g(n)o(um)o(b)q(er)e(of)i
(parametric)f(v)m(ariables.)150 1882 y FB(5.3.)42 b(Rewrite)27
b(rules)e(and)i(mac)n(hine)f(transitions)200 1999 y FA(The)16
b(rewrite)f(rules)h(for)h(the)f(basic)g(t)o(yp)q(es)g(as)h(describ)q(ed)e(in)
h(section)g(5.1.2)h(are)f(as)h(follo)o(ws:)416 2113 y(\()p
Fx(R)472 2120 y Fm(7)492 2113 y FA(\))215 b Fz(h)p Fx(v)769
2120 y Fm(0)788 2113 y Fx(;)8 b(v)834 2120 y Fm(1)854 2113
y Fz(i)p FA(;)g Fx(map)987 2094 y Fm(1)1007 2113 y Fz(fg)42
b FA(=)-8 b Fz(\))40 b Fx(v)1243 2120 y Fm(0)416 2202 y FA(\()p
Fx(R)472 2209 y Fm(8)492 2202 y FA(\))h Fz(hh)p Fx(v)614 2209
y Fm(0)634 2202 y Fx(;)8 b(v)680 2209 y Fm(1)699 2202 y Fz(i)p
Fx(;)g(\033)r Fz(i)p FA(;)g Fx(map)904 2184 y Fr(\002)934 2202
y Fz(f)p Fx(f)s(;)g(g)r Fz(g)41 b FA(=)-8 b Fz(\))40 b(hh)p
Fx(v)1281 2209 y Fm(0)1302 2202 y Fx(;)8 b(\033)r Fz(i)p Fx(;)g
Fz(h)p Fx(v)1438 2209 y Fm(1)1457 2202 y Fx(;)g(\033)r Fz(ii)p
FA(;)g Fx(f)16 b Fz(\002)11 b Fx(g)150 2305 y FA(These)16 b(rules)g(pro)q
(duce)h(the)f(corresp)q(onding)h(state)f(transitions)h(for)g(the)f(abstract)h
(mac)o(hine:)p 349 2373 1402 2 v 348 2448 2 75 v 431 2448 V
453 2425 a Fq(v)226 b(c)264 b(d)p Fn(j)p Fq(f)154 b(v)1210
2410 y Fp(0)1345 2425 y Fq(c)1363 2410 y Fp(0)1416 2425 y Fq(d)1438
2410 y Fp(0)1449 2425 y Fn(j)p Fq(f)1485 2410 y Fp(0)p 1750
2448 V 349 2449 1402 2 v 348 2524 2 75 v 370 2502 a Fo(14)p
431 2524 V 41 w Fn(h)p Fq(v)q(;)7 b(\033)q Fn(i)149 b Fq(map)778
2487 y Fl(1)797 2502 y Fn(fg)p Fq(:c)112 b(d)77 b Fn(\000)-7
b(!)42 b Fq(v)136 b(c)53 b(d)p 1750 2524 V 348 2599 V 370 2576
a Fo(15)p 431 2599 V 41 w Fn(hh)p Fq(v)505 2582 y Fl(0)524
2576 y Fq(;)7 b(v)563 2582 y Fl(1)581 2576 y Fn(i)p Fq(;)g(\033)q
Fn(i)42 b Fq(map)778 2561 y Fp(\002)806 2576 y Fn(f)p Fq(f)r(;)7
b(g)q Fn(g)p Fq(:c)41 b(d)77 b Fn(\000)-7 b(!)42 b(h)p Fq(v)1225
2582 y Fl(0)1243 2576 y Fq(;)7 b(\033)q Fn(i)42 b Fq(f)51 b
Fo(pr)1455 2586 y Fl(0)1474 2576 y Fo(\()p Fn(h)p Fq(v)1526
2582 y Fl(1)1545 2576 y Fq(;)7 b(\033)q Fn(i)p Fq(;)g(g)q(;)g(c)p
Fo(\))p Fq(:d)p 1750 2599 V 349 2600 1402 2 v eop
%%Page: 61 70
69 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(61)150 141 y FA(Notice)15 b(that)h(the)g(state)g
(transition)h(for)f(the)g Fx(map)1085 123 y Fr(\002)1130 141
y FA(com)o(binator)f(maps)g Fx(f)22 b FA(o)o(v)o(er)15 b(the)h(\014rst)g
(com-)150 234 y(p)q(onen)o(t)e(and)g(sa)o(v)o(es)e Fx(g)k FA(on)e(the)f(dump)
f(so)i(that)g(it)e(can)i(b)q(e)f(mapp)q(ed)g(o)o(v)o(er)f(the)h(second)h
(comp)q(onen)o(t)150 327 y(of)19 b(the)f(pair.)29 b(In)18 b(addition,)h(eac)o
(h)f(comp)q(onen)o(t)f(of)i(the)g(pair)f(is)h(strengthened)f(with)h(the)f(en)
o(vi-)150 419 y(ronmen)o(t)d Fx(\033)r FA(.)200 512 y(Listed)f(b)q(elo)o(w)h
(is)f(a)h(summary)d(of)j(the)f(rewrite)f(rules)h(asso)q(ciated)i(with)e
(inductiv)o(e)e(datat)o(yp)q(es)150 605 y(\(case,)k(fold)g(and)h(map\).)171
721 y(\()p Fx(R)227 728 y Fm(9)247 721 y FA(\))77 b Fz(h)p
Fx(c)383 728 y Fk(i)398 721 y FA(;)8 b Fx(v)r(;)g(\033)r Fz(i)p
FA(;)g Fx(case)630 703 y Fk(L)656 721 y Fz(f)p Fx(f)705 728
y Fm(1)724 721 y Fx(;)g(:::;)g(f)834 728 y Fk(n)856 721 y Fz(g)42
b FA(=)-8 b Fz(\))41 b(h)p Fx(v)r(;)8 b(\033)r Fz(i)p FA(;)g
Fx(f)1206 728 y Fk(i)171 811 y FA(\()p Fx(R)227 818 y Fm(10)264
811 y FA(\))60 b Fz(h)p Fx(c)383 818 y Fk(i)397 811 y FA(;)8
b Fx(v)r(;)g(\033)r Fz(i)p FA(;)g Fx(f)d(ol)q(d)631 790 y Fk(L)657
811 y Fz(f)p Fx(g)705 818 y Fm(1)725 811 y Fx(;)j(:::;)g(g)834
818 y Fk(n)856 811 y Fz(g)42 b FA(=)-8 b Fz(\))41 b(h)p Fx(v)r(;)8
b(\033)r Fz(i)p FA(;)g Fz(h)p Fx(map)1293 793 y Fk(E)1319 798
y Ff(i)1334 811 y Fz(f)p Fx(P)1390 818 y Fm(0)1410 811 y Fx(;)g(f)d(ol)q(d)
1526 790 y Fk(L)1552 811 y Fz(f)p Fx(g)1600 818 y Fm(1)1620
811 y Fx(;)j(:::;)g(g)1729 818 y Fk(n)1751 811 y Fz(gg)p Fx(;)g(P)1854
818 y Fm(1)1874 811 y Fz(i)p FA(;)g Fx(g)1938 818 y Fk(i)171
901 y FA(\()p Fx(R)227 908 y Fm(11)264 901 y FA(\))42 b Fz(h)p
Fx(c)365 908 y Fk(i)379 901 y FA(;)8 b Fx(v)r(;)g(\033)r Fz(i)p
FA(;)g Fx(map)612 883 y Fk(L)638 901 y Fz(f)p Fx(h)691 908
y Fm(1)710 901 y Fx(;)g(:::;)g(h)824 908 y Fk(m)856 901 y Fz(g)42
b FA(=)-8 b Fz(\))41 b(h)p Fx(v)r(;)8 b(\033)r Fz(i)p FA(;)g
Fx(map)1274 883 y Fk(E)1300 888 y Ff(i)1315 901 y Fz(f)p Fx(h)1368
908 y Fm(1)1387 901 y Fx(;)g(:::;)g(h)1501 908 y Fk(m)1533
901 y Fx(;)1060 990 y(map)1153 972 y Fk(L)1179 990 y Fz(f)p
Fx(h)1232 997 y Fm(1)1251 990 y Fx(;)g(:::;)g(h)1365 997 y
Fk(m)1397 990 y Fz(gg)p FA(;)g Fx(c)1490 997 y Fk(i)150 1093
y FA(F)l(or)17 b(the)g(ab)q(o)o(v)o(e)h(rules,)e(the)h(pair)g(on)h(the)f(v)m
(alue)g(stac)o(k)g(holds)h(the)f(data)h(structure)f(in)g(the)g(\014rst)150
1186 y(comp)q(onen)o(t,)e(and)i(en)o(vironmen)o(t)c(in)j(the)g(second)g(comp)
q(onen)o(t.)200 1264 y(The)i(corresp)q(onding)i(state)f(transitions)g(deriv)o
(ed)e(directly)g(from)h(the)g(ab)q(o)o(v)o(e)h(rewrite)e(rules)150
1342 y(are:)p 154 1400 1793 2 v 153 1475 2 75 v 236 1475 V
258 1453 a Fq(v)162 b(c)368 b(d)p Fn(j)p Fq(f)154 b(v)1055
1438 y Fp(0)1173 1453 y Fq(c)1191 1438 y Fp(0)1765 1453 y Fq(d)1787
1438 y Fp(0)1798 1453 y Fn(j)p Fq(f)1834 1438 y Fp(0)p 1945
1475 V 154 1477 1793 2 v 153 1552 2 75 v 175 1529 a Fo(16)p
236 1552 V 41 w Fn(h)p Fq(c)292 1535 y Fe(i)306 1529 y Fq(:v)q(;)7
b(\033)q Fn(i)41 b Fq(case)519 1514 y Fe(L)544 1529 y Fn(f)p
Fq(f)585 1535 y Fl(1)603 1529 y Fq(;)7 b(:::;)g(f)697 1535
y Fe(n)718 1529 y Fn(g)p Fq(:c)57 b(d)78 b Fn(\000)-7 b(!)41
b(h)p Fq(v)q(;)7 b(\033)q Fn(i)42 b Fq(f)1193 1535 y Fe(i)1765
1529 y Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1945 1552 V 153
1626 V 175 1604 a Fo(17)p 236 1626 V 41 w Fn(h)p Fq(c)292 1610
y Fe(i)306 1604 y Fq(:v)q(;)7 b(\033)q Fn(i)41 b Fq(f)t(ol)q(d)520
1585 y Fe(L)545 1604 y Fn(f)p Fq(g)586 1610 y Fl(1)604 1604
y Fq(;)7 b(:::;)g(g)698 1610 y Fe(n)718 1604 y Fn(g)p Fq(:c)57
b(d)78 b Fn(\000)-7 b(!)41 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)42
b(h)p Fq(map)1268 1589 y Fe(E)1292 1593 y Fc(i)1308 1604 y
Fn(f)p Fq(P)1356 1610 y Fl(0)1374 1604 y Fq(;)7 b(f)t(ol)q(d)1472
1585 y Fe(L)1497 1604 y Fn(f)p Fq(g)1538 1610 y Fl(1)1556 1604
y Fq(;)g(:::;)g(g)1650 1610 y Fe(n)1670 1604 y Fn(gg)p Fq(;)41
b Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1945 1626 V 153 1701
V 236 1701 V 1187 1679 a(P)1214 1685 y Fl(1)1232 1679 y Fn(i)p
Fq(:g)1280 1685 y Fe(i)p 1945 1701 V 153 1776 V 175 1753 a
Fo(18)p 236 1776 V 41 w Fn(h)p Fq(c)292 1759 y Fe(i)306 1753
y Fq(:v)q(;)7 b(\033)q Fn(i)41 b Fq(map)519 1738 y Fe(L)544
1753 y Fn(f)p Fq(h)589 1759 y Fl(1)607 1753 y Fq(;)7 b(:::;)g(h)705
1759 y Fe(m)734 1753 y Fn(g)p Fq(:c)41 b(d)78 b Fn(\000)-7
b(!)41 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)42 b Fq(map)1252 1738
y Fe(E)1276 1742 y Fc(i)1292 1753 y Fn(f)p Fq(h)1337 1759 y
Fl(1)1355 1753 y Fq(;)7 b(:::;)g(h)1453 1759 y Fe(m)1482 1753
y Fq(;)271 b Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1945 1776
V 153 1850 V 236 1850 V 1187 1828 a(map)1266 1813 y Fe(L)1291
1828 y Fn(f)p Fq(h)1336 1834 y Fl(1)1354 1828 y Fq(;)7 b(:::;)g(h)1452
1834 y Fe(m)1481 1828 y Fn(gg)p Fq(:c)1553 1834 y Fe(i)p 1945
1850 V 153 1925 V 175 1903 a Fo(19)p 236 1925 V 41 w Fq(v)162
b(u:c)332 b(d)78 b Fn(\000)-7 b(!)41 b Fq(u:v)83 b(c)574 b(d)p
1945 1925 V 154 1927 1793 2 v 150 2003 a FA(An)22 b(additional)f(state)i
(transition,)g(19,)g(stac)o(ks)f(constructors)h(on)o(to)f(the)g(v)m(alue)f
(stac)o(k.)38 b(This)150 2096 y(transition)16 b(also)h(applies)f(to)h
(coinductiv)o(e)d(com)o(binators)h(describ)q(ed)h(in)g(section)g(5.5.)150
2297 y FB(5.4.)42 b(Examples)26 b(of)h(inductiv)n(e)d(datat)n(yp)r(es)200
2415 y FA(This)c(section)f(pro)o(vides)g(a)i(n)o(um)o(b)q(er)d(of)i(examples)
d(of)k(ho)o(w)f(de\014ning)g(inductiv)o(e)d(datat)o(yp)q(es)150
2508 y(will)k(deliv)o(er)f(the)i(case,)h(fold)f(and)h(map)e(com)o(binators)g
(to)h(the)g(system.)37 b(In)22 b(addition,)i(they)150 2600
y(illustrate)d(the)g(translation)h(from)e(term)g(logic)h(to)h(com)o(binators)
f(for)h(eac)o(h)f(of)h(the)f(inductiv)o(e)p eop
%%Page: 62 71
70 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(62)150 141 y FA(op)q(erations.)150
400 y Fs(5.4.1.)32 b(Bo)r(oleans)150 550 y FA(Recall)15 b(the)h(de\014nition)
g(of)g(the)g(b)q(o)q(olean)i(datat)o(yp)q(e:)458 636 y Fj(data)24
b(bool)g(->)h(C)g(=)g(true)g(:)g(1)g(->)g(C)842 696 y(|)g(false:)f(1)h(->)g
(C.)150 826 y FA(whic)o(h)13 b(sa)o(ys)h(that)g(the)f(inductiv)o(e)f(datat)o
(yp)q(e)i Fj(bool)e FA(with)i(no)g(parametric)e(v)m(ariables)h(and)i(a)f
(state)150 929 y(v)m(ariable)i Fx(C)k FA(has)d(constructors)g(with)f(domain)f
(t)o(yp)q(es:)829 1070 y Fx(tr)q(ue)e FA(:)g Fx(E)997 1077
y Fk(tr)q(ue)1066 1070 y FA(\()p 1088 1070 15 2 v 17 w Fx(;)8
b(C)t FA(\))13 b(=)h(1)808 1211 y Fx(f)5 b(al)q(se)13 b FA(:)g
Fx(E)1001 1218 y Fk(f)t(alse)1086 1211 y FA(\()p 1108 1211
V 18 w Fx(;)8 b(C)t FA(\))13 b(=)h(1)602 1446 y(1)e Fz(\002)f
Fx(\033)p 734 1435 203 2 v 766 1412 a(tr)q(ue)f Fz(\002)h Fx(I)908
1434 y Fh(-)965 1446 y Fx(bool)i Fz(\002)d Fx(I)1149 1434 y
Fh(\033)p 1166 1435 201 2 v 1158 1412 a Fx(f)5 b(al)q(se)10
b Fz(\002)h Fx(I)1383 1446 y FA(1)g Fz(\002)g Fx(\033)676 1478
y Fh(Z)716 1507 y(Z)755 1537 y(Z)795 1566 y(Z)834 1596 y(Z)874
1625 y(Z)913 1655 y(Z)952 1685 y(Z)992 1714 y(Z)795 1634 y
Fx(f)819 1641 y Fk(T)992 1714 y Fh(~)33 b(=)-42 b(\032)1106
1685 y(\032)1145 1655 y(\032)1185 1625 y(\032)1224 1596 y(\032)1264
1566 y(\032)1303 1537 y(\032)1343 1507 y(\032)1382 1478 y(\032)1253
1634 y Fx(f)1277 1641 y Fk(F)1030 1739 y Fx(Y)1016 1593 y(h)1050
1688 y Fh(?)p 1049 1493 2 13 v 1049 1529 V 1049 1566 V 1049
1602 V 1049 1639 V 1049 1675 V 150 1818 a FA(where)16 b Fx(h)e
FA(=)g Fx(f)5 b(ol)q(d)p Fz(f)p Fx(f)527 1825 y Fk(T)555 1818
y Fx(;)j(f)601 1825 y Fk(F)630 1818 y Fz(g)p FA(.)200 1921
y(Since)18 b(the)h(de\014nition)g(of)h Fj(bool)e FA(do)q(es)i(not)g(con)o
(tain)f(state)g(v)m(ariables,)h(the)f(fold)g(diagram)g(is)150
2025 y(not)c(recursiv)o(e.)k(Hence,)14 b(the)g(case)h(com)o(binator)e(and)j
(the)e(fold)h(com)o(binator)f(p)q(erform)g(the)g(same)150 2128
y(action.)21 b(In)14 b(addition,)h(the)g(fact)g(that)g(there)f(is)h(no)h
(parametric)d(v)m(ariables)i(means)f(the)g(the)h(map)150 2232
y(com)o(binator)g(acts)i(in)f(the)g(same)f(manner)g(as)i(the)f(iden)o(tit)o
(y)e(function.)200 2335 y(Consider)i(a)h(simple)d(example)g(using)j(the)f
Fj(and)f FA(function:)458 2421 y Fj(def)24 b(and\(x,y\))f(=)534
2481 y({)j(true)e(\(\))h(=>)g(y)534 2541 y(|)h(false\(\))d(=>)i(false)534
2600 y(})h(\(x\).)p eop
%%Page: 63 72
71 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(63)150 141 y FA(This)16 b(will)f(result)h(in)g
(the)g(follo)o(wing)g(translation:)178 294 y Fz(T)226 196 y
Fi(2)226 270 y(6)226 296 y(4)253 294 y FA(\()p Fx(x;)8 b(y)r
FA(\))13 b Fz(7!)444 195 y Fi(8)444 232 y(>)444 245 y(<)444
319 y(>)444 332 y(:)526 255 y Fx(tr)q(ue)p FA(\(\))41 b Fz(7!)h
Fx(y)502 345 y(f)5 b(al)q(se)p FA(\(\))40 b Fz(7!)i Fx(f)5
b(al)q(se)p FA(\(\))963 195 y Fi(9)963 232 y(>)963 245 y(=)963
319 y(>)963 332 y(;)1009 294 y FA(\()p Fx(x)p FA(\))1075 196
y Fi(3)1075 270 y(7)1075 296 y(5)p 178 378 925 2 v 219 443
a FA(=)-8 b Fz(\))299 450 y Fk(T)320 455 y Fg(8)380 443 y Fz(hT)22
b FA([)o(\()p Fx(x;)8 b(y)r FA(\))13 b Fz(7!)h Fx(x)p FA(])p
399 462 294 2 v -1 w Fx(;)8 b(I)t Fz(i)p FA(;)g Fx(case)875
425 y Fk(bool)936 443 y Fz(fT)21 b FA([)o(\(\(\))p Fx(;)8 b
FA(\()p Fx(x;)g(y)r FA(\)\))13 b Fz(7!)h Fx(y)r FA(])7 b Fx(;)h
Fz(T)21 b FA([\(\(\))p Fx(;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))k
Fz(7!)i Fx(f)5 b(al)q(se)p FA(\(\)])n Fz(g)219 532 y FA(=)-8
b Fz(\))299 539 y Fk(T)320 544 y Fg(3)380 532 y Fz(h)p Fx(P)430
539 y Fm(0)451 532 y FA(;)8 b Fz(T)21 b FA([)o Fx(x)14 b Fz(7!)f
Fx(x)p FA(])p 473 551 209 2 v Fx(;)8 b(I)t Fz(i)p FA(;)g Fx(case)863
514 y Fk(bool)923 532 y Fz(fT)21 b FA([\(\(\))p Fx(;)8 b FA(\()p
Fx(x;)g(y)r FA(\)\))13 b Fz(7!)g Fx(y)r FA(])8 b Fx(;)g Fz(T)21
b FA([)o(\(\(\))p Fx(;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))13 b
Fz(7!)g Fx(f)5 b(al)q(se)p FA(\(\)])o Fz(g)219 622 y FA(=)-8
b Fz(\))299 629 y Fk(T)320 634 y Fg(2)380 622 y Fz(h)p Fx(P)430
629 y Fm(0)451 622 y FA(;)8 b Fx(I)t(;)g(I)t Fz(i)p FA(;)g
Fx(case)681 604 y Fk(bool)741 622 y Fz(fT)21 b FA([)o(\(\(\))p
Fx(;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))13 b Fz(7!)h Fx(y)r FA(])p
766 641 390 2 v -1 w Fx(;)8 b Fz(T)21 b FA([)o(\(\(\))p Fx(;)8
b FA(\()p Fx(x;)g(y)r FA(\)\))13 b Fz(7!)g Fx(f)5 b(al)q(se)p
FA(\(\)])o Fz(g)219 712 y FA(=)-8 b Fz(\))299 719 y Fk(T)320
724 y Fg(3)380 712 y Fz(h)p Fx(P)430 719 y Fm(0)451 712 y FA(;)8
b Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(case)681 694 y Fk(bool)741
712 y Fz(f)p Fx(P)797 719 y Fm(1)817 712 y FA(;)g Fz(T)21 b
FA([)o(\()p Fx(x;)8 b(y)r FA(\))13 b Fz(7!)h Fx(y)r FA(])p
839 731 292 2 v -1 w Fx(;)8 b Fz(T)21 b FA([)o(\(\(\))p Fx(;)8
b FA(\()p Fx(x;)g(y)r FA(\)\))13 b Fz(7!)h Fx(f)5 b(al)q(se)p
FA(\(\)])n Fz(g)219 801 y FA(=)-8 b Fz(\))299 808 y Fk(T)320
813 y Fg(3)380 801 y Fz(h)p Fx(P)430 808 y Fm(0)451 801 y FA(;)8
b Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(case)681 783 y Fk(bool)741
801 y Fz(f)p Fx(P)797 808 y Fm(1)817 801 y FA(;)g Fx(P)870
808 y Fm(1)890 801 y FA(;)g Fz(T)21 b FA([)o Fx(y)16 b Fz(7!)d
Fx(y)r FA(])p 912 820 204 2 v -1 w Fx(;)8 b Fz(T)21 b FA([\(\(\))p
Fx(;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))13 b Fz(7!)g Fx(f)5 b(al)q(se)p
FA(\(\)])o Fz(g)219 891 y FA(=)-8 b Fz(\))299 898 y Fk(T)320
903 y Fg(2)380 891 y Fz(h)p Fx(P)430 898 y Fm(0)451 891 y FA(;)8
b Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(case)681 873 y Fk(bool)741
891 y Fz(f)p Fx(P)797 898 y Fm(1)817 891 y FA(;)g Fx(P)870
898 y Fm(1)890 891 y FA(;)g Fx(I)t(;)g Fz(T)20 b FA([\(\(\))p
Fx(;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))k Fz(7!)i Fx(f)5 b(al)q(se)p
FA(\(\)])p 960 910 518 2 v -1 w Fz(g)219 981 y FA(=)-8 b Fz(\))299
988 y Fk(T)320 993 y Fg(6)380 981 y Fz(h)p Fx(P)430 988 y Fm(0)451
981 y FA(;)8 b Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(case)681 963
y Fk(bool)741 981 y Fz(f)p Fx(P)797 988 y Fm(1)817 981 y FA(;)g
Fx(P)870 988 y Fm(1)890 981 y FA(;)g Fx(I)t(;)g Fz(T)20 b FA([\(\(\))p
Fx(;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))k Fz(7!)i FA(\(\)])p 960
1000 402 2 v -1 w(;)8 b Fx(f)d(al)q(se)p Fz(g)219 1070 y FA(=)-8
b Fz(\))299 1077 y Fk(T)320 1082 y Fg(1)380 1070 y Fz(h)p Fx(P)430
1077 y Fm(0)451 1070 y FA(;)8 b Fx(I)t(;)g(I)t Fz(i)p FA(;)g
Fx(case)681 1052 y Fk(bool)741 1070 y Fz(f)p Fx(P)797 1077
y Fm(1)817 1070 y FA(;)g Fx(P)870 1077 y Fm(1)890 1070 y FA(;)g
Fx(I)t(;)g FA(!;)g Fx(f)d(al)q(se)p Fz(g)150 1173 y FA(The)16
b(rewrite)g(rules)f(for)i Fj(bool)e FA(are:)497 1278 y Fz(h)p
Fx(c)537 1285 y Fk(i)552 1278 y FA(;)8 b Fx(v)r(;)g(\033)r
Fz(i)p FA(;)g Fx(case)786 1260 y Fk(bool)846 1278 y Fz(f)p
Fx(f)895 1285 y Fk(T)922 1278 y Fx(;)g(f)968 1285 y Fk(F)998
1278 y Fz(g)13 b FA(=)-8 b Fz(\))14 b(h)p Fx(v)r(;)8 b(\033)r
Fz(i)p FA(;)g Fx(f)1292 1285 y Fk(i)497 1367 y Fz(h)p Fx(c)537
1374 y Fk(i)552 1367 y FA(;)g Fx(v)r(;)g(\033)r Fz(i)p FA(;)g
Fx(f)d(ol)q(d)786 1349 y Fk(bool)848 1367 y Fz(f)p Fx(f)897
1374 y Fk(T)924 1367 y Fx(;)j(f)970 1374 y Fk(F)999 1367 y
Fz(g)14 b FA(=)-8 b Fz(\))13 b(h)p Fx(v)r(;)8 b(\033)r Fz(i)p
FA(;)g Fz(h)p Fx(map)1381 1349 y Fm(1)1400 1367 y Fz(fg)p Fx(;)g(P)1503
1374 y Fm(1)1523 1367 y Fz(i)p FA(;)g Fx(f)1588 1374 y Fk(i)497
1457 y Fz(h)p Fx(c)537 1464 y Fk(i)552 1457 y FA(;)g Fx(v)r(;)g(\033)r
Fz(i)p FA(;)g Fx(map)786 1439 y Fk(bool)847 1457 y Fz(fg)13
b FA(=)-8 b Fz(\))14 b(h)p Fx(v)r(;)8 b(\033)r Fz(i)p FA(;)g
Fx(map)1235 1439 y Fm(1)1253 1457 y Fz(fg)p FA(;)g Fx(c)1346
1464 y Fk(i)150 1560 y FA(where)16 b Fx(i)d Fz(2)h Fx(bool)q
FA(.)22 b(Hence)15 b(the)h(state)g(transitions)h(pro)q(duced)g(b)o(y)f(these)
f(rules)h(are:)p 333 1625 1434 2 v 332 1700 2 75 v 354 1678
a Fq(v)170 b(c)347 b(d)p Fn(j)p Fq(f)154 b(v)1138 1663 y Fp(0)1256
1678 y Fq(c)1274 1663 y Fp(0)1585 1678 y Fq(d)1607 1663 y Fp(0)1618
1678 y Fn(j)p Fq(f)1654 1663 y Fp(0)p 1766 1700 V 333 1702
1434 2 v 332 1776 2 75 v 354 1754 a Fn(h)p Fq(c)388 1760 y
Fe(i)402 1754 y Fq(:v)q(;)7 b(\033)q Fn(i)49 b Fq(case)622
1739 y Fe(bool)682 1754 y Fn(f)p Fq(f)723 1760 y Fe(T)750 1754
y Fq(;)7 b(f)789 1760 y Fe(F)816 1754 y Fn(g)p Fq(:c)42 b(d)77
b Fn(\000)-6 b(!)41 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)42 b Fq(f)1276
1760 y Fe(c)1291 1764 y Fc(i)1585 1754 y Fo(con)o(t\()p Fq(c)p
Fo(\))p Fq(:d)p 1766 1776 V 332 1851 V 354 1829 a Fn(h)p Fq(c)388
1835 y Fe(i)402 1829 y Fo(;)7 b Fq(v)q(;)g(\033)q Fn(i)42 b
Fq(f)t(ol)q(d)623 1814 y Fe(bool)683 1829 y Fn(f)p Fq(f)724
1835 y Fe(T)751 1829 y Fq(;)7 b(f)790 1835 y Fe(F)817 1829
y Fn(g)p Fq(:c)41 b(d)77 b Fn(\000)-6 b(!)41 b(h)p Fq(v)q(;)7
b(\033)q Fn(i)42 b(h)p Fq(map)1351 1814 y Fl(1)1370 1829 y
Fn(fg)p Fq(;)7 b(P)1458 1835 y Fl(1)1475 1829 y Fn(i)p Fo(;)g
Fq(f)1530 1835 y Fe(i)1585 1829 y Fo(con)o(t\()p Fq(c)p Fo(\))p
Fq(:d)p 1766 1851 V 332 1926 V 354 1903 a Fn(h)p Fq(c)388 1909
y Fe(i)402 1903 y Fo(;)g Fq(v)q(;)g(\033)q Fn(i)42 b Fq(map)623
1888 y Fe(bool)683 1903 y Fn(fg)p Fq(:c)154 b(d)77 b Fn(\000)-6
b(!)41 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)42 b Fq(map)1335 1888
y Fl(1)1354 1903 y Fn(fg)p Fq(:c)1426 1909 y Fe(i)1585 1903
y Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1766 1926 V 333 1927
1434 2 v 150 2010 a FA(When)13 b(the)h(abstract)g(mac)o(hine)d(ev)m(aluates)j
(the)f Fx(case)1128 1992 y Fk(bool)1203 2010 y FA(com)o(binator,)f(the)h
(appropriate)i(phrase)150 2100 y(is)i(selected)g(and)h(ev)m(aluated,)f(dep)q
(ending)h(on)g(the)g(input)f(constructor.)26 b(The)18 b(case)f(o)o(v)o(er)g
Fj(bool)p FA(s)150 2189 y(pro)o(vides)f(the)g(if{then{else)f(construct)h(for)
h(pro)o(viding)f(conditional)g(con)o(trol.)p eop
%%Page: 64 73
72 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(64)150 141 y Fs(5.4.2.)32 b(Natural)23
b(n)n(um)n(b)r(ers)150 346 y FA(The)16 b(natural)h(n)o(um)o(b)q(ers)e(are)h
(de\014ned)g(as:)765 459 y Fj(data)24 b(nat\(\))g(->)h(C)g(=)h(zero:)d(1)j
(->)f(C)1175 519 y(|)h(succ:)d(C)j(->)f(C.)150 703 y FA(similarly)c(to)j(the)
f Fj(bool)g FA(datat)o(yp)q(e,)i(there)e(are)h(no)g(parametric)e(v)m
(ariables.)44 b(Ho)o(w)o(ev)o(er,)23 b(the)150 833 y(domain)12
b(t)o(yp)q(e)h(of)g(the)g(the)f Fj(succ)g FA(constructor)h(con)o(tains)g(a)h
(state)f(v)m(ariable,)g(yielding)e(a)j(recursiv)o(e)150 964
y(de\014nition.)21 b(The)16 b(fold)g(diagram)g(sho)o(ws)h(ho)o(w)g(recursion)
f(is)g(handled:)627 1087 y(1)11 b Fz(\002)g Fx(\033)p 758 1076
109 2 v 728 1052 a(z)r(er)q(o)h Fz(\002)e Fx(I)838 1075 y Fh(-)895
1087 y Fx(nat)h Fz(\002)g Fx(\033)1073 1075 y Fh(\033)p 1089
1076 229 2 v 1107 1052 a Fx(succ)g Fz(\002)f Fx(I)1334 1087
y(nat)h Fz(\002)g Fx(\033)701 1133 y Fh(@)737 1169 y(@)773
1205 y(@)810 1242 y(@)846 1278 y(@)882 1314 y(@)919 1351 y(@)792
1275 y Fx(f)919 1351 y Fh(R)957 1380 y Fx(Y)977 1329 y Fh(?)p
976 1134 2 13 v 976 1170 V 976 1207 V 976 1243 V 976 1280 V
976 1316 V 983 1233 a Fx(f)5 b(ol)q(d)1076 1215 y Fk(nat)1131
1233 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)1011 1367 y Fh(\033)p 1028
1369 307 2 v 1257 1416 a Fx(g)1351 1380 y(Y)22 b Fz(\002)11
b Fx(\033)1396 1233 y Fz(h)1416 1329 y Fh(?)p 1415 1134 2 13
v 1415 1170 V 1415 1207 V 1415 1243 V 1415 1280 V 1415 1316
V 1422 1233 a Fx(f)5 b(ol)q(d)1515 1215 y Fk(nat)1570 1233
y Fz(f)p Fx(f)s(;)j(g)r Fz(g)d Fx(;)j(P)1752 1240 y Fm(1)1772
1233 y Fz(i)200 1504 y FA(The)16 b(rewrite)f(rules)h(for)h(the)f(fold)g(o)o
(v)o(er)f(the)h(natural)h(n)o(um)o(b)q(ers)e(are:)441 1609
y(zero)165 b Fz(h)p Fx(z)r(er)q(o)p FA(;)8 b Fx(v)r(;)g(I)t
Fz(i)p FA(;)g Fx(f)d(ol)q(d)1036 1591 y Fk(nat)1091 1609 y
Fz(f)p Fx(f)s(;)j(g)r Fz(g)572 1698 y FA(=)-8 b Fz(\))41 b(h)p
Fx(z)r(er)q(o)p FA(;)8 b Fx(v)r(;)g(I)t Fz(i)p FA(;)g Fz(h)p
Fx(map)1055 1680 y Fk(E)1081 1684 y Ff(z)q(er)q(o)1145 1698
y Fz(f)p Fx(P)1201 1705 y Fm(0)1222 1698 y Fx(;)g(f)d(ol)q(d)1337
1680 y Fk(nat)1392 1698 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)p Fx(;)g(P)1569
1705 y Fm(1)1589 1698 y Fz(i)p FA(;)g Fx(f)572 1788 y FA(=)-8
b Fz(\))41 b(h)p Fx(z)r(er)q(o)p FA(;)8 b Fx(v)r(;)g(I)t Fz(i)p
FA(;)g Fz(h)p Fx(map)1055 1770 y Fm(1)1074 1788 y Fz(fg)p Fx(;)g(P)1177
1795 y Fm(1)1197 1788 y Fz(i)p FA(;)g Fx(f)441 2057 y FA(succ)162
b Fz(h)p Fx(succ)p FA(;)8 b Fx(v)r(;)g(I)t Fz(i)p FA(;)g Fx(f)d(ol)q(d)1035
2039 y Fk(nat)1090 2057 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)572 2147
y FA(=)-8 b Fz(\))41 b(h)p Fx(succ)p FA(;)8 b Fx(v)r(;)g(I)t
Fz(i)p FA(;)g Fz(h)p Fx(map)1054 2129 y Fk(E)1080 2133 y Ff(succ)1144
2147 y Fz(f)p Fx(P)1200 2154 y Fm(0)1220 2147 y Fx(;)g(f)d(ol)q(d)1335
2129 y Fk(nat)1390 2147 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)p Fx(;)g(P)1567
2154 y Fm(1)1587 2147 y Fz(i)p FA(;)g Fx(g)572 2236 y FA(=)-8
b Fz(\))41 b(h)p Fx(succ)p FA(;)8 b Fx(v)r(;)g(I)t Fz(i)p FA(;)g
Fz(h)p Fx(f)d(ol)q(d)1054 2218 y Fk(nat)1109 2236 y Fz(f)p
Fx(f)s(;)j(g)r Fz(g)p Fx(;)g(P)1286 2243 y Fm(1)1305 2236 y
Fz(i)p FA(;)g Fx(g)150 2339 y FA(where)16 b Fx(f)22 b FA(and)17
b Fx(g)h FA(are)f(user)f(de\014ned)g(phrases.)23 b(In)16 b(the)g(succ)g
(case,)g(tail)g(recursion)g(is)g(p)q(erformed)150 2470 y(un)o(til)g(the)h
(zero)h(constructor)f(is)h(encoun)o(tered)e(and)i(the)f(zero)g(phrase)h(is)f
(executed.)24 b(Then)17 b(the)150 2600 y(c)o(hange)j(propagates)h(up)o(w)o
(ards,)g(executing)d(the)i(succ)f(phrase)h(at)h(eac)o(h)e(stage)h(of)g(the)g
(return.)p eop
%%Page: 65 74
73 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(65)150 141 y FA(The)16 b(state)h(transitions)f
(generated)h(for)f(the)g(abstract)h(mac)o(hine)d(are:)p 241
194 1618 2 v 240 284 2 90 v 262 257 a Fx(v)236 b(c)327 b(d)133
b(v)1054 239 y Fr(0)1185 257 y Fx(c)1206 239 y Fr(0)1650 257
y Fx(d)1675 239 y Fr(0)p 1858 284 V 241 285 1618 2 v 240 375
2 90 v 262 348 a Fz(h)p FA(zero)p Fx(:v)r(;)8 b(\033)r Fz(i)43
b Fx(f)5 b(ol)q(d)615 330 y Fk(nat)671 348 y Fz(f)p Fx(f)s(;)j(g)r
Fz(g)p Fx(:c)40 b(d)i Fz(!)f(h)p Fx(v)r(;)8 b(\033)r Fz(i)41
b(h)p Fx(map)1297 330 y Fm(1)1317 348 y Fz(fg)p Fx(;)8 b(P)1420
355 y Fm(1)1440 348 y Fz(i)p Fx(:f)153 b FA(con)o(t)o(\()p
Fx(c)p FA(\))p Fx(:d)p 1858 375 V 240 465 V 262 438 a Fz(h)p
FA(succ)p Fx(:v)r(;)8 b(\033)r Fz(i)40 b Fx(f)5 b(ol)q(d)615
420 y Fk(nat)671 438 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)p Fx(:c)40
b(d)i Fz(!)f(h)p Fx(v)r(;)8 b(\033)r Fz(i)41 b(h)p Fx(f)5 b(ol)q(d)1297
420 y Fk(nat)1354 438 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)p Fx(;)g(P)1531
445 y Fm(1)1550 438 y Fz(i)p Fx(:g)44 b FA(con)o(t)o(\()p Fx(c)p
FA(\))p Fx(:d)p 1858 465 V 241 466 1618 2 v 200 542 a FA(The)16
b(function)g(whic)o(h)g(adds)h(t)o(w)o(o)f(n)o(um)o(b)q(ers)f(together)h(is)g
(de\014ned)g(as:)765 641 y Fj(def)25 b(add\(x,y\))d(=)893 701
y({|)j(zero:)f(\(\))h(=>)g(y)919 761 y(|)g(succ:)f(n)51 b(=>)25
b(succ\(n\))919 821 y(|})g(\(x\).)150 976 y FA(The)16 b(translation)h(of)g
Fj(add)e FA(follo)o(ws:)182 1120 y Fz(T)230 1022 y Fi(2)230
1095 y(6)230 1121 y(4)258 1120 y FA(\()p Fx(x;)8 b(y)r FA(\))13
b Fz(7!)448 1020 y Fi(8)448 1058 y(>)448 1070 y(<)448 1145
y(>)448 1157 y(:)469 1020 y(\014)469 1045 y(\014)469 1070 y(\014)469
1095 y(\014)469 1120 y(\014)469 1145 y(\014)469 1170 y(\014)503
1080 y Fx(z)r(er)q(o)h FA(:)g(\(\))41 b Fz(7!)h Fx(y)514 1170
y(succ)13 b FA(:)h Fx(n)41 b Fz(7!)h Fx(succ)p FA(\()p Fx(n)p
FA(\))990 1020 y Fi(\014)990 1045 y(\014)990 1070 y(\014)990
1095 y(\014)990 1120 y(\014)990 1145 y(\014)990 1170 y(\014)987
1020 y(9)987 1058 y(>)987 1070 y(=)987 1145 y(>)987 1157 y(;)1032
1120 y FA(\()p Fx(x)p FA(\))1098 1022 y Fi(3)1098 1095 y(7)1098
1121 y(5)p 182 1204 944 2 v 224 1268 a FA(=)-8 b Fz(\))304
1275 y Fk(T)325 1280 y Fg(9)384 1268 y Fz(hT)22 b FA([)o(\()p
Fx(x;)8 b(y)r FA(\))13 b Fz(7!)h Fx(x)p FA(])p 403 1287 294
2 v -1 w Fx(;)8 b(I)t Fz(i)p FA(;)g Fx(f)d(ol)q(d)879 1250
y Fk(nat)935 1268 y Fz(fT)21 b FA([)o(\(\(\))p Fx(;)8 b FA(\()p
Fx(x;)g(y)r FA(\)\))13 b Fz(7!)g Fx(y)r FA(])8 b Fx(;)g Fz(T)21
b FA([)o(\()p Fx(n;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))13 b Fz(7!)h
Fx(succ)p FA(\()p Fx(n)p FA(\)])o Fz(g)224 1358 y FA(=)-8 b
Fz(\))304 1365 y Fk(T)325 1370 y Fg(3)384 1358 y Fz(h)p Fx(P)434
1365 y Fm(0)455 1358 y FA(;)8 b Fz(T)21 b FA([)o Fx(x)14 b
Fz(7!)g Fx(x)p FA(])p 477 1377 209 2 v -1 w Fx(;)8 b(I)t Fz(i)p
FA(;)g Fx(f)d(ol)q(d)867 1340 y Fk(nat)922 1358 y Fz(fT)21
b FA([\(\(\))p Fx(;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))k Fz(7!)i
Fx(y)r FA(])7 b Fx(;)h Fz(T)21 b FA([\()p Fx(n;)8 b FA(\()p
Fx(x;)g(y)r FA(\)\))13 b Fz(7!)g Fx(succ)p FA(\()p Fx(n)p FA(\)])p
Fz(g)224 1447 y FA(=)-8 b Fz(\))304 1454 y Fk(T)325 1459 y
Fg(2)384 1447 y Fz(h)p Fx(P)434 1454 y Fm(0)455 1447 y FA(;)8
b Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(f)d(ol)q(d)685 1429 y Fk(nat)739
1447 y Fz(fT)21 b FA([\(\(\))p Fx(;)8 b FA(\()p Fx(x;)g(y)r
FA(\)\))13 b Fz(7!)g Fx(y)r FA(])p 764 1466 390 2 v -1 w Fx(;)8
b Fz(T)21 b FA([\()p Fx(n;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))13
b Fz(7!)g Fx(succ)p FA(\()p Fx(n)p FA(\)])p Fz(g)224 1537 y
FA(=)-8 b Fz(\))304 1544 y Fk(T)325 1549 y Fg(3)384 1537 y
Fz(h)p Fx(P)434 1544 y Fm(0)455 1537 y FA(;)8 b Fx(I)t(;)g(I)t
Fz(i)p FA(;)g Fx(f)d(ol)q(d)685 1519 y Fk(nat)739 1537 y Fz(f)p
Fx(P)795 1544 y Fm(1)816 1537 y FA(;)j Fz(T)20 b FA([\()p Fx(x;)8
b(y)r FA(\))13 b Fz(7!)h Fx(y)r FA(])p 838 1556 292 2 v -1
w Fx(;)8 b Fz(T)21 b FA([)o(\()p Fx(n;)8 b FA(\()p Fx(x;)g(y)r
FA(\)\))13 b Fz(7!)h Fx(succ)p FA(\()p Fx(n)p FA(\)])o Fz(g)224
1627 y FA(=)-8 b Fz(\))304 1634 y Fk(T)325 1639 y Fg(3)384
1627 y Fz(h)p Fx(P)434 1634 y Fm(0)455 1627 y FA(;)8 b Fx(I)t(;)g(I)t
Fz(i)p FA(;)g Fx(f)d(ol)q(d)685 1609 y Fk(nat)739 1627 y Fz(f)p
Fx(P)795 1634 y Fm(1)816 1627 y FA(;)j Fx(P)869 1634 y Fm(1)889
1627 y FA(;)g Fz(T)21 b FA([)o Fx(y)15 b Fz(7!)f Fx(y)r FA(])p
911 1646 204 2 v -1 w Fx(;)8 b Fz(T)21 b FA([\()p Fx(n;)8 b
FA(\()p Fx(x;)g(y)r FA(\)\))13 b Fz(7!)g Fx(succ)p FA(\()p
Fx(n)p FA(\)])o Fz(g)224 1716 y FA(=)-8 b Fz(\))304 1723 y
Fk(T)325 1728 y Fg(2)384 1716 y Fz(h)p Fx(P)434 1723 y Fm(0)455
1716 y FA(;)8 b Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(f)d(ol)q(d)685
1698 y Fk(nat)739 1716 y Fz(f)p Fx(P)795 1723 y Fm(1)816 1716
y FA(;)j Fx(P)869 1723 y Fm(1)889 1716 y FA(;)g Fx(I)t(;)g
Fz(T)20 b FA([)o(\()p Fx(n;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))13
b Fz(7!)h Fx(succ)p FA(\()p Fx(n)p FA(\)])p 959 1735 515 2
v -1 w Fz(g)224 1806 y FA(=)-8 b Fz(\))304 1813 y Fk(T)325
1818 y Fg(6)384 1806 y Fz(h)p Fx(P)434 1813 y Fm(0)455 1806
y FA(;)8 b Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(f)d(ol)q(d)685 1788
y Fk(nat)739 1806 y Fz(f)p Fx(P)795 1813 y Fm(1)816 1806 y
FA(;)j Fx(P)869 1813 y Fm(1)889 1806 y FA(;)g Fx(I)t(;)g Fz(T)20
b FA([)o(\()p Fx(n;)8 b FA(\()p Fx(x;)g(y)r FA(\)\))13 b Fz(7!)h
Fx(n)p FA(])p 959 1825 384 2 v -1 w(;)8 b Fx(succ)p Fz(g)224
1896 y FA(=)-8 b Fz(\))304 1903 y Fk(T)325 1908 y Fg(3)384
1896 y Fz(h)p Fx(P)434 1903 y Fm(0)455 1896 y FA(;)8 b Fx(I)t(;)g(I)t
Fz(i)p FA(;)g Fx(f)d(ol)q(d)685 1878 y Fk(nat)739 1896 y Fz(f)p
Fx(P)795 1903 y Fm(1)816 1896 y FA(;)j Fx(P)869 1903 y Fm(1)889
1896 y FA(;)g Fx(I)t(;)g(P)990 1903 y Fm(0)1009 1896 y FA(;)g
Fz(T)21 b FA([)o Fx(n)14 b Fz(7!)g Fx(n)p FA(])p 1031 1915
211 2 v(;)8 b Fx(succ)p Fz(g)224 1985 y FA(=)-8 b Fz(\))304
1992 y Fk(T)325 1997 y Fg(3)384 1985 y Fz(h)p Fx(P)434 1992
y Fm(0)455 1985 y FA(;)8 b Fx(I)t(;)g(I)t Fz(i)p FA(;)g Fx(f)d(ol)q(d)685
1967 y Fk(nat)739 1985 y Fz(f)p Fx(P)795 1992 y Fm(1)816 1985
y FA(;)j Fx(P)869 1992 y Fm(1)889 1985 y FA(;)g Fx(I)t(;)g(P)990
1992 y Fm(0)1009 1985 y FA(;)g Fx(I)t FA(;)g Fx(succ)p Fz(g)150
2266 y Fs(5.4.3.)32 b(Lists)150 2442 y FA(Lists)17 b(are)f(de\014ned)g(in)g
(Charit)o(y)g(as:)765 2541 y Fj(data)24 b(list\(A\))f(->)i(C)h(=)f(nil)f(:)i
(1)f(->)g(C)1227 2600 y(|)g(cons:)f(A)h(*)g(C)g(->)g(C.)p eop
%%Page: 66 75
74 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(66)150 141 y FA(lists)23 b(pro)o(vide)g(a)h
(more)e(complex)f(datat)o(yp)q(e)j(example)d(where)i(b)q(oth)i(t)o(yp)q(e)e
(parameters)f(and)150 430 y(recursiv)o(e)14 b(de\014nitions)j(are)f(presen)o
(t.)k(The)d(fold)f(diagram)g(for)g(lists)g(is:)627 554 y(1)11
b Fz(\002)g Fx(\033)p 758 543 71 2 v 726 519 a(nil)g Fz(\002)g
Fx(I)800 542 y Fh(-)858 554 y Fx(l)q(ist)p FA(\()p Fx(A)p FA(\))e
Fz(\002)i Fx(\033)1110 541 y Fh(\033)p 1127 543 86 2 v 1071
519 a Fx(cons)h Fz(\002)e Fx(I)1229 554 y FA(\()p Fx(A)h Fz(\002)g
Fx(l)q(ist)p FA(\()p Fx(A)p FA(\)\))e Fz(\002)i Fx(\033)701
599 y Fh(@)737 636 y(@)773 672 y(@)810 708 y(@)846 745 y(@)882
781 y(@)919 817 y(@)792 741 y Fx(f)919 817 y Fh(R)957 846 y
Fx(Y)977 796 y Fh(?)p 976 796 2 213 v 983 700 a Fx(f)5 b(ol)q(d)1076
682 y Fk(list)1130 700 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)1011 834
y Fh(\033)p 1028 835 240 2 v 1127 882 a Fx(g)1283 846 y FA(\()p
Fx(A)j Fz(\002)g Fx(Y)g FA(\))g Fz(\002)g Fx(\033)1416 792
y Fh(?)p 1415 792 2 210 v 1422 700 a Fz(h)p Fx(\022)1465 679
y Fr(\002)1464 712 y Fk(R)1494 700 y FA(;)d(1)k Fz(\002)f Fx(f)5
b(ol)q(d)1695 682 y Fk(list)1749 700 y Fz(f)p Fx(f)s(;)j(g)r
Fz(g)p Fx(;)g(P)1926 707 y Fm(1)1946 700 y Fz(i)150 971 y FA(The)16
b(maps)g(for)g(eac)o(h)g(constructor)h(are:)700 1085 y Fx(map)793
1067 y Fk(E)793 1097 y(nil)839 1085 y FA(\()p Fx(f)882 1092
y Fk(A)910 1085 y Fx(;)8 b(f)956 1092 y Fk(C)986 1085 y FA(\))41
b(=)h Fx(map)1219 1067 y Fm(1)1238 1085 y Fz(fg)674 1175 y
Fx(map)767 1156 y Fk(E)767 1187 y(cons)839 1175 y FA(\()p Fx(f)882
1182 y Fk(A)910 1175 y Fx(;)8 b(f)956 1182 y Fk(C)986 1175
y FA(\))41 b(=)h Fx(map)1219 1156 y Fr(\002)1248 1175 y Fz(f)p
Fx(f)1297 1182 y Fk(A)1326 1175 y Fx(;)8 b(f)1372 1182 y Fk(C)1401
1175 y Fz(g)200 1278 y FA(The)16 b(rewrite)f(rules)h(generated)g(for)h(the)f
(case,)g(fold,)f(and)i(map)f(are:)250 1381 y Fo(case)250 1456
y Fn(h)p Fq(c)284 1462 y Fe(i)298 1456 y Fo(;)7 b Fq(v)q(;)g(\033)q
Fn(i)p Fo(;)g Fq(case)495 1441 y Fe(list)548 1456 y Fn(f)p
Fq(f)589 1462 y Fl(0)607 1456 y Fq(;)g(f)646 1462 y Fl(1)665
1456 y Fn(g)165 b Fo(=)-7 b Fn(\))42 b(h)p Fq(v)q(;)7 b(\033)q
Fn(i)p Fo(;)g Fq(f)1096 1462 y Fe(i)250 1605 y Fo(fold)250
1680 y Fn(h)p Fo(nil)o(;)g Fq(v)q(;)g(\033)q Fn(i)p Fo(;)g
Fq(f)t(ol)q(d)510 1661 y Fe(list)563 1680 y Fn(f)p Fq(g)604
1686 y Fe(nil)649 1680 y Fq(;)g(g)688 1686 y Fe(cons)756 1680
y Fn(g)74 b Fo(=)-7 b Fn(\))42 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)p
Fo(;)g Fn(h)p Fq(map)1171 1665 y Fe(E)1195 1669 y Fc(i)1211
1680 y Fn(f)p Fq(P)1259 1686 y Fl(0)1277 1680 y Fq(;)g(f)t(ol)q(d)1375
1661 y Fe(list)1427 1680 y Fn(f)p Fq(g)1468 1686 y Fe(nil)1513
1680 y Fq(;)g(g)1552 1686 y Fe(cons)1621 1680 y Fn(gg)p Fq(;)g(P)1709
1686 y Fl(1)1726 1680 y Fn(i)p Fo(;)g Fq(g)1781 1686 y Fe(nil)851
1755 y Fo(=)-7 b Fn(\))42 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)p
Fo(;)g Fn(h)p Fq(P)1119 1761 y Fl(0)1137 1755 y Fq(;)g(P)1183
1761 y Fl(1)1201 1755 y Fn(i)p Fo(;)g Fq(g)1256 1761 y Fe(nil)250
1904 y Fn(h)p Fo(cons)q(;)g Fq(v)q(;)g(\033)q Fn(i)p Fo(;)g
Fq(f)t(ol)q(d)543 1886 y Fe(list)596 1904 y Fn(f)p Fq(g)637
1910 y Fe(nil)681 1904 y Fq(;)g(g)720 1910 y Fe(cons)789 1904
y Fn(g)41 b Fo(=)-7 b Fn(\))42 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)p
Fo(;)g Fn(h)p Fq(map)1171 1889 y Fe(E)1195 1893 y Fc(i)1211
1904 y Fn(f)p Fq(P)1259 1910 y Fl(0)1277 1904 y Fq(;)g(f)t(ol)q(d)1375
1886 y Fe(list)1427 1904 y Fn(f)p Fq(g)1468 1910 y Fe(nil)1513
1904 y Fq(;)g(g)1552 1910 y Fe(cons)1621 1904 y Fn(gg)p Fq(;)g(P)1709
1910 y Fl(1)1726 1904 y Fn(i)p Fo(;)g Fq(g)1781 1910 y Fe(cons)851
1979 y Fo(=)-7 b Fn(\))42 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)p
Fo(;)g Fn(h)p Fq(map)1171 1964 y Fp(\002)1199 1979 y Fn(f)p
Fq(P)1247 1985 y Fl(0)1265 1979 y Fq(;)g(f)t(ol)q(d)1363 1960
y Fe(list)1416 1979 y Fn(f)p Fq(g)1457 1985 y Fe(nil)1501 1979
y Fq(;)g(g)1540 1985 y Fe(cons)1609 1979 y Fn(gg)p Fq(;)g(P)1697
1985 y Fl(1)1714 1979 y Fn(i)p Fo(;)g Fq(g)1769 1985 y Fe(cons)250
2128 y Fo(map)250 2203 y Fn(h)p Fq(nil)q Fo(;)g Fq(v)q(;)g(\033)q
Fn(i)p Fo(;)g Fq(map)516 2188 y Fe(list)569 2203 y Fn(f)p Fq(f)t
Fn(g)216 b Fo(=)-7 b Fn(\))42 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)p
Fo(;)g Fq(map)1155 2188 y Fe(E)1179 2192 y Fc(nil)1223 2203
y Fn(f)p Fq(f)r(;)g(map)1364 2188 y Fe(list)1416 2203 y Fn(f)p
Fq(f)t Fn(g)p Fo(;)g(nil)851 2278 y(=)-7 b Fn(\))42 b(h)p Fq(v)q(;)7
b(\033)q Fn(i)p Fo(;)g Fq(map)1155 2263 y Fl(1)1173 2278 y
Fn(fg)p Fo(;)g(nil)250 2427 y Fn(h)p Fq(cons)p Fo(;)g Fq(v)q(;)g(\033)q
Fn(i)p Fo(;)g Fq(map)546 2412 y Fe(list)599 2427 y Fn(f)p Fq(f)t
Fn(g)186 b Fo(=)-7 b Fn(\))42 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)p
Fo(;)g Fq(map)1155 2412 y Fe(E)1179 2416 y Fc(cons)1244 2427
y Fn(f)p Fq(f)r(;)g(map)1385 2412 y Fe(list)1437 2427 y Fn(f)p
Fq(f)t Fn(g)p Fo(;)g(cons)851 2502 y(=)-7 b Fn(\))42 b(h)p
Fq(v)q(;)7 b(\033)q Fn(i)p Fo(;)g Fq(map)1155 2487 y Fp(\002)1183
2502 y Fn(f)p Fq(f)r(;)g(map)1324 2487 y Fe(list)1377 2502
y Fn(f)p Fq(f)t Fn(gg)p Fo(;)g(cons)166 2600 y FA(These)16
b(rewrite)g(rules)g(deliv)o(er)e(the)i(follo)o(wing)g(state)g(transition)h
(rules)e(to)i(the)f(mac)o(hine:)p eop
%%Page: 67 76
75 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(67)p 176 184 1748 2 v 175 259
2 75 v 197 237 a Fq(v)162 b(c)323 b(d)p Fn(j)p Fq(f)153 b(v)948
222 y Fp(0)1066 237 y Fq(c)1084 222 y Fp(0)1742 237 y Fq(d)1764
222 y Fp(0)1776 237 y Fn(j)p Fq(f)1812 222 y Fp(0)p 1923 259
V 176 261 1748 2 v 175 335 2 75 v 197 313 a Fn(h)p Fq(c)231
319 y Fe(i)245 313 y Fq(:v)q(;)7 b(\033)q Fn(i)41 b Fq(case)457
298 y Fe(list)511 313 y Fn(f)p Fq(f)552 319 y Fl(0)570 313
y Fq(;)7 b(f)609 319 y Fl(1)628 313 y Fn(g)p Fq(:c)41 b(d)77
b Fn(\000)-7 b(!)41 b Fq(v)119 b(f)1086 319 y Fe(i)1742 313
y Fo(con)o(t)q(\()p Fq(c)p Fo(\))p Fq(:d)p 1923 335 V 175 410
V 197 388 a Fn(h)p Fq(c)231 394 y Fe(i)245 388 y Fq(:v)q(;)7
b(\033)q Fn(i)41 b Fq(f)t(ol)q(d)458 373 y Fe(list)512 388
y Fn(f)p Fq(g)553 394 y Fl(0)571 388 y Fq(;)7 b(g)610 394 y
Fl(1)628 388 y Fn(g)p Fq(:c)41 b(d)77 b Fn(\000)-7 b(!)41 b(h)p
Fq(v)q(;)7 b(\033)q Fn(i)42 b(h)p Fq(map)1161 373 y Fe(E)1185
377 y Fc(i)1201 388 y Fn(f)p Fq(P)1249 394 y Fl(0)1267 388
y Fq(;)7 b(f)t(ol)q(d)1365 373 y Fe(list)1418 388 y Fn(f)p
Fq(g)1459 394 y Fl(0)1478 388 y Fq(;)g(g)1517 394 y Fl(1)1534
388 y Fn(gg)p Fq(;)g(P)1622 394 y Fl(1)1640 388 y Fn(i)p Fq(:g)1688
394 y Fe(i)1742 388 y Fq(contc:d)p 1923 410 V 175 485 V 197
462 a Fn(h)p Fq(c)231 468 y Fe(i)245 462 y Fq(:v)q(;)g(\033)q
Fn(i)41 b Fq(map)458 447 y Fe(list)511 462 y Fn(f)p Fq(f)t
Fn(g)p Fq(:c)113 b(d)77 b Fn(\000)-7 b(!)41 b(h)p Fq(v)q(;)7
b(\033)q Fn(i)42 b(h)p Fq(map)1161 447 y Fe(E)1185 451 y Fc(i)1201
462 y Fn(f)p Fq(P)1249 468 y Fl(0)1267 462 y Fq(;)7 b(map)1365
447 y Fe(list)1418 462 y Fn(f)p Fq(g)1459 468 y Fl(0)1477 462
y Fq(;)g(g)1516 468 y Fl(1)1534 462 y Fn(gg)p Fq(;)g(P)1622
468 y Fl(1)1639 462 y Fn(i)p Fq(:c)1685 468 y Fe(i)1742 462
y Fq(contc:d)p 1923 485 V 176 487 1748 2 v 200 563 a FA(An)16
b(example)e(of)i(a)h(case)f(com)o(binator)f(determining)f(if)i(a)h(list)e(is)
h(empt)o(y)e(follo)o(ws:)765 684 y Fj(def)25 b(isEmpty\(L)o(\))e(=)842
743 y({)i(nil)g(\(\))153 b(=>)25 b(true)842 803 y(|)g(cons\(x,)e(l'\))i(=>)g
(false)842 863 y(})g(\(L\).)150 1048 y FA(This)11 b(program)g(is)f
(translated)h(to)h(the)e(com)o(binator)g(expression:)18 b Fz(h)p
Fx(I)t(;)8 b(I)t Fz(i)p FA(;)g(case)1569 1029 y Fk(list)1623
1048 y Fz(f)p FA(!;)g(true)o Fx(;)g FA(!;)g(false)o Fz(g)p
FA(.)150 1171 y(The)16 b(expression)g Fj(isEmpty\([ze)o(ro)o(]\))d
FA(is)j(ev)m(aluated)g(as)h(follo)o(ws:)413 1276 y Fq(v)96
b(c)827 b(d)p 284 1300 1532 2 v 413 1352 a Fo([)14 b(])78 b
Fn(h)p Fo(zero)q Fq(;)7 b Fo(nil)n Fn(i)p Fo(;)g(cons)q(;)g
Fn(h)p Fq(I)s(;)g(I)s Fn(i)p Fo(;)g Fq(case)1006 1337 y Fe(list)1059
1352 y Fn(f)p Fo(!;)g(true)o Fq(;)g Fo(!;)g(false)o Fn(g)41
b Fo([)13 b(])305 1427 y(=)-7 b Fn(\))41 b Fo([)14 b(])78 b(zero)772
b(pr)1413 1437 y Fl(0)1432 1427 y Fo(\([)13 b(])p Fq(;)7 b
Fo(nil)n Fq(;)g Fo(cons;)g Fn(h)p Fq(I)s(;)g(I)s Fn(i)p Fo(;)1374
1502 y Fq(case)1452 1487 y Fe(list)1505 1502 y Fn(f)p Fo(!;)g(true)p
Fq(;)g Fo(!;)g(false)n Fn(g)p Fo(\))305 1576 y(=)-7 b Fn(\))41
b Fo(zero)i Fq(\017)828 b Fo(pr)1413 1587 y Fl(0)1432 1576
y Fo(\([)13 b(])p Fq(;)7 b Fo(nil)n Fq(;)g Fo(cons;)g Fn(h)p
Fq(I)s(;)g(I)s Fn(i)p Fo(;)1374 1651 y Fq(case)1452 1636 y
Fe(list)1505 1651 y Fn(f)p Fo(!;)g(true)p Fq(;)g Fo(!;)g(false)n
Fn(g)p Fo(\))166 1750 y FA(The)17 b(\014rst)f(comp)q(onen)o(t)g(of)g(the)g
(pair)h(has)g(b)q(een)f(pro)q(cessed)g(and)h(no)o(w)g(the)f(mac)o(hine)e(m)o
(ust)h(p)q(op)150 1873 y(the)h(co)q(de)g(for)h(the)f(second)g(comp)q(onen)o
(t)g(o\013)h(the)f(dump)f(and)i(ev)m(aluate)f(it:)618 1977
y Fq(v)68 b(c)h(d)p 489 2001 1123 2 v 510 2053 a Fo(=)-7 b
Fn(\))41 b Fo([)13 b(])51 b(nil)40 b(pr)833 2063 y Fl(1)851
2053 y Fo(\(zero)q Fq(;)7 b Fo(cons;)g Fn(h)p Fq(I)s(;)g(I)s
Fn(i)p Fo(;)g Fq(case)1247 2038 y Fe(list)1301 2053 y Fn(f)p
Fo(!;)g(true)o Fq(;)g Fo(!;)g(false)n Fn(g)p Fo(\))510 2128
y(=)-7 b Fn(\))41 b Fo(nil)g Fq(\017)70 b Fo(pr)833 2138 y
Fl(1)851 2128 y Fo(\(zero)q Fq(;)7 b Fo(cons;)g Fn(h)p Fq(I)s(;)g(I)s
Fn(i)p Fo(;)g Fq(case)1247 2113 y Fe(list)1301 2128 y Fn(f)p
Fo(!;)g(true)o Fq(;)g Fo(!;)g(false)n Fn(g)p Fo(\))169 2226
y FA(Comp)q(onen)o(ts)20 b(of)g(the)f(pair)g(ha)o(v)o(e)g(no)o(w)h(b)q(een)f
(ev)m(aluated,)h(and)g(the)f(resultan)o(t)g(pair)h(m)o(ust)e(b)q(e)150
2350 y(created)e(on)g(the)g(v)m(alue)g(stac)o(k:)607 2443 y
Fq(v)282 b(c)638 b(d)p 477 2468 1146 2 v 498 2520 a Fo(=)-7
b Fn(\))42 b(h)p Fo(zero)q Fq(;)7 b Fo(nil)n Fn(i)132 b Fo(cons)q(;)7
b Fn(h)p Fq(I)s(;)g(I)s Fn(i)p Fo(;)g Fq(case)1197 2505 y Fe(list)1250
2520 y Fn(f)p Fo(!;)g(true)o Fq(;)g Fo(!;)g(false)o Fn(g)41
b Fo([)13 b(])498 2595 y(=)-7 b Fn(\))42 b(h)p Fo(zero)q Fq(;)7
b Fo(nil)n Fn(i)p Fq(:)p Fo(cons)42 b Fn(h)p Fq(I)s(;)7 b(I)s
Fn(i)p Fo(;)g Fq(case)1099 2579 y Fe(list)1153 2595 y Fn(f)p
Fo(!;)g(true)o Fq(;)g Fo(!;)g(false)o Fn(g)138 b Fo([)13 b(])p
eop
%%Page: 68 77
76 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(68)166 141 y FA(The)16 b(pair)h(on)f(the)g(v)m
(alue)g(stac)o(k)g(is)g(no)o(w)g(distributed)g(o)o(v)o(er)f(the)h(pair)g(com)
o(binator)f(in)h(the)g(co)q(de)150 240 y(stream:)508 334 y
Fq(v)283 b(c)41 b(d)p 379 358 1342 2 v 400 410 a Fo(=)-7 b
Fn(\))41 b(h)p Fo(zero)q Fq(;)7 b Fo(nil)o Fn(i)p Fq(:)p Fo(cons)42
b Fq(\017)g Fo(pr)909 421 y Fl(0)928 410 y Fo(\()p Fn(h)p Fo(zero)q
Fq(;)7 b Fo(nil)o Fn(i)p Fq(:)p Fo(cons)p Fq(;)g Fo([)13 b(])p
Fq(;)7 b(case)1358 395 y Fe(list)1410 410 y Fn(f)p Fo(!;)g(true)p
Fq(;)g Fo(!;)g(false)n Fn(g)p Fo(\))400 485 y(=)-7 b Fn(\))41
b(h)p Fo(zero)q Fq(;)7 b Fo(nil)o Fn(i)p Fq(:)p Fo(cons)42
b Fq(\017)g Fo(pr)909 495 y Fl(1)928 485 y Fo(\()p Fn(h)p Fo(zero)q
Fq(;)7 b Fo(nil)o Fn(i)p Fq(:)p Fo(cons)p Fq(;)g(case)1302
470 y Fe(list)1355 485 y Fn(f)p Fo(!;)g(true)p Fq(;)g Fo(!;)g(false)n
Fn(g)p Fo(\))174 584 y FA(Finally)l(,)23 b(the)h(ev)m(aluation)f(of)h(the)g
(case)f(com)o(binator)g(strips)h(o\013)g(the)f(nil)g(constructor)h(and)150
683 y(executes)13 b(the)g(nil)g(phrase)h(of)g(the)g(case.)20
b(The)14 b(result)f(of)h(the)g(ev)m(aluation)g(is)f(!)p Fx(:)p
FA(false)o(,)h(as)g(exp)q(ected:)522 786 y Fq(v)594 b(c)429
b(d)p 393 810 1314 2 v 414 863 a Fo(=)-7 b Fn(\))41 b(hh)p
Fo(zero)q Fq(;)7 b Fo(nil)o Fn(i)p Fq(:)p Fo(cons)p Fq(;)g
Fn(h)p Fo(zero)q Fq(;)g Fo(nil)n Fn(i)p Fq(:)p Fo(cons)q Fn(i)41
b Fq(case)1214 848 y Fe(list)1268 863 y Fn(f)p Fo(!;)7 b(true)o
Fq(;)g Fo(!;)g(false)o Fn(g)41 b Fo([)13 b(])414 937 y(=)-7
b Fn(\))41 b(hh)p Fq(\017;)7 b Fo(nil)o Fn(i)p Fq(:)p Fo(cons)p
Fq(;)g Fn(h)p Fo(zero)q Fq(;)g Fo(nil)n Fn(i)p Fq(:)p Fo(cons)q
Fn(i)98 b Fo(!;)7 b(false)336 b Fq(r)q(et)p Fo(\()p Fq(\017)p
Fo(\))414 1012 y(=)-7 b Fn(\))41 b Fo(!)602 b(false)367 b Fq(r)q(et)p
Fo(\()p Fq(\017)p Fo(\))414 1087 y(=)-7 b Fn(\))41 b Fo(!)p
Fq(:)p Fo(false)510 b Fq(\017)430 b(r)q(et)p Fo(\()p Fq(\017)p
Fo(\))414 1162 y(=)-7 b Fn(\))41 b Fo(!)p Fq(:)p Fo(false)510
b Fq(\017)430 b Fo([)13 b(])414 1236 y(=)-7 b Fn(\))566 b Fo(STOP)200
1414 y FA(F)l(or)15 b(the)g(next)g(example,)e(consider)i(app)q(ending)i(one)e
(list)g(to)h(the)f(end)g(of)h(another)g(as)g(is)f(done)150
1528 y(with)h(the)g(follo)o(wing)g(Charit)o(y)g(function:)765
1625 y Fj(def)25 b(append\(L1)o(,)e(L2\))h(=)842 1685 y({|)h(nil)g(:)g(\(\))
127 b(=>)25 b(L2)868 1745 y(|)g(cons:)f(\(x,)g(L\))h(=>)g(cons\(x,)e(L\))868
1804 y(|})i(\(L1\).)150 1955 y FA(The)16 b(app)q(end)h(function)f(is)g
(translated,)h(via)e(the)h(translation)h(rules,)f(to:)585 2107
y Fz(h)p Fx(P)635 2114 y Fm(0)656 2107 y Fx(;)8 b(I)t Fz(i)p
FA(;)g Fx(f)d(ol)q(d)838 2086 y Fk(list)892 2107 y Fz(f)p Fx(P)948
2114 y Fm(1)968 2107 y FA(;)j Fx(P)1021 2114 y Fm(1)1041 2107
y Fx(;)g Fz(h)p Fx(P)1113 2114 y Fm(0)1133 2107 y FA(;)g Fx(P)1186
2114 y Fm(0)1206 2107 y Fx(;)g(P)1259 2114 y Fm(0)1279 2107
y FA(;)g Fx(P)1332 2114 y Fm(1)1352 2107 y Fz(i)p FA(;)g Fx(cons)p
Fz(g)150 2258 y FA(Notice)17 b(that)h(app)q(end)h(folds)g(o)o(v)o(er)e
Fj(L1)p FA(.)26 b(The)18 b(pair)g(in)g(fron)o(t)g(of)g(the)g(fold)g(com)o
(binator)f(binds)h(it)150 2372 y(together)e(with)g(the)g(en)o(vironmen)o(t.)i
(W)l(e)d(w)o(ould)h(exp)q(ect)g(a)g(pro)q(duct)g(of)h(t)o(w)o(o)e(lists)h(to)
g(b)q(e)g(passed)150 2486 y(to)21 b(the)g(app)q(end)g(function,)g(but)g(the)g
(\014rst)g(list)f(is)g(the)h(folded)f(argumen)o(t.)34 b(The)20
b(second)h(list,)150 2600 y(ho)o(w)o(ev)o(er,)c(is)h(presen)o(t)f(in)h(the)g
(en)o(vironmen)o(t.)24 b(When)18 b(the)g(\014rst)g(list)g(is)g(empt)o(y)l(,)e
(the)h(rewritings)p eop
%%Page: 69 78
77 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(69)150 141 y FA(for)17 b(the)f
Fj(nil)f FA(phrase)h(are)h(initiated:)550 255 y Fz(h)p Fx(v)r(;)8
b(\033)r Fz(i)p FA(;)g Fz(h)p Fx(P)738 262 y Fm(0)758 255 y
Fx(;)g(P)811 262 y Fm(1)831 255 y Fz(i)p FA(;)g Fx(g)895 262
y Fk(nil)983 255 y FA(=)-8 b Fz(\))41 b(h)p Fx(v)r(;)8 b(\033)r
Fz(i)p FA(;)g Fz(h)p Fx(P)1292 262 y Fm(0)1312 255 y Fx(;)g(P)1365
262 y Fm(1)1385 255 y Fz(i)p FA(;)g Fx(P)1457 262 y Fm(1)1477
255 y FA(;)g Fx(P)1530 262 y Fm(1)983 345 y FA(=)-8 b Fz(\))41
b(h)p Fx(v)r(;)8 b(\033)r Fz(i)p FA(;)g Fx(I)t FA(;)g Fx(P)1321
352 y Fm(1)1340 345 y FA(;)g Fx(P)1393 352 y Fm(1)983 434 y
FA(=)-8 b Fz(\))41 b(h)p Fx(v)r(;)8 b(\033)r Fz(i)p FA(;)g
Fx(P)1273 441 y Fm(1)1293 434 y FA(;)g Fx(P)1346 441 y Fm(1)983
524 y FA(=)-8 b Fz(\))41 b Fx(\033)r FA(;)8 b Fx(P)1187 531
y Fm(1)150 630 y FA(This)17 b(means)f(that)h(giv)o(en)f(the)h(original)g(t)o
(w)o(o)f(lists)h(passed)g(in)o(to)g(the)f(app)q(end)i(function)f(\(in)f(the)
150 720 y(form)f(of)i(a)f(pro)q(duct\),)h(select)e(the)h(second)g(comp)q
(onen)o(t)g(\(ie:)k Fj(L2)p FA(\).)200 811 y(When)c(a)h(list)e(b)q(eing)i
(folded)f(o)o(v)o(er)f(is)h(not)h(empt)o(y)l(,)c(the)j(follo)o(wing)g
(rewrite)f(rule)h(applies:)469 925 y Fz(h)p Fx(v)r(;)8 b(\033)r
Fz(i)p FA(;)g Fz(h)p Fx(map)719 907 y Fr(\002)748 925 y Fz(f)p
Fx(P)804 932 y Fm(0)824 925 y Fx(;)g(f)d(ol)q(d)940 903 y Fk(list)994
925 y Fz(f)p Fx(g)1042 932 y Fk(nil)1089 925 y Fx(;)j(g)1134
932 y Fk(cons)1206 925 y Fz(gg)p Fx(;)g(P)1309 932 y Fm(1)1329
925 y Fz(i)p FA(;)g Fx(g)1393 932 y Fk(cons)348 1014 y FA(=)-8
b Fz(\))41 b(h)p Fx(v)r(;)8 b(\033)r Fz(i)p FA(;)g Fz(h)p Fx(map)719
996 y Fr(\002)748 1014 y Fz(f)p Fx(P)804 1021 y Fm(0)824 1014
y Fx(;)g(f)d(ol)q(d)940 993 y Fk(list)994 1014 y Fz(f)p Fx(g)1042
1021 y Fk(nil)1089 1014 y Fx(;)j(g)1134 1021 y Fk(cons)1206
1014 y Fz(gg)p Fx(;)g(P)1309 1021 y Fm(1)1329 1014 y Fz(i)p
FA(;)g Fz(h)p Fx(P)1420 1021 y Fm(0)1441 1014 y FA(;)g Fx(P)1494
1021 y Fm(0)1514 1014 y Fx(;)g(P)1567 1021 y Fm(0)1587 1014
y FA(;)g Fx(P)1640 1021 y Fm(1)1660 1014 y Fz(i)p FA(;)g(cons)150
1179 y FB(5.5.)42 b(Coinductiv)n(e)25 b(Datat)n(yp)r(es)200
1294 y FA(Coinductiv)o(e)10 b(datat)o(yp)q(es)i(are)g(the)f(dual)g(of)h(the)f
(inductiv)o(e)f(datat)o(yp)q(es.)20 b(Computation)12 b(b)q(egins)150
1385 y(at)h(some)e(initial)g(state)h(with)g(destructors)h(acting)f(on)g(the)g
(state)h(to)f(generate)g(a)h(new)f(one.)20 b(Recall)150 1475
y(a)d(coinductiv)o(e)d(de\014nition)i(of)g(the)g(form:)577
1579 y(data)h Fx(S)g Fz(\000)-9 b(!)14 b Fx(R)p FA(\()p Fx(A)p
FA(\))g(=)41 b Fx(d)1059 1586 y Fm(1)1093 1579 y FA(:)14 b
Fx(S)48 b Fz(\000)-9 b(!)42 b Fx(E)1357 1586 y Fm(1)1376 1579
y FA(\()p Fx(A;)8 b(S)s FA(\))979 1669 y Fz(j)1034 1636 y FA(.)1034
1652 y(.)1034 1669 y(.)979 1759 y Fz(j)41 b Fx(d)1059 1766
y Fk(n)1097 1759 y FA(:)13 b Fx(S)45 b Fz(\000)-9 b(!)42 b
Fx(E)1357 1766 y Fk(n)1380 1759 y FA(\()p Fx(A;)8 b(S)s FA(\))p
Fx(:)150 1862 y FA(where)16 b(the)g(state)g(v)m(ariable)g(lines)f(up)h(on)g
(the)g(domain)g(and)g(the)g(co)q(domain)g(con)o(tains)g(the)g(t)o(yp)q(e)150
1952 y(expression.)43 b(Along)24 b(with)g(the)f(destructors,)j(three)d(other)
h(com)o(binators)e(\(record,)j(unfold,)150 2043 y(map)243 2025
y Fk(R)271 2043 y FA(\))16 b(are)h(imm)o(ediatel)o(y)c(deliv)o(ered)h(to)j
(the)f(system.)150 2221 y Fs(5.5.1.)32 b(Mapping)23 b(o)n(v)n(er)g
(coinductiv)n(e)h(data)f(t)n(yp)r(es)150 2345 y FA(A)16 b(map)f(o)o(v)o(er)h
(a)g(coinductiv)o(e)f(datat)o(yp)q(e)h(has)h(t)o(yp)q(e:)238
2473 y Fx(map)331 2452 y Fk(R)359 2473 y Fz(f)p Fx(A)421 2480
y Fm(1)451 2473 y Fz(\002)11 b Fx(\033)16 b Fz(!)d Fx(A)645
2452 y Fr(0)645 2485 y Fm(1)665 2473 y Fx(;)8 b(:::;)g(A)788
2480 y Fk(m)830 2473 y Fz(\002)j Fx(\033)k Fz(!)f Fx(A)1024
2452 y Fr(0)1024 2485 y Fk(m)1056 2473 y Fz(g)g FA(:)g Fx(R)p
FA(\()p Fx(A)1216 2480 y Fm(1)1235 2473 y Fx(;)8 b(:::;)g(A)1358
2480 y Fk(m)1390 2473 y FA(\))j Fz(\002)f Fx(\033)16 b Fz(!)d
Fx(R)p FA(\()p Fx(A)1669 2452 y Fr(0)1669 2485 y Fm(1)1689
2473 y Fx(;)8 b(:::;)g(A)1812 2452 y Fr(0)1812 2485 y Fk(m)1843
2473 y FA(\))200 2600 y(The)16 b(map)f(diagram)h(is)g(sho)o(wn)h(b)q(elo)o
(w:)p eop
%%Page: 70 79
78 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(70)363 262 y Fx(R)p FA(\()p Fx(A)p
FA(\))12 b Fz(\002)e Fx(\033)p 583 251 264 2 v 695 228 a(d)720
235 y Fk(i)746 228 y Fz(\002)g FA(1)818 250 y Fh(-)876 262
y Fx(E)912 269 y Fk(i)926 262 y FA(\()p Fx(A;)e(R)p FA(\()p
Fx(A)p FA(\)\))i Fz(\002)h Fx(\033)p 1241 251 147 2 v 1227
228 a Fz(h)p Fx(\022)1270 205 y Fk(E)1296 210 y Ff(i)1269 240
y Fr(:)p Fk(R)1322 228 y Fx(;)d(P)1375 235 y Fm(1)1395 228
y Fz(i)1359 250 y Fh(-)1417 262 y Fx(E)1453 269 y Fk(i)1467
262 y FA(\()p Fx(A)j Fz(\002)g Fx(\033)o(;)d(R)p FA(\()p Fx(A)p
FA(\)\))i Fz(\002)h Fx(\033)1271 555 y(E)1307 562 y Fk(i)1321
555 y FA(\()p Fx(A)f Fz(\002)h Fx(\033)o(;)d(R)p FA(\()p Fx(A)p
FA(\))j Fz(\002)g Fx(\033)r FA(\))1635 538 y Fh(?)p 1634 538
2 247 v 1641 409 a Fx(\022)1665 387 y Fk(E)1691 392 y Ff(i)1664
421 y Fk(R)363 848 y Fx(R)p FA(\()p Fx(A)h Fz(\002)e Fx(\033)r
FA(\))406 555 y Fx(\022)430 537 y Fk(R)465 794 y Fh(?)p 464
317 2 13 v 464 352 V 464 388 V 464 424 V 464 460 V 464 495
V 464 531 V 464 567 V 464 603 V 464 638 V 464 674 V 464 710
V 464 746 V 464 782 V 583 837 806 2 v 1030 884 a Fx(d)1055
891 y Fk(i)1360 836 y Fh(-)1417 848 y Fx(E)1453 855 y Fk(i)1467
848 y FA(\()p Fx(A)h Fz(\002)g Fx(\033)o(;)d(R)p FA(\()p Fx(A)i
Fz(\002)h Fx(\033)r FA(\)\))1635 794 y Fh(?)p 1634 598 2 13
v 1634 634 V 1634 671 V 1634 707 V 1634 744 V 1634 781 V 1641
701 a Fx(E)1677 708 y Fk(i)1691 701 y Fz(f)p Fx(I)t(;)d(\022)1788
683 y Fk(R)1816 701 y Fz(g)150 979 y FA(The)13 b(com)o(binator)e
Fx(\022)523 961 y Fk(R)565 979 y FA(strengthens)i(the)f(t)o(yp)q(e)g
Fx(R)i FA(in)e(the)g(same)g(w)o(a)o(y)g Fx(\022)1430 961 y
Fk(L)1469 979 y FA(strengthens)h Fx(L)g FA(b)o(y)f(prop-)150
1078 y(agating)19 b(the)f(en)o(vironmen)o(t)e(through)j(the)f(coinductiv)o(e)
f(data)i(structure.)26 b(This)19 b(en)o(vironmen)o(t)150 1176
y(distribution,)e(as)h(sho)o(wn)g(ab)q(o)o(v)o(e,)f(starts)h(from)e(the)h
(top)h(left)e(and)i(follo)o(wing)f(the)g(left,)f(b)q(ottom)150
1275 y(path)h(is)f(brok)o(en)g(do)o(wn)g(in)o(to)g(the)g(follo)o(wing)g
(steps:)215 1396 y(\(1\))22 b(apply)16 b(the)g(destructor)g
Fx(d)775 1403 y Fk(i)806 1396 y FA(to)g(get)h(a)f(term,)e(and)j(propagate)h
(the)e(en)o(vironmen)o(t,)215 1495 y(\(2\))22 b(strengthen)16
b(the)g(parametric)f(comp)q(onen)o(t)g(and)i(propagate)g(the)f(en)o(vironmen)
o(t,)215 1594 y(\(3\))22 b(strengthen)16 b(the)g(state)g(comp)q(onen)o(t,)215
1693 y(\(4\))22 b(apply)16 b(the)g(en)o(vironmen)o(t)e(distribution)i(com)o
(binator)g Fx(\022)1345 1675 y Fk(R)1390 1693 y FA(recursiv)o(ely)e(do)o(wn)j
(the)g(state)299 1792 y(comp)q(onen)o(t.)200 1913 y(The)12
b(rewrite)g(rule)g(for)h(the)f Fx(map)796 1895 y Fk(R)837 1913
y FA(com)o(binator)f(as)j(deriv)o(ed)d(b)q(elo)o(w)h(also)h(applies)f(the)h
(mapp)q(ed)150 2012 y(functions)18 b(to)h(the)f(parametric)f(v)m(ariables,)h
(as)h(w)o(ell)e(as)i(p)q(erforming)f(the)g(en)o(vironmen)o(t)d(distri-)150
2111 y(bution:)372 2215 y Fx(map)465 2197 y Fk(R)494 2215 y
Fz(f)p Fx(f)5 b Fz(g)p FA(;)j Fx(d)620 2222 y Fk(i)676 2215
y FA(=)-8 b Fz(\))41 b Fx(\022)821 2197 y Fk(R)850 2215 y FA(;)8
b Fx(R)p Fz(f)p Fx(f)d Fz(g)p FA(;)j Fx(d)1035 2222 y Fk(i)676
2304 y FA(=)-8 b Fz(\))41 b Fx(d)822 2311 y Fk(i)847 2304 y
Fz(\002)11 b Fx(I)t FA(;)d Fz(h)p Fx(\022)988 2282 y Fk(E)1014
2287 y Ff(i)987 2317 y Fr(:)p Fk(R)1039 2304 y Fx(;)g(P)1092
2311 y Fm(1)1112 2304 y Fz(i)p FA(;)g Fx(\022)1177 2282 y Fk(E)1203
2287 y Ff(i)1176 2317 y Fk(R)1218 2304 y FA(;)g Fx(E)1276 2311
y Fk(i)1290 2304 y Fz(f)p Fx(I)t(;)g(\022)1387 2286 y Fk(R)1416
2304 y Fz(g)p FA(;)g Fx(E)1499 2311 y Fk(i)1513 2304 y Fz(f)p
Fx(f)s(;)g(R)p Fz(f)p Fx(f)d Fz(gg)676 2394 y FA(=)-8 b Fz(\))41
b Fx(d)822 2401 y Fk(i)847 2394 y Fz(\002)11 b Fx(I)t FA(;)d
Fx(\022)969 2376 y Fk(E)995 2381 y Ff(i)1010 2394 y FA(;)g
Fx(E)1068 2401 y Fk(i)1082 2394 y Fz(f)p Fx(I)t(;)g(\022)1179
2376 y Fk(R)1207 2394 y Fz(g)p FA(;)g Fx(E)1290 2401 y Fk(i)1304
2394 y Fz(f)p Fx(f)s(;)g(R)p Fz(f)p Fx(f)d Fz(gg)676 2484 y
FA(=)-8 b Fz(\))41 b Fx(d)822 2491 y Fk(i)847 2484 y Fz(\002)11
b Fx(I)t FA(;)d Fx(\022)969 2466 y Fk(E)995 2471 y Ff(i)1010
2484 y FA(;)g Fx(E)1068 2491 y Fk(i)1082 2484 y Fz(f)p Fx(f)s(;)g(\022)1180
2466 y Fk(R)1208 2484 y FA(;)g Fx(R)p Fz(f)p Fx(f)d Fz(gg)676
2573 y FA(=)-8 b Fz(\))41 b Fx(d)822 2580 y Fk(i)847 2573 y
Fz(\002)11 b Fx(I)t FA(;)d Fx(map)1038 2555 y Fk(E)1064 2560
y Ff(i)1078 2573 y Fz(f)p Fx(f)s(;)g(map)1245 2555 y Fk(R)1273
2573 y Fz(f)p Fx(f)d Fz(gg)p eop
%%Page: 71 80
79 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(71)150 141 y Fs(5.5.2.)32 b(Unfold)22
b(com)n(binator)150 316 y FA(The)16 b(unfold)h(com)o(binator)e(has)i(t)o(yp)q
(e:)328 469 y Fx(unf)5 b(ol)q(d)478 448 y Fk(R)508 469 y Fz(f)p
Fx(S)14 b Fz(\002)d Fx(\033)k Fz(!)f Fx(E)770 476 y Fm(1)789
469 y FA(\()p Fx(A;)8 b(S)s FA(\))p Fx(;)g(:::;)g(S)k Fz(\002)f
Fx(\033)k Fz(!)f Fx(E)1240 476 y Fk(n)1263 469 y FA(\()p Fx(A;)8
b(S)s FA(\))p Fz(g)13 b FA(:)h Fx(S)g Fz(\002)d Fx(\033)k Fz(!)f
Fx(R)p FA(\()p Fx(A)p FA(\))200 622 y(The)i(diagram)g(b)q(elo)o(w)g(sho)o(ws)
h(its)f(recursiv)o(e)f(nature:)689 745 y Fx(S)f Fz(\002)c Fx(\033)p
833 734 2 3 v 837 734 6 3 v 845 734 V 853 734 2 3 v 861 734
V 865 734 6 3 v 877 734 2 3 v 881 734 V 885 734 6 3 v 897 734
2 3 v 901 734 6 3 v 909 734 2 3 v 913 734 V 829 734 358 2 v
968 711 a Fz(h)p Fx(g)1010 718 y Fk(i)1025 711 y Fx(;)e(P)1078
718 y Fm(1)1098 711 y Fz(i)1158 733 y Fh(-)1215 745 y Fx(E)1251
752 y Fk(i)1265 745 y FA(\()p Fx(A;)g(S)s FA(\))i Fz(\002)h
Fx(\033)1215 1038 y(E)1251 1045 y Fk(i)1265 1038 y FA(\()p
Fx(A;)d(S)13 b Fz(\002)e Fx(\033)r FA(\))1350 984 y Fh(?)p
1349 984 2 210 v 1355 892 a Fx(\022)1379 870 y Fk(E)1405 875
y Ff(i)1378 904 y Fk(R)694 1331 y Fx(R)p FA(\()p Fx(A)p FA(\))582
1038 y(unfold)716 1017 y Fk(R)751 1277 y Fh(?)p 750 792 2 13
v 750 828 V 750 864 V 750 901 V 750 937 V 750 973 V 750 1010
V 750 1046 V 750 1082 V 750 1119 V 750 1155 V 750 1191 V 750
1228 V 750 1264 V 823 1320 369 2 v 1023 1296 a Fx(d)1048 1303
y Fk(i)1163 1319 y Fh(-)1220 1331 y Fx(E)1256 1338 y Fk(i)1271
1331 y FA(\()p Fx(A;)d(R)p FA(\()p Fx(A)p FA(\)\))1350 1277
y Fh(?)p 1349 1091 2 13 v 1349 1126 V 1349 1161 V 1349 1196
V 1349 1231 V 1349 1266 V 1355 1184 a Fx(E)1391 1191 y Fk(i)1406
1184 y Fz(f)p FA(1)p Fx(;)g FA(unfold)1611 1163 y Fk(R)1640
1184 y Fz(g)150 1419 y FA(An)j(unfold)h(com)o(binator)e(follo)o(w)o(ed)h(b)o
(y)g(a)g(destructor)h(on)g(the)f(left,)g(b)q(ottom)h(path)g(of)f(the)h
(diagram)150 1535 y(transforms)j(the)h(state)f Fx(S)k FA(to)d(a)f(new)h
(state)g(with)f(the)g(t)o(yp)q(e)g(exp)q(ected)g(of)h(the)f(destructor.)21
b(This)150 1651 y(can)16 b(b)q(e)h(rewritten)e(b)o(y)h(follo)o(wing)g(the)g
(top,)g(righ)o(t)g(path)h(as:)215 1805 y(\(1\))22 b(Apply)15
b(the)h(phrase)h Fx(g)707 1812 y Fk(i)737 1805 y FA(and)g(propagate)h(the)e
(en)o(vironmen)o(t,)215 1921 y(\(2\))22 b(strengthen)16 b(the)g(state)g(comp)
q(onen)o(t,)215 2036 y(\(3\))22 b(recursiv)o(ely)13 b(apply)j(the)g(unfold)h
(to)f(the)g(state)h(comp)q(onen)o(t.)200 2191 y(The)f(rewrite)f(rule)h(for)g
(the)g(unfold)h(deriv)o(ed)e(from)g(diagram)g(ab)q(o)o(v)o(e)i(is:)278
2304 y Fx(unf)5 b(ol)q(d)428 2286 y Fk(R)457 2304 y Fz(f)p
Fx(g)505 2311 y Fm(1)525 2304 y Fx(;)j(:::;)g(g)634 2311 y
Fk(n)656 2304 y Fz(g)p FA(;)g Fx(d)728 2311 y Fk(i)784 2304
y FA(=)-8 b Fz(\))41 b(h)p Fx(g)947 2311 y Fk(i)962 2304 y
Fx(;)8 b(P)1015 2311 y Fm(1)1035 2304 y Fz(i)p FA(;)g Fx(\022)1100
2282 y Fk(E)1126 2287 y Ff(i)1099 2317 y Fk(R)1141 2304 y FA(;)g
Fx(E)1199 2311 y Fk(i)1213 2304 y Fz(f)p Fx(I)t(;)g(unf)d(ol)q(d)1436
2286 y Fk(R)1465 2304 y Fz(f)p Fx(g)1513 2311 y Fm(1)1533 2304
y Fx(;)j(:::;)g(g)1642 2311 y Fk(n)1664 2304 y Fz(g)784 2394
y FA(=)-8 b Fz(\))41 b(h)p Fx(g)947 2401 y Fk(i)962 2394 y
Fx(;)8 b(P)1015 2401 y Fm(1)1035 2394 y Fz(i)p FA(;)g Fx(E)1112
2401 y Fk(i)1126 2394 y Fz(f)p Fx(P)1182 2401 y Fm(0)1202 2394
y Fx(;)g(I)t Fz(g)p FA(;)g Fx(E)1333 2401 y Fk(i)1347 2394
y Fz(f)p Fx(I)t(;)g(unf)d(ol)q(d)1570 2376 y Fk(R)1598 2394
y Fz(f)p Fx(g)1646 2401 y Fm(1)1666 2394 y Fx(;)j(:::;)g(g)1775
2401 y Fk(n)1797 2394 y Fz(g)784 2484 y FA(=)-8 b Fz(\))41
b(h)p Fx(g)947 2491 y Fk(i)962 2484 y Fx(;)8 b(P)1015 2491
y Fm(1)1035 2484 y Fz(i)p FA(;)g Fx(E)1112 2491 y Fk(i)1126
2484 y Fz(f)p Fx(P)1182 2491 y Fm(0)1202 2484 y FA(;)g Fx(I)t(;)g(I)t
FA(;)g Fx(unf)d(ol)q(d)1470 2466 y Fk(R)1498 2484 y Fz(f)p
Fx(g)1546 2491 y Fm(1)1566 2484 y Fx(;)j(:::;)g(g)1675 2491
y Fk(n)1697 2484 y Fz(gg)784 2573 y FA(=)-8 b Fz(\))41 b(h)p
Fx(g)947 2580 y Fk(i)962 2573 y Fx(;)8 b(P)1015 2580 y Fm(1)1035
2573 y Fz(i)p FA(;)g Fx(E)1112 2580 y Fk(i)1126 2573 y Fz(f)p
Fx(P)1182 2580 y Fm(0)1202 2573 y Fx(;)g(unf)d(ol)q(d)1374
2555 y Fk(R)1404 2573 y Fz(f)p Fx(g)1452 2580 y Fm(1)1472 2573
y Fx(;)j(:::;)g(g)1581 2580 y Fk(n)1603 2573 y Fz(gg)p eop
%%Page: 72 81
80 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(72)150 141 y Fs(5.5.3.)32 b(Record)22
b(com)n(binator)150 279 y FA(The)16 b(record)g(com)o(binator)f(has)i(t)o(yp)q
(e:)396 414 y Fx(r)q(ecor)q(d)534 393 y Fk(R)564 414 y Fz(f)p
Fx(\033)e Fz(!)f Fx(E)732 421 y Fm(1)751 414 y FA(\()p Fx(A;)8
b(R)p FA(\()p Fx(A)p FA(\)\))p Fx(;)g(:::;)g(\033)13 b Fz(!)h
Fx(E)1187 421 y Fk(n)1211 414 y FA(\()p Fx(A;)8 b(R)p FA(\()p
Fx(A)p FA(\)\))p Fz(g)13 b FA(:)g Fx(\033)j Fz(!)d Fx(R)p FA(\()p
Fx(A)p FA(\))150 549 y(It)j(allo)o(ws)h(elemen)o(t)o(s)d(to)j(b)q(e)g(added)g
(to)f(the)h(head)f(of)h(a)g(coinductiv)o(e)e(data)i(structure)f(\(and)h(it)f
(is)150 646 y(a)h(non{recursiv)o(e)e(unfold\).)150 910 y FB(5.6.)42
b(T)-7 b(ranslation)27 b(to)g(com)n(binators)200 1018 y FA(The)18
b(translation)i(m)o(ust)d(propagate)j(an)f(en)o(vironmen)o(t)d(to)j(the)f
(unfold)h(and)g(record)g(com)o(bi-)150 1101 y(nators.)25 b(The)17
b(phrases)h(passed)g(in)o(to)f(the)g(unfold)h(and)f(record)g(assume)g(they)g
(will)f(ha)o(v)o(e)g(access)150 1183 y(to)h(it.)23 b(The)17
b(translation)h(for)f(the)g(coinductiv)o(e)e(map)h(op)q(eration)i(is)f
(exactly)f(the)g(same)g(as)i(o)o(v)o(er)150 1266 y(the)e(inductiv)o(e)e(v)o
(ersion.)240 1435 y Fo(\()p Fq(T)280 1441 y Fl(14)315 1435
y Fo(\))42 b Fn(T)413 1314 y Fi(2)413 1387 y(6)413 1412 y(6)413
1437 y(6)413 1463 y(4)441 1435 y Fq(v)13 b Fn(7!)527 1314 y
Fi(0)527 1387 y(B)527 1412 y(B)527 1437 y(B)527 1463 y(@)556
1312 y(\014)556 1337 y(\014)556 1362 y(\014)556 1387 y(\014)556
1412 y(\014)556 1437 y(\014)556 1462 y(\014)556 1487 y(\014)556
1512 y(\014)570 1435 y Fq(w)f Fn(7!)690 1360 y Fq(d)712 1366
y Fl(1)742 1360 y Fo(:)f Fq(t)780 1366 y Fl(1)739 1411 y Fo(.)739
1428 y(.)739 1444 y(.)686 1519 y Fq(d)708 1525 y Fe(n)742 1519
y Fo(:)g Fq(t)780 1525 y Fe(n)823 1312 y Fi(\014)823 1337 y(\014)823
1362 y(\014)823 1387 y(\014)823 1412 y(\014)823 1437 y(\014)823
1462 y(\014)823 1487 y(\014)823 1512 y(\014)830 1314 y(1)830
1387 y(C)830 1412 y(C)830 1437 y(C)830 1463 y(A)873 1435 y
Fo(\()p Fq(t)p Fo(\))920 1314 y Fi(3)920 1387 y(7)920 1412
y(7)920 1437 y(7)920 1463 y(5)960 1435 y Fo(=)1025 1402 y Fn(hT)17
b Fo([)o Fq(v)c Fn(7!)e Fq(t)p Fo(])c Fq(;)g Fo(1)p Fn(i)p
Fo(;)g Fq(unf)t(ol)q(d)1414 1383 y Fe(R)1441 1402 y Fn(f)42
b(T)17 b Fo([)o(\()p Fq(w)q(;)7 b(v)q Fo(\))12 b Fn(7!)f Fq(t)1738
1408 y Fl(1)1757 1402 y Fo(])6 b Fq(;)h(:::;)1504 1477 y Fn(T)17
b Fo([)o(\()p Fq(w)q(;)7 b(v)q Fo(\))12 b Fn(7!)f Fq(t)1738
1483 y Fe(n)1761 1477 y Fo(])i Fn(g)p Fq(;)240 1669 y Fo(\()p
Fq(T)280 1675 y Fl(15)315 1669 y Fo(\))42 b Fn(T)413 1548 y
Fi(2)413 1621 y(6)413 1646 y(6)413 1671 y(6)413 1698 y(4)441
1669 y Fq(v)13 b Fn(7!)527 1548 y Fi(0)527 1621 y(B)527 1646
y(B)527 1671 y(B)527 1698 y(@)597 1594 y Fq(d)619 1600 y Fl(1)649
1594 y Fo(:)e Fq(t)687 1600 y Fl(1)645 1646 y Fo(.)645 1662
y(.)645 1679 y(.)584 1754 y Fq(d)606 1760 y Fe(m)649 1754 y
Fo(:)g Fq(t)687 1760 y Fe(m)739 1548 y Fi(1)739 1621 y(C)739
1646 y(C)739 1671 y(C)739 1698 y(A)775 1548 y(3)775 1621 y(7)775
1646 y(7)775 1671 y(7)775 1698 y(5)814 1669 y Fo(=)h Fq(r)q(ecor)q(d)977
1651 y Fe(R)1004 1669 y Fn(fT)17 b Fo([)p Fq(v)c Fn(7!)e Fq(t)1178
1675 y Fl(1)1196 1669 y Fo(])c Fq(;)g(:::;)g Fn(T)14 b Fo([)p
Fq(v)f Fn(7!)e Fq(t)1439 1675 y Fe(m)1471 1669 y Fo(])o Fn(g)150
2082 y FB(5.7.)42 b(Rewrite)27 b(rules)e(and)i(mac)n(hine)f(transitions)200
2204 y FA(The)16 b(co{inductiv)o(e)f(com)o(binators)g(ha)o(v)o(e)h(the)g
(follo)o(wing)g(rewrite)f(rules:)212 2318 y(\()p Fx(R)268 2325
y Fm(12)306 2318 y FA(\))88 b Fx(map)506 2300 y Fk(R)534 2318
y Fz(f)p Fx(f)583 2325 y Fm(1)603 2318 y Fx(;)8 b(:::;)g(f)713
2325 y Fk(m)745 2318 y Fz(g)p FA(;)g Fx(d)817 2325 y Fk(i)872
2318 y FA(=)-8 b Fz(\))41 b Fx(d)1018 2325 y Fk(i)1044 2318
y Fz(\002)11 b FA(1;)d Fx(map)1233 2300 y Fk(E)1259 2305 y
Ff(i)1274 2318 y Fz(f)p Fx(f)1323 2325 y Fm(1)1343 2318 y Fx(;)g(:::;)g(f)
1453 2325 y Fk(m)1484 2318 y Fx(;)g(map)1599 2300 y Fk(R)1628
2318 y Fz(f)p Fx(f)1677 2325 y Fm(1)1696 2318 y Fx(;)g(:::;)g(f)1806
2325 y Fk(m)1838 2318 y Fz(gg)212 2408 y FA(\()p Fx(R)268 2415
y Fm(13)306 2408 y FA(\))41 b Fx(unf)5 b(ol)q(d)516 2390 y
Fk(R)546 2408 y Fz(f)p Fx(g)594 2415 y Fm(1)614 2408 y Fx(;)j(:::;)g(g)723
2415 y Fk(n)745 2408 y Fz(g)p FA(;)g Fx(d)817 2415 y Fk(i)872
2408 y FA(=)-8 b Fz(\))41 b(h)p Fx(g)1035 2415 y Fk(i)1050
2408 y Fx(;)8 b(P)1103 2415 y Fm(1)1123 2408 y Fz(i)p FA(;)g
Fx(map)1257 2390 y Fk(E)1283 2395 y Ff(i)1298 2408 y Fz(f)p
Fx(P)1354 2415 y Fm(0)1374 2408 y Fx(;)g(unf)d(ol)q(d)1546
2390 y Fk(R)1576 2408 y Fz(f)p Fx(g)1624 2415 y Fm(1)1644 2408
y Fx(;)j(:::;)g(g)1753 2415 y Fk(n)1775 2408 y Fz(gg)212 2497
y FA(\()p Fx(R)268 2504 y Fm(14)306 2497 y FA(\))43 b Fx(r)q(ecor)q(d)506
2479 y Fk(R)536 2497 y Fz(f)p Fx(h)589 2504 y Fm(1)609 2497
y Fx(;)8 b(:::;)g(h)723 2504 y Fk(n)745 2497 y Fz(g)p FA(;)g
Fx(d)817 2504 y Fk(i)872 2497 y FA(=)-8 b Fz(\))41 b Fx(h)1021
2504 y Fk(i)200 2600 y FA(The)16 b(corresp)q(onding)h(state)g(transitions)g
(are:)p eop
%%Page: 73 82
81 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(73)p 220 184 1660 2 v 219 259
2 75 v 302 259 V 324 237 a Fq(v)404 b(c)88 b(d)p Fn(j)p Fq(f)154
b(v)1083 222 y Fp(0)1137 237 y Fq(c)1155 222 y Fp(0)1699 237
y Fq(d)1721 222 y Fp(0)1732 237 y Fn(j)p Fq(f)1768 222 y Fp(0)p
1879 259 V 220 261 1660 2 v 219 335 2 75 v 241 313 a Fo(22)p
302 335 V 41 w Fq(map)403 298 y Fe(R)430 313 y Fn(f)p Fq(f)471
319 y Fl(1)490 313 y Fq(;)7 b(:::;)g(f)584 319 y Fe(m)613 313
y Fn(g)p Fq(:v)82 b(d)770 319 y Fe(i)783 313 y Fq(:c)41 b(d)78
b Fn(\000)-7 b(!)41 b Fq(v)55 b Fn(h)p Fq(P)1180 319 y Fl(0)1198
313 y Fq(:d)1232 319 y Fe(i)1245 313 y Fq(;)7 b(P)1291 319
y Fl(1)1309 313 y Fn(i)p Fq(:)g(map)1423 298 y Fe(E)1447 302
y Fc(i)1462 313 y Fn(f)p Fq(f)1503 319 y Fl(1)1522 313 y Fq(;)g(:::;)g(f)1616
319 y Fe(m)1646 313 y Fq(;)41 b Fo(con)o(t\()p Fq(c)p Fo(\))p
Fq(:d)p 1879 335 V 219 410 V 302 410 V 1151 388 a(map)1230
373 y Fe(R)1257 388 y Fn(f)p Fq(f)1298 394 y Fl(1)1317 388
y Fq(;)7 b(:::;)g(f)1411 394 y Fe(m)1440 388 y Fn(gg)p 1879
410 V 219 485 V 241 462 a Fo(20)p 302 485 V 41 w Fq(unf)t(ol)q(d)452
444 y Fe(R)479 462 y Fn(f)p Fq(g)520 468 y Fl(1)539 462 y Fq(;)g(:::;)g(g)633
468 y Fe(n)652 462 y Fn(g)p Fq(:v)43 b(d)770 468 y Fe(i)783
462 y Fq(:c)e(d)78 b Fn(\000)-7 b(!)41 b Fq(v)55 b Fn(h)p Fq(g)1173
468 y Fe(i)1187 462 y Fq(;)7 b(P)1233 468 y Fl(1)1250 462 y
Fn(i)p Fq(:)g(map)1364 447 y Fe(E)1388 451 y Fc(i)1404 462
y Fn(f)p Fq(P)1452 468 y Fl(0)1470 462 y Fq(;)217 b Fo(con)o(t\()p
Fq(c)p Fo(\))p Fq(:d)p 1879 485 V 219 560 V 302 560 V 1137
537 a(unf)t(ol)q(d)1265 519 y Fe(R)1293 537 y Fn(f)p Fq(g)1334
543 y Fl(1)1352 537 y Fq(;)7 b(:::;)g(g)1446 543 y Fe(n)1466
537 y Fn(gg)p 1879 560 V 219 634 V 241 612 a Fo(21)p 302 634
V 41 w Fq(r)q(ecor)q(d)443 593 y Fe(R)470 612 y Fn(f)p Fq(h)515
618 y Fl(1)533 612 y Fq(;)g(:::;)g(h)631 618 y Fe(n)651 612
y Fn(g)p Fq(:v)44 b(d)770 618 y Fe(i)783 612 y Fq(:c)d(d)78
b Fn(\000)-7 b(!)41 b Fq(v)55 b(h)1161 618 y Fe(i)1699 612
y Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1879 634 V 220 636
1660 2 v 150 936 a FB(5.8.)42 b(Examples)26 b(of)h(coinductiv)n(e)d(com)n
(binators)200 1065 y FA(This)15 b(section)f(pro)o(vides)g(an)i(example)c(of)j
(ho)o(w)g(coinductiv)o(e)e(com)o(binators)h(are)h(added)g(to)g(the)150
1169 y(system.)150 1432 y Fs(5.8.1.)32 b(Streams)22 b(and)h(in\014nite)h
(lists)150 1583 y FA(A)16 b(stream)f(is)h(an)h(in\014nite)e(lists)h(of)g(v)m
(alues,)g(de\014ned)g(as:)765 1669 y Fj(data)24 b(C)i(->)f(stream\(A\))d(=)j
(head)f(:)i(C)f(->)g(A)1278 1729 y(|)g(tail)f(:)i(C)f(->)g(C.)200
1860 y FA(The)16 b(unfold)g(diagram)g(for)h(the)f(stream)f(datat)o(yp)q(e)h
(is:)457 1983 y Fx(C)f Fz(\002)c Fx(\033)601 1971 y Fh(\033)p
617 1972 280 2 v 704 1948 a Fz(h)p Fx(f)s(;)d(P)803 1955 y
Fm(1)823 1948 y Fz(i)914 1983 y Fx(Y)22 b Fz(\002)11 b Fx(\033)p
1060 1972 426 2 v 1203 1948 a Fz(h)p Fx(g)r(;)d(P)1300 1955
y Fm(1)1320 1948 y Fz(i)1457 1971 y Fh(-)1515 1983 y Fx(A)i
Fz(\002)h Fx(\033)457 2276 y(C)k Fz(\002)c Fx(\033)451 2129
y(\022)475 2107 y Fk(E)501 2112 y Ff(i)474 2142 y Fk(R)522
2225 y Fh(?)p 521 2225 2 222 v 1560 2276 a Fx(A)1579 2225 y
Fh(?)p 1578 2225 V 1584 2129 a Fx(\022)1608 2107 y Fk(E)1634
2112 y Ff(i)1607 2142 y Fk(R)407 2568 y Fx(str)q(eam)p FA(\()p
Fx(A)p FA(\))206 2422 y Fx(E)242 2429 y Fk(i)256 2422 y Fz(f)p
Fx(I)t(;)d FA(unfold)462 2401 y Fk(R)491 2422 y Fz(g)522 2514
y Fh(?)p 521 2322 2 13 v 521 2358 V 521 2394 V 521 2430 V 521
2466 V 521 2502 V 651 2556 a(\033)p 667 2557 180 2 v 735 2605
a Fx(tail)864 2568 y(str)q(eam)p FA(\()p Fx(A)p FA(\))810 2276
y(unfold)944 2254 y Fk(R)979 2514 y Fh(?)p 978 2029 2 13 v
978 2066 V 978 2102 V 978 2138 V 978 2175 V 978 2211 V 978
2247 V 978 2284 V 978 2320 V 978 2356 V 978 2393 V 978 2429
V 978 2465 V 978 2502 V 1110 2557 422 2 v 1220 2605 a Fx(head)1503
2556 y Fh(-)1560 2568 y Fx(A)1579 2518 y Fh(?)p 1578 2319 2
13 v 1578 2356 V 1578 2393 V 1578 2430 V 1578 2467 V 1578 2504
V 1584 2422 a Fx(E)1620 2429 y Fk(i)1634 2422 y Fz(f)p Fx(I)t(;)g
FA(unfold)1841 2401 y Fk(R)1869 2422 y Fz(g)p eop
%%Page: 74 83
82 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(74)200 141 y FA(The)16 b(corresp)q(onding)h
(rewrite)f(rules)f(are:)396 255 y Fx(unf)5 b(ol)q(d)546 237
y Fk(R)575 255 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)p FA(;)g Fx(head)41
b FA(=)-8 b Fz(\))41 b(h)p Fx(f)s(;)8 b(P)1084 262 y Fm(1)1104
255 y Fz(i)p FA(;)g Fx(map)1238 237 y Fk(E)1264 242 y Ff(i)1279
255 y Fz(f)p Fx(P)1335 262 y Fm(0)1355 255 y Fx(;)g(unf)d(ol)q(d)1527
237 y Fk(R)1556 255 y Fz(f)p Fx(f)s(;)j(g)r Fz(gg)864 345 y
FA(=)-8 b Fz(\))41 b(h)p Fx(f)s(;)8 b(P)1084 352 y Fm(1)1104
345 y Fz(i)p FA(;)g Fx(P)1176 352 y Fm(0)396 524 y Fx(unf)d(ol)q(d)546
506 y Fk(R)575 524 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)p FA(;)g Fx(tail)67
b FA(=)-8 b Fz(\))41 b(h)p Fx(g)r(;)8 b(P)1082 531 y Fm(1)1102
524 y Fz(i)p FA(;)g Fx(map)1236 506 y Fk(E)1262 511 y Ff(i)1277
524 y Fz(f)p Fx(P)1333 531 y Fm(0)1353 524 y Fx(;)g(unf)d(ol)q(d)1525
506 y Fk(R)1555 524 y Fz(f)p Fx(f)s(;)j(g)r Fz(gg)864 614 y
FA(=)-8 b Fz(\))41 b(h)p Fx(g)r(;)8 b(P)1082 621 y Fm(1)1102
614 y Fz(i)p FA(;)g Fx(unf)d(ol)q(d)1293 596 y Fk(R)1323 614
y Fz(f)p Fx(f)s(;)j(g)r Fz(g)150 717 y FA(The)13 b Fx(head)h
FA(will)e(pro)s(ject)h(out)h(the)f(curren)o(t)f(state,)i(while)f(the)g
Fx(tail)g FA(will)f(pro)q(duce)i(the)f(next)g(state,)150 810
y(recursiv)o(ely)l(.)200 903 y(The)j(state)h(transitions)f(deliv)o(ered)e(b)o
(y)i(the)g(ab)q(o)o(v)o(e)g(rewrite)f(rules)h(are:)p 172 956
1757 2 v 171 1046 2 90 v 192 1019 a Fx(v)445 b(c)157 b(d)p
Fz(j)p Fx(f)907 1001 y Fr(0)1052 1019 y Fx(v)1078 1001 y Fr(0)1130
1019 y Fx(c)1151 1001 y Fr(0)1719 1019 y Fx(d)p Fz(j)p Fx(f)1787
1001 y Fr(0)p 1928 1046 V 172 1047 1757 2 v 171 1137 2 90 v
192 1110 a Fx(unf)5 b(ol)q(d)342 1092 y Fk(str)q(eam)457 1110
y Fz(f)p Fx(f)s(;)j(g)r Fz(g)p Fx(:v)42 b(head:c)f(d)97 b Fz(!)41
b Fx(v)54 b Fz(h)p Fx(f)s(;)8 b(P)1229 1117 y Fm(1)1249 1110
y Fz(i)p FA(;)g Fx(P)1321 1117 y Fm(0)1719 1110 y FA(con)o(t\()p
Fx(c)p FA(\))p Fx(:d)p 1928 1137 V 171 1227 V 192 1200 a(unf)d(ol)q(d)342
1182 y Fk(str)q(eam)457 1200 y Fz(f)p Fx(f)s(;)j(g)r Fz(g)p
Fx(:v)42 b(tail)q(:c)66 b(d)97 b Fz(!)41 b Fx(v)54 b Fz(h)p
Fx(g)r(;)8 b(P)1227 1207 y Fm(1)1248 1200 y Fz(i)p FA(;)g Fx(unf)d(ol)q(d)
1439 1182 y Fk(str)q(eam)1554 1200 y Fz(f)p Fx(f)s(;)j(g)r
Fz(g)41 b FA(con)o(t\()p Fx(c)p FA(\))p Fx(:d)p 1928 1227 V
172 1228 1757 2 v 150 1347 a Fs(Colists)150 1452 y FA(Colists)16
b(ha)o(v)o(e)g(the)g(follo)o(wing)g(de\014nition:)406 1527
y Fj(data)24 b(S)i(->)f(colist\(A\))d(=)j(delist:)e(S)j(->)e(sf\(A)h(*)g
(S\).)150 1636 y FA(The)16 b(unfold)h(diagram)e(for)i Fj(colists)d
FA(is:)647 1760 y Fx(Y)22 b Fz(\002)11 b Fx(\033)p 793 1749
409 2 v 944 1725 a Fz(h)p Fx(f)s(;)d(P)1043 1732 y Fm(1)1063
1725 y Fz(i)1173 1748 y Fh(-)1230 1760 y Fx(sf)d FA(\()p Fx(A)11
b Fz(\002)g Fx(Y)g FA(\))g Fz(\002)g Fx(\033)1211 2053 y(sf)5
b FA(\()p Fx(A)11 b Fz(\002)g FA(\()p Fx(Y)22 b Fz(\002)11
b Fx(\033)r FA(\)\))1389 1999 y Fh(?)p 1388 1999 2 210 v 1394
1906 a Fx(\022)1418 1884 y Fk(E)1444 1889 y Ff(i)1417 1918
y Fk(R)615 2345 y Fx(col)q(ist)p FA(\()p Fx(A)p FA(\))406 2053
y(unfold)540 2031 y Fk(colist)626 2053 y Fz(f)p Fx(f)5 b Fz(g)711
2291 y Fh(?)p 710 1806 2 13 v 710 1843 V 710 1879 V 710 1915
V 710 1952 V 710 1988 V 710 2024 V 710 2061 V 710 2097 V 710
2133 V 710 2170 V 710 2206 V 710 2242 V 710 2278 V 824 2334
423 2 v 953 2381 a Fx(del)q(ist)1218 2333 y Fh(-)1275 2345
y Fx(sf)g FA(\()p Fx(A)11 b Fz(\002)g Fx(Y)g FA(\))1389 2291
y Fh(?)p 1388 2106 2 13 v 1388 2141 V 1388 2175 V 1388 2210
V 1388 2245 V 1388 2280 V 1394 2199 a Fx(E)1430 2206 y Fk(i)1445
2199 y Fz(f)p Fx(I)t(;)d FA(unfold)1651 2177 y Fk(colist)1737
2199 y Fz(f)p Fx(f)d Fz(gg)150 2470 y FA(This)16 b(diagram)g(deliv)o(ers)e
(the)i(rewrite)g(rule)f(for)i(the)f(unfold,)g(where)472 2600
y Fx(map)565 2580 y Fk(E)591 2585 y Ff(i)606 2600 y Fz(f)p
Fx(P)662 2607 y Fm(0)682 2600 y Fx(;)8 b FA(unfold)838 2579
y Fk(colist)924 2600 y Fz(f)p Fx(f)d Fz(gg)14 b FA(=)g Fx(\022)1118
2578 y Fk(E)1144 2583 y Ff(i)1117 2613 y Fk(R)1159 2600 y FA(;)8
b Fx(E)1217 2607 y Fk(i)1231 2600 y Fz(f)p Fx(I)t(;)g FA(unfold)1438
2579 y Fk(colist)1524 2600 y Fz(f)p Fx(f)d Fz(gg)p eop
%%Page: 75 84
83 bop 428 33 a Fy(5.)25 b(THE)19 b(CHARITY)h(ABSTRA)o(CT)f(MA)o(CHINE)g(:)g
(D)o(A)l(T)l(A)l(TYPES)234 b(75)150 141 y FA(is:)288 245 y
Fx(unf)5 b(ol)q(d)438 227 y Fk(colist)525 245 y Fz(f)p Fx(f)g
Fz(g)p FA(;)j Fx(del)q(ist)40 b FA(=)-8 b Fz(\))41 b(h)p Fx(f)s(;)8
b(P)1008 252 y Fm(1)1028 245 y Fz(i)p FA(;)g Fx(map)1162 227
y Fk(E)1188 232 y Ff(i)1203 245 y Fz(f)p Fx(P)1259 252 y Fm(0)1279
245 y Fx(;)g(unf)d(ol)q(d)1451 227 y Fk(colist)1538 245 y Fz(f)p
Fx(f)g Fz(gg)788 335 y FA(=)-8 b Fz(\))41 b(h)p Fx(f)s(;)8
b(P)1008 342 y Fm(1)1028 335 y Fz(i)p FA(;)g Fx(map)1162 317
y Fk(sf)1201 335 y Fz(f)p Fx(map)1319 317 y Fr(\002)1348 335
y Fz(f)p Fx(P)1404 342 y Fm(0)1424 335 y Fx(;)g(unf)d(ol)q(d)1596
317 y Fk(colist)1683 335 y Fz(f)p Fx(f)g Fz(ggg)150 444 y FA(Notice)15
b(that)i(the)f(com)o(binator)f Fx(map)842 426 y Fk(E)888 444
y FA(generates)h(a)h(map)e(o)o(v)o(er)g(the)h(datat)o(yp)q(e)h
Fj(sf)p FA(.)200 534 y(Using)f(the)g(equation)g(for)h Fx(map)788
516 y Fk(R)816 534 y FA(,)f(the)g Fx(map)1023 516 y Fk(colist)1125
534 y FA(com)o(binator)f(is)i(de\014ned)f(as:)324 648 y Fx(map)417
630 y Fk(colist)503 648 y Fz(f)p Fx(f)5 b Fz(g)p FA(;)j Fx(del)q(ist)40
b FA(=)-8 b Fz(\))41 b(h)p Fx(del)q(ist;)8 b(I)t Fz(i)p FA(;)g
Fx(map)1210 630 y Fk(E)1236 635 y Ff(i)1250 648 y Fz(f)p Fx(f)s(;)g(map)1417
630 y Fk(colist)1502 648 y Fz(f)p Fx(f)d Fz(gg)766 738 y FA(=)-8
b Fz(\))41 b(h)p Fx(del)q(ist;)8 b(I)t Fz(i)p FA(;)g Fx(map)1210
719 y Fk(sf)1248 738 y Fz(f)p Fx(map)1366 719 y Fr(\002)1395
738 y Fz(f)p Fx(f)s(;)g(map)1562 719 y Fk(colist)1647 738 y
Fz(f)p Fx(f)d Fz(ggg)200 841 y FA(The)16 b(state)h(transition)f(rules)g(are:)
p 160 884 1780 2 v 159 973 2 90 v 181 946 a Fx(v)373 b(c)175
b(d)p Fz(j)p Fx(f)842 928 y Fr(0)987 946 y Fx(v)1013 928 y
Fr(0)1066 946 y Fx(c)1087 928 y Fr(0)1730 946 y Fx(d)p Fz(j)p
Fx(f)1798 928 y Fr(0)p 1939 973 V 160 975 1780 2 v 159 1065
2 90 v 181 1038 a Fx(unf)5 b(ol)q(d)331 1020 y Fk(colist)418
1038 y Fz(f)p Fx(f)g Fz(g)p Fx(:v)43 b(del)q(ist:c)c(d)97 b
Fz(!)41 b Fx(v)55 b Fz(h)p Fx(f)s(;)8 b(P)1165 1045 y Fm(1)1185
1038 y Fz(i)p FA(;)g Fx(map)1319 1020 y Fk(sf)1358 1038 y Fz(f)p
Fx(map)1476 1020 y Fr(\002)1505 1038 y Fz(f)p Fx(P)1561 1045
y Fm(0)1581 1038 y Fx(;)135 b FA(con)o(t\()p Fx(c)p FA(\))p
Fx(:d)p 1939 1065 V 159 1154 V 1066 1127 a(unf)5 b(ol)q(d)1216
1109 y Fk(colist)1303 1127 y Fz(f)p Fx(f)g Fz(ggg)p 1939 1154
V 159 1244 V 181 1217 a Fx(map)274 1199 y Fk(colist)360 1217
y Fz(f)p Fx(f)g Fz(g)p Fx(:v)101 b(del)q(ist:c)39 b(d)97 b
Fz(!)41 b Fx(v)55 b Fz(h)p Fx(f)s(;)8 b(I)t Fz(i)p FA(;)g Fx(map)1294
1199 y Fk(sf)1332 1217 y Fz(f)p Fx(f)s(;)g(map)1499 1199 y
Fk(colist)1585 1217 y Fz(f)p Fx(f)d Fz(gg)41 b FA(con)o(t\()p
Fx(c)p FA(\))p Fx(:d)p 1939 1244 V 159 1334 V 181 1307 a(r)q(ecor)q(d)319
1289 y Fk(colist)406 1307 y Fz(f)p Fx(f)5 b Fz(g)p Fx(:v)55
b(del)q(ist:c)39 b(d)97 b Fz(!)41 b Fx(v)55 b(f)640 b FA(con)o(t\()p
Fx(c)p FA(\))p Fx(:d)p 1939 1334 V 160 1335 1780 2 v 150 1411
a FA(Both)20 b(the)g(unfold)g(and)h(map)e(op)q(erations)i(o)o(v)o(er)e
(colists)h(m)o(ust)e(p)q(erform)i(a)g(map)f(o)o(v)o(er)g(the)h(in-)150
1501 y(ductiv)o(e)14 b Fj(sf)g FA(datat)o(yp)q(e)h(to)h(generate)e(the)h
(next)g(state.)21 b(If)14 b(the)h Fj(ff)g FA(constructor)g(is)g(returned,)f
(the)150 1591 y(computation)i(\014nishes,)f(while)h(a)g Fj(ss)g
FA(causes)g(a)h(recursion)f(to)h(generate)f(the)g(next)f(state.)p
eop
%%Page: 76 85
84 bop 1574 509 a Fw(Chapter)34 b Fv(6)341 633 y FB(Implemen)n(ting)26
b(The)h(Charit)n(y)f(Abstract)i(Mac)n(hine)p 150 689 1800 2
v 150 895 a FA(The)17 b(b)o(y{v)m(alue)g(Charit)o(y)g(Abstract)g(Mac)o(hine)g
(describ)q(ed)f(in)h(the)g(last)h(section)f(is)g(a)h(protot)o(yp)q(e)150
1004 y(mac)o(hine)c(fo)q(cusing)k(on)f(simplicit)n(y)c(and)18
b(correctness)e(rather)g(than)i(e\016cien)o(t)c(use)j(of)f(computer)150
1113 y(resources.)26 b(An)17 b(impro)o(v)o(ed)e(impleme)o(n)o(tation)g(of)j
(this)g(abstract)g(mac)o(hine)e(should)i(aim)e(to)j(im-)150
1222 y(pro)o(v)o(e)12 b(its)h(execution)f(sp)q(eed)h(and)g(memory)e(usage,)j
(while)e(retaining)g(its)h(correctness.)20 b(The)13 b(\014rst)150
1330 y(part)k(of)f(this)g(c)o(hapter)g(highligh)o(ts)g(those)g(dra)o(wbac)o
(ks)g(of)h(the)f(basic)g(v)o(ersion)f(whic)o(h)h(in\015uenced)150
1439 y(the)g(design)g(of)h(a)g(new)f(abstract)h(mac)o(hine)d(and)j(compiler)c
(stage.)200 1548 y(The)i(Charit)o(y)g(Abstract)g(Mac)o(hine)f(presen)o(ted)g
(in)h(the)g(last)h(c)o(hapter)e(has)i(sev)o(eral)e(shortcom-)150
1657 y(ings:)253 1797 y Fz(\017)21 b FA(There)d(is)h(no)g(sharing)h(of)f(sub)
q(expressions)h(through)g(lazy)e(graph)i(reduction.)29 b(Sub)q(ex-)299
1906 y(pressions)16 b(ma)o(y)e(b)q(e)h(referenced)f(more)h(than)h(once,)f
(but)h(with)f(no)h(sharing)h(mec)o(hanism)o(,)299 2015 y(the)c(co)q(de)h(for)
g(the)g(expression)f(is)h(duplicated)f(and)h(ma)o(y)e(b)q(e)i(ev)m(aluated)g
(m)o(ultiple)c(times.)253 2124 y Fz(\017)21 b FA(Co)q(de)i(is)f(generated)h
(at)g(run)f(time.)38 b(Similar)20 b(to)j(a)g(simple)e(template)f(instan)o
(tiation)299 2233 y(mac)o(hine,)12 b(the)k(template)d(for)j(a)g(function)f(m)
o(ust)f(b)q(e)i(tra)o(v)o(ersed)e(at)i(run)g(time)d(and)j(argu-)299
2341 y(men)o(ts)c(substituted)j(within)e(in)h(the)h(b)q(o)q(dy)g(of)g(the)f
(function.)20 b(F)l(or)15 b(example,)d(the)i(map)1910 2323
y Fk(E)1936 2328 y Ff(i)299 2450 y FA(com)o(binator)19 b(m)o(ust)h(generate)g
(co)q(de)h(for)g(an)h(op)q(eration)f(on)g(a)h(datat)o(yp)q(e,)f(forcing)g
(the)299 2559 y(mac)o(hine)14 b(to)i(susp)q(end)h(execution)e(while)h(this)g
(co)q(de)g(is)g(created.)1027 2700 y Fy(76)p eop
%%Page: 77 86
85 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(77)150 149 y FB(6.1.)42 b(Designing)25 b(a)j(new)e
(abstract)i(mac)n(hine)200 268 y FA(The)20 b(new)f(abstract)i(mac)o(hine)c
(will)i(not)h(execute)e(com)o(binators)h(directly)l(.)29 b(Instead)20
b(a)g(sim-)150 361 y(ple)f Fu(macr)n(o{c)n(o)n(de)f FA(language,)i(closer)f
(to)h(a)f(ph)o(ysical)f(mac)o(hine)g(instruction)g(set)i(is)f(used.)30
b(The)150 454 y(categorical)22 b(com)o(binators)g(are)g(compiled)e(to)j(this)
f(macro{co)q(de)g(language.)41 b(The)22 b(compiler)150 547
y(presen)o(ted)c(in)g(this)g(c)o(hapter)g(deals)g(more)g(with)g(e\016cien)o
(t)e(co)q(de)j(generation,)g(rather)f(than)h(op-)150 641 y(timization)g(and)i
(partial)g(ev)m(aluation)g(of)g(the)f(com)o(binators.)34 b(The)21
b(resultan)o(t)f(mac)o(hine)f(co)q(de)150 734 y(instructions)24
b(are)g(simple)d(and)k(mec)o(hanical)c(macro)i(instructions.)44
b(Muc)o(h)23 b(of)h(the)g(pattern)150 827 y(matc)o(hing)18
b(asso)q(ciated)j(with)e(the)h(b)o(y{v)m(alue)f(mac)o(hine)e(is)j(replaced)f
(with)g(more)g(straigh)o(t)g(for-)150 921 y(w)o(ard)14 b(assem)o(bly{lik)o(e)
d(instructions.)20 b(F)l(urthermore,)12 b(a)i(more)f(uniform)f(represen)o
(tation)h(of)h(data)150 1014 y(has)j(b)q(een)f(adopted.)150
1210 y Fs(6.1.1.)32 b(The)22 b(abstract)g(mac)n(hine)150 1340
y FA(The)e(target)g(abstract)h(mac)o(hine)d(is)h(describ)q(ed)h(in)f(tables)h
(similar)e(to)i(the)g(original)g(mac)o(hine.)150 1433 y(The)c(macro)g(mac)o
(hine)e(con)o(tains)i(four)h(stac)o(ks)f(as)h(b)q(efore:)253
1542 y Fz(\017)k Fx(v)c FA(v)m(alue)f(stac)o(k,)253 1635 y
Fz(\017)21 b Fx(c)16 b FA(co)q(de)g(stac)o(k)g(\(con)o(tains)g
Fu(macr)n(o)g FA(instructions\),)253 1729 y Fz(\017)21 b Fx(d)16
b FA(dump)f(stac)o(k,)h(and)253 1822 y Fz(\017)21 b Fx(f)g
FA(function)16 b(stac)o(k)150 1931 y(In)i(addition,)g(this)g(mac)o(hine)d
(con)o(tains)j(a)h(heap)f(store)g Fx(h)g FA(where)g(a)g(large)g(storage)h
(space)f(is)g(set)150 2025 y(aside)13 b(to)h(hold)f(uniform)f(data)j(v)m
(alues)e(generated)g(b)o(y)g(the)g(abstract)h(mac)o(hine.)k(Eac)o(h)c(heap)f
(item)150 2118 y(is)f(tagged)h(with)f(a)h(v)m(alue)f(to)g(distinguish)g(heap)
h(items)d(from)h(eac)o(h)h(other.)20 b(The)12 b(only)g(p)q(ermissible)150
2211 y(v)m(alues)k(in)g(the)g(heap)h(are:)253 2321 y Fz(\017)k
FA(\(\):)g(an)16 b(ob)s(ject)g(of)h(t)o(yp)q(e)e(1)253 2414
y Fz(\017)21 b FA(a)16 b(pro)q(duct)h Fz(h)p Fx(h)569 2421
y Fm(0)589 2414 y Fx(;)8 b(h)639 2421 y Fm(1)659 2414 y Fz(i)253
2507 y(\017)21 b FA(a)16 b(constructor)h(CONS)p Fz(f)p Fx(i)p
Fz(g)253 2600 y(\017)k FA(a)16 b(record)g(\()p Fx(r)529 2607
y Fm(0)549 2600 y Fx(;)8 b(:::;)g(r)657 2607 y Fk(n)679 2600
y FA(\))p eop
%%Page: 78 87
86 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(78)150 141 y FA(where)18 b Fx(h)321 148 y
Fm(0)341 141 y FA(,)h Fx(h)402 148 y Fm(1)422 141 y FA(,)g
Fx(r)477 148 y Fm(0)497 141 y FA(,)g(and)g Fx(r)649 148 y Fk(n)673
141 y FA(,)g(are)f(heap)h(v)m(alues.)29 b(The)19 b(la)o(y)o(out)f(of)h(the)g
(state)g(transition)g(tables)150 237 y(is)f(sligh)o(tly)f(di\013eren)o(t)g
(from)g(the)h(mac)o(hine)e(in)h(the)h(previous)g(c)o(hapters.)26
b(The)18 b(main)f(di\013erence)150 333 y(is)f(that)h(an)g(item)d(listed)i(on)
h(the)f(v)m(alue)g(stac)o(k)h(is)f(really)f(a)i(p)q(oin)o(ter)f(to)h(one)g
(heap)f(lo)q(cation)h(\(the)150 429 y(ro)q(ot)k(of)f(a)g(tree)f(structure)g
(in)g(the)h(heap\).)31 b(Suc)o(h)20 b(a)g(p)q(oin)o(ter)f(is)g(a)i
Fu(primary)d FA(p)q(oin)o(ter)h(in)o(to)g(the)150 525 y(heap.)30
b(Other)19 b(references)e(to)j(heap)f(items)e(are)i(listed)f(b)q(elo)o(w)h
(the)g(primary)f(p)q(oin)o(ter)g(as)i Fx(v)g FA(:)e Fx(x)150
622 y FA(whic)o(h)c(sa)o(ys)i(\\a)f(p)q(oin)o(ter)g Fx(v)i
FA(p)q(oin)o(ts)e(to)g(a)h(heap)f(lo)q(cation)g(with)g(con)o(ten)o(ts)g
Fx(x)p FA(".)21 b(F)l(or)15 b(example,)d(the)150 718 y(state)k(transition:)p
361 882 1379 2 v 360 957 2 75 v 443 957 V 465 934 a Fq(v)q
Fn(j)p Fq(h)169 b(c)353 b(d)p Fn(j)p Fq(f)45 b Fn(!)c Fq(v)1265
919 y Fp(0)1278 934 y Fn(j)p Fq(h)1314 919 y Fp(0)1482 934
y Fq(c)1500 919 y Fp(0)1558 934 y Fq(d)1580 919 y Fp(0)1591
934 y Fn(j)p Fq(f)1627 919 y Fp(0)p 1738 957 V 361 958 1379
2 v 360 1033 2 75 v 382 1011 a Fo(11)p 443 1033 V 41 w Fq(v)13
b Fo(:)e Fn(h)p Fq(v)557 1017 y Fl(0)576 1011 y Fq(;)c(v)615
1017 y Fl(1)633 1011 y Fn(i)42 b Fo(INDUCT)p Fn(f)p Fq(f)901
1017 y Fe(i)914 1011 y Fn(g)935 995 y Fe(n)935 1021 y(i)p Fl(=1)991
1011 y Fq(:c)f(d)77 b Fn(!)41 b Fq(v)1265 995 y Fp(0)1289 1011
y Fo(:)11 b Fn(h)p Fq(v)1349 995 y Fp(0)1348 1021 y Fl(0)1367
1011 y Fq(;)c(v)1406 1017 y Fl(1)1424 1011 y Fn(i)42 b Fq(f)1502
1017 y Fe(i)1558 1011 y Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p
1738 1033 V 360 1108 V 443 1108 V 478 1085 a(v)498 1091 y Fl(0)529
1085 y Fo(:)11 b Fq(c)570 1091 y Fe(i)584 1085 y Fq(:v)617
1070 y Fp(0)616 1096 y Fl(0)p 1738 1108 V 361 1109 1379 2 v
150 1351 a FA(is)20 b(read)g(as)h(\\)p Fx(v)g FA(is)f(a)h(p)q(oin)o(ter)e(to)
i(a)f(heap)g(item)e Fz(h)p Fx(v)1103 1358 y Fm(0)1123 1351
y Fx(;)8 b(v)1169 1358 y Fm(1)1188 1351 y Fz(i)p FA(,)21 b(and)g(the)e
Fx(v)1452 1358 y Fm(0)1492 1351 y FA(is)g(also)i(a)f(p)q(oin)o(ter)g(to)h(a)
150 1448 y(constructor)16 b Fx(c)428 1455 y Fk(i)458 1448 y
FA(also)h(lo)q(cated)f(in)g(the)f(heap".)22 b(If)16 b(the)f(p)q(oin)o(ter)h
(do)q(es)h(not)f(p)q(oin)o(t)g(to)h(an)o(ything)f(of)150 1544
y(relev)m(ance)f(for)i(that)f(state)h(transition,)f(the)g(just)g(p)q(oin)o
(ter)g(app)q(ears)i(as)f(the)f(v)m(ariable)f(name.)200 1640
y(The)i(basic)f(state)h(transitions)h(listed)e(in)g(table)h(6.1)g(describ)q
(e)f(the)g(formation)g(of)i(pairs,)e(pro-)150 1736 y(jection)23
b(on)h(pairs)h(and)f(cases)g(where)f(the)h(co)q(de)g(stac)o(k)g(is)f(empt)o
(y)l(.)42 b(These)24 b(transitions)g(are)150 1832 y(essen)o(tially)17
b(the)i(same)f(as)i(the)f(state)g(transitions)g(for)h(the)e(basic)h(com)o
(binators)g(in)f(the)h(Char-)150 1928 y(it)o(y)e(abstract)i(mac)o(hine)d(of)j
(c)o(hapter)f(4.)27 b(The)19 b(main)e(di\013erence)g(lies)g(in)h(the)g(ev)m
(aluation)h(of)f(the)150 2024 y(pair)f(com)o(binator.)22 b(Instead)17
b(of)g(ev)m(aluating)g(pairs)g(starting)g(with)g(the)f(\014rst)i(comp)q(onen)
o(t,)d(then)150 2120 y(doing)h(second)g(comp)q(onen)o(t,)e(the)i(macro)f(mac)
o(hine)e(ev)m(aluates)j(the)f(second)h(comp)q(onen)o(t)f(b)q(efore)150
2216 y(the)k(\014rst.)29 b(The)19 b(mac)o(hine)d(optimistically)g(assumes)i
(that)h(the)g(second)g(comp)q(onen)o(t)f(of)h(a)g(pair)150
2312 y(just)c(repro)q(duces)h(en)o(vironmen)o(t)c(\(eg:)21
b(con)o(tains)15 b(only)g(a)g(single)g(iden)o(tit)o(y)e(com)o(binator\).)19
b(In)c(this)150 2408 y(case,)23 b(the)f(en)o(vironmen)o(t)e(is)i(distributed)
f(to)i(the)f(second)g(comp)q(onen)o(t)g(and)g(no)h(com)o(binator)150
2504 y(co)q(de)17 b(needs)f(to)h(b)q(e)g(executed.)k(The)16
b(reason)i(for)e(the)h(c)o(hoice)e(in)h(ev)m(aluation)h(of)g(a)g(pro)q(duct)g
(will)150 2600 y(b)q(ecome)e(apparen)o(t)h(with)g(the)g(in)o(tro)q(duction)h
(of)f(the)g(datat)o(yp)q(es.)p eop
%%Page: 79 88
87 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(79)p 337 155 1427 2 v 336 230 2 75 v 398
230 V 420 208 a Fq(v)q Fn(j)p Fq(h)169 b(c)177 b(d)p Fn(j)p
Fq(f)224 b Fn(!)41 b Fq(v)1223 192 y Fp(0)1235 208 y Fn(j)p
Fq(h)1271 192 y Fp(0)1428 208 y Fq(c)1446 192 y Fp(0)1506 208
y Fq(d)1528 192 y Fp(0)1539 208 y Fn(j)p Fq(f)1575 192 y Fp(0)p
1762 230 V 337 232 1427 2 v 336 306 2 75 v 358 284 a Fo(1)p
398 306 V 41 w Fq(v)206 b Fo(!)p Fq(:c)153 b(d)256 b Fn(!)41
b Fo(!)214 b Fq(c)60 b(d)p 1762 306 V 336 381 V 358 359 a Fo(2)p
398 381 V 41 w Fq(v)13 b Fo(:)e Fn(h)p Fq(v)512 365 y Fl(0)531
359 y Fq(;)c(v)570 365 y Fl(1)588 359 y Fn(i)42 b Fq(P)673
365 y Fl(0)691 359 y Fq(:c)120 b(d)256 b Fn(!)41 b Fq(v)1222
365 y Fl(0)1428 359 y Fq(c)60 b(d)p 1762 381 V 336 456 V 358
433 a Fo(3)p 398 456 V 41 w Fq(v)13 b Fo(:)e Fn(h)p Fq(v)512
439 y Fl(0)531 433 y Fq(;)c(v)570 439 y Fl(1)588 433 y Fn(i)42
b Fq(P)673 439 y Fl(1)691 433 y Fq(:c)120 b(d)256 b Fn(!)41
b Fq(v)1222 439 y Fl(1)1428 433 y Fq(c)60 b(d)p 1762 456 V
336 531 V 358 508 a Fo(4)p 398 531 V 41 w Fq(v)206 b Fn(h)p
Fq(c)680 514 y Fl(0)699 508 y Fq(;)7 b(c)736 514 y Fl(1)754
508 y Fn(i)p Fq(:c)41 b(d)256 b Fn(!)41 b Fq(v)206 b(c)1446
514 y Fl(1)1506 508 y Fo(pr)1545 518 y Fl(0)1564 508 y Fo(\()p
Fq(v)q(;)7 b(c)1638 514 y Fl(0)1657 508 y Fq(;)g(c)p Fo(\))p
Fq(:d)p 1762 531 V 336 605 V 358 583 a Fo(5)p 398 605 V 41
w Fq(v)440 589 y Fl(1)646 583 y Fq(\017)178 b Fo(pr)880 593
y Fl(0)899 583 y Fo(\()p Fq(v)q(;)7 b(c)973 589 y Fl(0)992
583 y Fq(;)g(c)p Fo(\))p Fq(:d)40 b Fn(!)h Fq(v)206 b(c)1446
589 y Fl(0)1506 583 y Fo(pr)1545 593 y Fl(1)1564 583 y Fo(\()p
Fq(v)1600 589 y Fl(1)1619 583 y Fq(;)7 b(c)p Fo(\))p Fq(:d)p
1762 605 V 336 680 V 358 658 a Fo(6)p 398 680 V 41 w Fq(v)440
664 y Fl(0)646 658 y Fq(\017)178 b Fo(pr)880 668 y Fl(1)899
658 y Fo(\()p Fq(v)935 664 y Fl(1)954 658 y Fq(;)7 b(c)p Fo(\))p
Fq(:d)78 b Fn(!)41 b Fq(v)13 b Fo(:)e Fn(h)p Fq(v)1294 664
y Fl(0)1313 658 y Fq(;)c(v)1352 664 y Fl(1)1370 658 y Fn(i)42
b Fq(c)60 b(d)p 1762 680 V 336 755 V 358 732 a Fo(7)p 398 755
V 41 w Fq(v)206 b(\017)178 b Fo(con)o(t\()p Fq(c)p Fo(\))p
Fq(:d)117 b Fn(!)41 b Fq(v)206 b(c)60 b(d)p 1762 755 V 336
829 V 358 807 a Fo(8)p 398 829 V 41 w Fq(v)206 b(\017)178 b
Fo([)13 b(])241 b Fn(!)41 b Fo(HAL)m(T)p 1762 829 V 337 831
1427 2 v 413 907 a Fd(T)l(able)17 b(6.1.)23 b FA(State)17 b(transition)f
(rules)g(for)g(the)g(basic)h(instructions)150 1085 y Fs(6.1.2.)32
b(Sharing)23 b(in)h(pro)r(ducts)150 1209 y FA(When)c(a)g(v)m(alue)f(is)h
(distributed)f(o)o(v)o(er)g(a)h(pro)q(duct,)h(the)f(v)m(alue)f(distributed)g
(is)h(shared)g(among)150 1300 y(the)f(comp)q(onen)o(ts)f(of)h(the)g(pro)q
(duct.)30 b(This)20 b(is)e(in)h(direct)f(con)o(trast)h(to)h(the)f(b)o(y{v)m
(alue)f(mac)o(hine)150 1390 y(where)h(a)g(shared)h(com)o(binator)e(is)h
(copied,)g(then)g(distributed)g(to)g(the)g(comp)q(onen)o(ts.)29
b(Sharing)150 1481 y(in)16 b(this)g(mac)o(hine)d(is)j(accomplished)e(b)o(y)i
(using)g(p)q(oin)o(ters)g(to)h(reference)d(shared)i(v)m(alues,)g(instead)150
1572 y(of)23 b(cop)o(ying)f(the)g(en)o(tire)g(structure.)40
b(F)l(or)22 b(pro)q(ducts,)j(the)d(p)q(oin)o(ter)h Fx(v)h FA(in)e(state)h
(transition)g(4)150 1662 y(is)d(pushed)g(on)o(to)h(the)f(dump)f(and)i
(reloaded)e(on)o(to)i(the)f(v)m(alue)g(stac)o(k)g(b)o(y)f(transition)i(5.)33
b(Th)o(us)150 1753 y(b)q(oth)17 b(state)g(transition)g(rules)f(use)g(the)g
(distributed)g(v)m(alue,)g(but)g(no)h(cop)o(ying)f(is)g(required.)21
b(F)l(or)150 1843 y(example,)15 b(consider)j(the)f(diagonal)h
Fx(x)p FA(;)8 b Fz(h)p Fx(I)t(;)g(I)t Fz(i)p FA(.)25 b(Distributing)17
b Fx(x)g FA(o)o(v)o(er)g(the)g(pair)h(should)g(rewrite)150
1934 y(to)h Fz(h)p Fx(x)p FA(;)8 b Fx(I)t(;)g(x)p FA(;)g Fx(I)t
Fz(i)17 b FA(=)h Fz(h)p Fx(x;)8 b(x)p Fz(i)p FA(.)27 b(What)19
b(really)e(happ)q(ens)j(is)e(the)g(p)q(oin)o(ter)g Fx(x)g FA(is)g(repro)q
(duced)h(and)g(not)150 2025 y(the)d(v)m(alue)g Fx(x)g FA(p)q(oin)o(ts)h(to.)
150 2205 y Fs(6.1.3.)32 b(Mapping)23 b(o)n(v)n(er)g(pro)r(ducts)g(and)g(the)f
(t)n(yp)r(e)h Fb(1)150 2329 y FA(Mapping)g(o)o(v)o(er)f(the)h(basic)g(t)o(yp)
q(e)f(1)h(has)h(the)f(same)f(action)h(as)g(the)g Fx(P)1510
2336 y Fm(0)1553 2329 y FA(macro)f(instruction,)150 2419 y(and)d(so)h(will)d
(pro)q(duce)i(the)g(same)e(co)q(de)i(as)g(the)g Fx(P)1098 2426
y Fm(0)1118 2419 y FA(.)28 b(Ho)o(w)o(ev)o(er)17 b(mapping)h(o)o(v)o(er)g
(pro)q(ducts)h(\()p Fz(\002)p FA(\))150 2510 y(requires)13
b(a)i(new)g(macro)f(instruction)g(with)g(the)h(state)f(transition)h(as)g(sho)
o(wn)h(in)e(table)g(6.2.)21 b(The)150 2600 y Fx(map)243 2582
y Fr(\002)290 2600 y FA(instruction)d(p)q(erforms)f(the)h(same)f(function)h
(as)g(the)g Fx(map)1387 2582 y Fr(\002)1434 2600 y FA(com)o(binator)f
(describ)q(ed)g(in)p eop
%%Page: 80 89
88 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(80)p 347 155 1406 2 v 346 230 2 75 v 409
230 V 430 208 a Fq(v)q Fn(j)p Fq(h)195 b(c)282 b(d)p Fn(j)p
Fq(f)45 b Fn(!)c Fq(v)1185 192 y Fp(0)1198 208 y Fn(j)p Fq(h)1234
192 y Fp(0)1421 208 y Fq(c)1439 192 y Fp(0)1492 208 y Fq(d)1514
192 y Fp(0)1526 208 y Fn(j)p Fq(f)1562 192 y Fp(0)p 1752 230
V 347 232 1406 2 v 346 306 2 75 v 368 284 a Fo(9)p 409 306
V 41 w Fq(v)13 b Fo(:)f Fn(h)p Fq(v)524 269 y Fp(0)536 284
y Fq(;)7 b(v)575 290 y Fl(2)593 284 y Fn(i)73 b Fo(MAP)779
266 y Fp(\002)807 284 y Fn(f)p Fq(f)r(;)7 b(g)q Fn(g)p Fq(:c)41
b(d)77 b Fn(!)41 b Fq(v)1185 269 y Fp(0)q(0)1219 284 y Fo(:)11
b Fn(h)p Fq(v)1278 290 y Fl(1)1297 284 y Fq(;)c(v)1336 290
y Fl(2)1354 284 y Fn(i)51 b Fq(g)g Fo(pr)1532 294 y Fl(0)1550
284 y Fo(\()p Fq(v)1587 269 y Fp(0)1586 294 y Fl(0)1605 284
y Fq(;)7 b(f)r(;)g(c)p Fo(\))p Fq(:d)p 1752 306 V 346 381 V
409 381 V 444 359 a(v)465 344 y Fp(0)489 359 y Fo(:)k Fn(h)p
Fq(v)548 365 y Fl(0)567 359 y Fq(;)c(v)606 365 y Fl(1)624 359
y Fn(i)538 b Fq(v)1199 344 y Fp(0)1198 369 y Fl(0)1229 359
y Fo(:)11 b Fn(h)p Fq(v)1288 365 y Fl(0)1306 359 y Fq(;)c(v)1345
365 y Fl(2)1364 359 y Fn(i)p 1752 381 V 347 383 1406 2 v 405
459 a Fd(T)l(able)17 b(6.2.)24 b FA(State)16 b(transition)g(rule)g(for)g
(mapping)g(o)o(v)o(er)f(pro)q(ducts)150 655 y(the)h(previous)g(c)o(hapter.)
150 848 y Fs(6.1.4.)32 b(Compiling)24 b(categorical)e(com)n(binators)150
961 y FA(straigh)o(tforw)o(ard)h(compilation)e(from)h(categorical)g(com)o
(binators)f(to)i(macro{instructions)f(is)150 1039 y(giv)o(en)15
b(b)o(y:)605 1105 y Fo(\()p Fq(C)651 1111 y Fl(1)669 1105 y
Fo(\))42 b Fn(C)r Fo([!])10 b(=!)p Fq(;)605 1179 y Fo(\()p
Fq(C)651 1185 y Fl(2)669 1179 y Fo(\))42 b Fn(C)r Fo([)p Fn(h)p
Fq(f)r(;)7 b(g)q Fn(i)p Fo(])k(=)h Fn(hC)r Fo([)p Fq(f)t Fo(])p
Fq(;)7 b Fn(C)r Fo([)p Fq(g)q Fo(])p Fn(i)p Fq(;)605 1254 y
Fo(\()p Fq(C)651 1260 y Fl(3)669 1254 y Fo(\))42 b Fn(C)r Fo([)p
Fq(f)t Fo(;)7 b Fq(g)q Fo(])k(=)h Fn(C)r Fo([)p Fq(f)t Fo(])p
Fq(:)p Fn(C)r Fo([)p Fq(g)q Fo(])p Fq(;)605 1329 y Fo(\()p
Fq(C)651 1335 y Fl(4)669 1329 y Fo(\))42 b Fn(C)r Fo([)p Fq(p)784
1335 y Fe(i)797 1329 y Fo(])11 b(=)h Fq(P)891 1335 y Fe(i)905
1329 y Fq(;)7 b Fo(where)14 b Fq(i)e Fo(=)g(0)p Fq(;)7 b Fo(1)o
Fq(;)605 1404 y Fo(\()p Fq(C)651 1410 y Fl(5)669 1404 y Fo(\))42
b Fn(C)r Fo([)p Fq(I)s Fo(])11 b(=)h Fq(\017;)7 b Fo(where)14
b Fq(\017)g Fo(is)g(the)g(empt)o(y)f(co)q(de)i(stream)605 1478
y(\()p Fq(C)651 1484 y Fl(6)669 1478 y Fo(\))42 b Fn(C)r Fo([)p
Fq(map)842 1463 y Fp(\002)870 1478 y Fn(f)p Fq(f)r(;)7 b(g)q
Fn(g)p Fo(])k(=)g(MAP)1138 1460 y Fp(\002)1166 1478 y Fn(fC)r
Fo([)p Fq(f)t Fo(])p Fq(;)c Fn(C)r Fo([)p Fq(g)q Fo(])p Fn(g)605
1553 y Fo(\()p Fq(C)651 1559 y Fl(7)669 1553 y Fo(\))42 b Fn(C)r
Fo([)p Fq(map)842 1538 y Fl(1)860 1553 y Fn(fg)p Fo(])11 b(=)h
Fq(P)996 1559 y Fl(0)165 1633 y FA(Comp)q(osition)j(of)g(com)o(binators)f(in)
h Fx(C)869 1640 y Fm(3)904 1633 y FA(is)g(compiled)d(in)o(to)j(a)h(sequence)e
(of)h(co)q(de)g(for)h Fx(f)k FA(follo)o(w)o(ed)150 1726 y(b)o(y)c(co)q(de)g
(for)h Fx(g)r FA(.)k(The)16 b(iden)o(tit)o(y)f(com)o(binator)g(in)h
Fx(C)1094 1733 y Fm(5)1129 1726 y FA(do)q(es)h(not)g(pro)q(duce)g(an)o(y)f
(co)q(de.)150 1927 y FB(6.2.)42 b(Inductiv)n(e)25 b(Datat)n(yp)r(es)200
2044 y FA(Datat)o(yp)q(es)15 b(in)f(the)g(new)h(mac)o(hine)d(are)i(handled)h
(in)f(a)h(more)e(uniform,)g(simple)f(manner)h(than)150 2137
y(in)j(the)f(original)h(mac)o(hine.)j(Inductiv)o(e)14 b(datat)o(yp)q(es)i
(with)g(their)f(corresp)q(onding)i(fold,)e(map)g(and)150 2230
y(case)j(com)o(binators)f(are)h(generalized)f(in)o(to)h(a)h(single)e(INDUCT)h
(instruction.)26 b(This)19 b(INDUCT)150 2322 y(instruction)d(holds)h(p)q(oin)
o(ters)g(to)g(the)f(compiled)f(co)q(de)i(for)g(eac)o(h)f(constructor)h(in)f
(the)h(datat)o(yp)q(e)150 2415 y(as)f(sho)o(wn)g(in)f(\014gure)g(6.1.)22
b(The)15 b Fx(c)764 2422 y Fm(1)799 2415 y FA(to)h Fx(c)879
2422 y Fk(n)917 2415 y FA(represen)o(t)f(the)g(compiled)e(co)q(de)i(for)h
(eac)o(h)f(constructor)150 2508 y(of)k(the)f(datat)o(yp)q(e,)h(and)h
(applying)e(a)h(constructor)g(to)g(an)g(INDUCT)f(instruction)h(will)e(simply)
150 2600 y(c)o(ho)q(ose)g(the)f(appropriate)h(co)q(de)f(to)h(execute.)p
eop
%%Page: 81 90
89 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(81)669 218 y
 12038062 8551629 4604723 42495016 16642785 51046645 startTexFig
 669 218 a
%%BeginDocument: figures/inductcomb.eps
%!
%%BoundingBox: 70 646 253 776
%%Title: inductcomb
%%CreationDate: Thu Apr 27 15:43:07 1995
%%Creator: Tgif-2.16 by William Chia-Wei Cheng (william@cs.UCLA.edu)
%
%	Due to bugs in Transcript, the 'PS-Adobe-' stuff is omitted from line 1
%

/tgifdict 132 dict def
tgifdict begin

%
%	Using a zero value radius for an ellipse or an arc would result
%		in a non-invertible CTM matrix which causes problem when this
%		when this PostScript is wrapped inside other routines, such as
%		the multi.ps package from
%		ftp.ucc.su.oz.au:/pub/ps_printing/multi.  You can overcome such
%		error by uncommenting the sole line of the procedure below:
%
/tgif_min_radius
 {
%    dup 0.01 lt { pop 0.01 } if
 } bind def

/tgifellipsedict 6 dict def
tgifellipsedict /mtrx matrix put

/tgifellipse
 { tgifellipsedict begin
      /yrad exch def
      /xrad exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      xrad yrad scale
      0 0 1 0 360 arc
      savematrix setmatrix
   end
 } def

/tgifarrowtipdict 8 dict def
tgifarrowtipdict /mtrx matrix put

/tgifarrowtip
 { tgifarrowtipdict begin
      /dy exch def
      /dx exch def
      /h exch def
      /w exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      dy dx atan rotate
      0 0 moveto
      w neg h lineto
      w neg h neg lineto
      savematrix setmatrix
   end
 } def

/tgifarcdict 8 dict def
tgifarcdict /mtrx matrix put

/tgifarcn
 { tgifarcdict begin
      /endangle exch def
      /startangle exch def
      /yrad exch def
      /xrad exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      xrad yrad scale
      0 0 1 startangle endangle arc
      savematrix setmatrix
   end
 } def

/tgifarc
 { tgifarcdict begin
      /endangle exch def
      /startangle exch def
      /yrad exch def
      /xrad exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      xrad yrad scale
      0 0 1 startangle endangle arcn
      savematrix setmatrix
   end
 } def

/tgifsetuserscreendict 22 dict def
tgifsetuserscreendict begin
   /tempctm matrix def
   /temprot matrix def
   /tempscale matrix def

   /concatprocs
    { /proc2 exch cvlit def
      /proc1 exch cvlit def
      /newproc proc1 length proc2 length add array def
      newproc 0 proc1 putinterval
      newproc proc1 length proc2 putinterval
      newproc cvx
    } def
   /resmatrix matrix def
   /findresolution
    { 72 0 resmatrix defaultmatrix dtransform
      /yres exch def /xres exch def
      xres dup mul yres dup mul add sqrt
    } def
end

/tgifsetuserscreen
 { tgifsetuserscreendict begin
      /spotfunction exch def
      /screenangle exch def
      /cellsize exch def

      /m tempctm currentmatrix def
      /rm screenangle temprot rotate def
      /sm cellsize dup tempscale scale def

      sm rm m m concatmatrix m concatmatrix pop

      1 0 m dtransform /y1 exch def /x1 exch def

      /veclength x1 dup mul y1 dup mul add sqrt def
      /frequency findresolution veclength div def

      /newscreenangle y1 x1 atan def

      m 2 get m 1 get mul m 0 get m 3 get mul sub 0 gt

      {{neg} /spotfunction load concatprocs
         /spotfunction exch def
      } if

      frequency newscreenangle /spotfunction load setscreen
   end
 } def

/tgifsetpatterndict 18 dict def
tgifsetpatterndict begin
   /bitison
    { /ybit exch def /xbit exch def
      /bytevalue bstring ybit bwidth mul xbit 8 idiv add get def

      /mask 1 7 xbit 8 mod sub bitshift def
      bytevalue mask and 0 ne
    } def
end

/tgifbitpatternspotfunction
 { tgifsetpatterndict begin
      /y exch def /x exch def

      /xindex x 1 add 2 div bpside mul cvi def
      /yindex y 1 add 2 div bpside mul cvi def

      xindex yindex bitison
       { /onbits onbits 1 add def 1 }
       { /offbits offbits 1 add def 0 }
       ifelse
   end
 } def

/tgifsetpattern
 { tgifsetpatterndict begin
      /cellsz exch def
      /angle exch def
      /bwidth exch def
      /bpside exch def
      /bstring exch def

      /onbits 0 def /offbits 0 def
      cellsz angle /tgifbitpatternspotfunction load tgifsetuserscreen
      {} settransfer
      offbits offbits onbits add div setgray
   end
 } def

/tgifxpmdict 4 dict def
/tgifbwpicstr 1 string def
/tgifcolorpicstr 3 string def

/tgifsetpixels { tgifxpmdict begin /pixels exch def end } def

/tgifsetpix { tgifxpmdict begin pixels 3 1 roll putinterval end } def

/tgifbwspot
 { tgifxpmdict begin
      /index exch def
      tgifbwpicstr 0
      pixels index 3 mul 3 getinterval aload pop
      255 mul .114 mul exch 255 mul .587 mul add exch 255 mul .299 mul add
      cvi put
      tgifbwpicstr
   end
 } def

/tgifcolorspot
 { tgifxpmdict begin
      /index exch def
      pixels index 3 mul 3 getinterval aload pop
      255 mul cvi tgifcolorpicstr 2 3 -1 roll put
      255 mul cvi tgifcolorpicstr 1 3 -1 roll put
      255 mul cvi tgifcolorpicstr 0 3 -1 roll put
      tgifcolorpicstr
   end
 } def

/tgifnewcolorspot
 { tgifxpmdict begin
      /index exch def
      pixels index 3 mul 3 getinterval aload pop setrgbcolor
   end
 } def

/tgifcolordict 4 dict def

/colorimage where
 { pop }
 { /colorimage
   { tgifcolordict begin
        pop pop pop pop pop
        /ih exch def
        /iw exch def
        /x 0 def
        /y 0 def
        1 1 ih
         { pop 1 1 iw
            { pop currentfile
              tgifbwpicstr readhexstring pop 0 get tgifnewcolorspot
              x y moveto 1 0 rlineto 0 1 rlineto -1 0 rlineto
              closepath fill
              /x x 1 add def
            } for
           /y y 1 add def
           /x 0 def
         } for
     end
   } def
 } ifelse

/tgifpatdict 10 dict def

/tgifpatbyte
 { currentdict /retstr get exch
   pat i cellsz mod get put
 } def

/tgifpatproc
 { 0 1 widthlim {tgifpatbyte} for retstr
   /i i 1 add def
 } def

/tgifpatfill
 { tgifpatdict begin
      /h exch def
      /w exch def
      /lty exch def
      /ltx exch def
      /cellsz exch def
      /pat exch def

      /widthlim w cellsz div cvi 1 sub def
      /retstr widthlim 1 add string def
      /i 0 def

      ltx lty translate
      w h true [1 0 0 1 0 0] {tgifpatproc} imagemask
      ltx neg lty neg translate
   end
 } def

/pat1 <ffffffffffffffff> def
/pat2 <0000000000000000> def
/pat3 <8000000008000000> def
/pat4 <8800000022000000> def
/pat5 <8800220088002200> def
/pat6 <8822882288228822> def
/pat7 <aa55aa55aa55aa55> def
/pat8 <77dd77dd77dd77dd> def
/pat9 <77ffddff77ffddff> def
/pat10 <77ffffff77ffffff> def
/pat11 <7fffffff7fffffff> def
/pat12 <8040200002040800> def
/pat13 <40a00000040a0000> def
/pat14 <ff888888ff888888> def
/pat15 <ff808080ff080808> def
/pat16 <f87422478f172271> def
/pat17 <038448300c020101> def
/pat18 <081c22c180010204> def
/pat19 <8080413e080814e3> def
/pat20 <8040201008040201> def
/pat21 <8844221188442211> def
/pat22 <77bbddee77bbddee> def
/pat23 <c1e070381c0e0783> def
/pat24 <7fbfdfeff7fbfdfe> def
/pat25 <3e1f8fc7e3f1f87c> def
/pat26 <0102040810204080> def
/pat27 <1122448811224488> def
/pat28 <eeddbb77eeddbb77> def
/pat29 <83070e1c3870e0c1> def
/pat30 <fefdfbf7efdfbf7f> def
/pat31 <7cf8f1e3c78f1f3e> def

/tgifcentertext { dup stringwidth pop 2 div neg 0 rmoveto } def

/tgifrighttext { dup stringwidth pop neg 0 rmoveto } def

/tgifreencsmalldict 12 dict def
/tgifReEncodeSmall
 { tgifreencsmalldict begin
      /newcodesandnames exch def
      /newfontname exch def
      /basefontname exch def

      /basefontdict basefontname findfont def
      /newfont basefontdict maxlength dict def

      basefontdict
      { exch dup /FID ne
         { dup /Encoding eq
            { exch dup length array copy newfont 3 1 roll put }
            { exch newfont 3 1 roll put }
            ifelse
         }
         { pop pop }
         ifelse
      }
      forall

      newfont /FontName newfontname put
      newcodesandnames aload pop

      newcodesandnames length 2 idiv
      { newfont /Encoding get 3 1 roll put}
      repeat

      newfontname newfont definefont pop
   end
 } def

/tgifgray { 8 1 0 72 300 32 div div tgifsetpattern } bind def

/tgifboxdict 6 dict def
/tgifboxstroke
 { tgifboxdict begin
      /pat def /w def /y2 exch def /x2 exch def /y1 exch def /x1 exch def
      1.415 setmiterlimit
      w 1 eq { w setlinewidth } if
      pat pat1 ne pat pat2 ne and { gsave pat tgifgray } if
      newpath x1 y1 moveto x2 y1 lineto x2 y2 lineto x1 y2 lineto closepath
      pat pat2 eq { 1 setgray stroke 0 setgray } { stroke } ifelse
      pat pat1 ne pat pat2 ne and { grestore } if
      w 1 eq { 1 setlinewidth } if
      1 setmiterlimit
   end
 } def
/tgifboxfill
 { tgifboxdict begin
      /pat def /y2 exch def /x2 exch def /y1 exch def /x1 exch def
      pat pat1 ne pat pat2 ne and { gsave pat tgifgray } if
      newpath x1 y1 moveto x2 y1 lineto x2 y2 lineto x1 y2 lineto closepath
      pat pat2 eq { 1 setgray fill 0 setgray } { fill } ifelse
      pat pat1 ne pat pat2 ne and { grestore } if
   end
 } def

end

%%PageBoundingBox: 70 646 253 776
tgifdict begin
/tgifsavedpage save def

1 setmiterlimit
1 setlinewidth

0 setgray

72 0 mul 72 11.00 mul translate
72 128 div 100 mul 100 div dup neg scale

gsave

% BOX
gsave
   1.415 setmiterlimit
   newpath
      128 64 moveto 256 64 lineto 256 256 lineto 128 256 lineto
   closepath stroke
   1 setmiterlimit
grestore

% TEXT
0 setgray
/Courier findfont [17 0 0 -17 0 0] makefont setfont
   gsave
      160 46 moveto (induct) show
   grestore

% BOX
gsave
   1.415 setmiterlimit
   newpath
      128 64 moveto 256 64 lineto 256 128 lineto 128 128 lineto
   closepath stroke
   1 setmiterlimit
grestore

% BOX
gsave
   1.415 setmiterlimit
   newpath
      128 128 moveto 256 128 lineto 256 192 lineto 128 192 lineto
   closepath stroke
   1 setmiterlimit
grestore

% POLY/OPEN-SPLINE
gsave
   newpath
      192 96 moveto
      0 208 atan dup cos 8 mul 400 exch sub
      exch sin 8 mul 96 exch sub lineto
   stroke
grestore
gsave
   newpath
      400 96 8 3 208 0 tgifarrowtip
   closepath fill
grestore

% POLY/OPEN-SPLINE
gsave
   newpath
      192 160 moveto
      0 208 atan dup cos 8 mul 400 exch sub
      exch sin 8 mul 160 exch sub lineto
   stroke
grestore
gsave
   newpath
      400 160 8 3 208 0 tgifarrowtip
   closepath fill
grestore

% POLY/OPEN-SPLINE
gsave
   newpath
      192 224 moveto
      0 208 atan dup cos 8 mul 400 exch sub
      exch sin 8 mul 224 exch sub lineto
   stroke
grestore
gsave
   newpath
      400 224 8 3 208 0 tgifarrowtip
   closepath fill
grestore

% TEXT
0 setgray
/Courier findfont [17 0 0 -17 0 0] makefont setfont
   gsave
      416 110 moveto (c1) show
   grestore

% TEXT
0 setgray
/Courier findfont [17 0 0 -17 0 0] makefont setfont
   gsave
      416 174 moveto (...) show
   grestore

% TEXT
0 setgray
/Courier findfont [17 0 0 -17 0 0] makefont setfont
   gsave
      416 238 moveto (cn) show
   grestore

grestore
tgifsavedpage restore
end
%MatchingCreationDate: Thu Apr 27 15:43:07 1995
%%EndDocument

 endTexFig
 624 958 a Fd(Figure)18 b(6.1.)24 b FA(The)16 b(inductiv)o(e)e(com)o(binator)
200 1342 y(Th)o(us)g(this)f(generalized)g(INDUCT)g(instruction)g(pro)o(vides)
h(a)g(more)e(uniform)h(represen)o(tation)150 1482 y(and)18
b(more)d(mec)o(hanical)f(instruction)j(pro)q(cessing)h(leading)e(to)i
(considerable)e(simpli\014cation)f(of)150 1622 y(the)i(mac)o(hine.)k(Ev)m
(aluating)c(a)g(inductiv)o(e)e(op)q(erator)j(amoun)o(ts)f(to)g(c)o(hasing)g
(a)g(p)q(oin)o(ter)g(to)g(some)150 1762 y(compiled)i(co)q(de)i(that)h
(inheren)o(tly)e(kno)o(ws)h(what)h(op)q(eration)g(it)f(is.)36
b(The)22 b(complexit)o(y)c(of)j(the)150 1901 y(mac)o(hine)14
b(is)i(reduced)f(\(as)h(it)g(should)g(b)q(e\))h(at)f(the)g(cost)g(of)g(sligh)
o(tly)f(increasing)h(the)f(complexit)o(y)150 2041 y(of)i(the)f(compiler.)200
2181 y(A)d(further)f(b)q(ene\014t)i(of)f(creating)g(a)h(generic)e(macro)g
(com)o(binator)g(for)h(the)g(inductiv)o(e)f(datat)o(yp)q(e)150
2321 y(op)q(erations)20 b(is)e(that)i(it)e(enables)g(the)h(elimination)d(of)j
(the)g(co)q(de)g(generation)f(required)g(b)o(y)g(the)150 2461
y Fx(map)243 2442 y Fk(E)269 2447 y Ff(i)302 2461 y FA(com)o(binator)f(at)i
(run)f(time.)25 b(Instead,)19 b(the)f(compiler)d(is)j(giv)o(en)g(the)g(resp)q
(onsibilit)o(y)f(for)150 2600 y(pro)q(ducing)g(co)q(de)f(for)h(an)o(y)f
(application)g(of)h(the)f(induct)f(com)o(binator)g(to)i(a)g(constructor.)p
eop
%%Page: 82 91
90 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(82)150 141 y Fs(6.2.1.)32 b(Compiling)24
b(inductiv)n(e)h(com)n(binators)150 264 y FA(Constructors)17
b(and)g(the)f(inductiv)o(e)f(com)o(binators)g(fold,)h(case)g(and)h(map)e(are)
h(compiled)e(with:)266 368 y Fo(\()p Fq(C)312 374 y Fl(8)331
368 y Fo(\))41 b Fn(C)r Fo([)p Fq(c)442 374 y Fe(i)456 368
y Fo(])324 b(=)42 b(CONS)p Fn(f)p Fq(i)p Fn(g)p Fq(;)266 442
y Fo(\()p Fq(C)312 448 y Fl(9)331 442 y Fo(\))f Fn(C)r Fo([)p
Fq(case)503 427 y Fe(L)528 442 y Fn(f)p Fq(f)569 448 y Fl(1)587
442 y Fq(;)7 b(:::;)g(f)681 448 y Fe(n)702 442 y Fn(g)p Fo(])57
b(=)42 b(INDUCT)p Fn(f)p Fq(f)1080 427 y Fp(0)1076 453 y Fe(i)1092
442 y Fn(g)1113 427 y Fe(n)1113 453 y(i)p Fl(=1)792 517 y Fo(where)15
b Fq(f)936 502 y Fp(0)932 528 y Fe(i)962 517 y Fo(:=)f Fn(C)r
Fo([)p Fq(f)1076 523 y Fe(i)1090 517 y Fo(])p Fq(;)250 592
y Fo(\()p Fq(C)296 598 y Fl(10)331 592 y Fo(\))41 b Fn(C)r
Fo([)p Fq(f)t(ol)q(d)504 573 y Fe(L)529 592 y Fn(f)p Fq(g)570
598 y Fl(1)588 592 y Fq(;)7 b(:::;)g(g)682 598 y Fe(n)702 592
y Fn(g)p Fo(])57 b(=)42 b(INDUCT)p Fn(f)p Fq(g)1077 577 y Fp(0)1076
603 y Fe(i)1089 592 y Fn(g)1110 577 y Fe(n)1110 603 y(i)p Fl(=1)792
667 y Fo(where)15 b Fq(g)933 652 y Fp(0)932 677 y Fe(i)960
667 y Fo(:=)e Fn(hC)r Fo([map)1148 652 y Fe(E)1172 656 y Fc(i)1187
667 y Fn(f)p Fq(p)1229 673 y Fl(0)1248 667 y Fq(;)7 b Fo(induct)o
Fn(f)p Fq(g)1423 652 y Fp(0)1422 677 y Fe(i)1436 667 y Fn(g)1457
652 y Fe(n)1457 677 y(i)p Fl(=1)1512 667 y Fn(g)p Fo(])p Fq(;)g(P)1591
673 y Fl(1)1608 667 y Fn(i)p Fq(:)p Fn(C)r Fo([)p Fq(g)1692
673 y Fe(i)1705 667 y Fo(])p Fq(;)250 741 y Fo(\()p Fq(C)296
747 y Fl(11)331 741 y Fo(\))41 b Fn(C)r Fo([)p Fq(map)503 726
y Fe(L)528 741 y Fn(f)p Fq(h)573 747 y Fl(1)591 741 y Fq(;)7
b(:::;)g(h)689 747 y Fe(m)718 741 y Fn(g)p Fo(])41 b(=)h(INDUCT)p
Fn(f)p Fq(h)1080 726 y Fp(0)1080 752 y Fe(i)1093 741 y Fn(g)1114
726 y Fe(n)1114 752 y(i)p Fl(=1)792 816 y Fo(where)15 b Fq(h)936
801 y Fp(0)936 827 y Fe(i)964 816 y Fo(:=)e Fn(C)r Fo([map)1136
801 y Fe(E)1160 805 y Fc(i)1175 816 y Fn(f)p Fq(h)1220 822
y Fl(1)1239 816 y Fq(;)7 b(:::;)g(h)1337 822 y Fe(m)1365 816
y Fq(;)g Fo(induct)p Fn(f)p Fq(h)1544 801 y Fp(0)1544 827 y
Fe(i)1558 816 y Fn(g)1579 801 y Fe(n)1579 827 y(i)p Fl(=1)1634
816 y Fn(g)p Fo(])p Fq(:)p Fo(CONS)p Fn(f)p Fq(i)p Fn(g)172
917 y FA(A)22 b(new)g(com)o(binator)f Fx(induct)p Fz(f)p Fx(h)790
899 y Fr(0)790 930 y Fk(i)803 917 y Fz(g)828 899 y Fk(n)828
930 y(i)p Fm(=1)909 917 y FA(is)h(in)o(tro)q(duced)g(to)g(temp)q(orarily)f
(hold)h(the)g(inductiv)o(e)150 1000 y(instructions.)29 b(The)19
b(Compilation)e(of)j(this)e(instruction)h(pro)q(duces)g(the)g(INDUCT)f(macro)
g(in-)150 1083 y(struction:)621 1170 y Fo(\()p Fq(C)667 1176
y Fl(12)702 1170 y Fo(\))42 b Fn(C)r Fo([)p Fq(induct)p Fn(f)p
Fq(h)959 1155 y Fp(0)959 1181 y Fe(i)972 1170 y Fn(g)993 1155
y Fe(n)993 1181 y(i)p Fl(=1)1048 1170 y Fo(])f(=)h(INDUCT)p
Fn(f)p Fq(h)1389 1155 y Fp(0)1389 1181 y Fe(i)1402 1170 y Fn(g)1423
1155 y Fe(n)1423 1181 y(i)p Fl(=1)200 1379 y FA(A)o(t)20 b(run)h(time,)f(the)
h(induct)g(com)o(binator)e(do)q(es)j(not)g(kno)o(w)f(what)h(constructor)f(it)
g(will)f(en-)150 1477 y(coun)o(ter,)g(and)g(therefore)f(m)o(ust)g(assume)g
(that)h(an)o(y)f(constructor)i(of)f(the)f(datat)o(yp)q(e)h(could)g(b)q(e)150
1575 y(encoun)o(tered.)g(The)14 b(co)q(de)h(for)g(eac)o(h)f(constructor)g
(applied)g(to)h(the)f(induct)g(com)o(binator)g(is)g(com-)150
1672 y(piled)k(and)h(stored)g(as)h(an)f(o\013set)h(in)e(the)h(induct)f(com)o
(binator)g(itself.)28 b(An)18 b(application)h(of)g(the)150
1770 y Fx(i)p FA(th)d(constructor)h(will)e(cause)h(the)g Fx(i)p
FA(th)g(compiled)e(co)q(de)i(to)h(b)q(e)f(loaded)h(and)g(executed.)200
1867 y(Finally)l(,)d(the)i(state)h(transitions)f(of)h(the)f(inductiv)o(e)e
(com)o(binators)i(follo)o(ws:)p 292 2048 1516 2 v 291 2122
2 75 v 374 2122 V 396 2100 a Fq(v)q Fn(j)p Fq(h)256 b(c)376
b(d)p Fn(j)p Fq(f)46 b Fn(!)41 b Fq(v)1307 2085 y Fp(0)1319
2100 y Fn(j)p Fq(h)1355 2085 y Fp(0)1553 2100 y Fq(c)1571 2085
y Fp(0)1626 2100 y Fq(d)1648 2085 y Fp(0)1660 2100 y Fn(j)p
Fq(f)1696 2085 y Fp(0)p 1807 2122 V 292 2124 1516 2 v 291 2199
2 75 v 313 2176 a Fo(10)p 374 2199 V 41 w Fq(v)293 b Fo(CONS)q
Fn(f)p Fq(i)p Fn(g)p Fq(:c)191 b(d)78 b Fn(!)41 b Fq(u)11 b
Fo(:)g(cons)q Fn(f)p Fq(i)p Fn(g)p Fq(:v)42 b(c)55 b(d)p 1807
2199 V 291 2274 V 313 2251 a Fo(11)p 374 2274 V 41 w Fq(v)13
b Fo(:)e Fn(h)p Fq(v)488 2257 y Fl(0)507 2251 y Fq(;)c(\033)q
Fn(i)142 b Fo(INDUCT)878 2233 y Fe(L)903 2251 y Fn(f)p Fq(c)942
2257 y Fe(i)956 2251 y Fn(g)977 2236 y Fe(n)977 2262 y(i)p
Fl(=1)1032 2251 y Fq(:c)41 b(d)78 b Fn(!)41 b Fq(v)1307 2236
y Fp(0)1330 2251 y Fo(:)12 b Fn(h)p Fq(v)1391 2236 y Fp(0)1390
2261 y Fl(0)1408 2251 y Fq(;)7 b(\033)q Fn(i)85 b Fq(c)1571
2257 y Fe(i)1626 2251 y Fo(con)o(t)q(\()p Fq(c)p Fo(\))p Fq(:d)p
1807 2274 V 291 2348 V 374 2348 V 410 2326 a(v)430 2332 y Fl(0)460
2326 y Fo(:)11 b(cons)q Fn(f)p Fq(i)p Fn(g)p Fq(:v)651 2311
y Fp(0)650 2336 y Fl(0)p 1807 2348 V 292 2350 1516 2 v 389
2426 a Fd(T)l(able)18 b(6.3.)23 b FA(State)16 b(transition)h(rules)e(for)i
(the)f(inductiv)o(e)e(datat)o(yp)q(es)p eop
%%Page: 83 92
91 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(83)150 141 y Fs(6.2.2.)32 b(P)n(artial)23
b(ev)l(aluation)h(of)e(inductiv)n(e)j(op)r(erators)150 268
y FA(Up)q(on)d(reexamining)c(the)j(execution)f(of)h(the)g(fold)g(com)o
(binator,)g(partial)g(ev)m(aluation)g(can)g(b)q(e)150 360 y(applied)11
b(to)h(the)f(expression.)19 b(Since)11 b(the)g(fold)h(pro)q(duces)g(a)g
(pair,)g(repro)q(ducing)g(the)f(en)o(vironmen)o(t)150 452 y(in)16
b(the)f(second)h(comp)q(onen)o(t,)f(the)g(mac)o(hine)f(could)i(a)o(v)o(oid)f
(ev)m(aluating)h(the)g(second)g(comp)q(onen)o(t)150 544 y(and)e(repro)q(duce)
f(the)g(en)o(vironmen)o(t)e(explicitly)l(.)17 b(T)l(o)d(ac)o(hiev)o(e)d(this)
i(short)h(cut,)g(the)f(mac)o(hine)e(uses)150 636 y(the)k(instruction)f(PR.)h
(Normally)l(,)e(propagating)j(the)f(en)o(vironmen)o(t)d(in)j(a)g(fold)g(is)g
(accomplished)150 728 y(with)h(the)g(follo)o(wing)g(rewrite:)746
858 y Fz(h)p Fx(v)r(;)8 b(\033)r Fz(i)p FA(;)g Fz(h)p Fx(f)s(;)g(P)983
865 y Fm(1)1003 858 y Fz(i)14 b(!)g(hh)p Fx(v)r(;)8 b(\033)r
Fz(i)p FA(;)g Fx(f)s(;)g(\033)r Fz(i)150 987 y FA(whic)o(h)15
b(distributes)h Fz(h)p Fx(u;)8 b(\033)r Fz(i)16 b FA(o)o(v)o(er)f(the)h
(second)h(pair)f(and)h(passes)g(along)g(the)f(en)o(vironmen)o(t.)i(The)150
1079 y(rewrite)e(could)h(b)q(e)g(impro)o(v)o(ed)e(b)o(y)h(replacing)h(the)g
(pairing)g(instruction)f(with)h(the)g(PR)g(instruc-)150 1172
y(tion,)f(eg:)716 1264 y Fz(h)p Fx(v)r(;)8 b(\033)r Fz(i)p
FA(;)g Fz(h)p Fx(f)s(;)g(P)953 1271 y Fm(1)972 1264 y Fz(i)14
b FA(=)-8 b Fz(\))14 b(h)p Fx(v)r(;)8 b(\033)r Fz(i)p FA(;)g(PR)o
Fz(f)p Fx(f)d Fz(g)200 1360 y FA(As)17 b(a)h(result)e(of)i(this)f
(instruction,)g(the)g(fold)g(com)o(binator)f(is)i(compiled)d(sligh)o(tly)h
(di\013eren)o(tly)150 1437 y(to)h(tak)o(e)e(adv)m(an)o(tage)j(of)e(this)g
(optimization.)287 1540 y Fo(\()p Fq(C)336 1525 y Fp(0)333
1550 y Fl(10)368 1540 y Fo(\))42 b Fn(C)r Fo([)p Fq(f)t(ol)q(d)541
1522 y Fe(L)566 1540 y Fn(f)p Fq(g)607 1546 y Fl(1)625 1540
y Fq(;)7 b(:::;)g(g)719 1546 y Fe(n)739 1540 y Fn(g)p Fo(])41
b(=)h(INDUCT)p Fn(f)p Fq(g)1098 1525 y Fp(0)1097 1551 y Fe(i)1110
1540 y Fn(g)1131 1525 y Fe(n)1131 1551 y(i)p Fl(=1)813 1615
y Fo(where)15 b Fq(g)954 1600 y Fp(0)953 1626 y Fe(i)980 1615
y Fo(:=)f(PR)p Fn(fC)r Fo([map)1232 1600 y Fe(E)1256 1604 y
Fc(i)1271 1615 y Fn(f)p Fq(P)1319 1621 y Fl(0)1338 1615 y Fq(;)7
b Fo(INDUCT)o Fn(f)p Fq(g)1567 1600 y Fp(0)1566 1626 y Fe(i)1579
1615 y Fn(g)1600 1600 y Fe(n)1600 1626 y(i)p Fl(=1)1656 1615
y Fn(g)p Fo(])p Fn(g)p Fq(:)p Fn(C)r Fo([)p Fq(g)1778 1621
y Fe(i)1790 1615 y Fo(])p Fq(;)200 1795 y FA(The)16 b(state)h(transition)f
(for)h(the)f(PR)g(instruction)g(is:)p 457 1943 1187 2 v 456
2018 2 75 v 539 2018 V 561 1995 a Fq(v)q Fn(j)p Fq(h)155 b(c)183
b(d)p Fn(j)p Fq(f)45 b Fn(!)c Fq(v)1177 1980 y Fp(0)1190 1995
y Fn(j)p Fq(h)1226 1980 y Fp(0)1369 1995 y Fq(c)1387 1980 y
Fp(0)1440 1995 y Fq(d)1462 1980 y Fp(0)1473 1995 y Fn(j)p Fq(f)1509
1980 y Fp(0)p 1642 2018 V 457 2019 1187 2 v 456 2094 2 75 v
477 2072 a Fo(12)p 539 2094 V 42 w Fq(v)13 b Fo(:)e Fn(h)p
Fq(v)653 2078 y Fl(0)672 2072 y Fq(;)c(\033)q Fn(i)41 b Fo(PR)p
Fn(f)p Fq(c)871 2057 y Fp(0)882 2072 y Fn(g)p Fq(:c)g(d)77
b Fn(!)41 b Fq(v)13 b Fo(:)f Fn(h)p Fq(v)1249 2078 y Fl(0)1267
2072 y Fq(;)7 b(\033)q Fn(i)42 b Fq(c)1387 2057 y Fp(0)1440
2072 y Fo(pr)1479 2082 y Fl(1)1498 2072 y Fo(\()p Fq(\033)o(;)7
b(c)p Fo(\))p Fq(:d)p 1642 2094 V 457 2096 1187 2 v 419 2172
a Fd(T)l(able)18 b(6.4.)23 b FA(Additional)16 b(state)g(transition)h(rules)e
(for)i(datat)o(yp)q(es)200 2416 y(When)j(the)g(en)o(vironmen)o(t)e(only)i
(needs)g(to)h(b)q(e)f(duplicated)g(\(or)g(passed)h(on)g(as)g(in)f(the)g(fold)
150 2508 y(instruction\),)25 b(there)e(is)h(no)h(co)q(de)f(to)g(execute)f(in)
g(the)h(second)g(comp)q(onen)o(t.)44 b(Instead,)25 b(the)150
2600 y(en)o(vironmen)o(t)17 b(b)q(eing)i(distributed)g(o)o(v)o(er)f(the)h
(pair)h(is)f(pushed)g(on)o(to)h(the)f(dump)g(and)h(the)f(\014rst)p
eop
%%Page: 84 93
92 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(84)150 141 y FA(comp)q(onen)o(t)19 b(of)i(the)f(pair)h(ev)m
(aluated.)34 b(When)20 b(ev)m(aluation)h(of)f(the)g(\014rst)h(comp)q(onen)o
(t)f(reac)o(hes)150 329 y(normal)12 b(form,)g(a)i(pair)f(is)g(constructed)g
(on)g(the)g(heap)h(\(b)o(y)e(state)h(transition)h(5\),)f(with)g
Fx(v)i FA(p)q(oin)o(ting)150 518 y(to)i(the)f(newly)f(constructed)h(v)m
(alue.)150 1300 y Fs(6.2.3.)32 b(Example:)e(Compiling)24 b(the)f(app)r(end)g
(function)150 1623 y FA(The)16 b(app)q(end)h(function)f(is)g(translated)h(to)
g(the)f(follo)o(wing)g(com)o(binator)f(expression:)605 1849
y Fz(h)p Fx(p)648 1856 y Fm(0)668 1849 y Fx(;)8 b(I)t Fz(i)p
FA(;)g Fx(f)d(ol)q(d)850 1828 y FA(list)918 1849 y Fz(f)p Fx(p)967
1856 y Fm(1)987 1849 y FA(;)j Fx(p)1033 1856 y Fm(1)1053 1849
y Fx(;)g Fz(h)p Fx(p)1118 1856 y Fm(0)1139 1849 y FA(;)g Fx(p)1185
1856 y Fm(0)1205 1849 y Fx(;)g(p)1251 1856 y Fm(0)1271 1849
y FA(;)g Fx(p)1317 1856 y Fm(1)1337 1849 y Fz(i)p FA(;)g(cons)p
Fz(g)150 2059 y FA(T)l(o)17 b(compile)d(this)i(com)o(binator)f(expression,)g
(w)o(e)h(use)g(the)g Fz(C)k FA(compilation)14 b(sc)o(heme.)653
2163 y Fn(C)r Fo([)p Fn(h)p Fq(p)726 2169 y Fl(0)744 2163 y
Fq(;)7 b(I)s Fn(i)p Fo(;)g Fq(f)t(ol)q(d)898 2148 y Fo(list)956
2163 y Fn(f)p Fq(p)998 2169 y Fl(1)1016 2163 y Fo(;)g Fq(p)1056
2169 y Fl(1)1074 2163 y Fq(;)g Fn(h)p Fq(p)1130 2169 y Fl(0)1148
2163 y Fo(;)g Fq(p)1188 2169 y Fl(0)1206 2163 y Fq(;)g(p)1246
2169 y Fl(0)1264 2163 y Fo(;)g Fq(p)1304 2169 y Fl(1)1322 2163
y Fn(i)p Fo(;)g(cons)q Fn(g)p Fo(])544 2238 y(=)-7 b Fn(\))42
b(C)r Fo([)p Fn(h)p Fq(p)726 2244 y Fl(0)744 2238 y Fq(;)7
b(I)s Fn(i)p Fo(])p Fq(:)p Fn(C)r Fo([)p Fq(f)t(ol)q(d)939
2223 y Fo(list)997 2238 y Fn(f)p Fq(p)1039 2244 y Fl(1)1057
2238 y Fo(;)g Fq(p)1097 2244 y Fl(1)1115 2238 y Fq(;)g Fn(h)p
Fq(p)1171 2244 y Fl(0)1189 2238 y Fo(;)g Fq(p)1229 2244 y Fl(0)1247
2238 y Fq(;)g(p)1287 2244 y Fl(0)1305 2238 y Fo(;)g Fq(p)1345
2244 y Fl(1)1363 2238 y Fn(i)p Fo(;)g(cons)p Fn(g)p Fo(])544
2312 y(=)-7 b Fn(\))42 b(hC)r Fo([)p Fq(p)726 2318 y Fl(0)744
2312 y Fo(])p Fq(;)7 b Fn(C)r Fo([)p Fq(I)s Fo(])p Fn(i)p Fq(:)p
Fn(C)r Fo([)p Fq(f)t(ol)q(d)987 2297 y Fo(list)1044 2312 y
Fn(f)p Fq(p)1086 2318 y Fl(1)1104 2312 y Fo(;)g Fq(p)1144 2318
y Fl(1)1162 2312 y Fq(;)g Fn(h)p Fq(p)1218 2318 y Fl(0)1236
2312 y Fo(;)g Fq(p)1276 2318 y Fl(0)1294 2312 y Fq(;)g(p)1334
2318 y Fl(0)1352 2312 y Fo(;)g Fq(p)1392 2318 y Fl(1)1410 2312
y Fn(i)p Fo(;)g(cons)p Fn(g)p Fo(])544 2387 y(=)-7 b Fn(\))42
b(h)p Fq(P)696 2393 y Fl(0)714 2387 y Fq(;)7 b Fn(C)r Fo([)p
Fq(I)s Fo(])p Fn(i)p Fq(:)p Fn(C)r Fo([)p Fq(f)t(ol)q(d)945
2372 y Fo(list)1002 2387 y Fn(f)p Fq(p)1044 2393 y Fl(1)1063
2387 y Fo(;)g Fq(p)1103 2393 y Fl(1)1121 2387 y Fq(;)g Fn(h)p
Fq(p)1177 2393 y Fl(0)1195 2387 y Fo(;)g Fq(p)1235 2393 y Fl(0)1253
2387 y Fq(;)g(p)1293 2393 y Fl(0)1311 2387 y Fo(;)g Fq(p)1351
2393 y Fl(1)1369 2387 y Fn(i)p Fo(;)g(cons)p Fn(g)p Fo(])544
2462 y(=)-7 b Fn(\))42 b(h)p Fq(P)696 2468 y Fl(0)714 2462
y Fq(;)7 b(\017)p Fn(i)p Fq(:)p Fn(C)r Fo([)p Fq(f)t(ol)q(d)893
2447 y Fo(list)950 2462 y Fn(f)p Fq(p)992 2468 y Fl(1)1011
2462 y Fo(;)g Fq(p)1051 2468 y Fl(1)1069 2462 y Fq(;)g Fn(h)p
Fq(p)1125 2468 y Fl(0)1143 2462 y Fo(;)g Fq(p)1183 2468 y Fl(0)1201
2462 y Fq(;)g(p)1241 2468 y Fl(0)1259 2462 y Fo(;)g Fq(p)1299
2468 y Fl(1)1317 2462 y Fn(i)p Fo(;)g(cons)p Fn(g)p Fo(])544
2536 y(=)-7 b Fn(\))42 b(h)p Fq(P)696 2542 y Fl(0)714 2536
y Fq(;)7 b(\017)p Fn(i)p Fq(:)p Fo(INDUCT)o Fn(f)p Fq(g)988
2521 y Fp(0)987 2547 y Fe(i)1000 2536 y Fn(g)1021 2521 y Fl(2)1021
2547 y Fe(i)p Fl(=1)p eop
%%Page: 85 94
93 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(85)367 235 y Fo(where)388 310 y Fq(g)409
295 y Fp(0)408 320 y Fl(1)467 310 y Fo(:=)42 b(PR)p Fn(fC)r
Fo([map)747 295 y Fe(E)771 299 y Fa(1)789 310 y Fn(f)p Fq(p)831
316 y Fl(0)850 310 y Fq(;)7 b Fo(induct)o Fn(f)p Fq(g)1025
295 y Fp(0)1024 320 y Fe(i)1038 310 y Fn(g)1059 295 y Fl(2)1059
320 y Fe(i)p Fl(=1)1114 310 y Fn(g)p Fo(])p Fn(g)p Fq(:)p Fn(C)r
Fo([)p Fq(p)1237 316 y Fl(1)1254 310 y Fo(;)g Fq(p)1294 316
y Fl(1)1312 310 y Fo(])467 384 y Fn(\))44 b Fo(PR)p Fn(fC)r
Fo([)p Fq(map)747 369 y Fl(1)766 384 y Fn(fgg)p Fo(])p Fn(g)p
Fq(:)p Fn(C)r Fo([)p Fq(p)931 390 y Fl(1)947 384 y Fo(;)7 b
Fq(p)987 390 y Fl(1)1005 384 y Fo(])467 459 y Fn(\))44 b Fo(PR)p
Fn(f)p Fq(P)660 465 y Fl(0)678 459 y Fn(g)p Fq(:)p Fn(C)r Fo([)p
Fq(p)768 465 y Fl(1)785 459 y Fo(;)7 b Fq(p)825 465 y Fl(1)843
459 y Fo(])467 534 y Fn(\))44 b Fo(PR)p Fn(f)p Fq(P)660 540
y Fl(0)678 534 y Fn(g)p Fq(:)p Fn(C)r Fo([)p Fq(p)768 540 y
Fl(1)785 534 y Fo(])p Fq(:)p Fn(C)r Fo([)p Fq(p)866 540 y Fl(1)884
534 y Fo(])467 609 y Fn(\))g Fo(PR)p Fn(f)p Fq(P)660 615 y
Fl(0)678 609 y Fn(g)p Fq(:P)738 615 y Fl(1)755 609 y Fq(:)p
Fn(C)r Fo([)p Fq(p)824 615 y Fl(1)842 609 y Fo(])467 683 y
Fn(\))g Fo(PR)p Fn(f)p Fq(P)660 689 y Fl(0)678 683 y Fn(g)p
Fq(:P)738 689 y Fl(1)755 683 y Fq(:P)794 689 y Fl(1)388 833
y Fq(g)409 818 y Fp(0)408 843 y Fl(2)467 833 y Fo(:=)e(PR)p
Fn(fC)r Fo([)p Fq(map)747 818 y Fe(E)771 822 y Fa(2)790 833
y Fn(f)p Fq(p)832 839 y Fl(0)850 833 y Fq(;)7 b Fn(C)r Fo([)p
Fq(induct)p Fn(f)p Fq(g)1065 818 y Fp(0)1064 844 y Fe(i)1077
833 y Fn(g)1098 818 y Fl(2)1098 844 y Fe(i)p Fl(=1)1153 833
y Fo(])p Fn(g)p Fo(])p Fn(g)p Fq(:)p Fn(C)r Fo([)p Fn(h)p Fq(p)1304
839 y Fl(0)1321 833 y Fo(;)g Fq(p)1361 839 y Fl(0)1379 833
y Fq(;)g(p)1419 839 y Fl(0)1437 833 y Fo(;)g Fq(p)1477 839
y Fl(1)1495 833 y Fn(i)p Fo(;)g(cons])467 907 y Fn(\))44 b
Fo(PR)p Fn(f)p Fo(MAP)730 889 y Fp(\002)758 907 y Fn(fC)r Fo([)p
Fq(p)836 913 y Fl(0)854 907 y Fo(])p Fq(;)7 b Fn(C)r Fo([)p
Fq(induct)p Fn(f)p Fq(g)1081 892 y Fp(0)1080 918 y Fe(i)1092
907 y Fn(g)1113 892 y Fl(2)1113 918 y Fe(i)p Fl(=1)1168 907
y Fo(])p Fn(gg)p Fq(:)p Fn(C)r Fo([)p Fn(h)p Fq(p)1307 913
y Fl(0)1324 907 y Fo(;)g Fq(p)1364 913 y Fl(0)1382 907 y Fq(;)g(p)1422
913 y Fl(0)1440 907 y Fo(;)g Fq(p)1480 913 y Fl(1)1498 907
y Fn(i)p Fo(;)g(cons])467 982 y Fn(\))44 b Fo(PR)p Fn(f)p Fo(MAP)730
964 y Fp(\002)758 982 y Fn(f)p Fq(P)806 988 y Fl(0)824 982
y Fq(;)7 b Fn(C)r Fo([)p Fq(induct)p Fn(f)p Fq(g)1039 967 y
Fp(0)1038 993 y Fe(i)1050 982 y Fn(g)1071 967 y Fl(2)1071 993
y Fe(i)p Fl(=1)1127 982 y Fo(])p Fn(gg)p Fq(:)p Fn(C)r Fo([)p
Fn(h)p Fq(p)1266 988 y Fl(0)1283 982 y Fo(;)g Fq(p)1323 988
y Fl(0)1341 982 y Fq(;)g(p)1381 988 y Fl(0)1399 982 y Fo(;)g
Fq(p)1439 988 y Fl(1)1457 982 y Fn(i)p Fo(;)g(cons])467 1057
y Fn(\))44 b Fo(PR)p Fn(f)p Fo(MAP)730 1039 y Fp(\002)758 1057
y Fn(f)p Fq(P)806 1063 y Fl(0)824 1057 y Fq(;)7 b Fo(INDUCT)o
Fn(f)p Fq(g)1053 1042 y Fp(0)1052 1068 y Fe(i)1066 1057 y Fn(g)1087
1042 y Fl(2)1087 1068 y Fe(i)p Fl(=1)1142 1057 y Fn(gg)p Fq(:)p
Fn(C)r Fo([)p Fn(h)p Fq(p)1269 1063 y Fl(0)1287 1057 y Fo(;)g
Fq(p)1327 1063 y Fl(0)1345 1057 y Fq(;)g(p)1385 1063 y Fl(0)1403
1057 y Fo(;)g Fq(p)1443 1063 y Fl(1)1461 1057 y Fn(i)p Fo(;)g(cons])467
1132 y Fn(\))44 b Fo(PR)p Fn(f)p Fo(MAP)730 1113 y Fp(\002)758
1132 y Fn(f)p Fq(P)806 1138 y Fl(0)824 1132 y Fq(;)7 b Fo(INDUCT)o
Fn(f)p Fq(g)1053 1117 y Fp(0)1052 1142 y Fe(i)1066 1132 y Fn(g)1087
1117 y Fl(2)1087 1142 y Fe(i)p Fl(=1)1142 1132 y Fn(gg)p Fq(:)p
Fn(C)r Fo([)p Fn(h)p Fq(p)1269 1138 y Fl(0)1287 1132 y Fo(;)g
Fq(p)1327 1138 y Fl(0)1345 1132 y Fq(;)g(p)1385 1138 y Fl(0)1403
1132 y Fo(;)g Fq(p)1443 1138 y Fl(1)1461 1132 y Fn(i)p Fo(])p
Fq(:)p Fn(C)r Fo([cons)o(])467 1206 y Fn(\))44 b Fo(PR)p Fn(f)p
Fo(MAP)730 1188 y Fp(\002)758 1206 y Fn(f)p Fq(P)806 1212 y
Fl(0)824 1206 y Fq(;)7 b Fo(INDUCT)o Fn(f)p Fq(g)1053 1191
y Fp(0)1052 1217 y Fe(i)1066 1206 y Fn(g)1087 1191 y Fl(2)1087
1217 y Fe(i)p Fl(=1)1142 1206 y Fn(gg)p Fq(:)p Fn(hC)r Fo([)p
Fq(p)1269 1212 y Fl(0)1287 1206 y Fo(;)g Fq(p)1327 1212 y Fl(0)1345
1206 y Fo(])p Fq(;)g Fn(C)r Fo([)p Fq(p)1433 1212 y Fl(0)1450
1206 y Fo(;)g Fq(p)1490 1212 y Fl(1)1508 1206 y Fo(])p Fn(i)p
Fq(:)p Fn(C)r Fo([cons])467 1281 y Fn(\))44 b Fo(PR)p Fn(f)p
Fo(MAP)730 1263 y Fp(\002)758 1281 y Fn(f)p Fq(P)806 1287 y
Fl(0)824 1281 y Fq(;)7 b Fo(INDUCT)o Fn(f)p Fq(g)1053 1266
y Fp(0)1052 1292 y Fe(i)1066 1281 y Fn(g)1087 1266 y Fl(2)1087
1292 y Fe(i)p Fl(=1)1142 1281 y Fn(gg)p Fq(:)p Fn(hC)r Fo([)p
Fq(p)1269 1287 y Fl(0)1287 1281 y Fo(])p Fq(:)p Fn(C)r Fo([)p
Fq(p)1368 1287 y Fl(0)1385 1281 y Fo(])p Fq(;)g Fn(C)r Fo([)p
Fq(p)1473 1287 y Fl(0)1490 1281 y Fo(;)g Fq(p)1530 1287 y Fl(1)1548
1281 y Fo(])p Fn(i)p Fq(:)p Fn(C)r Fo([cons])467 1356 y Fn(\))44
b Fo(PR)p Fn(f)p Fo(MAP)730 1338 y Fp(\002)758 1356 y Fn(f)p
Fq(P)806 1362 y Fl(0)824 1356 y Fq(;)7 b Fo(INDUCT)o Fn(f)p
Fq(g)1053 1341 y Fp(0)1052 1367 y Fe(i)1066 1356 y Fn(g)1087
1341 y Fl(2)1087 1367 y Fe(i)p Fl(=1)1142 1356 y Fn(gg)p Fq(:)p
Fn(hC)r Fo([)p Fq(p)1269 1362 y Fl(0)1287 1356 y Fo(])p Fq(:)p
Fn(C)r Fo([)p Fq(p)1368 1362 y Fl(0)1385 1356 y Fo(])p Fq(;)g
Fn(C)r Fo([)p Fq(p)1473 1362 y Fl(0)1490 1356 y Fo(])p Fq(:)p
Fn(C)r Fo([)p Fq(p)1571 1362 y Fl(1)1589 1356 y Fo(])p Fn(i)p
Fq(:)p Fn(C)r Fo([cons)o(])467 1430 y Fn(\))44 b Fo(PR)p Fn(f)p
Fo(MAP)730 1412 y Fp(\002)758 1430 y Fn(f)p Fq(P)806 1436 y
Fl(0)824 1430 y Fq(;)7 b Fo(INDUCT)o Fn(f)p Fq(g)1053 1415
y Fp(0)1052 1441 y Fe(i)1066 1430 y Fn(g)1087 1415 y Fl(2)1087
1441 y Fe(i)p Fl(=1)1142 1430 y Fn(gg)p Fq(:)p Fn(h)p Fq(P)1239
1436 y Fl(0)1257 1430 y Fq(:P)1296 1436 y Fl(0)1313 1430 y
Fq(;)g(P)1359 1436 y Fl(0)1377 1430 y Fq(:P)1416 1436 y Fl(1)1434
1430 y Fn(i)p Fq(:)p Fn(C)r Fo([cons])467 1505 y Fn(\))44 b
Fo(PR)p Fn(f)p Fo(MAP)730 1487 y Fp(\002)758 1505 y Fn(f)p
Fq(P)806 1511 y Fl(0)824 1505 y Fq(;)7 b Fo(INDUCT)o Fn(f)p
Fq(g)1053 1490 y Fp(0)1052 1516 y Fe(i)1066 1505 y Fn(g)1087
1490 y Fl(2)1087 1516 y Fe(i)p Fl(=1)1142 1505 y Fn(gg)p Fq(:)p
Fn(h)p Fq(P)1239 1511 y Fl(0)1257 1505 y Fq(:P)1296 1511 y
Fl(0)1313 1505 y Fq(;)g(P)1359 1511 y Fl(0)1377 1505 y Fq(:P)1416
1511 y Fl(1)1434 1505 y Fn(i)p Fq(:)p Fo(CONS\(2\))150 1736
y FB(6.3.)42 b(Coinductiv)n(e)25 b(Datat)n(yp)r(es)200 1851
y FA(Similar)14 b(to)j(inductiv)o(e)d(datat)o(yp)q(es,)i(coinductiv)o(e)f
(datat)o(yp)q(es)i(with)f(their)f(unfold,)h(map,)f(and)150
1941 y(record)g(com)o(binators)f(are)h(generalized)e(in)o(to)i(the)f(RECORD)i
(instruction)e(whic)o(h)g(holds)i(p)q(oin)o(t-)150 2031 y(ers)f(to)g(co)q(de)
g(for)g(eac)o(h)g(destructor)g(in)f(the)h(datat)o(yp)q(e.)21
b(An)15 b(application)f(of)i(a)f(destructor)g(to)g(the)150
2121 y(coinduct)h(datat)o(yp)q(e)g(loads)h(and)g(executes)e(the)h(prop)q(er)h
(co)q(de.)150 2298 y Fs(6.3.1.)32 b(Lazy)22 b(coinductiv)n(e)j(datat)n(yp)r
(es)150 2420 y FA(Coinductiv)o(e)12 b(datat)o(yp)q(es)i(are)f(ev)m(aluated)g
(in)g(a)h(b)o(y{need)f(manner)f(as)i(opp)q(osed)h(to)e(the)g(b)o(y{v)m(alue)
150 2510 y(mec)o(hanism)i(used)k(in)g(the)f(original)h(mac)o(hine.)27
b(Lazy)19 b(ev)m(aluation)g(adopts)h(the)e(philosoph)o(y)h(of)150
2600 y(\\do)f(the)f(minim)n(um)c(amoun)o(t)j(of)h(w)o(ork)g(p)q(ossible")h
(in)e(an)i(attempt)e(to)h(eliminate)d(unnecessary)p eop
%%Page: 86 95
94 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(86)150 141 y FA(computation.)31 b(Lazy)20
b(ev)m(aluation)f(in)h(the)f(Charit)o(y)g(abstract)i(mac)o(hine)c(means)i
(that)h(a)g(coin-)150 236 y(ductiv)o(e)12 b(op)q(erator)j(\(unfold,)f(map)f
(or)h(record\))f(is)h(not)g(ev)m(aluated)g(un)o(til)e(a)i(destructor)g(is)g
(applied)150 331 y(to)21 b(the)f(op)q(erator.)36 b(The)21 b(abstract)g(mac)o
(hine)e(of)i(the)f(previous)h(c)o(hapter)f(simply)e(pushed)j(the)150
426 y Fx(unf)5 b(ol)q(d)p FA(,)21 b Fx(map)p FA(,)g(or)g Fx(r)q(ecor)q(d)g
FA(com)o(binator)e(on)o(to)i(the)f(v)m(alue)f(stac)o(k)h(and)h(con)o(tin)o
(ued)e(pro)q(cessing)150 521 y(the)h(sequence)e(of)i(co)q(de.)32
b(Destructors)21 b(applied)e(to)h(this)g(op)q(erator)h(execute)d(a)i(piece)f
(of)h(co)q(de)150 616 y(stored)d(in)e(the)i(RECORD)f(instruction.)200
710 y(The)i(new)g(mac)o(hine)d(requires)i(additional)h(mac)o(hinery)e(to)i
(deal)g(with)f(the)h(lazy)f(ev)m(aluation.)150 805 y(Sp)q(eci\014cally)l(,)d
(a)i(record)g(is)f(created)g(to)i(hold)f Fu(closur)n(es)p FA(.)21
b(A)15 b(closure)h(holds)g(a)g(piece)e(of)j(co)q(de)f(that)150
900 y(is)g(p)q(oten)o(tially)f(unev)m(aluated.)22 b(It)15 b(is)h(represen)o
(ted)f(b)o(y)h(the)g(pair)997 1032 y(\()p Fx(v)r(;)8 b(c)p
FA(\))150 1165 y(where)19 b Fx(v)i FA(is)e(the)g(v)m(alue)g(acted)g(on)h(b)o
(y)f(some)f(co)q(de)i Fx(c)p FA(.)30 b(A)19 b(record)g(structure)g(holds)h
(the)f(list)g(of)150 1260 y(closures)d(for)h(eac)o(h)e(destructor)i(of)f(a)h
(coinductiv)o(e)d(datat)o(yp)q(e,)i(and)h(is)f(de\014ned)g(as:)804
1392 y Fx(u)e FA(:)f(rec)p Fz(f)p Fx(cl)q(o)p FA([)p Fx(i)p
FA(])f(:)i(\()p Fx(v)r(;)8 b(c)p FA(\))p Fz(g)1238 1371 y Fk(n)1238
1404 y(i)p Fm(=1)150 1524 y FA(where)22 b Fx(u)g FA(p)q(oin)o(ts)h(to)f(the)g
(record)g(in)g(the)g(heap)h(and)g Fx(cl)q(o)p FA([)p Fx(i)p
FA(])e(is)h(an)h(index)e(in)o(to)h(the)g Fx(i)p FA(th)g(of)h
Fx(n)150 1619 y FA(closures.)42 b(Applying)22 b(a)h(destructor)h(to)f(a)h
(record)e(will)g(load,)j(or)f Fu(enter)g FA(the)f(closure)f(to)i(b)q(e)150
1714 y(ev)m(aluated.)k(Up)q(on)19 b(exit)e(of)i(the)f(closure,)g(the)g(v)m
(alue)g(has)h(b)q(een)g(computed)e(and)i(can)f(b)q(e)h(used)150
1809 y(in)g(a)g(later)f(computation.)28 b(The)19 b(state)g(transition)h
(\(13\))f(for)g(the)g(record)g(com)o(binator)e(simply)150 1904
y(creates)f(a)g(record)h(of)f(closures)g(on)h(the)f(v)m(alue)g(stac)o(k:)p
404 2063 1293 2 v 403 2138 2 75 v 486 2138 V 508 2115 a Fq(v)q
Fn(j)p Fq(h)41 b(c)368 b(d)p Fn(j)p Fq(f)45 b Fn(!)d Fq(v)1196
2100 y Fp(0)1208 2115 y Fn(j)p Fq(h)1244 2100 y Fp(0)1523 2115
y Fq(c)1541 2100 y Fp(0)1594 2115 y Fq(d)1616 2100 y Fp(0)1627
2115 y Fn(j)p Fq(f)1663 2100 y Fp(0)p 1695 2138 V 404 2140
1293 2 v 403 2214 2 75 v 425 2192 a Fo(13)p 486 2214 V 41 w
Fq(v)78 b Fo(RECORD)p Fn(f)p Fq(f)831 2198 y Fe(i)844 2192
y Fn(g)865 2177 y Fe(n)865 2203 y(i)p Fl(=1)921 2192 y Fq(:c)41
b(d)77 b Fn(!)42 b Fq(v)1196 2177 y Fp(0)1219 2192 y Fo(:)11
b(rec)r Fn(f)p Fq(cl)q(o)p Fo([)p Fq(i)p Fo(])p Fn(g)1427 2177
y Fe(n)1427 2203 y(i)p Fl(=1)1523 2192 y Fq(c)53 b(d)p 1695
2214 V 403 2289 V 486 2289 V 1188 2267 a(cl)q(o)p Fo([)p Fq(i)p
Fo(])12 b(:)f(\()p Fq(v)q(;)c(f)1388 2273 y Fe(i)1402 2267
y Fo(\))p 1695 2289 V 404 2291 1293 2 v 523 2367 a Fd(T)l(able)17
b(6.5.)23 b FA(State)17 b(transition)f(rules)g(for)g(the)g(records)200
2600 y(All)f(coinductiv)o(e)g(op)q(erators)j(are)e(compiled)e(in)o(to)j(the)f
(RECORD)h(instruction.)k(The)c(di\013er-)p eop
%%Page: 87 96
95 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(87)150 141 y FA(ence)15 b(lies)h(in)g(the)g(co)q(de)g
(generated)g(for)h(eac)o(h)e(destructor)i(phrase)g(of)f(the)g(record.)294
245 y Fo(\()p Fq(C)340 251 y Fl(13)375 245 y Fo(\))41 b Fn(C)r
Fo([)p Fq(unf)t(ol)q(d)597 226 y Fe(R)624 245 y Fn(f)p Fq(f)665
251 y Fl(1)684 245 y Fq(;)7 b(:::;)g(f)778 251 y Fe(n)798 245
y Fn(g)p Fo(])41 b(=)h(RECORD)o Fn(f)p Fq(f)1174 230 y Fp(0)1170
255 y Fe(i)1186 245 y Fn(g)1207 230 y Fe(n)1207 255 y(i)p Fl(=1)872
319 y Fo(where)15 b Fq(f)1016 304 y Fp(0)1012 330 y Fe(i)1042
319 y Fo(=)f Fn(hC)r Fo([)p Fq(f)1160 325 y Fe(i)1174 319 y
Fo(])p Fq(;)7 b(P)1232 325 y Fl(1)1250 319 y Fn(i)p Fq(:)p
Fn(C)r Fo([map)1391 304 y Fe(E)1415 308 y Fc(i)1431 319 y Fn(f)p
Fq(p)1473 325 y Fl(0)1491 319 y Fq(;)g(r)q(ecor)q(d)p Fn(f)p
Fq(f)1674 304 y Fp(0)1670 330 y Fe(i)1686 319 y Fn(g)1707 304
y Fe(n)1707 330 y(i)p Fl(=1)1762 319 y Fn(g)p Fo(])p Fq(;)294
394 y Fo(\()p Fq(C)340 400 y Fl(14)375 394 y Fo(\))41 b Fn(C)r
Fo([)p Fq(r)q(ecor)q(d)587 376 y Fe(R)614 394 y Fn(f)p Fq(g)655
400 y Fl(1)673 394 y Fq(;)7 b(:::;)g(g)767 400 y Fe(n)787 394
y Fn(g)p Fo(])52 b(=)42 b(RECORD)o Fn(fC)r Fo([)p Fq(g)1206
400 y Fl(1)1224 394 y Fo(])p Fq(;)7 b(:::;)g Fn(C)r Fo([)p
Fq(g)1366 400 y Fe(n)1385 394 y Fo(])p Fn(g)p Fq(;)294 469
y Fo(\()p Fq(C)340 475 y Fl(15)375 469 y Fo(\))41 b Fn(C)r
Fo([)p Fq(map)548 454 y Fe(R)575 469 y Fn(f)p Fq(h)620 475
y Fl(1)638 469 y Fq(;)7 b(:::;)g(h)736 475 y Fe(m)765 469 y
Fn(g)p Fo(])74 b(=)42 b(RECORD)o Fn(f)p Fq(h)1174 454 y Fp(0)1174
480 y Fe(i)1187 469 y Fn(g)1208 454 y Fe(m)1208 480 y(i)p Fl(=1)872
544 y Fo(where)15 b Fq(h)1016 528 y Fp(0)1016 554 y Fe(i)1043
544 y Fo(=)g Fn(h)p Fq(P)1133 550 y Fl(0)1151 544 y Fq(:)p
Fo(DESTR)o Fn(f)p Fq(i)p Fn(g)p Fq(;)7 b(P)1408 550 y Fl(1)1426
544 y Fn(i)946 618 y Fq(:)p Fn(C)r Fo([map)1071 603 y Fe(E)1095
607 y Fc(i)1111 618 y Fn(f)p Fq(h)1156 624 y Fl(1)1174 618
y Fq(;)g(:::;)g(h)1272 624 y Fe(m)1301 618 y Fq(;)g(r)q(ecor)q(d)p
Fn(f)p Fq(h)1484 603 y Fp(0)1484 629 y Fe(i)1497 618 y Fn(g)1518
603 y Fe(m)1518 629 y(i)p Fl(=1)1574 618 y Fn(g)p Fo(])200
760 y FA(As)18 b(with)h(compiling)d(of)j(the)f(inductiv)o(e)f(op)q(erations,)
j(a)f(in)o(termediate)d(com)o(binator)h Fx(r)q(ecor)q(d)150
837 y FA(is)f(used)g(for)h(recursiv)o(e)d(calls.)21 b(Compiling)15
b(this)h(com)o(binator)f(is)h(done)h(b)o(y)e(the)h(follo)o(wing:)623
957 y Fo(\()p Fq(C)669 963 y Fl(16)704 957 y Fo(\))42 b Fn(C)r
Fo([)p Fq(r)q(ecor)q(d)p Fn(f)p Fq(g)958 963 y Fl(1)976 957
y Fq(;)7 b(:::;)g(g)1070 963 y Fe(n)1090 957 y Fn(g)p Fo(])41
b(=)g(RECORD)1421 938 y Fe(n)1421 967 y(i)p Fl(=1)150 1272
y Fs(6.3.2.)32 b(Adding)23 b(sharing)g(to)f(coinductiv)n(e)j(datat)n(yp)r(es)
150 1400 y FA(When)c(ev)m(aluating)g(coinductiv)o(e)e(com)o(binators,)i(lazy)
g(ev)m(aluation)g(guaran)o(tees)g(the)g(mac)o(hine)150 1492
y(will)12 b(not)i(p)q(erform)e(unnecessary)i(computation.)19
b(F)l(or)14 b(example,)d(a)j(destructor)f(ma)o(y)f(b)q(e)i(applied)150
1584 y(to)j(a)g(record,)f(resulting)g(in)g(an)h(en)o(try)e(in)o(to)h(a)h
(closure)f(to)h(pro)q(duce)g(an)g(answ)o(er.)22 b(No)o(w)16
b(consider)150 1677 y(the)23 b(consequence)f(of)h(applying)g(the)g(same)f
(destructor)h(to)h(the)f(same)f(record,)i(whic)o(h)e(then)150
1769 y(results)14 b(in)g(the)f(ev)m(aluation)i(of)f(the)g(same)f(closure.)20
b(Th)o(us,)14 b(one)g(computes)f(the)h(same)f(answ)o(er)h(as)150
1862 y(in)i(the)h(previous)f(application.)23 b(Ho)o(w)o(ev)o(er,)14
b(unnecessary)j(computation)f(has)h(b)q(een)g(eliminated)150
1954 y(since)e(only)i(the)f(answ)o(er)g(is)g(returned)g(and)h(the)f(co)q(de)g
(is)g(not)h(executed)e(t)o(wice.)200 2046 y(T)l(o)f(ensure)g(that)g(the)f(co)
q(de)h(in)g(a)g(closure)f(is)h(executed)e(at)i(most)f(once,)h(a)g(sharing)g
(mec)o(hanism)150 2139 y(needs)22 b(to)g(b)q(e)g(incorp)q(orated)h(in)o(to)e
(the)h(mac)o(hine.)36 b(The)22 b(prime)e(comp)q(onen)o(t)h(of)i(the)e
(sharing)150 2231 y(mec)o(hanism)14 b(is)j(the)g(up)q(dating)h(of)g(closures)
f(with)g(their)f(results,)h(as)h(they)f(exit.)23 b(The)17 b(mac)o(hine)150
2323 y(pushes)23 b(an)f(up)q(date)h(mark)o(er)d(on)j(top)f(of)g(the)g(dump)f
(stac)o(k)h(to)h(tag)f(the)g(closure)g(that)g(m)o(ust)150 2416
y(b)q(e)f(up)q(dated.)34 b(When)21 b(the)f(mac)o(hine)e(exits)i(the)g
(closure,)h(the)f(top)h(of)g(the)f(dump)g(marks)f(the)150 2508
y(closure)f(that)g(m)o(ust)f(b)q(e)h(o)o(v)o(erwritten)e(and)j(up)q(dated)f
(with)g(the)g(result.)26 b(The)18 b(co)q(de)g(p)q(ortion)h(of)150
2600 y(this)e(closure)f(is)g(also)i(o)o(v)o(erwritten)d(with)h(an)i(empt)o(y)
c(sequence)i(of)h(co)q(de)g(\()p Fx(\017)p FA(\),)f(suc)o(h)g(that)h(future)p
eop
%%Page: 88 97
96 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(88)150 141 y FA(en)o(tries)21 b(in)o(to)i(this)f(closure)g
(will)g(simply)e(return)i(the)h(v)m(alue)f(previously)f(computed.)39
b(Th)o(us,)150 232 y(the)17 b(resultan)o(t)g(v)m(alue)g(of)g(en)o(tering)g(a)
g(closure)g(is)g(shared)h(among)f(m)o(ultiple)d(references)i(to)i(that)150
322 y(closure.)200 412 y(State)k(transition)h(14)g(applies)f(a)g(destructor)h
(to)g(the)f(record,)h(while)e(state)i(transition)f(15)150 503
y(up)q(dates)c(a)g(closure)f(up)q(on)h(exit.)23 b(T)l(o)18
b(up)q(date)g(a)g(closure,)e(state)i(transition)f(15)h(o)o(v)o(erwrites)e
(the)p 196 654 1709 2 v 195 729 2 75 v 278 729 V 300 707 a
Fq(v)q Fn(j)p Fq(h)250 b(c)i(d)p Fn(j)p Fq(f)268 b Fn(!)41
b Fq(v)1303 691 y Fp(0)1315 707 y Fn(j)p Fq(h)1351 691 y Fp(0)1549
707 y Fq(c)1567 691 y Fp(0)1625 707 y Fq(d)1647 691 y Fp(0)1658
707 y Fn(j)p Fq(f)1694 691 y Fp(0)p 1903 729 V 196 731 1709
2 v 195 805 2 75 v 217 783 a Fo(14)p 278 805 V 41 w Fq(v)13
b Fo(:)e(rec)q Fn(f)p Fq(v)q Fo([)p Fq(i)p Fo(])p Fn(g)510
768 y Fe(n)510 794 y(i)p Fl(=1)607 783 y Fo(DESTR)p Fn(f)p
Fq(i)p Fn(g)p Fq(:c)40 b(d)300 b Fn(!)41 b Fq(v)1302 789 y
Fe(i)1549 783 y Fq(f)1569 789 y Fe(i)1625 783 y Fo(up)q(date)q(\()p
Fq(cl)q(o)p Fo([)p Fq(i)p Fo(]\))p Fq(:)p 1903 805 V 195 880
V 278 880 V 314 858 a(cl)q(o)p Fo([)p Fq(i)p Fo(])11 b(:)g(\()p
Fq(v)473 864 y Fe(i)487 858 y Fq(;)c(f)526 864 y Fe(i)540 858
y Fo(\))1167 b(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1903 880
V 195 955 V 217 932 a Fo(15)p 278 955 V 41 w Fq(v)287 b(\017)253
b Fo(up)q(date)q(\()p Fq(cl)q(o)p Fo([)p Fq(i)p Fo(]\))p Fq(:d)41
b Fn(!)g Fq(v)247 b(\017)59 b(d)p 1903 955 V 195 1029 V 278
1029 V 314 1007 a(cl)q(o)p Fo([)p Fq(i)p Fo(])11 b(:)g(\()p
Fq(v)473 1013 y Fe(i)487 1007 y Fq(;)c(f)526 1013 y Fe(i)540
1007 y Fo(\))739 b Fq(cl)q(o)p Fo([)p Fq(i)p Fo(])12 b(:)f(\()p
Fq(v)q(;)c(\017)p Fo(\))p 1903 1029 V 196 1031 1709 2 v 228
1107 a Fd(T)l(able)17 b(6.6.)23 b FA(State)17 b(transition)f(rules)g(for)g
(the)g(destructors)h(and)g(up)q(dating)g(a)g(closure)150 1334
y(closure)e(no)q(de)h(in)f(the)g(heap)h(with)f(the)g(v)m(alue)g(computed,)f
(along)i(with)f(an)h(empt)o(y)e(co)q(de)h(stream)150 1424 y(for)i(the)f(co)q
(de)g(in)g(the)g(closure.)200 1499 y(Similar)c(to)j(the)g(fold)g(on)g
(inductiv)o(e)e(datat)o(yp)q(es,)i(the)f(compilation)f(for)i(the)g(unfold)g
(and)g(map)150 1575 y(com)o(binators)22 b(on)h(coinductiv)o(e)e(datat)o(yp)q
(es)j(can)f(tak)o(e)f(adv)m(an)o(tage)i(of)f(en)o(vironmen)o(t)d(passing)150
1650 y(using)d(the)f(PR)g(instruction:)172 1754 y Fo(\()p Fq(C)221
1739 y Fp(0)218 1764 y Fl(13)253 1754 y Fo(\))41 b Fn(C)r Fo([)p
Fq(unf)t(ol)q(d)475 1735 y Fe(R)502 1754 y Fn(f)p Fq(f)543
1760 y Fl(1)561 1754 y Fq(;)7 b(:::;)g(f)655 1760 y Fe(n)676
1754 y Fn(g)p Fo(])41 b(=)h(RECORD)o Fn(f)p Fq(f)1052 1739
y Fp(0)1048 1765 y Fe(i)1064 1754 y Fn(g)750 1829 y Fo(where)15
b Fq(f)894 1814 y Fp(0)890 1839 y Fe(i)920 1829 y Fo(=)f(PR)p
Fn(fC)r Fo([)p Fq(f)1102 1835 y Fe(i)1116 1829 y Fo(])p Fn(g)p
Fq(:)p Fn(C)r Fo([map)1274 1814 y Fe(E)1298 1818 y Fc(i)1313
1829 y Fn(f)p Fq(P)1361 1835 y Fl(0)1379 1829 y Fq(;)7 b(r)q(ecor)q(d)p
Fn(f)p Fq(f)1562 1814 y Fp(0)1558 1839 y Fe(i)1574 1829 y Fn(gg)p
Fo(])172 1903 y(\()p Fq(C)221 1888 y Fp(0)218 1914 y Fl(15)253
1903 y Fo(\))41 b Fn(C)r Fo([)p Fq(map)425 1888 y Fe(R)453
1903 y Fn(f)p Fq(h)498 1909 y Fl(1)516 1903 y Fq(;)7 b(:::;)g(h)614
1909 y Fe(m)643 1903 y Fn(g)p Fo(])74 b(=)42 b(RECORD)o Fn(f)p
Fq(h)1052 1888 y Fp(0)1052 1914 y Fe(i)1065 1903 y Fn(g)750
1978 y Fo(where)15 b Fq(h)894 1963 y Fp(0)894 1989 y Fe(i)921
1978 y Fo(=)f(PR)p Fn(f)p Fq(P)1074 1984 y Fl(0)1092 1978 y
Fq(:)p Fo(DESTR)o Fn(f)p Fq(i)p Fn(gg)p Fq(:)p Fn(C)r Fo([map)1450
1963 y Fe(E)1474 1967 y Fc(i)1489 1978 y Fn(f)p Fq(h)1534 1984
y Fl(1)1553 1978 y Fq(;)7 b(:::;)g(h)1651 1984 y Fe(m)1680
1978 y Fq(;)g(r)q(ecor)q(d)p Fn(f)p Fq(h)1863 1963 y Fp(0)1863
1989 y Fe(i)1875 1978 y Fn(gg)p Fo(])150 2214 y FB(6.4.)42
b(Adding)17 b(the)i(Natural)f(n)n(um)n(b)r(ers)f(as)h(primitiv)n(e)f(t)n(yp)r
(es)200 2329 y FA(Since)c(considerable)h(pro)q(cessing)g(in)g(Charit)o(y)g
(is)g(done)g(using)h(some)e(b)q(ounded)i(computation,)150 2420
y(natural)22 b(n)o(um)o(b)q(ers)e(are)i(added)g(as)g(a)g(primitiv)o(e)c(t)o
(yp)q(e)j(to)h(impro)o(v)o(e)d(p)q(erformance.)36 b(The)22
b(tail)150 2510 y(recursion)15 b(asso)q(ciated)h(with)f(a)h(fold)f(on)g(the)g
(natural)h(n)o(um)o(b)q(ers)d(can)j(b)q(e)f(replaced)f(with)h(a)h(\\for")150
2600 y(lo)q(op)c(construct.)20 b(In)11 b(addition,)h(the)f(storage)i
(requiremen)n(ts)c(of)j(the)f(primitiv)o(e)d(natural)k(n)o(um)o(b)q(ers)p
eop
%%Page: 89 98
97 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(89)150 141 y FA(is)20 b(considerably)f(reduced.)31
b(There)20 b(is)f(no)i(longer)e(a)i(need)e(to)h(create)f(a)i(link)o(ed)d
(list)h(of)h(b)q(o)o(xed)150 233 y(unary)12 b(constructors.)21
b(Instead,)12 b(a)h(natural)f(n)o(um)o(b)q(er)e(ob)s(ject)i(is)f(in)o(tro)q
(duced)h(to)g(hold)g(the)g(in)o(teger)150 325 y(v)m(alue)k(of)h(the)f
(natural)g(n)o(um)o(b)q(er.)200 417 y(State)f(transition)g(16)g(puts)g(a)g
(natural)h(n)o(um)o(b)q(er)d(ob)s(ject)h(in)g(the)h(heap.)21
b(The)15 b(natural)g(n)o(um)o(b)q(er)150 509 y(ob)s(ject)j(stores)h(n)o(um)o
(b)q(ers)d(b)q(et)o(w)o(een)i(0)h(and)g Fx(n)p FA(.)27 b(The)18
b(instruction)g(\\NA)l(T)p Fz(f)p Fx(n)p Fz(g)p FA(")h(builds)f(a)h(single)
150 601 y(natural)e(n)o(um)o(b)q(er)e(heap)i(item)d(as)k(sho)o(wn)f(b)o(y)f
(state)h(transition)g(16.)23 b(Adding)17 b(one)f(to)h(a)h(natural)150
693 y(n)o(um)o(b)q(er)f(simply)h(increases)g(the)h(v)m(alue)g(of)h(the)f
(natural)h(n)o(um)o(b)q(er)d(item)g(in)i(the)g(heap)h(b)o(y)e(one.)150
785 y(State)d(transition)g(17)g(sho)o(ws)h(ho)o(w)f(the)g(instruction)f
(\\SNA)l(T")h(adds)g(one)g(to)g(a)h(natural)f(n)o(um)o(b)q(er)150
877 y(heap)h(item.)i(Notice)d(that)g(only)g(one)h(heap)g(item)d(is)i
(required)f(to)i(represen)o(t)e(a)i(natural)g(n)o(um)o(b)q(er)p
489 1034 1123 2 v 488 1109 2 75 v 571 1109 V 593 1087 a Fq(v)q
Fn(j)p Fq(h)111 b(c)208 b(d)p Fn(j)p Fq(f)45 b Fn(!)c Fq(v)1190
1072 y Fp(0)1202 1087 y Fn(j)p Fq(h)1238 1072 y Fp(0)1438 1087
y Fq(c)1456 1072 y Fp(0)1509 1087 y Fq(d)1531 1072 y Fp(0)1542
1087 y Fn(j)p Fq(f)1578 1072 y Fp(0)p 1610 1109 V 489 1111
1123 2 v 488 1186 2 75 v 510 1163 a Fo(16)p 571 1186 V 41 w
Fq(v)148 b Fo(NA)m(T)o Fn(f)p Fq(n)p Fn(g)p Fq(:c)41 b(d)77
b Fn(!)41 b Fq(v)1190 1148 y Fp(0)1214 1163 y Fo(:)11 b(nat)p
Fn(f)p Fq(n)p Fn(g)p Fq(:v)42 b(c)53 b(d)p 1610 1186 V 488
1260 V 510 1238 a Fo(17)p 571 1260 V 41 w(nat)p Fn(f)p Fq(n)p
Fn(g)41 b Fo(SNA)m(T)o Fq(:c)85 b(d)77 b Fn(!)41 b Fo(nat)p
Fn(f)p Fq(n)9 b Fo(+)h(1)p Fn(g)70 b Fq(c)53 b(d)p 1610 1260
V 489 1262 1123 2 v 573 1338 a Fd(T)l(able)17 b(6.7.)23 b FA(State)17
b(transition)f(for)h Fz(N)23 b FA(datat)o(yp)q(e)150 1572 y(with)16
b(v)m(alue)g Fx(n)g FA(instead)h(of)f Fx(n)h FA(heap)f(items)f(as)h(required)
f(in)h(a)h(unary)g(represen)o(tation.)200 1664 y(The)12 b(CASE)p
431 1664 15 2 v 18 w(NA)l(T)g(instruction)g(o)o(v)o(er)g(the)g(natural)h(n)o
(um)o(b)q(ers)f(acts)h(in)f(the)g(same)g(manner)f(as)j(a)150
1756 y(CASE)g(instruction)f(on)h(an)o(y)f(datat)o(yp)q(e)h(as)g(sho)o(wn)g(b)
o(y)f(state)h(transitions)g(18)g(and)g(19.)21 b(Ho)o(w)o(ev)o(er,)150
1848 y(the)c(case)g(o)o(v)o(er)f(natural)i(n)o(um)o(b)q(ers)d(m)o(ust)h(b)q
(e)h(careful)g(to)g(act)g(on)h(the)f(sp)q(ecial)f(natural)i(n)o(um)o(b)q(er)
150 1940 y(elemen)o(t)13 b(in)j(the)g(heap.)p 273 2098 1555
2 v 272 2172 2 75 v 355 2172 V 377 2150 a Fq(v)q Fn(j)p Fq(h)300
b(c)406 b(d)p Fn(j)p Fq(f)46 b Fn(!)41 b Fq(v)1362 2135 y Fp(0)1374
2150 y Fn(j)p Fq(h)1410 2135 y Fp(0)1565 2150 y Fq(c)1583 2135
y Fp(0)1646 2150 y Fq(d)1668 2135 y Fp(0)1679 2150 y Fn(j)p
Fq(f)1715 2135 y Fp(0)p 1826 2172 V 273 2174 1555 2 v 272 2249
2 75 v 294 2226 a Fo(18)p 355 2249 V 41 w Fq(v)13 b Fo(:)e
Fn(h)p Fq(v)469 2232 y Fl(0)488 2226 y Fq(;)c(\033)q Fn(i)186
b Fo(CASE)p 848 2226 13 2 v 15 w(NA)m(T)p Fn(f)p Fq(f)991 2232
y Fe(z)1010 2226 y Fq(;)7 b(f)1049 2232 y Fe(s)1067 2226 y
Fn(g)p Fq(:c)40 b(d)78 b Fn(!)41 b Fq(v)1362 2211 y Fp(0)1386
2226 y Fo(:)11 b Fn(h)p Fq(v)1446 2211 y Fp(0)1445 2237 y Fl(0)1464
2226 y Fq(;)c(\033)q Fn(i)41 b Fq(f)1585 2232 y Fe(z)1646 2226
y Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1826 2249 2 75 v 272
2323 V 355 2323 V 390 2301 a(v)410 2307 y Fl(0)441 2301 y Fo(:)11
b(nat)p Fn(f)p Fq(z)r Fn(g)p Fq(:v)620 2286 y Fp(0)619 2311
y Fl(0)p 1826 2323 V 272 2398 V 294 2376 a Fo(19)p 355 2398
V 41 w Fq(v)i Fo(:)e Fn(h)p Fq(v)469 2382 y Fl(0)488 2376 y
Fq(;)c(\033)q Fn(i)186 b Fo(CASE)p 848 2376 13 2 v 15 w(NA)m(T)p
Fn(f)p Fq(f)991 2382 y Fe(z)1010 2376 y Fq(;)7 b(f)1049 2382
y Fe(s)1067 2376 y Fn(g)p Fq(:c)40 b(d)78 b Fn(!)41 b Fq(v)1362
2361 y Fp(0)1386 2376 y Fo(:)11 b Fn(h)p Fq(v)1446 2361 y Fp(0)1445
2386 y Fl(0)1464 2376 y Fq(;)c(\033)q Fn(i)41 b Fq(f)1585 2382
y Fe(s)1646 2376 y Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1826
2398 2 75 v 272 2473 V 355 2473 V 390 2450 a(v)410 2456 y Fl(0)441
2450 y Fo(:)11 b(nat)p Fn(f)p Fq(s)p Fo(\()p Fq(n)p Fo(\))p
Fn(g)p Fq(:v)675 2435 y Fp(0)674 2461 y Fl(0)p 1826 2473 V
273 2474 1555 2 v 475 2551 a Fd(T)l(able)18 b(6.8.)23 b FA(State)16
b(transition)h(for)f Fz(N)24 b FA(\\case")17 b(instruction)p
eop
%%Page: 90 99
98 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(90)200 141 y FA(The)16 b(fold)g(o)o(v)o(er)f(the)g(natural)
i(n)o(um)o(b)q(ers)d(remo)o(v)o(es)g(tail)h(recursion)g(b)o(y)h(transforming)
f(the)h(fold)150 231 y(com)o(binator)f(in)o(to)h(a)h(\\for")g(lo)q(op)g(as)g
(in:)663 334 y Fj(initializ)o(e)23 b(loop)663 424 y(for)h(i)h(:=)g(1)h(to)f
(n)g(do)740 514 y(...)150 617 y FA(Lo)q(op)20 b(setup)e(o)q(ccurs)g(b)o(y)g
(executing)f(the)g(\\zero")i(phrase)f(to)h(set)f(the)g(initial)e(v)m(alue.)27
b(Next,)17 b(an)150 707 y(iteration)11 b(o)q(ccurs)i(where)e(the)g(\\succ")i
(phrase)f(is)g(rep)q(eated)f Fx(n)h FA(times.)18 b(A)11 b(new)h(dump)f(item)e
Fx(l)q(oop)k FA(is)150 797 y(the)g(lo)q(op)h(coun)o(ter,)f(b)q(eginning)h(at)
g(the)f(n)o(um)o(b)q(er)e Fx(n)p FA(.)21 b(In)13 b(addition,)h
Fx(l)q(oop)g FA(holds)g(the)f(en)o(vironmen)o(t)150 887 y Fx(\033)g
FA(and)f(the)f(\\succ")h(phrase)g(to)g(b)q(e)g(executed)e(at)i(eac)o(h)f
(iteration.)19 b(State)11 b(transition)h(20)g(initializes)150
977 y(the)19 b(mac)o(hine)e(in)i(preparation)h(for)g(the)f(lo)q(op.)32
b(A)19 b(test)g(of)h(whether)f(to)h(iterate)e(or)i(terminate)150
1067 y(the)c(lo)q(op)h(is)f(made)f(in)h(state)h(transitions)f(21)h(and)g(22.)
p 161 1217 1778 2 v 160 1291 2 75 v 244 1291 V 265 1269 a Fq(v)q
Fn(j)p Fq(h)156 b(c)410 b(d)p Fn(j)p Fq(f)304 b Fn(!)41 b Fq(v)1368
1254 y Fp(0)1381 1269 y Fn(j)p Fq(h)1417 1254 y Fp(0)1571 1269
y Fq(c)1589 1254 y Fp(0)1652 1269 y Fq(d)1674 1254 y Fp(0)1686
1269 y Fn(j)p Fq(f)1722 1254 y Fp(0)p 1938 1291 V 161 1293
1778 2 v 160 1368 2 75 v 182 1345 a Fo(20)p 244 1368 V 41 w
Fq(v)13 b Fo(:)e Fn(h)p Fq(v)357 1351 y Fl(0)376 1345 y Fq(;)c(\033)q
Fn(i)42 b Fo(F)o(OLD)p 596 1345 13 2 v 14 w(NA)m(T)p Fn(f)p
Fq(f)738 1351 y Fe(z)757 1345 y Fq(;)7 b(f)796 1351 y Fe(s)814
1345 y Fn(g)p Fq(:c)41 b(d)336 b Fn(!)41 b Fq(v)1368 1330 y
Fp(0)1392 1345 y Fo(:)11 b Fn(h)p Fq(v)1452 1330 y Fp(0)1451
1356 y Fl(0)1470 1345 y Fq(;)c(\033)q Fn(i)41 b Fq(f)1591 1351
y Fe(z)1652 1345 y Fo(lo)q(op\()p Fq(n;)7 b(\033)o(;)g(f)1852
1351 y Fe(s)1869 1345 y Fo(\))p Fq(:)p 1938 1368 2 75 v 160
1442 V 244 1442 V 279 1420 a(v)299 1426 y Fl(0)329 1420 y Fo(:)k(nat)p
Fn(f)p Fq(n)p Fn(g)p Fq(:v)512 1405 y Fp(0)511 1430 y Fl(0)1757
1420 y Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1938 1442 V 160
1517 V 182 1495 a Fo(21)p 244 1517 V 41 w Fq(v)193 b(\017)411
b Fo(lo)q(op)o(\()p Fq(s)p Fo(\()p Fq(n)p Fo(\))p Fq(;)7 b(\033)o(;)g(f)1156
1501 y Fe(s)1174 1495 y Fo(\))p Fq(:d)40 b Fn(!)h Fq(v)1368
1480 y Fp(0)1392 1495 y Fo(:)11 b Fn(h)p Fq(v)q(;)c(v)1491
1501 y Fl(2)1510 1495 y Fn(i)45 b Fq(f)1591 1501 y Fe(s)1652
1495 y Fo(lo)q(op\()p Fq(n;)7 b(\033)o(;)g(f)1852 1501 y Fe(s)1869
1495 y Fo(\))p Fq(:d)p 1938 1517 V 160 1592 V 182 1569 a Fo(22)p
244 1592 V 41 w Fq(v)193 b(\017)411 b Fo(lo)q(op)o(\()p Fq(z)r(;)7
b(\033)o(;)g(f)1101 1575 y Fe(s)1118 1569 y Fo(\))p Fq(:d)96
b Fn(!)41 b(h)p Fq(v)q(;)7 b(\033)q Fn(i)127 b Fq(\017)64 b(d)p
1938 1592 V 161 1594 1778 2 v 479 1670 a Fd(T)l(able)17 b(6.9.)24
b FA(State)16 b(transition)g(for)h Fz(N)23 b FA(\\fold")17
b(instruction)150 1961 y FB(6.5.)42 b(Displa)n(ying)24 b(coinductiv)n(e)h
(datat)n(yp)r(es)200 2076 y FA(When)16 b(displa)o(ying)f(a)h(record)g(the)f
(result)g(of)h(a)h(computation,)d(only)i(one)g(lev)o(el)e(of)i(the)f(record)
150 2166 y(is)k(displa)o(y)o(ed,)e(as)j(the)e(record)h(ma)o(y)e(b)q(e)i
(in\014nite.)28 b(F)l(or)19 b(example,)e(the)h(in\014nite)g(list)g(of)i
(natural)150 2256 y(n)o(um)o(b)q(ers)15 b(is)h(the)g(record:)514
2383 y(\()p Fx(head)e FA(:)f(0)p Fx(;)8 b(tail)13 b FA(:)h(\()p
Fx(head)f FA(:)h(1)p Fx(;)8 b(tail)13 b FA(:)h(\()p Fx(head)f
FA(:)g(2)p Fx(;)8 b(tail)14 b FA(:)f Fx(:::)p FA(\)\)\))150
2510 y(The)23 b(in\014nite)f(nature)h(of)g(the)g(tail)f(comp)q(onen)o(t)g
(mak)o(es)f(it)i(imp)q(ossible)e(to)i(sho)o(w)h(the)e(en)o(tire)150
2600 y(record.)34 b(Instead,)21 b(only)f(one)h(lev)o(el)d(of)j(the)g
(in\014nite)e(list)h(is)g(displa)o(y)o(ed)g(at)g(one)h(time.)32
b(In)20 b(the)p eop
%%Page: 91 100
99 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(91)150 141 y FA(example)14 b(ab)q(o)o(v)o(e,)i(the)g
(record)850 244 y(\()p Fx(head)d FA(:)h Fx(:::;)8 b(tail)j
FA(:)j Fx(:::)p FA(\))150 365 y(w)o(ould)i(b)q(e)h(displa)o(y)o(ed,)d(un)o
(til)h(prompted)h(for)g(the)g(next)g(tail)g(item)e(to)i(pro)q(duce:)858
506 y(\()p Fx(head)d FA(:)h(0)p Fx(;)8 b(tail)13 b FA(:)h Fx(:::)p
FA(\))150 646 y(then)i(one)h(could)f(prompt)f(again:)678 786
y(\()p Fx(head)e FA(:)h(0)p Fx(;)8 b(tail)13 b FA(:)h(\()p
Fx(head)f FA(:)g Fx(:::;)8 b(tail)k FA(:)i Fx(:::)p FA(\)\))150
926 y(un)o(til)i(the)i(user)f(quits)h(from)e(what)i(is)g(called)e(the)h
(\\coinductiv)o(e)g(displa)o(y)f(mo)q(de".)25 b(This)18 b(mo)q(de)150
1029 y(is)e(useful)g(for)g(viewing)g(p)q(ortions)h(of)g(an)f(elemen)o(t)e(of)
i(a)h(coinductiv)o(e)d(datat)o(yp)q(e)j(incremen)o(tall)o(y)l(.)200
1132 y(T)l(o)k(impleme)o(n)o(t)d(the)j(coinductiv)o(e)e(displa)o(y)l(,)i(the)
g(mac)o(hine)e(is)i(initially)e(loaded)i(\(as)h(usual\))150
1235 y(with)d(the)f(co)q(de)h(that)h(builds)e(the)h(record.)28
b(When)19 b(computation)f(has)i(completed,)d(the)h(v)m(alue)150
1338 y(stac)o(k)e(will)f(b)q(e)h(in)g(head)h(normal)e(form,)g(holding)h(a)h
(record.)793 1452 y Fx(v)r Fz(j)p Fx(h)315 b(c)42 b(d)p Fz(j)p
Fx(f)p 772 1480 556 2 v 793 1543 a(v)15 b FA(:)e(rec)p Fz(f)p
Fx(cl)q(o)p FA([)p Fx(i)p FA(])p Fz(g)1077 1525 y Fk(n)1077
1555 y(i)p Fm(=1)1176 1543 y Fx(\017)43 b FA([)15 b(])809 1632
y Fx(cl)q(o)p FA([)p Fx(i)p FA(])e(:)g(\()p Fx(v)997 1639 y
Fk(i)1011 1632 y Fx(;)8 b(c)1054 1639 y Fk(i)1068 1632 y FA(\))150
1738 y(T)l(o)15 b(generate)e(the)h(next)g(v)m(alue)f(\(ie:)20
b(to)14 b(lo)q(ok)h(one)f(lev)o(el)e(do)o(wn\),)i(w)o(e)g(w)o(ould)g(apply)g
(eac)o(h)f(destruc-)150 1841 y(tor)k(for)f Fx(R)h FA(to)g(the)f(record:)784
1908 y Fx(v)r Fz(j)p Fx(h)315 b(c)60 b(d)p Fz(j)p Fx(f)p 763
1937 575 2 v 784 1999 a(v)15 b FA(:)e(rec)p Fz(f)p Fx(cl)q(o)p
FA([)p Fx(i)p FA(])p Fz(g)1068 1981 y Fk(n)1068 2012 y(i)p
Fm(=1)1167 1999 y Fx(d)1192 2006 y Fk(i)1248 1999 y FA([)j(])150
2086 y(The)f(consequence)e(of)i(this)g(action)g(is)f(that)h(eac)o(h)f
(closure)h(in)f(the)g(record)h(is)f(en)o(tered)g(\(and)h(ev)m(al-)150
2189 y(uated\))h(b)o(y)f(loading)h(the)f(mac)o(hine)e(with)j(the)f(v)m(alue)g
(and)i(co)q(de)e(of)h(eac)o(h)f(closure)g(in)h(succession.)150
2292 y(F)l(or)g(example,)e(to)j(en)o(ter)e(the)h Fx(i)p FA(th)g(closure,)f
(the)h(mac)o(hine)e(state)j(will)e(start)i(as:)792 2406 y Fx(v)r
Fz(j)p Fx(h)41 b(c)56 b(d)p Fz(j)p Fx(f)p 772 2435 557 2 v
792 2497 a(v)816 2504 y Fk(i)901 2497 y Fx(c)922 2504 y Fk(i)978
2497 y FA(up)q(date\()p Fx(r)q(ec;)8 b(i)p FA(\))p Fx(:d)150
2600 y FA(When)22 b(the)f(record)g(completes)f(computation,)h(the)h(original)
f(closure)g(is)h(up)q(dated)g(with)f(the)p eop
%%Page: 92 101
100 bop 396 33 a Fy(6.)24 b(IMPLEMENTING)19 b(THE)h(CHARITY)f(ABSTRA)o(CT)g
(MA)o(CHINE)201 b(92)150 141 y FA(v)m(alue)16 b(and)h(an)g(empt)o(y)d(co)q
(de)i(stream,)f(lea)o(ving)g(the)h(state)h(of)f(the)g(mac)o(hine)e(as:)818
255 y Fx(v)r Fz(j)p Fx(h)265 b(c)41 b(d)p Fz(j)p Fx(f)p 797
284 506 2 v 818 346 a(v)844 328 y Fr(0)1151 346 y Fx(\017)h
FA([)16 b(])834 436 y(rec)p Fz(f)p Fx(cl)q(o)p FA([)p Fx(i)p
FA(])p Fz(g)1052 418 y Fk(n)1052 448 y(i)p Fm(=1)847 526 y
Fx(cl)q(o)p FA([)p Fx(i)p FA(])d(:)g(\()p Fx(v)1037 508 y Fr(0)1035
538 y Fk(i)1049 526 y Fx(;)8 b(\017)p FA(\))p eop
%%Page: 93 102
101 bop 1574 509 a Fw(Chapter)34 b Fv(7)790 633 y FB(Linearizing)25
b(the)i(abstract)h(mac)n(hine)p 150 689 1800 2 v 150 876 a
FA(Optimizations)14 b(of)j(the)f(mac)o(hine)e(can)i(b)q(e)h(realized)d(b)o(y)
i(making)f(the)h(state)h(transitions)f(linear.)150 966 y(That)i(is,)g(tak)o
(e)f(out)h(the)g(places)f(where)h(the)f(mac)o(hine)f(m)o(ust)g(examine)f(the)
j(top)g(of)g(eac)o(h)f(stac)o(k)150 1056 y(to)i(mak)o(e)d(a)j(decision)e(ab)q
(out)j(the)e(co)q(de)h(to)f(execute.)26 b(Instead,)19 b(the)f(instruction)g
(on)h(the)f(co)q(de)150 1146 y(stream)h(determines)e(the)j(state)g
(transition)h(of)f(the)g(mac)o(hine.)30 b(The)20 b(sequence)f(of)h(co)q(de)g
(then)150 1237 y(executes)14 b(in)h(a)h(more)e(linear)h(fashion,)h(where)f
(execution)f(starts)i(from)f(an)g(actual)h(\\b)q(eginning")150
1327 y(and)24 b(con)o(tin)o(ues)f(to)h(the)g(\\end".)44 b(This)24
b(linear)e(set)i(of)g(instructions)g(is)f(more)f(amenable)h(to)150
1417 y(translation)17 b(do)o(wn)g(to)f(nativ)o(e)g(mac)o(hine)e(co)q(de.)200
1507 y(The)g(design)g(philosoph)o(y)g(of)g(the)g(linear)f(abstract)h(mac)o
(hine)e(consists)i(of)h(the)e(follo)o(wing)h(prin-)150 1597
y(ciples:)215 1700 y(\(1\))22 b(Lik)o(e)h(the)h(previous)g(mac)o(hines,)g(co)
q(de)g(is)g(nev)o(er)f(stored)i(in)f(the)g(v)m(alue)g(stac)o(k.)44
b(But)299 1790 y(unlik)o(e)13 b(the)j(previous)f(mac)o(hines,)e(the)i(co)q
(de)h(stac)o(k)f(is)g(nev)o(er)g(temp)q(orarily)e(empt)o(y)l(.)19
b(The)299 1880 y(mac)o(hine)g(will)h(nev)o(er)g(ha)o(v)o(e)g(to)i(insp)q(ect)
e(the)h(dump)g(stac)o(k)f(for)i(more)e(co)q(de)h(once)g(the)299
1970 y(co)q(de)f(stac)o(k)g(empties)e(itself.)32 b(That)21
b(is,)g(the)f(dump)f(stac)o(k)h(ma)o(y)f(con)o(tain)h(p)q(oin)o(ters)h(to)299
2060 y(co)q(de,)13 b(but)h(the)f(mac)o(hine)f(nev)o(er)g(executes)g(the)i(co)
q(de)f(in)h(the)f(dump)f(directly)l(.)19 b(Rather,)14 b(a)299
2150 y(\\jump")i(is)g(initiated)f(to)i(load)g(the)g(program)f(coun)o(ter)g
(with)h(the)f(appropriate)h(p)q(oin)o(ter)299 2240 y(to)f(the)g(next)g(piece)
f(of)h(co)q(de)h(to)f(execute.)215 2330 y(\(2\))22 b(Macro)14
b(instructions)g(of)g(the)g(previous)g(mac)o(hine)d(are)j(replaced)g(with)g
(ev)o(en)e(smaller)h(lin-)299 2420 y(ear)h(micro)e(instructions.)21
b(Instead)14 b(of)h(ha)o(ving)f(one)g(macro)f(instruction)h(p)q(erform)f(man)
o(y)299 2510 y(small)i(tasks,)i(w)o(e)g(c)o(ho)q(ose)g(to)h(split)e(macro)g
(instruction)h(in)o(to)f(sev)o(eral)g(smaller)f(instruc-)299
2600 y(tions)j(that,)h(in)g(com)o(bination,)e(carry)h(out)h(the)f(w)o(ork)h
(of)g(the)f(macro)g(instruction.)27 b(An)1027 2700 y Fy(93)p
eop
%%Page: 94 103
102 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)353
b(94)299 141 y FA(example)14 b(is)j(the)g(con)o(trast)g(b)q(et)o(w)o(een)f
(ho)o(w)h(pairs)g(are)g(built)g(in)f(the)h(previous)g(mac)o(hine,)299
241 y(v)o(ersus)e(in)h(the)g(new)h(mac)o(hine.)150 559 y FB(7.1.)42
b(Basic)26 b(com)n(binators)200 684 y FA(The)c(basic)g(com)o(binators)f(in)h
(this)g(mac)o(hine)d(are)k(comp)q(osition,)f(terminal)e(map,)i(iden)o(tit)o
(y)150 783 y(and)d(pairs.)29 b(The)19 b(iden)o(tit)o(y)d(com)o(binator)i(do)q
(es)h(not)g(generate)g(an)o(y)f(co)q(de,)h(while)f(the)h(!)f(com)o(bi-)150
883 y(nator)j(generates)f(the)g(micro)e(instruction)i(!.)32
b(Comp)q(osition)20 b(of)g(com)o(binators)f(is)h(reduced)g(to)150
983 y(generating)e(a)g(sequence)e(of)i(co)q(de)g(in)f(a)h(linear)f(order.)25
b(No)o(w)17 b(w)o(e)g(come)f(to)i(our)g(\014rst)g(lineariza-)150
1083 y(tion)k(com)o(binators)e(for)i(pro)q(ducts.)38 b(This)21
b(linearization)g(is)g(basically)g(the)g(that)h(of)g(Curien's)150
1183 y(Categorical)g(Abstract)h(Mac)o(hine)e([Cur86].)39 b(Distributing)22
b(a)h(v)m(alue)f(o)o(v)o(er)f(pair)h(com)o(binator)150 1283
y(with)846 1383 y Fx(v)r(:)p Fz(h)p Fx(f)s(;)8 b(g)r Fz(i)14
b FA(=)f Fz(h)p Fx(v)r(:f)s(;)8 b(v)r(:g)r Fz(i)150 1501 y
FA(is)15 b(divided)f(in)o(to)h(three)g(instructions:)20 b(SA)-5
b(VE,)14 b(SW)-5 b(AP)15 b(and)h(a)g(new)f(P)l(AIR)g(instruction.)20
b(SA)-5 b(VE)150 1601 y(simply)20 b(pushes)i(the)g Fx(v)h FA(on)f(the)g(v)m
(alue)f(stac)o(k)h(to)g(b)q(e)g(distributed)f(on)o(to)i(the)e(dump.)37
b(SW)-5 b(AP)150 1701 y(reloads)20 b(the)g(sa)o(v)o(ed)f Fx(v)j
FA(b)o(y)d(sw)o(apping)i(the)f(curren)o(t)f(v)m(alue)h(of)g
Fx(v)h FA(and)g(the)e(v)m(alue)h(pushed)h(on)o(to)150 1801
y(the)f(dump.)31 b(Finally)l(,)20 b(the)f(P)l(AIR)h(instruction)f(constructs)
i(a)f(pair)g(on)h(the)e(v)m(alue)h(stac)o(k.)32 b(T)l(o)150
1901 y(ev)m(aluate)14 b(the)g(\014rst)g(and)h(second)f(comp)q(onen)o(t)f(of)h
(a)h(pair,)f(w)o(e)f(simply)f(compile)g(the)i(co)q(de)g(for)g(the)150
2001 y(second)j(comp)q(onen)o(t)e(b)q(et)o(w)o(een)h(the)g(SA)-5
b(VE)15 b(and)i(SW)-5 b(AP)16 b(instructions,)g(and)h(compile)e(the)h
(\014rst)150 2101 y(comp)q(onen)o(t)d(b)q(et)o(w)o(een)h(the)g(SW)-5
b(AP)14 b(and)h(P)l(AIR)e(instructions.)20 b(Note)14 b(that)h(in)f(compiling)
e(a)j(pair)150 2201 y(w)o(e)j(c)o(ho)q(ose)h(to)f(compile)e(\(and)j(ev)m
(aluate\))f(the)g(second)g(comp)q(onen)o(t)g(ahead)h(of)f(the)g(\014rst.)28
b(Lik)o(e)150 2301 y(the)17 b(previous)g(mac)o(hine,)e(the)i(compiler)e(p)q
(erforms)i(some)f(partial)h(ev)m(aluation)h(where)f(the)g(ma-)150
2401 y(c)o(hine)d(optimistically)e(assumes)i(that)i(the)f(en)o(vironmen)o(t)d
(is)j(in)g(the)g(second)g(comp)q(onen)o(t.)20 b(Th)o(us)150
2500 y(when)f(the)g(en)o(vironmen)o(t)d(needs)i(to)i(b)q(e)f(replicated,)e
(the)i(mac)o(hine)e(uses)i(the)f(PR)h(instruction)150 2600
y(to)e(automatically)d(pro)s(ject)i(it)g(out)g(and)h(push)g(it)f(on)o(to)g
(the)g(stac)o(k.)p eop
%%Page: 95 104
103 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)353
b(95)200 141 y FA(The)16 b(compilation)f(sc)o(heme)f(for)i(these)g(com)o
(binators)f(are:)565 245 y Fo(\()p Fq(C)611 251 y Fl(1)629
245 y Fo(\))42 b Fn(C)r Fo([)p Fq(c)741 251 y Fl(0)759 245
y Fo(;)7 b Fq(c)796 251 y Fl(1)814 245 y Fo(])12 b(=)f Fn(C)r
Fo([)p Fq(c)935 251 y Fl(0)954 245 y Fo(])p Fq(:)p Fn(C)r Fo([)p
Fq(c)1032 251 y Fl(1)1049 245 y Fo(])p Fq(;)565 319 y Fo(\()p
Fq(C)611 325 y Fl(2)629 319 y Fo(\))42 b Fn(C)r Fo([!])10 b(=)i(!)p
Fq(;)565 394 y Fo(\()p Fq(C)611 400 y Fl(3)629 394 y Fo(\))42
b Fn(C)r Fo([)p Fq(I)s Fo(])11 b(=)h Fq(\017)i Fo(where)h Fq(\017)f
Fo(is)f(the)i(empt)o(y)e(co)q(de)h(stream)p Fq(;)565 469 y
Fo(\()p Fq(C)611 475 y Fl(4)629 469 y Fo(\))42 b Fn(C)r Fo([)p
Fq(p)744 475 y Fe(i)758 469 y Fo(])11 b(=)g Fq(P)851 475 y
Fe(i)879 469 y Fo(for)i Fq(i)f Fo(=)g(0)p Fq(;)7 b Fo(1)o Fq(;)565
544 y Fo(\()p Fq(C)611 550 y Fl(5)629 544 y Fo(\))42 b Fn(C)r
Fo([)p Fn(h)p Fq(c)757 550 y Fl(0)776 544 y Fq(;)7 b(c)813
550 y Fl(1)831 544 y Fn(i)p Fo(])k(=)h(SA)-5 b(VE)q Fq(:)p
Fn(C)r Fo([)p Fq(c)1089 550 y Fl(1)1107 544 y Fo(])p Fq(:)p
Fo(SW)g(AP)o Fq(:)p Fn(C)r Fo([)p Fq(c)1316 550 y Fl(0)1334
544 y Fo(])p Fq(:)p Fo(P)m(AIR)o Fq(;)565 618 y Fo(\()p Fq(C)611
624 y Fl(6)629 618 y Fo(\))42 b Fn(C)r Fo([)p Fq(map)802 603
y Fl(1)821 618 y Fn(fg)p Fo(])10 b(=)i Fq(P)956 624 y Fl(0)974
618 y Fq(;)565 693 y Fo(\()p Fq(C)611 699 y Fl(7)629 693 y
Fo(\))42 b Fn(C)r Fo([)p Fq(map)802 678 y Fp(\002)830 693 y
Fn(f)p Fq(f)r(;)7 b(g)q Fn(g)p Fo(])k(=)h(MAP)1098 675 y Fp(\002)1126
693 y Fq(:)p Fn(C)r Fo([)p Fq(f)t Fo(])p Fq(:)p Fo(SW)-5 b(AP)p
Fq(:)p Fn(C)r Fo([)p Fq(g)q Fo(])p Fq(:)p Fo(P)m(AIR)166 791
y FA(The)17 b(sequence)e(in)h(whic)o(h)f(a)i(pair)f(com)o(binator)f(will)g
(execute)g(as)i(follo)o(ws:)215 910 y(\(1\))22 b(cop)o(y)15
b(a)i(v)m(alue)f(on)o(to)h(the)f(dump)f(for)h(distribution)g(o)o(v)o(er)g(a)g
(pair,)215 1007 y(\(2\))22 b(execute)14 b(the)i(compiled)e(co)q(de)j(asso)q
(ciated)g(with)f(the)g(second)g(comp)q(onen)o(t)g(of)g(the)g(pair,)215
1105 y(\(3\))22 b(sw)o(ap)16 b(the)g(resulting)g(v)m(alue)g(with)g(the)g
(dump,)215 1203 y(\(4\))22 b(execute)14 b(the)i(compiled)e(co)q(de)j(asso)q
(ciated)g(with)f(the)g(\014rst)h(comp)q(onen)o(t)e(of)h(the)g(pair,)215
1300 y(\(5\))22 b(recom)o(bine)11 b(the)k(item)d(on)j(the)f(top)h(of)f(the)h
(dump)e(stac)o(k)h(with)g(the)h(curren)o(t)e(item)f(on)j(the)299
1398 y(v)m(alue)h(stac)o(k)f(to)i(create)f(a)g(pair)h(com)o(binator)e(to)h(b)
q(e)h(left)e(on)i(the)f(v)m(alue)g(stac)o(k.)200 1516 y(The)j(state)g
(transition)h(rules)e(of)i(table)e(7.1)i(sho)o(w)g(ho)o(w)f(the)g(\014rst)g
(three)g(transitions)g(retain)150 1614 y(the)i(same)f(op)q(eration)i(as)g(in)
f(the)g(previous)g(mac)o(hine.)34 b(Ho)o(w)o(ev)o(er,)20 b(transitions)h(4)h
(to)f(6)h(w)o(ork)150 1712 y(in)c(conjunction)g(to)h(p)q(erform)e(the)h(task)
g(of)h(the)f(pair)g(com)o(binator.)26 b(T)l(ransition)18 b(7)h(is)f(the)g
(map)150 1809 y(o)o(v)o(er)c(pro)q(ducts,)i(while)f(the)g(PR)h(instruction)f
(in)g(transition)g(8)h(allo)o(ws)f(for)h(the)f(en)o(vironmen)o(t)e(to)150
1907 y(b)q(e)k(repro)q(duced)h(with)f(minim)o(al)d(w)o(aste)k(in)f
(instructions.)24 b(An)17 b(explicit)e(HAL)l(T)i(instruction)f(in)150
2005 y(transition)j(9)g(stops)h(the)f(mac)o(hine.)27 b(This)19
b(is)g(in)f(con)o(trast)h(to)h(c)o(hec)o(king)d(the)h(co)q(de)i(and)f(dump)
150 2102 y(stac)o(ks)d(to)g(mak)o(e)e(sure)i(they)f(are)h(b)q(oth)h(empt)o(y)
d(b)q(efore)i(halting.)21 b(The)16 b(jump)e(transition)j(\(10\))f(is)150
2200 y(analogous)h(to)e(a)h(subroutine)f(call)f(where)h(the)f(mac)o(hine)f
(\\jumps")i(to)g(the)g(a)g(piece)f(of)h(co)q(de)g(and)150 2298
y(con)o(tin)o(ues)10 b(execution)g(there.)19 b(When)10 b(a)i(RET)f
(\(transition)g(11\))h(instruction)e(is)h(encoun)o(tered,)f(the)150
2395 y(susp)q(ended)16 b(sequence)e(of)h(co)q(de)g(pushed)h(on)o(to)f(the)g
(dump)f(stac)o(k)h(is)f(p)q(opp)q(ed)j(o\013)e(and)h(execution)150
2493 y(resumes)d(as)h(b)q(efore.)21 b(Finally)l(,)12 b(the)i(mac)o(hine)e
(can)i(execute)f(an)h(unconditional)g(goto)h(to)f(execute)150
2591 y(some)h(other)i(piece)e(of)h(co)q(de,)g(as)h(in)f(transition)g(12.)p
eop
%%Page: 96 105
104 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)353
b(96)p 317 155 1467 2 v 316 230 2 75 v 399 230 V 421 208 a
Fq(v)q Fn(j)p Fq(h)194 b(c)243 b(d)p Fn(j)p Fq(f)150 b Fn(!)41
b Fq(v)1241 192 y Fp(0)1253 208 y Fn(j)p Fq(h)1289 192 y Fp(0)1453
208 y Fq(c)1471 192 y Fp(0)1524 208 y Fq(d)1546 192 y Fp(0)1558
208 y Fn(j)p Fq(f)1594 192 y Fp(0)p 1782 230 V 317 232 1467
2 v 316 306 2 75 v 348 284 a Fo(1)p 399 306 V 52 w Fq(v)231
b Fo(!)p Fq(:c)219 b(d)182 b Fn(!)41 b Fo(!)221 b Fq(c)53 b(d)p
1782 306 V 316 381 V 348 359 a Fo(2)p 399 381 V 52 w Fq(v)13
b Fo(:)e Fn(h)p Fq(v)513 365 y Fl(0)532 359 y Fq(;)c(v)571
365 y Fl(1)589 359 y Fn(i)67 b Fq(P)699 365 y Fl(0)717 359
y Fq(:c)186 b(d)c Fn(!)41 b Fq(v)1240 365 y Fl(0)1453 359 y
Fq(c)53 b(d)p 1782 381 V 316 456 V 348 433 a Fo(3)p 399 456
V 52 w Fq(v)13 b Fo(:)e Fn(h)p Fq(v)513 439 y Fl(0)532 433
y Fq(;)c(v)571 439 y Fl(1)589 433 y Fn(i)67 b Fq(P)699 439
y Fl(1)717 433 y Fq(:c)186 b(d)c Fn(!)41 b Fq(v)1240 439 y
Fl(1)1453 433 y Fq(c)53 b(d)p 1782 456 V 316 531 V 348 508
a Fo(4)p 399 531 V 52 w Fq(v)231 b Fo(SA)-5 b(VE)q Fq(:c)122
b(d)182 b Fn(!)41 b Fq(v)213 b(c)53 b Fo(pr)1564 518 y Fl(0)1582
508 y Fo(\()p Fq(v)q Fo(\))p Fq(:d)p 1782 531 V 316 605 V 348
583 a Fo(5)p 399 605 V 52 w Fq(v)441 589 y Fl(1)672 583 y Fo(SW)-5
b(AP)q Fq(:c)110 b Fo(pr)972 593 y Fl(0)991 583 y Fo(\()p Fq(v)q
Fo(\))p Fq(:d)59 b Fn(!)41 b Fq(v)213 b(c)53 b Fo(pr)1564 593
y Fl(1)1582 583 y Fo(\()p Fq(v)1618 589 y Fl(1)1637 583 y Fo(\))p
Fq(:d)p 1782 605 V 316 680 V 348 658 a Fo(6)p 399 680 V 52
w Fq(v)441 664 y Fl(0)672 658 y Fo(P)m(AIR)p Fq(:c)129 b Fo(pr)972
668 y Fl(1)991 658 y Fo(\()p Fq(v)1027 664 y Fl(1)1046 658
y Fo(\))p Fq(:d)41 b Fn(!)g Fq(v)13 b Fo(:)e Fn(h)p Fq(v)1312
664 y Fl(0)1331 658 y Fq(;)c(v)1370 664 y Fl(1)1388 658 y Fn(i)49
b Fq(c)k(d)p 1782 680 V 316 755 V 348 732 a Fo(7)p 399 755
V 52 w Fq(v)13 b Fo(:)e Fn(h)p Fq(v)514 717 y Fp(0)526 732
y Fq(;)c(\033)q Fn(i)86 b Fo(MAP)769 714 y Fp(\002)798 732
y Fq(:c)105 b(d)182 b Fn(!)41 b Fq(v)1241 717 y Fp(00)1274
732 y Fo(:)11 b Fn(h)p Fq(v)1333 738 y Fl(1)1352 732 y Fq(;)c(\033)q
Fn(i)41 b Fq(c)53 b Fo(pr)1564 742 y Fl(0)1582 732 y Fo(\()p
Fn(h)p Fq(v)1634 738 y Fl(0)1653 732 y Fq(;)7 b(\033)q Fn(i)p
Fo(\))p Fq(:d)p 1782 755 V 316 829 V 399 829 V 434 807 a(v)455
792 y Fp(0)479 807 y Fo(:)k Fn(h)p Fq(v)538 813 y Fl(0)557
807 y Fq(;)c(v)596 813 y Fl(1)614 807 y Fn(i)p 1782 829 V 316
904 V 348 882 a Fo(8)p 399 904 V 52 w Fq(v)13 b Fo(:)e Fn(h)p
Fq(v)513 888 y Fl(0)532 882 y Fq(;)c(v)571 888 y Fl(1)589 882
y Fn(i)67 b Fo(PR)p Fq(:c)172 b(d)182 b Fn(!)41 b Fq(v)13 b
Fo(:)e Fn(h)p Fq(v)1312 888 y Fl(0)1331 882 y Fq(;)c(v)1370
888 y Fl(1)1388 882 y Fn(i)49 b Fq(c)k Fo(pr)1564 892 y Fl(1)1582
882 y Fo(\()p Fq(v)1618 888 y Fl(1)1637 882 y Fo(\))p Fq(:d)p
1782 904 V 316 979 V 348 956 a Fo(9)p 399 979 V 52 w Fq(v)231
b Fo(HAL)m(T)146 b([)13 b(])167 b Fn(!)255 b Fo(STOP)p 1782
979 V 316 1054 V 338 1031 a(10)p 399 1054 V 41 w Fq(v)231 b
Fo(JUMP)q Fn(f)p Fq(c)830 1016 y Fp(0)841 1031 y Fn(g)p Fq(:c)41
b(d)182 b Fn(!)41 b Fq(v)213 b(c)1471 1016 y Fp(0)1524 1031
y Fo(con)o(t)q(\()p Fq(c)p Fo(\))p Fq(:d)p 1782 1054 V 316
1128 V 338 1106 a Fo(11)p 399 1128 V 41 w Fq(v)231 b Fo(RET)172
b(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)43 b Fn(!)e Fq(v)213 b(c)53
b(d)p 1782 1128 V 316 1203 V 338 1181 a Fo(12)p 399 1203 V
41 w Fq(v)231 b Fo(GOTO)p Fn(f)p Fq(c)p Fn(g)74 b Fq(d)182
b Fn(!)41 b Fq(v)213 b(c)53 b(d)p 1782 1203 V 317 1205 1467
2 v 413 1281 a Fd(T)l(able)17 b(7.1.)23 b FA(State)17 b(transition)f(rules)g
(for)g(the)g(basic)h(instructions)150 1472 y FB(7.2.)42 b(The)27
b(linear)e(datat)n(yp)r(es)200 1589 y FA(Mo)o(ving)14 b(to)o(w)o(ards)h(a)f
(linear)g(mac)o(hine)e(mak)o(es)h(the)h(o)o(v)o(erall)f(op)q(eration)i(of)g
(the)f(mac)o(hine)e(m)o(uc)o(h)150 1681 y(simpler.)32 b(The)21
b(com)o(binators)f(for)h(the)f(datat)o(yp)q(es)h(b)q(ene\014t)g(from)f(this)g
(linear)g(mac)o(hine)e(b)o(y)j(a)150 1773 y(more)15 b(e\016cien)o(t)f(and)j
(uniform)e(co)q(de)h(represen)o(tation.)21 b(All)15 b(instructions)h(con)o
(tain)g(at)g(most)g(one)150 1865 y(op)q(erand.)23 b(This)17
b(op)q(erand)g(is)g(either)e(a)i(p)q(oin)o(ter)g(to)f(some)g(co)q(de,)g(a)h
(p)q(oin)o(ter)g(to)f(an)h(o\013set)h(table,)150 1957 y(or)d(an)g(in)o(teger)
e(v)m(alue.)21 b(Applying)13 b(a)i(constructor)g(to)g(an)g(inductiv)o(e)d
(com)o(binator)h(simply)g(en)o(ters)150 2049 y(the)j(co)q(de)g(asso)q(ciated)
i(with)e(that)g(constructor.)200 2141 y(In)23 b(making)f(the)h(datat)o(yp)q
(es)g(linear,)h(w)o(e)f(m)o(ust)e(reexamine)g(the)i(com)o(binators)f
(generated)150 2233 y(b)o(y)17 b(the)h(inductiv)o(e)e(and)i(coinductiv)o(e)e
(datat)o(yp)q(es.)26 b(The)18 b(INDUCT,)f(RECORD)h(and)g(DESTR)150
2325 y(com)o(binators)h(that)h(p)q(erformed)e(man)o(y)g(tasks)j(in)e(the)g
(previous)h(mac)o(hine)d(no)o(w)j(are)g(mo)q(di\014ed)150 2417
y(to)g(p)q(erform)e(at)i(most)e(one)i(task.)30 b(By)19 b(task,)h(w)o(e)f
(mean)f(a)i(single)e(simple)f(stac)o(k)i(op)q(eration)i(or)150
2508 y(reference.)39 b(The)23 b(design)g(philosoph)o(y)f(is)h(to)g(mak)o(e)e
(the)h(mac)o(hine)f(less)h(abstract)i(and)f(more)150 2600 y(concrete.)i
(Instructions)17 b(are)h(no)o(w)g(similar)e(to)i(ph)o(ysical)f(mac)o(hine)e
(instructions,)j(making)e(the)p eop
%%Page: 97 106
105 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)353
b(97)150 141 y FA(gap)17 b(b)q(et)o(w)o(een)e(abstract)i(mac)o(hine)d(and)j
(mac)o(hine)d(co)q(de)j(generation)f(a)h(small)d(leap.)200
233 y(T)l(o)21 b(ac)o(hiev)o(e)e(sp)q(eeds)i(comparable)e(to)i(imp)q(erativ)o
(e)d(languages,)23 b(functional)d(languages)i(are)150 325 y(compiled)12
b(to)i(nativ)o(e)f(mac)o(hine)e(co)q(de.)21 b(Whether)13 b(this)h
(compilation)e(is)i(the)g(result)f(of)h(compiling)150 417 y(to)21
b(some)f(high)h(lev)o(el)e(then)h(to)h(mac)o(hine)e(co)q(de,)j(or)f(directly)
e(to)i(mac)o(hine)e(co)q(de,)j(the)e(goal)i(of)150 509 y(most)15
b(impleme)o(n)o(tations)f(is)i(to)h(c)o(ho)q(ose)f(an)h(appropriate)g(in)o
(termediate)c(language.)150 701 y FB(7.3.)42 b(Linear)27 b(inductiv)n(e)d
(datat)n(yp)r(es)200 818 y FA(The)18 b(INDUCT)f(com)o(binator)f(of)j(the)e
(last)h(c)o(hapter)f(is)h(mo)q(di\014ed)f(in)o(to)g(a)h(linear)f(instruction)
150 910 y(where)i(this)f(com)o(binator)g(p)q(oin)o(ts)h(to)h(the)e(start)i
(of)f(a)g(co)q(de)g(table.)29 b(Eac)o(h)19 b(en)o(try)f(in)h(this)f(table)150
1002 y(is)f(a)g(goto)h(instruction)f(that)g(p)q(oin)o(ts)h(to)f(co)q(de)g
(compiled)e(for)i(one)g(of)h(the)e(inductiv)o(e)g(op)q(erators)150
1094 y(\(case,)h(fold,)g(or)h(map\),)f(one)g(GOTO)h(for)g(eac)o(h)f
(constructor.)25 b(F)l(or)17 b(example,)e(if)i(the)h(INDUCT)519
1317 y
 16774349 12038062 4604723 37758730 21379072 49796792 startTexFig
 519 1317 a
%%BeginDocument: figures/inductTable.eps
%!
%%BoundingBox: 70 574 325 757
%%Title: inductTable
%%CreationDate: Tue Sep 19 12:47:27 1995
%%Creator: Tgif-2.16 by William Chia-Wei Cheng (william@cs.UCLA.edu)
%
%	Due to bugs in Transcript, the 'PS-Adobe-' stuff is omitted from line 1
%

/tgifdict 132 dict def
tgifdict begin

%
%	Using a zero value radius for an ellipse or an arc would result
%		in a non-invertible CTM matrix which causes problem when this
%		when this PostScript is wrapped inside other routines, such as
%		the multi.ps package from
%		ftp.ucc.su.oz.au:/pub/ps_printing/multi.  You can overcome such
%		error by uncommenting the sole line of the procedure below:
%
/tgif_min_radius
 {
%    dup 0.01 lt { pop 0.01 } if
 } bind def

/tgifellipsedict 6 dict def
tgifellipsedict /mtrx matrix put

/tgifellipse
 { tgifellipsedict begin
      /yrad exch def
      /xrad exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      xrad yrad scale
      0 0 1 0 360 arc
      savematrix setmatrix
   end
 } def

/tgifarrowtipdict 8 dict def
tgifarrowtipdict /mtrx matrix put

/tgifarrowtip
 { tgifarrowtipdict begin
      /dy exch def
      /dx exch def
      /h exch def
      /w exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      dy dx atan rotate
      0 0 moveto
      w neg h lineto
      w neg h neg lineto
      savematrix setmatrix
   end
 } def

/tgifarcdict 8 dict def
tgifarcdict /mtrx matrix put

/tgifarcn
 { tgifarcdict begin
      /endangle exch def
      /startangle exch def
      /yrad exch def
      /xrad exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      xrad yrad scale
      0 0 1 startangle endangle arc
      savematrix setmatrix
   end
 } def

/tgifarc
 { tgifarcdict begin
      /endangle exch def
      /startangle exch def
      /yrad exch def
      /xrad exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      xrad yrad scale
      0 0 1 startangle endangle arcn
      savematrix setmatrix
   end
 } def

/tgifsetuserscreendict 22 dict def
tgifsetuserscreendict begin
   /tempctm matrix def
   /temprot matrix def
   /tempscale matrix def

   /concatprocs
    { /proc2 exch cvlit def
      /proc1 exch cvlit def
      /newproc proc1 length proc2 length add array def
      newproc 0 proc1 putinterval
      newproc proc1 length proc2 putinterval
      newproc cvx
    } def
   /resmatrix matrix def
   /findresolution
    { 72 0 resmatrix defaultmatrix dtransform
      /yres exch def /xres exch def
      xres dup mul yres dup mul add sqrt
    } def
end

/tgifsetuserscreen
 { tgifsetuserscreendict begin
      /spotfunction exch def
      /screenangle exch def
      /cellsize exch def

      /m tempctm currentmatrix def
      /rm screenangle temprot rotate def
      /sm cellsize dup tempscale scale def

      sm rm m m concatmatrix m concatmatrix pop

      1 0 m dtransform /y1 exch def /x1 exch def

      /veclength x1 dup mul y1 dup mul add sqrt def
      /frequency findresolution veclength div def

      /newscreenangle y1 x1 atan def

      m 2 get m 1 get mul m 0 get m 3 get mul sub 0 gt

      {{neg} /spotfunction load concatprocs
         /spotfunction exch def
      } if

      frequency newscreenangle /spotfunction load setscreen
   end
 } def

/tgifsetpatterndict 18 dict def
tgifsetpatterndict begin
   /bitison
    { /ybit exch def /xbit exch def
      /bytevalue bstring ybit bwidth mul xbit 8 idiv add get def

      /mask 1 7 xbit 8 mod sub bitshift def
      bytevalue mask and 0 ne
    } def
end

/tgifbitpatternspotfunction
 { tgifsetpatterndict begin
      /y exch def /x exch def

      /xindex x 1 add 2 div bpside mul cvi def
      /yindex y 1 add 2 div bpside mul cvi def

      xindex yindex bitison
       { /onbits onbits 1 add def 1 }
       { /offbits offbits 1 add def 0 }
       ifelse
   end
 } def

/tgifsetpattern
 { tgifsetpatterndict begin
      /cellsz exch def
      /angle exch def
      /bwidth exch def
      /bpside exch def
      /bstring exch def

      /onbits 0 def /offbits 0 def
      cellsz angle /tgifbitpatternspotfunction load tgifsetuserscreen
      {} settransfer
      offbits offbits onbits add div setgray
   end
 } def

/tgifxpmdict 4 dict def
/tgifbwpicstr 1 string def
/tgifcolorpicstr 3 string def

/tgifsetpixels { tgifxpmdict begin /pixels exch def end } def

/tgifsetpix { tgifxpmdict begin pixels 3 1 roll putinterval end } def

/tgifbwspot
 { tgifxpmdict begin
      /index exch def
      tgifbwpicstr 0
      pixels index 3 mul 3 getinterval aload pop
      255 mul .114 mul exch 255 mul .587 mul add exch 255 mul .299 mul add
      cvi put
      tgifbwpicstr
   end
 } def

/tgifcolorspot
 { tgifxpmdict begin
      /index exch def
      pixels index 3 mul 3 getinterval aload pop
      255 mul cvi tgifcolorpicstr 2 3 -1 roll put
      255 mul cvi tgifcolorpicstr 1 3 -1 roll put
      255 mul cvi tgifcolorpicstr 0 3 -1 roll put
      tgifcolorpicstr
   end
 } def

/tgifnewcolorspot
 { tgifxpmdict begin
      /index exch def
      pixels index 3 mul 3 getinterval aload pop setrgbcolor
   end
 } def

/tgifcolordict 4 dict def

/colorimage where
 { pop }
 { /colorimage
   { tgifcolordict begin
        pop pop pop pop pop
        /ih exch def
        /iw exch def
        /x 0 def
        /y 0 def
        1 1 ih
         { pop 1 1 iw
            { pop currentfile
              tgifbwpicstr readhexstring pop 0 get tgifnewcolorspot
              x y moveto 1 0 rlineto 0 1 rlineto -1 0 rlineto
              closepath fill
              /x x 1 add def
            } for
           /y y 1 add def
           /x 0 def
         } for
     end
   } def
 } ifelse

/tgifpatdict 10 dict def

/tgifpatbyte
 { currentdict /retstr get exch
   pat i cellsz mod get put
 } def

/tgifpatproc
 { 0 1 widthlim {tgifpatbyte} for retstr
   /i i 1 add def
 } def

/tgifpatfill
 { tgifpatdict begin
      /h exch def
      /w exch def
      /lty exch def
      /ltx exch def
      /cellsz exch def
      /pat exch def

      /widthlim w cellsz div cvi 1 sub def
      /retstr widthlim 1 add string def
      /i 0 def

      ltx lty translate
      w h true [1 0 0 1 0 0] {tgifpatproc} imagemask
      ltx neg lty neg translate
   end
 } def

/pat1 <ffffffffffffffff> def
/pat2 <0000000000000000> def
/pat3 <8000000008000000> def
/pat4 <8800000022000000> def
/pat5 <8800220088002200> def
/pat6 <8822882288228822> def
/pat7 <aa55aa55aa55aa55> def
/pat8 <77dd77dd77dd77dd> def
/pat9 <77ffddff77ffddff> def
/pat10 <77ffffff77ffffff> def
/pat11 <7fffffff7fffffff> def
/pat12 <8040200002040800> def
/pat13 <40a00000040a0000> def
/pat14 <ff888888ff888888> def
/pat15 <ff808080ff080808> def
/pat16 <f87422478f172271> def
/pat17 <038448300c020101> def
/pat18 <081c22c180010204> def
/pat19 <8080413e080814e3> def
/pat20 <8040201008040201> def
/pat21 <8844221188442211> def
/pat22 <77bbddee77bbddee> def
/pat23 <c1e070381c0e0783> def
/pat24 <7fbfdfeff7fbfdfe> def
/pat25 <3e1f8fc7e3f1f87c> def
/pat26 <0102040810204080> def
/pat27 <1122448811224488> def
/pat28 <eeddbb77eeddbb77> def
/pat29 <83070e1c3870e0c1> def
/pat30 <fefdfbf7efdfbf7f> def
/pat31 <7cf8f1e3c78f1f3e> def

/tgifcentertext { dup stringwidth pop 2 div neg 0 rmoveto } def

/tgifrighttext { dup stringwidth pop neg 0 rmoveto } def

/tgifreencsmalldict 12 dict def
/tgifReEncodeSmall
 { tgifreencsmalldict begin
      /newcodesandnames exch def
      /newfontname exch def
      /basefontname exch def

      /basefontdict basefontname findfont def
      /newfont basefontdict maxlength dict def

      basefontdict
      { exch dup /FID ne
         { dup /Encoding eq
            { exch dup length array copy newfont 3 1 roll put }
            { exch newfont 3 1 roll put }
            ifelse
         }
         { pop pop }
         ifelse
      }
      forall

      newfont /FontName newfontname put
      newcodesandnames aload pop

      newcodesandnames length 2 idiv
      { newfont /Encoding get 3 1 roll put}
      repeat

      newfontname newfont definefont pop
   end
 } def

/tgifgray { 8 1 0 72 300 32 div div tgifsetpattern } bind def

/tgifboxdict 6 dict def
/tgifboxstroke
 { tgifboxdict begin
      /pat def /w def /y2 exch def /x2 exch def /y1 exch def /x1 exch def
      1.415 setmiterlimit
      w 1 eq { w setlinewidth } if
      pat pat1 ne pat pat2 ne and { gsave pat tgifgray } if
      newpath x1 y1 moveto x2 y1 lineto x2 y2 lineto x1 y2 lineto closepath
      pat pat2 eq { 1 setgray stroke 0 setgray } { stroke } ifelse
      pat pat1 ne pat pat2 ne and { grestore } if
      w 1 eq { 1 setlinewidth } if
      1 setmiterlimit
   end
 } def
/tgifboxfill
 { tgifboxdict begin
      /pat def /y2 exch def /x2 exch def /y1 exch def /x1 exch def
      pat pat1 ne pat pat2 ne and { gsave pat tgifgray } if
      newpath x1 y1 moveto x2 y1 lineto x2 y2 lineto x1 y2 lineto closepath
      pat pat2 eq { 1 setgray fill 0 setgray } { fill } ifelse
      pat pat1 ne pat pat2 ne and { grestore } if
   end
 } def

end

%%PageBoundingBox: 70 574 325 757
tgifdict begin
/tgifsavedpage save def

1 setmiterlimit
1 setlinewidth

0 setgray

72 0 mul 72 11.00 mul translate
72 128 div 100 mul 100 div dup neg scale

gsave

% BOX
gsave
   1.415 setmiterlimit
   newpath
      128 64 moveto 256 64 lineto 256 128 lineto 128 128 lineto
   closepath stroke
   1 setmiterlimit
grestore

% BOX
gsave
   1.415 setmiterlimit
   newpath
      384 192 moveto 512 192 lineto 512 256 lineto 384 256 lineto
   closepath stroke
   1 setmiterlimit
grestore

% BOX
gsave
   1.415 setmiterlimit
   newpath
      384 256 moveto 512 256 lineto 512 320 lineto 384 320 lineto
   closepath stroke
   1 setmiterlimit
grestore

% BOX
gsave
   1.415 setmiterlimit
   newpath
      384 320 moveto 512 320 lineto 512 384 lineto 384 384 lineto
   closepath stroke
   1 setmiterlimit
grestore

% TEXT
0 setgray
/Courier findfont [18 0 0 -18 0 0] makefont setfont
   gsave
      144 95 moveto (INDUCT) show
   grestore

% TEXT
0 setgray
/Courier findfont [18 0 0 -18 0 0] makefont setfont
   gsave
      400 223 moveto (GOTO) show
   grestore

% TEXT
0 setgray
/Courier findfont [18 0 0 -18 0 0] makefont setfont
   gsave
      400 351 moveto (GOTO) show
   grestore

% POLY/OPEN-SPLINE
gsave
   newpath
      224 96 moveto
      336 96 lineto
      96 48 atan dup cos 8 mul 384 exch sub
      exch sin 8 mul 192 exch sub lineto
   stroke
grestore
gsave
   newpath
      384 192 8 3 48 96 tgifarrowtip
   closepath fill
grestore

% POLY/OPEN-SPLINE
gsave
   newpath
      480 224 moveto
      0 96 atan dup cos 8 mul 576 exch sub
      exch sin 8 mul 224 exch sub lineto
   stroke
grestore
gsave
   newpath
      576 224 8 3 96 0 tgifarrowtip
   closepath fill
grestore

% POLY/OPEN-SPLINE
gsave
   newpath
      480 288 moveto
      0 96 atan dup cos 8 mul 576 exch sub
      exch sin 8 mul 288 exch sub lineto
   stroke
grestore
gsave
   newpath
      576 288 8 3 96 0 tgifarrowtip
   closepath fill
grestore

% POLY/OPEN-SPLINE
gsave
   newpath
      480 352 moveto
      0 96 atan dup cos 8 mul 576 exch sub
      exch sin 8 mul 352 exch sub lineto
   stroke
grestore
gsave
   newpath
      576 352 8 3 96 0 tgifarrowtip
   closepath fill
grestore

% TEXT
0 setgray
/Courier findfont [18 0 0 -18 0 0] makefont setfont
   gsave
      416 287 moveto (...) show
   grestore

grestore
tgifsavedpage restore
end
%MatchingCreationDate: Tue Sep 19 12:47:27 1995
%%EndDocument

 endTexFig
 556 2278 a Fd(Figure)h(7.1.)k FA(A)16 b(view)f(of)i(the)f(induct)f
(instruction)150 2508 y(com)o(binator)j(is)h(a)g(fold,)g(then)g(a)g
(constructor)h(CONS)o Fz(f)p Fx(i)p Fz(g)f FA(applied)f(to)i(this)e(INDUCT)h
(com)o(bi-)150 2600 y(nator)i(w)o(ould)e(select)g(the)h Fx(i)p
FA(th)f(co)q(de)h(to)g(execute)f(from)g(the)g(o\013set)i(table.)31
b(The)20 b(co)q(de)g(for)g(the)p eop
%%Page: 98 107
106 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)353
b(98)150 141 y FA(case)18 b(under)g(CONS)o Fz(f)p Fx(i)p Fz(g)g
FA(has)g(b)q(een)g(compiled)d(to)j(the)g(appropriate)g(linear)f
(instructions.)26 b(The)150 239 y(INDUCT)16 b(instruction)h(is,)f(in)g
(essence,)g(a)h(conditional)g(indirection)e(p)q(oin)o(ter)i(and)g(p)q(oin)o
(ts)g(to)h(a)150 337 y(table)h(of)g(GOTO)g(instructions.)30
b(The)19 b(compiler)d(is)j(giv)o(en)f(the)h(task)g(of)h(compiling)d(the)h
(map,)150 435 y(fold,)d(or)g(case)g(com)o(binator)f(and)i(m)o(ust)d(tak)o(e)i
(in)o(to)g(accoun)o(t)g(the)g(e\013ect)f(of)h(eac)o(h)g(constructor)h(on)150
532 y(the)f(inductiv)o(e)f(datat)o(yp)q(e.)21 b(The)16 b(net)f(e\013ect)g(is)
g(that)h(the)f(induct)g(com)o(binator)g(no)h(longer)f(needs)150
630 y(to)i(kno)o(w)f(ab)q(out)i(a)e(particular)g(fold,)g(map,)f(or)h(case)h
(com)o(binator.)200 713 y(The)f(translation)h Fz(C)i FA(from)c(the)h
(categorical)g(com)o(binators)g(is)g(describ)q(ed)f(as)i(follo)o(ws:)385
817 y Fo(\()p Fq(C)431 823 y Fl(8)449 817 y Fo(\))42 b Fn(C)r
Fo([)p Fq(c)561 823 y Fe(i)574 817 y Fo(])303 b(=)42 b(CONS\()p
Fq(i)p Fo(\))p Fq(;)385 891 y Fo(\()p Fq(C)431 897 y Fl(9)449
891 y Fo(\))g Fn(C)r Fo([case)616 876 y Fe(L)641 891 y Fn(f)p
Fq(f)682 897 y Fl(0)701 891 y Fq(;)7 b(:::;)g(f)795 897 y Fe(n)815
891 y Fn(g)p Fo(])41 b(=)h Fq(x)11 b Fo(:=)h(INDUCT)p Fn(f)p
Fq(y)q Fn(g)963 966 y Fo(where)j Fq(y)e Fo(=)f(GOTO)p Fn(f)p
Fq(y)1328 972 y Fl(0)1347 966 y Fn(g)d Fo(+)h Fq(:::)d Fo(+)j(GOTO)p
Fn(f)p Fq(y)1672 972 y Fe(n)1695 966 y Fn(g)963 1041 y Fo(where)15
b Fq(y)1103 1047 y Fe(i)1129 1041 y Fo(:=)c Fn(C)r Fo([)p Fq(f)1240
1047 y Fe(i)1254 1041 y Fo(])p Fq(:)p Fo(RET)o Fq(;)251 1194
y Fo(\()p Fq(C)297 1200 y Fl(10)332 1194 y Fo(\))42 b Fn(C)r
Fo([fold)494 1176 y Fe(L)518 1194 y Fn(f)p Fq(g)559 1200 y
Fl(0)578 1194 y Fq(;)7 b(:::;)g(g)672 1200 y Fe(n)691 1194
y Fn(g)p Fo(])69 b(=)42 b Fq(x)11 b Fo(:=)g(INDUCT)p Fn(f)p
Fq(y)q Fn(g)867 1269 y Fo(where)k Fq(y)e Fo(=)f(GOTO)p Fn(f)p
Fq(y)1232 1275 y Fl(0)1251 1269 y Fn(g)d Fo(+)g Fq(:::)f Fo(+)i(GOTO)p
Fn(f)p Fq(y)1576 1275 y Fe(n)1598 1269 y Fn(g)887 1344 y Fo(where)43
b Fq(y)1055 1350 y Fe(i)1111 1344 y Fo(:=)e(PR)p Fq(:)p Fn(C)r
Fo([)p Fq(map)1382 1329 y Fe(E)1406 1333 y Fc(i)1421 1344 y
Fn(f)p Fq(P)1469 1350 y Fl(0)1487 1344 y Fq(;)7 b(g)q(oto)p
Fn(f)p Fq(x)p Fn(gg)p Fo(])p Fq(:)p Fo(P)m(AIR)1111 1418 y
Fq(:)73 b Fn(C)r Fo([)p Fq(g)1252 1424 y Fe(i)1266 1418 y Fo(])1111
1493 y Fq(:)g Fo(RET)p Fq(;)251 1568 y Fo(\()p Fq(C)297 1574
y Fl(11)332 1568 y Fo(\))42 b Fn(C)r Fo([map)504 1553 y Fe(L)529
1568 y Fn(f)p Fq(h)574 1574 y Fl(0)592 1568 y Fq(;)7 b(:::;)g(h)690
1574 y Fe(m)719 1568 y Fn(g)p Fo(])41 b(=)h Fq(x)11 b Fo(:=)g(INDUCT)p
Fn(f)p Fq(y)q Fn(g)867 1643 y Fo(where)k Fq(y)e Fo(=)f(GOTO)p
Fn(f)p Fq(y)1232 1649 y Fl(0)1251 1643 y Fn(g)d Fo(+)g Fq(:::)f
Fo(+)i(GOTO)p Fn(f)p Fq(y)1576 1649 y Fe(m)1607 1643 y Fn(g)887
1717 y Fo(where)43 b Fq(y)1055 1723 y Fe(i)1111 1717 y Fo(:=)e
Fn(C)r Fo([)p Fq(map)1311 1702 y Fe(E)1335 1706 y Fc(i)1351
1717 y Fn(fC)r Fo([)p Fq(h)1432 1723 y Fl(1)1450 1717 y Fo(])p
Fq(;)7 b(:::;)g Fn(C)r Fo([)p Fq(h)1596 1723 y Fe(m)1624 1717
y Fo(])p Fq(;)g(g)q(oto)p Fn(f)p Fq(x)p Fn(gg)p Fo(])1111 1792
y Fq(:)73 b Fo(CONS)q Fn(f)p Fq(i)p Fn(g)p Fq(:)p Fo(RET)o
Fq(;)170 1891 y FA(A)20 b(new)g(com)o(binator)e Fx(g)r(oto)j
FA(is)f(used)g(to)g(handle)g(recursiv)o(e)f(calls.)32 b(The)20
b(compilation)e(of)i(this)150 1973 y(com)o(binator)15 b(is:)732
2061 y Fo(\()p Fq(C)778 2067 y Fl(12)813 2061 y Fo(\))42 b
Fn(C)r Fo([)p Fq(g)q(oto)p Fn(f)p Fq(x)p Fn(g)p Fo(])f(=)g(GOTO)p
Fn(f)p Fq(x)p Fn(g)166 2173 y FA(where)16 b Fx(x)g FA(is)g(the)g(p)q(oin)o
(ter)g(to)h(the)f(b)q(eginning)g(of)h(a)g(sequence)e(of)h(macro)g(co)q(de.)
200 2256 y(Consider)j(the)f(follo)o(wing)h(example)d(of)k(a)f(compilation)e
(from)h(the)g Fx(f)5 b(ol)q(d)1561 2238 y FA(list)1648 2256
y(com)o(binator)18 b(to)150 2339 y(macro)d(instructions:)452
2432 y Fn(C)r Fo([)p Fq(f)t(ol)q(d)567 2417 y Fo(list)626 2432
y Fn(f)p Fq(f)667 2438 y Fl(1)685 2432 y Fq(;)7 b(f)724 2438
y Fl(2)743 2432 y Fn(g)p Fo(])41 b(=)g(INDUCT)p Fn(f)p Fq(x)p
Fn(g)890 2507 y Fo(where)15 b Fq(x)d Fo(=)f(GOTO)q Fn(f)p Fq(x)1262
2513 y Fl(1)1280 2507 y Fn(g)e Fo(+)g Fq(:::)f Fo(+)i(GOTO)p
Fn(f)p Fq(x)1609 2513 y Fl(2)1627 2507 y Fn(g)p eop
%%Page: 99 108
107 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)353
b(99)570 235 y Fo(where)42 b Fq(x)741 241 y Fl(1)801 235 y
Fo(=)g Fn(hC)r Fo([)p Fq(map)1006 220 y Fe(E)1030 224 y Fa(1)1049
235 y Fn(f)p Fq(p)1091 241 y Fl(0)1109 235 y Fq(;)7 b(g)q(oto)p
Fn(f)p Fq(x)p Fn(gg)p Fo(])p Fq(;)g(P)1349 241 y Fl(1)1365
235 y Fn(i)p Fq(:)p Fn(C)r Fo([)p Fq(f)1449 241 y Fl(1)1468
235 y Fo(])801 310 y(=)42 b Fn(hC)r Fo([)p Fq(map)1006 295
y Fl(1)1025 310 y Fn(fg)p Fo(])p Fq(;)7 b(P)1125 316 y Fl(1)1142
310 y Fn(i)p Fq(:)p Fn(C)r Fo([)p Fq(f)1226 316 y Fl(1)1244
310 y Fo(])801 384 y(=)42 b Fn(h)p Fq(P)918 390 y Fl(0)937
384 y Fq(;)7 b(P)983 390 y Fl(1)1000 384 y Fn(i)p Fq(:)p Fn(C)r
Fo([)p Fq(f)1084 390 y Fl(1)1103 384 y Fo(])570 534 y(where)42
b Fq(x)741 540 y Fl(2)801 534 y Fo(=)g Fn(hC)r Fo([)p Fq(map)1006
519 y Fe(E)1030 523 y Fa(2)1049 534 y Fn(f)p Fq(p)1091 540
y Fl(0)1109 534 y Fq(;)7 b(g)q(oto)p Fn(f)p Fq(x)p Fn(gg)p
Fo(])p Fq(;)g(P)1349 540 y Fl(1)1365 534 y Fn(i)p Fq(:)p Fn(C)r
Fo([)p Fq(f)1449 540 y Fl(2)1468 534 y Fo(])801 609 y(=)42
b Fn(hC)r Fo([)p Fq(map)1006 593 y Fp(\002)1034 609 y Fn(f)p
Fq(p)1076 615 y Fl(0)1095 609 y Fq(;)7 b(g)q(oto)p Fn(f)p Fq(x)p
Fn(gg)p Fo(])p Fq(;)g(P)1335 615 y Fl(1)1351 609 y Fn(i)p Fq(:)p
Fn(C)r Fo([)p Fq(f)1435 615 y Fl(2)1453 609 y Fo(])801 683
y(=)42 b Fn(h)p Fo(MAP)989 665 y Fp(\002)1017 683 y Fn(fC)r
Fo([)p Fq(p)1095 689 y Fl(0)1113 683 y Fo(])p Fq(;)7 b Fn(C)r
Fo([)p Fq(g)q(oto)p Fn(f)p Fq(x)p Fn(g)p Fo(])p Fn(g)p Fq(;)g(P)1401
689 y Fl(1)1416 683 y Fn(i)p Fq(:)p Fn(C)r Fo([)p Fq(f)1500
689 y Fl(2)1519 683 y Fo(])801 758 y(=)42 b Fn(h)p Fo(MAP)989
740 y Fp(\002)1017 758 y Fn(f)p Fq(P)1065 764 y Fl(0)1083 758
y Fq(;)7 b Fn(C)r Fo([)p Fq(g)q(oto)p Fn(f)p Fq(x)p Fn(g)p
Fo(])p Fn(g)p Fq(;)g(P)1359 764 y Fl(1)1375 758 y Fn(i)p Fq(:)p
Fn(C)r Fo([)p Fq(f)1459 764 y Fl(2)1477 758 y Fo(])801 833
y(=)42 b Fn(h)p Fo(MAP)989 815 y Fp(\002)1017 833 y Fn(f)p
Fq(P)1065 839 y Fl(0)1083 833 y Fq(;)7 b Fo(GOTO)o Fn(f)p Fq(x)p
Fn(gg)p Fq(;)g(P)1361 839 y Fl(1)1378 833 y Fn(i)p Fq(:)p Fn(C)r
Fo([)p Fq(f)1462 839 y Fl(2)1480 833 y Fo(])200 988 y FA(The)17
b(state)g(transitions)g(13)h(and)f(14)h(sho)o(w)f(ho)o(w)h(constructors)f
(are)g(stac)o(k)o(ed)f(on)h(the)g Fx(v)h FA(stac)o(k)150 1079
y(and)13 b(ho)o(w)g(the)f(INDUCT)g(instruction)g(\\jumps")g(to)h(the)f(b)q
(eginning)g(of)h(some)e(co)q(de.)21 b(In)12 b(fact,)g(the)150
1171 y(INDUCT)f(instruction)g(can)g(b)q(e)h(though)o(t)f(of)h(as)g(a)g
(conditional)f(branc)o(h)g(w)o(ere)g(the)g(constructor)g(in)150
1262 y(the)h Fx(v)h FA(stac)o(k)e(determines)f(the)h(o\013set)i(in)o(to)f
(the)f(table)h(p)q(oin)o(ted)f(to)i(b)o(y)e(the)h(INDUCT)f(instruction.)p
326 1499 1449 2 v 325 1573 2 75 v 408 1573 V 429 1551 a Fq(v)q
Fn(j)p Fq(h)215 b(c)351 b(d)p Fn(j)p Fq(f)45 b Fn(!)c Fq(v)1273
1536 y Fp(0)1286 1551 y Fn(j)p Fq(h)1322 1536 y Fp(0)1520 1551
y Fq(c)1538 1536 y Fp(0)1593 1551 y Fq(d)1615 1536 y Fp(0)1626
1551 y Fn(j)p Fq(f)1662 1536 y Fp(0)p 1774 1573 V 326 1575
1449 2 v 325 1650 2 75 v 346 1627 a Fo(13)p 408 1650 V 41 w
Fq(v)252 b Fo(CONS)p Fn(f)p Fq(i)p Fn(g)p Fq(:c)167 b(d)77
b Fn(!)41 b Fq(u)12 b Fo(:)f(cons)p Fn(f)p Fq(i)p Fn(g)p Fq(:v)43
b(c)55 b(d)p 1774 1650 V 325 1725 V 346 1702 a Fo(14)p 408
1725 V 41 w Fq(v)13 b Fo(:)f Fn(h)p Fq(v)522 1708 y Fl(0)540
1702 y Fq(;)7 b(\033)q Fn(i)101 b Fo(INDUCT)p Fn(f)p Fq(c)909
1708 y Fe(i)922 1702 y Fn(g)943 1687 y Fe(n)943 1713 y(i)p
Fl(=1)999 1702 y Fq(:c)41 b(d)77 b Fn(!)41 b Fq(v)1273 1687
y Fp(0)1297 1702 y Fo(:)11 b Fn(h)p Fq(v)1357 1687 y Fp(0)1356
1712 y Fl(0)1375 1702 y Fq(;)c(\033)q Fn(i)85 b Fq(c)1538 1708
y Fe(i)1593 1702 y Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1774
1725 V 325 1799 V 408 1799 V 443 1777 a(v)463 1783 y Fl(0)493
1777 y Fo(:)12 b(cons)595 1783 y Fe(i)609 1777 y Fq(:v)642
1762 y Fp(0)641 1787 y Fl(0)p 1774 1799 V 326 1801 1449 2 v
389 1877 a Fd(T)l(able)18 b(7.2.)23 b FA(State)16 b(transition)h(rules)e(for)
i(the)f(inductiv)o(e)e(datat)o(yp)q(es)150 2210 y FB(7.4.)42
b(Linear)27 b(coinductiv)n(e)d(datat)n(yp)r(es)200 2326 y FA(The)g(record)g
(com)o(binator)f(in)h(the)g(previous)h(mac)o(hine)d(created)i(a)g(record)g
(on)h(the)f(v)m(alue)150 2418 y(stac)o(k)d(with)f(the)h(appropriate)g
(closures)g(for)g(eac)o(h)g(destructor.)35 b(The)21 b(linear)f(mac)o(hine)e
(splits)150 2509 y(this)f(instruction)g(in)o(to)g(three)f(separate)i
(instructions)f(that)g(build)g(a)h(record)e(with)i(closures)f(on)150
2600 y(the)d(v)m(alue)g(stac)o(k.)21 b(The)14 b(ALLOC)h(instruction)f(allo)q
(cates)h Fx(n)g FA(consecutiv)o(e)e(items)f(in)i(the)h(heap)f(so)p
eop
%%Page: 100 109
108 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)330
b(100)150 141 y FA(that)14 b(the)f(closure)g(instruction)g(will)g(load)h(the)
f Fx(i)p FA(th)g(heap)h(item)e(with)h(the)g(en)o(vironmen)o(t)e(\(curren)o(t)
150 234 y(v)m(alue)16 b(stac)o(k\))g(and)h(co)q(de)g(pair)f(to)h(form)e(a)i
(closure)f(for)g(the)g Fx(i)p FA(th)g(destructor.)22 b(This)17
b(consecutiv)o(e)150 327 y(space,)25 b(with)e(closures,)h(is)f(what)h(the)f
(RECORD)g(instruction)g(p)q(oin)o(ts)h(to,)g(via)f(a)h(rec)e(no)q(de)150
420 y(on)f(the)g(v)m(alue)g(stac)o(k.)35 b(Before)20 b(eac)o(h)g(destructor)i
(that)f(en)o(ters)f(a)i(closure)e(is)h(encoun)o(tered,)g(a)150
513 y(BLDUPD)o(A)l(TE)16 b(instruction)g(pushes)h(the)e(closure)h(the)g(mac)o
(hine)e(is)i(ab)q(out)i(to)e(en)o(ter)g(on)o(to)g(the)150 605
y(dump.)33 b(On)20 b(exiting)g(the)g(closure,)h(an)g(UPD)o(A)l(TE)f
(instruction)g(grabs)h(the)g(closure)f(lo)q(cation)150 698
y(from)d(the)g(dump)g(and)h(up)q(dates)h(it)f(with)f(the)h(computed)e(v)m
(alue)i(and)g(an)g(empt)o(y)e(co)q(de)i(stream)150 791 y(for)e(its)g(co)q
(de.)21 b(Subsequen)o(t)16 b(accesses)g(to)g(this)g(closure)g(will)f(imm)o
(ediatel)o(y)e(load)k(the)e(computed)150 884 y(v)m(alue)h(on)o(to)h(the)f(v)m
(alue)g(stac)o(k)g(and)h(exit)e(the)h(closure)g(without)g(up)q(dating.)219
988 y Fo(\()p Fq(C)265 994 y Fl(13)300 988 y Fo(\))42 b Fn(C)r
Fo([)p Fq(d)416 994 y Fe(i)429 988 y Fo(])341 b(=)42 b(DESTR)p
Fn(f)p Fq(i)p Fn(g)219 1062 y Fo(\()p Fq(C)265 1068 y Fl(14)300
1062 y Fo(\))g Fn(C)r Fo([record)507 1044 y Fe(R)534 1062 y
Fn(f)p Fq(f)575 1068 y Fl(0)594 1062 y Fq(;)7 b(:::;)g(f)688
1068 y Fe(n)708 1062 y Fn(g)p Fo(])41 b(=)h(ALLOC)p Fn(f)p
Fq(n)p Fn(g)p Fq(:)p Fo(BLDCLO)p Fn(f)p Fo(1)p Fq(;)7 b(x)1340
1068 y Fl(1)1357 1062 y Fn(g)p Fq(:)13 b(:::)f(:)p Fo(BLDCLO)p
Fn(f)p Fq(n;)7 b(x)1727 1068 y Fe(n)1749 1062 y Fn(g)877 1137
y Fo(where)43 b Fq(x)1049 1143 y Fe(i)1104 1137 y Fo(:=)e(BLDUPD)o(A)m(TE)
1104 1212 y Fq(:)73 b Fn(C)r Fo([)p Fq(f)1245 1218 y Fe(i)1259
1212 y Fo(])1104 1286 y Fq(:)g Fo(UPD)o(A)m(TE)p Fn(f)p Fq(i)p
Fn(g)1104 1361 y Fq(:)g Fo(RET)p Fq(;)219 1436 y Fo(\()p Fq(C)265
1442 y Fl(15)300 1436 y Fo(\))42 b Fn(C)r Fo([unfold)508 1417
y Fe(R)535 1436 y Fn(f)p Fq(g)576 1442 y Fl(0)594 1436 y Fq(;)7
b(:::;)g(g)688 1442 y Fe(n)708 1436 y Fn(g)p Fo(])41 b(=)h
Fq(x)11 b Fo(:=)h(ALLOC)p Fn(f)p Fq(n)p Fn(g)p Fq(:)p Fo(BLDCLO)o
Fn(f)p Fo(1)p Fq(;)7 b(x)1430 1442 y Fl(1)1448 1436 y Fn(g)p
Fq(:)13 b(:::)f(:)p Fo(BLDCLO)p Fn(f)p Fq(n;)7 b(x)1818 1442
y Fe(n)1839 1436 y Fn(g)877 1511 y Fo(where)43 b Fq(x)1049
1517 y Fe(i)1104 1511 y Fo(:=)e(BLDUPD)o(A)m(TE)1104 1585 y
Fq(:)73 b Fo(PR)p Fq(:)p Fn(C)r Fo([)p Fq(g)1316 1591 y Fe(i)1329
1585 y Fo(])p Fq(:)p Fo(P)m(AIR)1104 1660 y Fq(:)g Fn(C)r Fo([)p
Fq(map)1304 1645 y Fe(E)1328 1649 y Fc(i)1344 1660 y Fn(f)p
Fq(P)1392 1666 y Fl(0)1410 1660 y Fq(;)7 b(g)q(oto)p Fn(f)p
Fq(x)p Fn(gg)p Fo(])1104 1735 y Fq(:)73 b Fo(UPD)o(A)m(TE)p
Fn(f)p Fq(i)p Fn(g)1104 1810 y Fq(:)g Fo(RET)p Fq(;)219 1884
y Fo(\()p Fq(C)265 1890 y Fl(16)300 1884 y Fo(\))42 b Fn(C)r
Fo([map)472 1869 y Fe(R)500 1884 y Fn(f)p Fq(h)545 1890 y Fl(0)563
1884 y Fq(;)7 b(:::;)g(h)661 1890 y Fe(m)690 1884 y Fn(g)p
Fo(])59 b(=)42 b Fq(x)11 b Fo(:=)h(ALLOC)p Fn(f)p Fq(n)p Fn(g)p
Fq(:)p Fo(BLDCLO)o Fn(f)p Fo(1)p Fq(;)7 b(x)1430 1890 y Fl(1)1448
1884 y Fn(g)p Fq(:)13 b(:::)f(:)p Fo(BLDCLO)p Fn(f)p Fq(m;)7
b(x)1829 1890 y Fe(m)1860 1884 y Fn(g)877 1959 y Fo(where)43
b Fq(x)1049 1965 y Fe(i)1104 1959 y Fo(:=)e(BLDUPD)o(A)m(TE)1104
2034 y Fq(:)73 b Fo(PR)p Fq(:P)1287 2040 y Fl(0)1305 2034 y
Fq(:)p Fo(DESTR)o Fn(f)p Fq(i)p Fn(g)p Fq(:)p Fo(P)m(AIR)1104
2108 y Fq(:)g Fn(C)r Fo([)p Fq(map)1304 2093 y Fe(E)1328 2097
y Fc(i)1344 2108 y Fn(f)p Fq(h)1389 2114 y Fl(1)1407 2108 y
Fq(;)7 b(:::;)g(h)1505 2114 y Fe(m)1534 2108 y Fq(;)g(g)q(oto)p
Fn(f)p Fq(x)p Fn(gg)p Fo(])1104 2183 y Fq(:)73 b Fo(UPD)o(A)m(TE)p
Fn(f)p Fq(i)p Fn(g)1104 2258 y Fq(:)g Fo(RET)p Fq(;)200 2415
y FA(The)15 b(state)h(transitions)f(b)q(elo)o(w)g(sho)o(w)h(the)f(allo)q
(cation)h(of)f(heap)h(space)f(for)h(closures,)e(and)i(the)150
2508 y(instruction)g(whic)o(h)f(builds)h(a)h(closure)f(in)g(the)g(heap.)200
2600 y(Once)e(a)h(closure)g(has)g(b)q(een)g(en)o(tered)e(and)j(ev)m(aluated,)
e(it)g(m)o(ust)g(b)q(e)h(up)q(dated)g(with)g(the)g(result)p
eop
%%Page: 101 110
109 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)330
b(101)p 202 155 1696 2 v 201 230 2 75 v 284 230 V 306 208 a
Fq(v)q Fn(j)p Fq(h)375 b(c)334 b(d)p Fn(j)p Fq(f)46 b Fn(!)41
b Fq(v)1294 192 y Fp(0)1306 208 y Fn(j)p Fq(h)1342 192 y Fp(0)1725
208 y Fq(c)1743 192 y Fp(0)1796 208 y Fq(d)1818 192 y Fp(0)1829
208 y Fn(j)p Fq(f)1865 192 y Fp(0)p 1897 230 V 202 232 1696
2 v 201 306 2 75 v 223 284 a Fo(15)p 284 306 V 41 w Fq(v)412
b Fo(ALLOC)p Fn(f)p Fq(n)p Fn(g)p Fq(:c)110 b(d)78 b Fn(!)41
b Fq(v)q(:)p Fo(rec)q Fn(f)p Fo(clo[)p Fq(i)p Fo(])11 b(:)g(\()p
Fq(\017;)c(\017)p Fo(\))p Fn(g)1609 269 y Fe(n)1609 295 y(i)p
Fl(=1)1725 284 y Fq(c)53 b(d)p 1897 306 V 201 381 V 223 359
a Fo(16)p 284 381 V 41 w Fq(v)q(:)p Fo(rec)q Fn(f)p Fo(clo[)p
Fq(i)p Fo(])10 b(:)i(\()p Fq(\017;)7 b(\017)p Fo(\))p Fn(g)642
344 y Fe(n)642 369 y(i)p Fl(=1)738 359 y Fo(BLDCLO)p Fn(f)p
Fq(i;)g(c)985 365 y Fe(i)999 359 y Fn(g)p Fq(:c)40 b(d)78 b
Fn(!)41 b Fq(v)q(:)p Fo(rec)q Fn(f)p Fo(clo[)p Fq(i)p Fo(])11
b(:)g(\()p Fq(v)q(;)c(c)1577 365 y Fe(i)1591 359 y Fo(\))p
Fn(g)1628 344 y Fe(n)1628 369 y(i)p Fl(=1)1725 359 y Fq(c)53
b(d)p 1897 381 V 202 383 1696 2 v 421 459 a Fd(T)l(able)17
b(7.3.)24 b FA(State)16 b(transition)g(rules)g(for)h(the)f(building)f
(closures)150 657 y(in)i(order)h(a)o(v)o(oid)f(recomputation.)25
b(T)l(ransition)18 b(17)g(the)g(pushes)g(the)f(closure)g(on)i(the)e(dump)g
(to)150 750 y(mak)o(e)12 b(it)i(accessible)f(when)h(p)q(erforming)f(an)h(up)q
(date)h(to)g(the)e(closure.)21 b(T)l(ransition)14 b(18)h(explicitly)150
843 y(up)q(dates)j(the)e(v)m(alue)h(comp)q(onen)o(t)f(of)h(a)g(closure)g(to)g
(hold)g(the)f(result)h(of)g(the)f(computation)g(and)150 936
y(up)q(dates)k(the)g(co)q(de)f(p)q(ortion)h(to)g(ha)o(v)o(e)f(an)h(empt)o(y)d
(co)q(de)j(stream.)29 b(F)l(uture)19 b(references)f(to)i(this)150
1029 y(closure)c(will)f(return)h(the)g(already)g(computed)f(v)m(alue.)p
150 1191 1810 2 v 149 1266 2 75 v 232 1266 V 254 1244 a Fq(v)q
Fn(j)p Fq(h)401 b(c)285 b(d)p Fn(j)p Fq(f)202 b Fn(!)41 b Fq(v)1375
1229 y Fp(0)1387 1244 y Fn(j)p Fq(h)1423 1229 y Fp(0)1476 1244
y Fq(c)1494 1229 y Fp(0)1549 1244 y Fq(d)1571 1229 y Fp(0)1583
1244 y Fn(j)p Fq(f)1619 1229 y Fp(0)p 1958 1266 V 150 1268
1810 2 v 149 1343 2 75 v 171 1320 a Fo(17)p 232 1343 V 41 w
Fq(v)13 b Fo(:)e(rec)q Fn(f)p Fq(v)q Fo([)p Fq(i)p Fo(])g(:)g(\()p
Fq(v)513 1326 y Fe(i)528 1320 y Fq(;)c(c)565 1326 y Fe(i)578
1320 y Fo(\))p Fn(g)615 1305 y Fe(n)615 1331 y(i)p Fl(=1)712
1320 y Fo(DESTR)p Fn(f)p Fq(i)p Fn(g)p Fq(:c)73 b(d)234 b Fn(!)41
b Fq(v)1374 1326 y Fe(i)1476 1320 y Fq(c)1494 1326 y Fe(i)1549
1320 y Fo(up)q(date)q(\()p Fq(v)q Fo([)p Fq(i)p Fo(]\))p Fq(:)p
Fo(con)o(t\()p Fq(c)p Fo(\))p Fq(:d)p 1958 1343 V 149 1417
V 171 1395 a Fo(18)p 232 1417 V 41 w Fq(v)438 b Fo(UPD)o(A)m(TE)p
Fn(f)p Fq(i)p Fn(g)p Fq(:c)41 b Fo(up)q(date\()p Fq(u)p Fo(\))p
Fq(:d)g Fn(!)g Fq(v)102 b(c)55 b(d)p 1958 1417 V 149 1492 V
232 1492 V 268 1470 a(u)11 b Fo(:)g(rec)q Fn(f)p Fq(u)p Fo([)p
Fq(i)p Fo(])g(:)g(\()p Fq(v)532 1476 y Fe(i)546 1470 y Fq(;)c(c)583
1476 y Fe(i)596 1470 y Fo(\))p Fn(g)633 1455 y Fe(n)633 1480
y(i)p Fl(=1)1368 1470 y Fq(u)k Fo(:)g(rec)q Fn(f)p Fq(u)p Fo([)p
Fq(i)p Fo(])g(:)g(\()p Fq(v)q(;)c(\017)p Fo(\))p Fn(g)1706
1455 y Fe(n)1706 1480 y(i)p Fl(=1)p 1958 1492 V 150 1494 1810
2 v 443 1570 a Fd(T)l(able)18 b(7.4.)23 b FA(State)16 b(transition)h(rules)f
(for)g(up)q(dating)h(a)g(closure)150 1924 y FB(7.5.)42 b(Linear)27
b(natural)f(n)n(um)n(b)r(ers)200 2042 y FA(The)21 b(natural)h(n)o(um)o(b)q
(er)e(optimizations)g(of)i(the)f(last)g(c)o(hapter)g(also)i(need)e(to)g(b)q
(e)h(rew)o(ork)o(ed)150 2135 y(in)o(to)e(the)h(linear)e(setting.)34
b(Lik)o(e)20 b(the)g(previous)h(mac)o(hine,)e(a)i(nat)g(ob)s(ject)f(is)g
(used)h(to)g(store)g(a)150 2228 y(n)o(um)o(b)q(er)13 b(in)h(the)g(heap)h(eg:)
20 b(succ\(succ\(zero\)\))13 b(is)i(represen)o(ted)e(as)i(nat)p
Fz(f)p FA(2)p Fz(g)p FA(.)21 b(T)l(ransitions)15 b(19)g(and)150
2321 y(20)20 b(op)q(erate)f(on)g(this)g(natural)g(n)o(um)o(b)q(er)e(ob)s
(ject)h(in)h(the)f(heap.)29 b(The)19 b(linear)f(natural)i(n)o(um)o(b)q(ers)
150 2414 y(are)g(divided)e(in)o(to)i(the)f(those)h(instructions)g(that)g
(deal)f(with)h(the)f(case)h(and)g(those)g(that)g(deal)150 2507
y(with)d(the)f(fold.)24 b(T)l(ransitions)17 b(21)h(and)g(22)f(are)g(the)g
(zero)g(and)g(succ)g(cases)g(o)o(v)o(er)f(nats.)24 b(The)17
b(last)150 2600 y(three)j(transitions)g(deal)g(with)g(folding)g(o)o(v)o(er)g
(a)g(natural)h(n)o(um)o(b)q(er.)31 b(Lo)q(op)22 b(initialization)c(\(the)p
eop
%%Page: 102 111
110 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)330
b(102)150 141 y FA(zero)20 b(phrase\))i(is)e(p)q(erformed)g(b)o(y)g
(transition)h(23.)35 b(T)l(ransition)22 b(24)f(and)g(25)h(determine)c(if)i
(the)150 232 y(mac)o(hine)14 b(should)j(con)o(tin)o(ue)e(iteration)h(or)g
(exit)f(the)h(lo)q(op.)p 179 385 1743 2 v 178 460 2 75 v 261
460 V 283 438 a Fq(v)q Fn(j)p Fq(h)155 b(c)377 b(d)p Fn(j)p
Fq(f)261 b Fn(!)41 b Fq(v)1309 423 y Fp(0)1321 438 y Fn(j)p
Fq(h)1357 423 y Fp(0)1598 438 y Fq(c)1616 423 y Fp(0)1679 438
y Fq(d)1701 423 y Fp(0)1712 438 y Fn(j)p Fq(f)1748 423 y Fp(0)p
1920 460 V 179 462 1743 2 v 178 537 2 75 v 200 514 a Fo(19)p
261 537 V 41 w Fq(v)192 b Fo(NA)m(T)p Fn(f)p Fq(n)p Fn(g)p
Fq(:c)209 b(d)293 b Fn(!)41 b Fq(v)1309 499 y Fp(0)1333 514
y Fo(:)11 b(nat)p Fn(f)p Fq(n)p Fn(g)p Fq(:v)83 b(c)63 b(d)p
1920 537 V 178 611 V 200 589 a Fo(20)p 261 611 V 41 w(nat)p
Fn(f)p Fq(n)p Fn(g)85 b Fo(SNA)m(T)p Fq(:c)253 b(d)293 b Fn(!)41
b Fo(nat)p Fn(f)p Fq(s)p Fo(\()p Fq(n)p Fo(\))p Fn(g)132 b
Fq(c)63 b(d)p 1920 611 V 178 686 V 200 664 a Fo(21)p 261 686
V 41 w Fq(v)13 b Fo(:)e Fn(h)p Fq(v)375 670 y Fl(0)394 664
y Fq(;)c(\033)q Fn(i)41 b Fo(CASE)p 609 664 13 2 v 15 w(NA)m(T)p
Fn(f)p Fq(f)752 670 y Fe(z)771 664 y Fq(;)7 b(f)810 670 y Fe(s)828
664 y Fn(g)41 b Fq(d)293 b Fn(!)41 b Fq(v)1309 649 y Fp(0)1333
664 y Fo(:)11 b Fn(h)p Fq(v)1393 649 y Fp(0)1392 674 y Fl(0)1411
664 y Fq(;)c(\033)q Fn(i)127 b Fq(f)1618 670 y Fe(z)1679 664
y Fq(d)p 1920 686 2 75 v 178 761 V 261 761 V 296 738 a(v)316
744 y Fl(0)347 738 y Fo(:)11 b(nat)p Fn(f)p Fq(z)r Fn(g)p Fq(:v)526
723 y Fp(0)525 749 y Fl(0)p 1920 761 V 178 835 V 200 813 a
Fo(22)p 261 835 V 41 w Fq(v)i Fo(:)e Fn(h)p Fq(v)375 819 y
Fl(0)394 813 y Fq(;)c(\033)q Fn(i)41 b Fo(CASE)p 609 813 13
2 v 15 w(NA)m(T)p Fn(f)p Fq(f)752 819 y Fe(z)771 813 y Fq(;)7
b(f)810 819 y Fe(s)828 813 y Fn(g)41 b Fq(d)293 b Fn(!)41 b
Fq(v)1309 798 y Fp(0)1333 813 y Fo(:)11 b Fn(h)p Fq(v)1393
798 y Fp(0)1392 823 y Fl(0)1411 813 y Fq(;)c(\033)q Fn(i)127
b Fq(f)1618 819 y Fe(s)1679 813 y Fq(d)p 1920 835 2 75 v 178
910 V 261 910 V 296 888 a(v)316 894 y Fl(0)347 888 y Fo(:)11
b(nat)p Fn(f)p Fq(s)p Fo(\()p Fq(n)p Fo(\))p Fn(g)p Fq(:v)581
873 y Fp(00)580 898 y Fl(0)1302 888 y Fq(v)1322 894 y Fl(0)1352
888 y Fo(:)g(nat)p Fn(f)p Fq(n)p Fn(g)p Fq(:v)1535 873 y Fp(00)1534
898 y Fl(0)p 1920 910 V 178 985 V 200 962 a Fo(23)p 261 985
V 41 w Fq(v)i Fo(:)e Fn(h)p Fq(v)375 968 y Fl(0)394 962 y Fq(;)c(\033)q
Fn(i)41 b Fo(LOOPINIT)q Fq(:c)155 b(d)293 b Fn(!)41 b Fq(v)1309
947 y Fp(0)1333 962 y Fo(:)11 b Fn(h)p Fq(v)1393 947 y Fp(0)1392
973 y Fl(0)1411 962 y Fq(;)c(\033)q Fn(i)127 b Fq(c)63 b Fo(state\()p
Fq(n;)7 b(\033)q Fo(\))p Fq(:d)p 1920 985 V 178 1060 V 261
1060 V 296 1037 a(v)316 1043 y Fl(0)347 1037 y Fo(:)k(nat)p
Fn(f)p Fq(n)p Fn(g)p Fq(:v)530 1022 y Fp(0)529 1048 y Fl(0)p
1920 1060 V 178 1134 V 200 1112 a Fo(24)p 261 1134 V 41 w Fq(v)192
b Fo(LOOP)q(\()p Fq(c)648 1097 y Fp(0)659 1112 y Fo(\))p Fq(:c)185
b Fo(state)q(\()p Fq(s)p Fo(\()p Fq(n)p Fo(\))p Fq(;)7 b(\033)q
Fo(\))p Fq(:d)41 b Fn(!)g Fq(v)1309 1097 y Fp(0)1333 1112 y
Fo(:)11 b Fn(h)p Fq(v)q(;)c(v)1432 1118 y Fl(2)1451 1112 y
Fn(i)131 b Fq(c)63 b Fo(state\()p Fq(n;)7 b(\033)q Fo(\))p
Fq(:d)p 1920 1134 V 178 1209 V 200 1187 a Fo(25)p 261 1209
V 41 w Fq(v)192 b Fo(LOOP)q(\()p Fq(c)648 1172 y Fp(0)659 1187
y Fo(\))p Fq(:c)185 b Fo(state)q(\()p Fq(z)r(;)7 b(\033)q Fo(\))p
Fq(:d)96 b Fn(!)41 b Fq(v)290 b(c)1616 1172 y Fp(0)1679 1187
y Fq(d)p 1920 1209 V 179 1211 1743 2 v 573 1287 a Fd(T)l(able)17
b(7.5.)23 b FA(State)17 b(transition)f(for)h Fz(N)23 b FA(datat)o(yp)q(e)200
1501 y(The)c(translations)g(b)q(elo)o(w)g(sho)o(w)g(ho)o(w)g(the)g(com)o
(binators)e(are)i(compiled)e(to)i(linear)f(natural)150 1577
y(n)o(um)o(b)q(er)c(instructions.)448 1671 y Fo(\()p Fq(C)494
1677 y Fl(17)529 1671 y Fo(\))42 b Fn(C)r Fo([)p Fq(f)t(ol)q(d)702
1655 y Fp(N)736 1671 y Fn(f)p Fq(f)777 1677 y Fe(z)796 1671
y Fq(;)7 b(f)835 1677 y Fe(s)853 1671 y Fn(g)p Fo(])41 b(=)115
b(LOOPINIT)q Fq(:)p Fn(C)r Fo([)p Fq(f)1352 1677 y Fe(z)1371
1671 y Fo(])p Fq(:a)10 b Fo(:=)i(LOOP)q(\()p Fq(b)p Fo(\))1074
1745 y Fq(:)p Fn(C)r Fo([)p Fq(f)1142 1751 y Fe(s)1160 1745
y Fo(])p Fq(:)p Fo(GOTO)o Fn(f)p Fq(a)p Fn(g)h Fq(:b)e Fo(:=)g
Fq(:::;)448 1820 y Fo(\()p Fq(C)494 1826 y Fl(18)529 1820 y
Fo(\))42 b Fn(C)r Fo([)p Fq(case)701 1805 y Fp(N)735 1820 y
Fn(f)p Fq(f)776 1826 y Fe(z)795 1820 y Fq(;)7 b(f)834 1826
y Fe(s)852 1820 y Fn(g)p Fo(])42 b(=)115 b Fq(x)12 b Fo(:=)f(CASE)p
1279 1820 13 2 v 15 w(NA)m(T)p Fn(f)p Fq(y)1422 1826 y Fl(0)1441
1820 y Fq(;)c(y)1480 1826 y Fl(1)1498 1820 y Fn(g)927 1895
y Fo(where)42 b Fq(y)1094 1901 y Fl(0)1125 1895 y Fo(:=)11
b Fn(C)r Fo([)p Fq(f)1236 1901 y Fe(z)1255 1895 y Fo(])p Fq(:)p
Fo(RET)o Fq(;)1074 1969 y(y)1094 1975 y Fl(1)1125 1969 y Fo(:=)g
Fn(C)r Fo([)p Fq(f)1236 1975 y Fe(s)1254 1969 y Fo(])p Fq(:)p
Fo(RET)150 2212 y FB(7.6.)42 b(Linear)27 b(function)f(\(macro\))i(passing)200
2328 y FA(Eac)o(h)12 b(function)g(passed)g(as)h(a)g(macro)e(m)o(ust)f(b)q(e)j
(individually)d(on)o(to)i(the)g Fx(f)17 b FA(stac)o(k.)j(A)11
b(collection)150 2419 y(of)j(these)f(macros)g(passed)h(to)g(a)g(function)f
(form)g(a)h(frame.)19 b(T)l(ransition)14 b(26)g(loads)g(a)g(frame)e(on)i(the)
150 2509 y Fx(f)22 b FA(stac)o(k)17 b(while)f(transition)h(27)h(in)o(v)o(ok)o
(es)e(a)h(call)f(to)i(a)f(function.)23 b(When)17 b(the)g(call)f(to)i(a)f
(function)150 2600 y(is)f(\014nished,)g(transition)g(28)h(unloads)g(the)f
(frame)f(from)g(the)h Fx(f)22 b FA(stac)o(k.)p eop
%%Page: 103 112
111 bop 548 33 a Fy(7.)24 b(LINEARIZING)c(THE)f(ABSTRA)o(CT)g(MA)o(CHINE)330
b(103)p 163 143 1775 2 v 162 218 2 75 v 245 218 V 266 195 a
Fq(v)q Fn(j)p Fq(h)42 b(c)593 b(d)p Fn(j)p Fq(f)152 b Fn(!)147
b Fq(v)1392 180 y Fp(0)1404 195 y Fn(j)p Fq(h)1440 180 y Fp(0)1493
195 y Fq(c)1511 180 y Fp(0)1564 195 y Fq(d)1586 180 y Fp(0)1597
195 y Fn(j)p Fq(f)1633 180 y Fp(0)p 1937 218 V 163 219 1775
2 v 162 294 2 75 v 183 271 a Fo(26)p 245 294 V 41 w Fq(v)79
b Fo(LDP)m(ARM)o Fn(f)p Fo(parm)o Fn(f)p Fq(p)p Fo([)p Fq(i)p
Fo(])10 b(:)h Fq(c)794 277 y Fe(i)808 271 y Fn(g)829 256 y
Fe(n)829 282 y(i)p Fl(=1)884 271 y Fn(g)p Fq(:c)41 b(d)184
b Fn(!)147 b Fq(v)102 b(c)53 b(d)p 1937 294 V 162 369 V 245
369 V 976 346 a(f)568 b Fo(parm)n Fn(f)p Fq(p)p Fo([)p Fq(i)p
Fo(])11 b(:)g Fq(c)1790 352 y Fe(i)1804 346 y Fn(g)1825 331
y Fe(n)1825 357 y(i)p Fl(=1)1880 346 y Fq(:f)p 1937 369 V 162
443 V 183 421 a Fo(27)p 245 443 V 41 w Fq(v)79 b Fo(CALL)p
Fn(f)p Fq(c)517 406 y Fp(0)528 421 y Fn(g)p Fq(:c)397 b(d)184
b Fn(!)147 b Fq(v)102 b(c)1511 406 y Fp(0)1564 421 y Fo(con)o(t\()p
Fq(c)p Fo(\))p Fq(:d)p 1937 443 V 162 518 V 183 496 a Fo(28)p
245 518 V 41 w Fq(v)79 b Fo(UNLO)o(AD)p Fq(:c)399 b(d)184 b
Fn(!)147 b Fq(v)102 b(c)53 b(d)p 1937 518 V 162 593 V 245 593
V 976 570 a Fo(parm)o Fn(f)p Fq(p)p Fo([)p Fq(i)p Fo(])10 b(:)i
Fq(c)1203 576 y Fe(i)1216 570 y Fn(g)1237 555 y Fe(n)1237 581
y(i)p Fl(=1)1293 570 y Fq(:f)239 b(f)p 1937 593 V 163 594 1775
2 v 458 671 a Fd(T)l(able)18 b(7.6.)23 b FA(State)16 b(transition)h(for)f
(linear)g(function)g(passing)200 861 y(The)g(compilation)f(of)h(the)g
Fx(cal)q(l)g FA(com)o(binator)f(from)h(the)g(original)g(mac)o(hine)e(is:)326
995 y(\()p Fx(C)380 1002 y Fm(19)417 995 y FA(\))42 b Fz(C)s
FA([)p Fx(cal)q(l)q Fz(f)p Fx(c)646 977 y Fr(0)656 995 y Fx(;)8
b FA(\()p Fx(c)718 1002 y Fm(1)737 995 y Fx(;)g(:::;)g(c)844
1002 y Fk(n)866 995 y FA(\))p Fz(g)p FA(])41 b(=)h(LDP)l(ARM)1259
974 y Fk(n)1259 1008 y(i)p Fm(=1)1318 995 y Fx(:)p FA(CALL)p
Fz(f)p Fx(c)1510 977 y Fr(0)1522 995 y Fz(g)p Fx(:)p FA(UNLO)o(AD)200
1118 y(When)22 b(the)f(called)g(function)h(reac)o(hes)f(a)h(macro,)g(it)g
(selects)f(the)g(co)q(de)h(from)f(the)h(curren)o(t)150 1210
y(\(top\))15 b(frame)f(of)h(the)g Fx(f)21 b FA(stac)o(k)14
b(with)h(transition)g(29.)22 b(When)15 b(a)g(macro)g(is)f(in)o(v)o(ok)o(ed,)f
(the)i(mac)o(hine)150 1301 y(m)o(ust)e(push)h(the)g(curren)o(t)f
Fx(f)20 b FA(frame)13 b(on)o(to)h(the)g(dump,)f(e\013ectiv)o(ely)e(restoring)
k(the)f Fx(f)19 b FA(stac)o(k)14 b(to)g(the)150 1392 y(en)o(vironmen)o(t)9
b(the)j(macro)g(m)o(ust)e(op)q(erate)j(in.)20 b(After)11 b(the)h(macro)f(has)
i(completed)d(computation,)150 1484 y(transition)15 b(30)h(returns)f(from)f
(the)g(call)h(and)g(restore)g(the)g Fx(f)20 b FA(stac)o(k)15
b(to)g(its)g(former)e(state.)21 b(This)15 b(is)150 1575 y(accomplished)f(b)o
(y)i(p)q(opping)h(the)f(frame)f(of)i(the)f(dump)f(and)i(pushing)g(it)e(on)o
(to)i(the)f Fx(f)22 b FA(stac)o(k.)p 227 1717 1646 2 v 226
1792 2 75 v 310 1792 V 331 1770 a Fq(v)q Fn(j)p Fq(h)42 b(c)231
b(d)p Fn(j)p Fq(f)341 b Fn(!)41 b Fq(v)1178 1754 y Fp(0)1190
1770 y Fn(j)p Fq(h)1226 1754 y Fp(0)1279 1770 y Fq(c)1297 1754
y Fp(0)1356 1770 y Fq(d)1378 1754 y Fp(0)1389 1770 y Fn(j)p
Fq(f)1425 1754 y Fp(0)p 1872 1792 V 227 1794 1646 2 v 226 1868
2 75 v 248 1846 a Fo(29)p 310 1868 V 41 w Fq(v)79 b Fo(P)m(ARM)o(\()p
Fq(j)r Fo(\))p Fq(:c)44 b(d)373 b Fn(!)41 b Fq(v)102 b(c)1297
1852 y Fe(j)1356 1846 y Fo(reload\(parm)n Fn(f)p Fq(p)p Fo([)p
Fq(i)p Fo(])11 b(:)g Fq(c)1709 1852 y Fe(i)1723 1846 y Fn(g)1744
1831 y Fe(n)1744 1857 y(i)p Fl(=1)1799 1846 y Fo(\))p Fq(:d)p
1872 1868 V 226 1943 V 310 1943 V 679 1921 a Fo(parm)o Fn(f)p
Fq(p)p Fo([)p Fq(i)p Fo(])g(:)g Fq(c)906 1927 y Fe(i)920 1921
y Fn(g)941 1906 y Fe(n)941 1931 y(i)p Fl(=1)996 1921 y Fq(:f)328
b(f)p 1872 1943 V 226 2018 V 248 1995 a Fo(30)p 310 2018 V
41 w Fq(v)79 b Fo(RELO)o(AD)o Fq(:c)41 b Fo(parm)o Fn(f)p Fq(p)p
Fo([)p Fq(i)p Fo(])11 b(:)g Fq(c)906 2001 y Fe(i)920 1995 y
Fn(g)941 1980 y Fe(n)941 2006 y(i)p Fl(=1)996 1995 y Fq(:d)44
b Fn(!)d Fq(v)102 b(c)59 b(d)p 1872 2018 V 226 2092 V 310 2092
V 679 2070 a(f)657 b Fo(reload\(parm)n Fn(f)p Fq(p)p Fo([)p
Fq(i)p Fo(])11 b(:)g Fq(c)1709 2076 y Fe(i)1723 2070 y Fn(g)1744
2055 y Fe(n)1744 2081 y(i)p Fl(=1)1799 2070 y Fo(\))p Fq(:f)p
1872 2092 V 227 2094 1646 2 v 458 2225 a Fd(T)l(able)18 b(7.7.)23
b FA(State)16 b(transition)h(for)f(linear)g(function)g(passing)200
2456 y(The)g(compilation)f(of)h(the)g Fx(sel)h FA(com)o(binator)e(from)g(the)
h(original)g(mac)o(hine)e(is:)597 2590 y(\(\()p Fx(C)670 2597
y Fm(20)707 2590 y FA(\)\))42 b Fz(C)s FA([)p Fx(sel)q Fz(f)p
Fx(i)p FA(])d(=)j(P)l(ARM)o Fz(f)p Fx(i)p Fz(g)p Fx(:)p FA(RELO)o(AD)p
eop
%%Page: 104 113
112 bop 1574 523 a Fw(Chapter)34 b Fv(8)1090 647 y FB(Results)26
b(and)h(Conclusions)p 150 689 1800 2 v 150 877 a FA(This)19
b(thesis)f(sho)o(ws)h(ho)o(w)g(the)f(Charit)o(y)g(Abstract)h(Mac)o(hine)e
(can)i(b)q(e)f(successiv)o(ely)f(re\014ned)h(to)150 968 y(lev)o(els)f
(closely)h(appro)o(ximating)g(a)i(ph)o(ysical)e(mac)o(hine.)28
b(The)19 b(third)g(mac)o(hine)e(describ)q(ed)h(\(the)150 1058
y(linear)e(abstract)i(mac)o(hine\))c(is)j(roughly)g(20)h(times)d(faster)i
(than)g(the)g(original)g(\(\014rst\))g(mac)o(hine,)150 1149
y(whic)o(h)e(w)o(as)i(programmed)d(in)i(SML.)f(F)l(urthermore,)f(as)j(the)f
(new)g(mac)o(hine)d(implem)o(en)o(ts)g(shar-)150 1240 y(ing,)j(on)h(some)e
(programs)h(the)g(gain)h(one)f(can)h(exp)q(ect)e(is)h(considerably)g(greater)
g(than)h(this.)200 1330 y(In)o(terestingly)l(,)g(when)h(the)h(third)f(mac)o
(hine)f(w)o(as)i(\014rst)g(implem)o(e)o(n)o(ted,)d(it)i(w)o(as)h(ab)q(out)h
(5\045)f(to)150 1421 y(10\045)j(slo)o(w)o(er)f(than)i(the)e(second)h(mac)o
(hine.)36 b(Since)21 b(the)g(o)o(v)o(erhead)g(of)h(in)o(terpreting)f(eac)o(h)
g(in-)150 1512 y(struction)d(is)g(constan)o(t,)h(but)f(size)f(of)i(the)e(co)q
(de)i(generated)f(in)g(the)f(linear)h(mac)o(hine)e(is)i(larger,)150
1603 y(the)e(o)o(v)o(erall)e(in)o(terpreting)h(cost)h(b)q(ecomes)f(a)i(more)d
(signi\014can)o(t)i(factor)g(in)g(the)g(execution)f(time.)150
1693 y(The)f(decrease)g(in)g(sp)q(eed)g(is,)g(th)o(us,)g(an)h(indication)f
(that)g(the)g(cost)h(of)f(in)o(terpreting)f(instructions)150
1784 y(in)k(the)g(third)g(mac)o(hine)e(has)j(out)o(w)o(eighed)f(the)g(gains)h
(from)e(b)q(etter)h(appro)o(ximating)f(the)h(ph)o(ys-)150 1875
y(ical)j(mac)o(hine.)34 b(Th)o(us,)22 b(a)f(threshold)g(w)o(as)h(reac)o(hed)e
(in)h(attaining)g(sp)q(eed)h(gain)f(through)h(this)150 1965
y(re\014nemen)o(t)14 b(pro)q(cess.)200 2056 y(Despite)g(this,)g(the)g(linear)
g(mac)o(hine)e(has)j(b)q(een)g(used)f(in)h(preference)d(to)j(the)g(second)f
(mac)o(hine)150 2147 y(b)q(ecause,)24 b(not)g(only)f(is)f(it)h(more)e
(amenable)h(to)h(\\p)q(eephole")h(optimizations,)e(but)i(it)e(w)o(ould)150
2238 y(also)g(b)q(e)g(easier)f(to)h(compile)d(do)o(wn)j(to)g(actual)g(mac)o
(hine)d(instructions)j(\(th)o(us)g(remo)o(ving)d(the)150 2328
y(in)o(terpreting)c(o)o(v)o(erhead\).)200 2419 y(Implem)o(en)n(ting)f(the)i
(Charit)o(y)g(Abstract)g(Mac)o(hine)f(in)h(the)g(C)h(language)g(yielded)e
(not)i(only)f(a)150 2510 y(faster,)d(but)g(also)g(a)g(more)e(p)q(ortable)i
(implem)o(e)o(n)o(tation.)18 b(Ho)o(w)o(ev)o(er,)11 b(at)h(a)h(cost:)20
b(the)12 b(dev)o(elopmen)o(t)150 2600 y(time)i(w)o(as)j(considerably)f
(longer)g(than)h(that)f(required)f(for)i(the)f(original)g(SML)h(v)o(ersion.)
1016 2700 y Fy(104)p eop
%%Page: 105 114
113 bop 679 33 a Fy(8.)24 b(RESUL)l(TS)19 b(AND)g(CONCLUSIONS)460
b(105)200 141 y FA(The)16 b(con)o(tributions)g(of)h(this)f(thesis)g(are:)253
243 y Fz(\017)21 b FA(Completion)10 b(and)j(correction)f(of)g(the)g(design)h
(of)f(the)g(basic)g(Charit)o(y)g(Abstract)g(Mac)o(hine)299
333 y(initiated)j(b)o(y)g(M.)h(Hermann)f(\(CHARM\))g([Her92)o(].)253
423 y Fz(\017)21 b FA(Sp)q(eci\014cation)15 b(of)i(the)f(macro)f(passing.)253
512 y Fz(\017)21 b FA(Design)16 b(of)h(the)f(linear)f(abstract)i(mac)o(hine.)
253 602 y Fz(\017)k FA(Dev)o(elopmen)o(t)12 b(of)k(compilation)e(routines)h
(in)o(to)h(the)f(instructions)g(for)h(these)f(mac)o(hines.)253
692 y Fz(\017)21 b FA(The)16 b(reimplem)o(e)o(n)o(tation)e(of)i(CHARM)f(in)h
(C.)200 794 y(P)o(ossible)g(future)g(w)o(ork)g(with)g(the)g(Charit)o(y)g
(abstract)h(mac)o(hine)d(could)i(in)o(v)o(olv)o(e:)253 896
y Fz(\017)21 b FA(Optimizi)o(ng)e(the)i(translation)h(from)e(term)f(logic)i
(to)g(com)o(binators.)35 b(Impro)o(ving)19 b(this)299 985 y(translation)e(w)o
(ould)h(reduce)e(the)h(generation)g(of)h(unnecessary)f(com)o(binators.)23
b(Sp)q(eci\014-)299 1075 y(cally)l(,)17 b(the)g(abstraction,)i(inductiv)o(e)e
(and)h(coinductiv)o(e)f(terms)f(should)j(c)o(hec)o(k)d(to)j(see)f(if)299
1165 y(there)h(are)g(an)o(y)h(free)f(v)m(ariables)h(within)f(their)g(b)q(o)q
(dy)i(b)q(efore)e(generating)h(the)g(co)q(de)g(to)299 1254
y(create)15 b(the)h(en)o(vironmen)o(t;)253 1344 y Fz(\017)21
b FA(Compiling)9 b(co)q(de)j(directly)d(to)j(nativ)o(e)e(mac)o(hine)f(co)q
(de)j(to)f(eliminate)e(the)i(cost)g(asso)q(ciated)299 1434
y(with)j(in)o(terpreting)f(in)i(the)f(\\b)o(yte{co)q(de".)21
b(Instead)15 b(of)g(in)o(terpreting)f(eac)o(h)g(instruction,)299
1523 y(actual)i(mac)o(hine)e(instructions)i(could)g(b)q(e)g(generated)h(and)f
(executed;)253 1613 y Fz(\017)21 b FA(Pro)o(viding)12 b(direct)g(access)h(to)
g(v)m(ariables)g(rather)g(that)g(lo)q(oking)g(up)g(v)m(alues)g(b)o(y)g(pro)s
(jecting)299 1703 y(the)j(en)o(vironmen)o(t;)253 1792 y Fz(\017)21
b FA(Adding)15 b(built{in)g(t)o(yp)q(es)g(suc)o(h)g(as)i(in)o(tegers)e(and)h
(strings,)f(along)i(with)e(primitiv)o(e)d(op)q(er-)299 1882
y(ations)k(that)h(act)f(on)h(these)f(t)o(yp)q(es.)253 1972
y Fz(\017)21 b FA(Pro)o(ving)16 b(the)g(correctness)g(the)g(mac)o(hines)e
(and)j(their)e(compilation)g(pro)q(cedures.)253 2061 y Fz(\017)21
b FA(Optimizi)o(ng)15 b(com)o(binator)i(to)g(macro)g(instruction)g
(compilation)e(\(for)j(example,)d(p)q(eep-)299 2151 y(hole)g(optimization\).)
p eop
%%Page: 106 115
114 bop 1498 633 a FB(Bibliograph)n(y)p 150 689 1800 2 v 150
882 a FA([ASU85])35 b(A.)17 b(Aho,)i(R.)f(Sethi,)g(and)h(J.)f(Ullman.)e
Fu(Compilers:)26 b(Principles,)21 b(T)l(e)n(chniques,)h(and)362
977 y(T)l(o)n(ols)p FA(.)15 b(Addison{W)l(esley)l(,)h(Reading,)f(Massac)o(h)o
(usetts,)h(1985.)150 1073 y([Bac78])55 b(J.)12 b(W.)h(Bac)o(kus.)f(Can)i
(programming)d(b)q(e)j(lib)q(erated)e(from)g(the)h(v)o(on)g(Neumann)e(st)o
(yle?)362 1168 y(A)24 b(functional)g(st)o(yle)f(and)i(its)g(algebra)g(of)f
(programs.)g Fu(Communic)n(ations)i(of)e(the)362 1264 y(A)o(CM)p
FA(,)15 b(21\(8\):613{641,)k(August)e(1978.)150 1359 y([BW88])51
b(Ric)o(hard)13 b(Bird)h(and)h(Phillip)e(W)l(adler.)g Fu(Intr)n(o)n(duction)j
(to)g(F)l(unctional)h(Pr)n(o)n(gr)n(amming)p FA(.)362 1455
y(Series)i(in)h(Computer)f(Science)f(\(C.)i(A.)f(R.)h(Hoare)g(ed.\).)f(Pren)o
(tice-Hall,)f(London,)362 1550 y(1988.)150 1646 y([CCM85])j(G.)h(Cousineau,)j
(P)l(.)d(L.)h(Curien,)g(and)h(M.)d(Maun)o(y)l(.)h(\\The)h(Categorical)g
(Abstract)362 1741 y(Mac)o(hine".)16 b(In)i(G.)f(go)q(os)j(and)e(J.)f
(Hartmanis,)g(editors,)g Fu(F)l(unctional)k(Pr)n(o)n(gr)n(amming)362
1837 y(L)n(anguages)j(and)f(Computer)g(A)o(r)n(chite)g(ctur)n(e)p
FA(,)h(v)o(olume)c(201)k(of)e Fu(L)n(e)n(ctur)n(e)h(Notes)h(in)362
1932 y(Computer)17 b(Scienc)n(e)p FA(,)h(pages)f(50{64.)h(Springer{V)l
(erlag,)d(Septem)o(b)q(er)f(1985.)150 2027 y([CF92])69 b(R.)12
b(Co)q(c)o(k)o(ett)h(and)g(T.)g(F)l(ukushima.)e(Ab)q(out)j(Charit)o(y.)e
(Researc)o(h)h(Rep)q(ort)g(92/480/18,)362 2123 y(Departmen)o(t)h(of)i
(Computer)e(Science,)g(Univ)o(ersit)o(y)f(of)j(Calgary)l(,)g(Calgary)l(,)g
(Alb)q(erta,)362 2218 y(CANAD)o(A)e(T2N-1N4,)j(June)f(1992.)150
2314 y([Co)q(c])102 b(R.)21 b(Co)q(c)o(k)o(ett.)f(Lecture)h(notes)h(in)f
(applied)f(mathematics:)29 b(Seminar)20 b(on)i(category)362
2409 y(theory)l(.)150 2505 y([CS95])74 b(R.)18 b(Co)q(c)o(k)o(ett)g(and)h(D.)
f(Sp)q(encer.)g(Strong)i(categorical)e(datat)o(yp)q(es)h(ii:)25
b(A)19 b(term)d(logic)362 2600 y(for)g(categorical)g(programming.)e
Fu(tcs)p FA(,)j(139:69{113,)i(1995.)1016 2700 y Fy(106)p eop
%%Page: 107 116
115 bop 868 33 a Fy(BIBLIOGRAPHY)650 b(107)150 141 y FA([Cur86])55
b(P-L)27 b(Curien.)e Fu(Cate)n(goric)n(al)h(Combinators,)i(Se)n(quential)h(A)
o(lgorithms)d(and)h(F)l(unc-)362 232 y(tional)18 b(Pr)n(o)n(gr)n(amming)p
FA(.)c(John)j(Wiley)e(&)h(Sons,)h(Inc,)e(New)h(Y)l(ork,)f(1986.)150
323 y([FH88])67 b(A.)16 b(J.)g(Field)f(and)j(P)l(.)e(G.)h(Harrison.)f
Fu(F)l(unctional)k(pr)n(o)n(gr)n(amming)p FA(.)14 b(Addison{W)l(esley)l(,)362
414 y(New)h(Y)l(ork,)h(1988.)150 505 y([F)l(uk91])55 b(T.)16
b(F)l(ukushima.)e(Charit)o(y)i(User)f(Man)o(ual.)h(Draft,)g(Departmen)o(t)f
(of)h(Computer)f(Sci-)362 597 y(ence,)d(Univ)o(ersit)o(y)e(of)j(Calgary)l(,)h
(Calgary)l(,)f(Alb)q(erta,)g(CANAD)o(A)e(T2N-1N4,)i(No)o(v)o(em-)362
688 y(b)q(er)j(24)h(1991.)150 779 y([FW87])54 b(Jon)13 b(F)l(airbairn)g(and)g
(Stuart)h(C.)f(W)l(ra)o(y)l(.)f(TIM:)g(A)g(simple,)f(lazy)h(abstract)i(mac)o
(hine)d(to)362 870 y(execute)k(sup)q(ercom)o(binators.)h(In)g
Fu(Pr)n(o)n(c)n(e)n(e)n(dings)h(of)g(the)i(Confer)n(enc)n(e)f(on)g(F)l
(unctional)362 961 y(Pr)n(o)n(gr)n(amming)e(and)h(Computer)h(A)o(r)n(chite)n
(ctur)n(e)p FA(,)d(n)o(um)o(b)q(er)g(274)i(in)f(Lecture)g(Notes)g(in)362
1052 y(Computer)g(Science,)f(pages)i(34{45,)i(P)o(ortland,)e(OR,)f(Septem)o
(b)q(er)f(1987.)j(Springer-)362 1143 y(V)l(erlag.)150 1234
y([Gor88])55 b(M.)17 b(J.)g(C.)g(Gordon.)h Fu(Pr)n(o)n(gr)n(amming)f(L)n
(anguage)j(The)n(ory)d(and)i(its)g(Implementation)p FA(.)362
1325 y(Pren)o(tice)11 b(Hall)h(In)o(ternational)g(Series)g(in)g(Computer)g
(Science.)f(Pren)o(tice)g(Hall,)h(1988.)150 1416 y([Han91])48
b(J.)11 b(Hannan.)g(\\Making)h(Abstract)f(Mac)o(hine)f(Less)j(Abstract".)e
(In)g(J.)g(Hughes,)h(editor,)362 1507 y Fu(F)l(unctional)23
b(Pr)n(o)n(gr)n(amming)d(L)n(anguages)i(and)f(Computer)h(A)o(r)n(chite)f
(ctur)n(e)p FA(,)g(v)o(olume)362 1598 y(523)14 b(of)g Fu(L)n(e)n(ctur)n(e)g
(Notes)i(in)f(Computer)f(Scienc)n(e)p FA(,)i(pages)e(618{635.)i(Springer{V)l
(erlag,)362 1690 y(August)g(1991.)150 1781 y([Hen80])50 b(P)l(.)11
b(Henderson.)g Fu(F)l(unctional)k(Pr)n(o)n(gr)n(amming)d({)h(Applic)n(ations)
h(and)g(Implementation)p FA(.)362 1872 y(Pren)o(tice{Hall,)f(London,)18
b(1980.)150 1963 y([Her92])58 b(Mik)o(e)18 b(Hermann.)f(A)i(lazy)g(graph)i
(reduction)e(mac)o(hine)f(for)h(c)o(harit)o(y:)27 b(Charit)o(y)19
b(ab-)362 2054 y(stract)13 b(reduction)g(mac)o(hine)d(\(CHARM\).)i(Researc)o
(h)g(rep)q(ort,)i(Departmen)o(t)d(of)i(Com-)362 2145 y(puter)e(Science,)f
(Univ)o(ersit)o(y)e(of)j(Calgary)l(,)h(Calgary)l(,)g(Alb)q(erta,)f(CANAD)o(A)
f(T2N-1N4,)362 2236 y(July)15 b(4)i(1992.)150 2327 y([Hug84])48
b(R.)12 b(Hughes.)f Fu(The)j(design)h(and)f(implementation)i(of)e(pr)n(o)n
(gr)n(amming)e(languages)p FA(.)h(PhD)362 2418 y(thesis,)i(Univ)o(ersit)o(y)f
(of)j(Oxford,)e(1984.)150 2509 y([Hug89])48 b(R.)22 b(J.)g(M.)g(Hughes.)h(Wh)
o(y)f(functional)g(programming)f(matters.)h Fu(The)h(Computer)362
2600 y(Journal)p FA(,)16 b(32\(2\):98{107,)i(1989.)p eop
%%Page: 108 117
116 bop 868 33 a Fy(BIBLIOGRAPHY)650 b(108)150 141 y FA([Jon])108
b(S.)16 b(P)o(eyton)g(Jones.)g(F)l(unctional)g(languages)h(implem)o(en)o
(tation)c(tutorial.)150 231 y([Jon92])60 b(S.)21 b(L.)g(P)o(eyton)g(Jones.)g
(\\Implemen)n(ting)e(lazy)h(functional)h(languages)i(on)f(sto)q(c)o(k)f(h)362
320 y(ardw)o(are:)34 b(the)23 b(Spineless)f(T)l(agless)h(G{mac)o(hine".)f(In)
g(et)g(al)h(J.)g(Hughes,)h(P)l(.)e(Hu-)362 410 y(dak,)15 b(editor,)g
Fu(Journal)i(of)g(F)l(unctional)i(Pr)n(o)n(gr)n(amming)p FA(,)13
b(v)o(olume)h(2,)h(pages)i(127{202.)362 500 y(Cam)o(bridge)e(Univ)o(ersit)o
(y)e(Press,)j(April)f(1992.)150 589 y([Kie85])62 b(Ric)o(hard)19
b(B.)g(Kieburtz.)f(The)i(G-mac)o(hine:)27 b(A)20 b(fast,)g(graph-reduction)h
(ev)m(aluator.)362 679 y(In)15 b Fu(Confer)n(enc)n(e)i(on)f(F)l(unctional)j
(Pr)n(o)n(gr)n(amming)14 b(L)n(anguage)j(and)g(Computer)f(A)o(r)n(chi-)362
769 y(te)n(ctur)n(e)p FA(,)g(pages)h(400{413,)h(Nancy)l(,)e(F)l(rance,)f
(1985.)i(IFIP)l(.)150 858 y([Lan64])55 b(P)l(.)14 b(J.)g(Landin.)h(The)f(mec)
o(hanical)e(ev)m(aluation)i(of)h(expressions.)f Fu(Computer)i(Journal)p
FA(,)362 948 y(6\(4\):308{320,)j(1964.)150 1038 y([P)o(au91])53
b(L.)20 b(P)o(aulson.)g Fu(F)l(unctional)j(Pr)n(o)n(gr)n(amming)c({)i(Applic)
n(ations)h(and)f(Implementation)p FA(.)362 1127 y(Cam)o(bridge)15
b(Univ)o(ersit)o(y)e(Press,)j(Cam)o(bridge,)f(1991.)150 1217
y([Set89])68 b(R.)29 b(Sethi.)f Fu(Pr)n(o)n(gr)n(amming)g(L)n(anguages)i
(Conc)n(epts)g(and)f(Constructs)p FA(.)h(Addison{)362 1307
y(W)l(esley)l(,)14 b(Murry)i(Hill,)e(New)i(Jersey)l(,)f(1989.)150
1396 y([Sp)q(e93])59 b(D.)13 b(Sp)q(encer.)f Fu(Cate)n(goric)n(al)j(Pr)n(o)n
(gr)n(amming)e(with)i(F)l(unctorial)h(Str)n(ength)p FA(.)e(PhD)g(thesis,)362
1486 y(Oregon)i(Graduate)i(Institute,)d(1993.)150 1576 y([T)l(ur79])59
b(D.)18 b(A.)f(T)l(urner.)h(A)g(new)g(implem)o(en)o(tation)e(tec)o(hnique)g
(for)j(applicativ)o(e)d(languages.)362 1665 y(In)d Fu(Softwar)n(e)h(|)h(Pr)n
(actic)n(e)f(and)h(Exp)n(erienc)n(e)p FA(,)f(v)o(olume)d(9,)j(pages)g(31{49.)
h(John)e(Wiley)362 1755 y(and)k(Sons,)f(Septem)o(b)q(er)e(1979.)150
1845 y([T)l(ur85])59 b(D.)16 b(T)l(urner.)h(\\Miranda)g({)g(a)g(non{strict)h
(functional)e(language)i(with)e(p)q(olymorphic)362 1934 y(t)o(yp)q(es".)c(In)
g(G.)g(go)q(os)j(and)e(J.)f(Hartmanis,)f(editors,)i Fu(F)l(unctional)j(Pr)n
(o)n(gr)n(amming)c(L)n(an-)362 2024 y(guages)19 b(and)f(Computer)g(A)o(r)n
(chite)g(ctur)n(e)p FA(,)f(v)o(olume)d(201)19 b(of)e Fu(L)n(e)n(ctur)n(e)g
(Notes)i(in)f(Com-)362 2114 y(puter)f(Scienc)n(e)p FA(,)h(pages)f(1{16.)h
(Springer{V)l(erlag,)d(Septem)o(b)q(er)f(1985.)150 2203 y([W)l(al91])52
b(R.)24 b(F.)g(C.)g(W)l(alters.)g Fu(Cate)n(gories)i(and)f(Computer)g(Scienc)
n(e)p FA(.)h(Num)o(b)q(er)d(2)i(in)f(Un-)362 2293 y(dergraduate)16
b(Lecture)g(Notes)g(in)f(Mathematics.)f(Carsla)o(w)j(Publications,)e(Sydney)l
(,)362 2383 y(Australia,)g(1991.)150 2472 y([Y)l(ee])107 b(B.)15
b(Y)l(ee.)g(The)h(c)o(harm)f(pro)s(ject:)20 b(A)c(bac)o(k)g(end)g(to)h(the)f
(c)o(harit)o(y)f(in)o(terpreter.)p eop
%%Page: 109 118
117 bop 1535 509 a Fw(Appendix)32 b Fv(A)939 633 y FB(F)-7
b(ormal)27 b(De\014nition)f(of)h(Charit)n(y)p 150 689 1800
2 v 150 878 a FA(The)16 b(formal)f(de\014nition)h(of)h(Charit)o(y)f
(originally)f(app)q(eared)i(in)f([CF92].)150 1066 y FB(A.1.)41
b(V)-7 b(ariable)26 b(bases)200 1183 y FA(F)l(or)16 b(eac)o(h)g(t)o(yp)q(e)g
(w)o(e)f(ha)o(v)o(e)h(a)h(set)f(of)g Fz(f)p Fx(x;)8 b(y)r(;)g(z)r(;)g(:::)p
Fz(g)14 b FA(v)m(ariables)i(\(in)g(fact,)f(the)h(t)o(yp)q(e)g(is)g
(inferred\).)200 1275 y(A)g FC(v)m(ariable)h(base)f FA(is)g(then)g(de\014ned)
g(follo)o(ws:)253 1381 y Fz(\017)21 b FA(\(\))16 b(is)g(a)g(v)m(ariable)g
(base)h(of)g(t)o(yp)q(e)e(1,)253 1473 y Fz(\017)21 b FA(If)15
b Fx(x)h FA(is)g(a)h(v)m(ariable,)e(then)h Fx(x)g FA(is)h(a)f(v)m(ariable)g
(base)h(with)f(t)o(yp)q(e)g Fx(ty)r(pe)o FA(\()p Fx(x)p FA(\),)253
1564 y Fz(\017)21 b FA(If)15 b Fx(v)371 1571 y Fm(0)407 1564
y FA(and)i Fx(v)526 1571 y Fm(1)562 1564 y FA(are)f(v)m(ariable)g(bases)h
Fu(with)h(no)g(variables)g(in)g(c)n(ommon)t FA(,)e(then)g(\()p
Fx(v)1757 1571 y Fm(0)1776 1564 y Fx(;)8 b(v)1822 1571 y Fm(1)1841
1564 y FA(\))16 b(is)h(a)299 1656 y(v)m(ariable)e(base)i(where)745
1785 y Fx(ty)r(pe)p FA(\(\()p Fx(v)898 1792 y Fm(0)917 1785
y Fx(;)8 b(v)963 1792 y Fm(1)982 1785 y FA(\)\))14 b(=)g Fx(ty)r(pe)o
FA(\()p Fx(v)1219 1792 y Fm(0)1238 1785 y FA(\))d Fz(\002)g
Fx(ty)r(pe)o FA(\()p Fx(v)1451 1792 y Fm(1)1471 1785 y FA(\))p
Fx(:)150 2011 y FB(A.2.)41 b(T)-7 b(erms)200 2127 y FA(A)16
b FC(term)e FA(is)i(de\014ned)g(as)h(follo)o(ws:)253 2234 y
Fz(\017)k FA(\(\))16 b(is)g(a)g(term)f(of)h(t)o(yp)q(e)g(1,)253
2325 y Fz(\017)21 b FA(If)d Fx(t)g FA(is)g(a)h(term)e(where)h
Fx(ty)r(pe)p FA(\()p Fx(t)p FA(\))f(=)h Fx(X)f Fz(\002)12 b
Fx(Y)f FA(,)19 b(then)g Fx(p)1280 2332 y Fm(0)1300 2325 y FA(\()p
Fx(t)p FA(\))f(and)h Fx(p)1495 2332 y Fm(1)1515 2325 y FA(\()p
Fx(t)p FA(\))f(are)h(terms,)e(where)299 2417 y Fx(ty)r(pe)o
FA(\()p Fx(p)432 2424 y Fm(0)452 2417 y FA(\()p Fx(t)p FA(\)\))c(=)h
Fx(X)21 b FA(and)c Fx(ty)r(pe)o FA(\()p Fx(p)881 2424 y Fm(1)901
2417 y FA(\()p Fx(t)p FA(\)\))c(=)h Fx(Y)d FA(,)253 2509 y
Fz(\017)21 b FA(If)16 b Fx(t)366 2516 y Fm(0)401 2509 y FA(and)h
Fx(t)514 2516 y Fm(1)550 2509 y FA(are)g(terms,)d(then)j(\()p
Fx(t)930 2516 y Fm(0)949 2509 y Fx(;)8 b(t)989 2516 y Fm(1)1008
2509 y FA(\))17 b(is)f(a)h(term,)d(where)i Fx(ty)r(pe)p FA(\(\()p
Fx(t)1552 2516 y Fm(0)1571 2509 y Fx(;)8 b(t)1611 2516 y Fm(1)1630
2509 y FA(\)\))14 b(=)g Fx(ty)r(pe)p FA(\()p Fx(t)1862 2516
y Fm(0)1881 2509 y FA(\))d Fz(\002)299 2600 y Fx(ty)r(pe)o
FA(\()p Fx(t)426 2607 y Fm(1)445 2600 y FA(\),)1016 2700 y
Fy(109)p eop
%%Page: 110 119
118 bop 605 33 a Fy(A.)19 b(F)o(ORMAL)e(DEFINITION)j(OF)f(CHARITY)386
b(110)253 141 y Fz(\017)21 b FA(If)15 b Fx(w)j FA(is)e(a)g(v)m(ariable)g
(base,)h(and)f Fx(t)g FA(is)g(a)h(term,)d(where)i Fx(ty)r(pe)o
FA(\()p Fx(w)q FA(\))e(=)g Fx(ty)r(pe)o FA(\()p Fx(t)p FA(\),)i(then)1000
278 y Fz(f)p Fx(w)f Fz(7!)f Fx(t)1157 258 y Fr(0)1168 278 y
Fz(g)p FA(\()p Fx(t)p FA(\))299 415 y(is)i(a)g(term)f(of)h(t)o(yp)q(e)g
Fx(ty)r(pe)o FA(\()p Fx(t)797 397 y Fr(0)809 415 y FA(\),)f(and)i(the)f(v)m
(ariables)g(in)g Fx(w)i FA(are)e(b)q(ound)h(in)f Fx(t)1654
397 y Fr(0)1665 415 y FA(.)253 515 y Fz(\017)21 b FA(If)f Fx(t)370
522 y Fm(1)389 515 y Fx(;)8 b(:::;)g(t)493 522 y Fk(n)536 515
y FA(are)21 b(terms)e(where)i Fx(ty)r(pe)o FA(\()p Fx(t)1035
522 y Fk(i)1049 515 y FA(\))g(=)h Fx(E)1185 522 y Fk(i)1199
515 y FA(\()p Fx(A;)8 b(L)p FA(\()p Fx(A)p FA(\)\))20 b(then)h
Fx(c)1561 522 y Fm(1)1581 515 y FA(\()p Fx(t)1618 522 y Fm(1)1637
515 y FA(\))p Fx(;)8 b(:::;)g(c)1763 522 y Fk(n)1785 515 y
FA(\()p Fx(t)1822 522 y Fk(n)1845 515 y FA(\))21 b(are)299
615 y(terms)14 b(where)i Fx(ty)r(pe)o FA(\()p Fx(c)705 622
y Fk(i)719 615 y FA(\()p Fx(t)756 622 y Fk(i)770 615 y FA(\)\))e(=)g
Fx(L)p FA(\()p Fx(A)p FA(\).)253 715 y Fz(\017)21 b FA(If)g
Fx(t)g FA(is)h(a)g(term)e(where)h Fx(ty)r(pe)o FA(\()p Fx(t)p
FA(\))i(=)g Fx(L)p FA(\()p Fx(A)p FA(\))e(and)i Fx(v)1245 722
y Fm(1)1264 715 y Fx(;)8 b(:::;)g(v)1374 722 y Fk(n)1417 715
y FA(are)22 b(v)m(ariable)f(bases)h(where)299 815 y Fx(ty)r(pe)o
FA(\()p Fx(v)432 822 y Fk(i)445 815 y FA(\))37 b(=)g Fx(E)612
822 y Fk(i)626 815 y FA(\()p Fx(A;)8 b(L)p FA(\()p Fx(A)p FA(\)\))28
b(and)j Fx(t)986 822 y Fm(1)1005 815 y Fx(;)8 b(:::;)g(t)1109
822 y Fk(n)1160 815 y FA(are)30 b(terms)e(where)h Fx(ty)r(pe)o
FA(\()p Fx(t)1685 822 y Fm(1)1705 815 y FA(\))36 b(=)h Fx(:::)e
FA(=)299 914 y Fx(ty)r(pe)o FA(\()p Fx(t)426 921 y Fk(n)449
914 y FA(\))14 b(=)f Fx(B)19 b FA(then)883 941 y Fi(8)883 978
y(>)883 991 y(>)883 1003 y(>)883 1016 y(>)883 1028 y(<)883
1103 y(>)883 1115 y(>)883 1128 y(>)883 1140 y(>)883 1153 y(:)948
994 y Fx(c)969 1001 y Fm(1)989 994 y FA(\()p Fx(v)1032 1001
y Fm(1)1051 994 y FA(\))42 b Fz(7!)f Fx(t)1221 1001 y Fm(1)1130
1050 y FA(.)1130 1067 y(.)1130 1084 y(.)941 1173 y Fx(c)962
1180 y Fk(n)985 1173 y FA(\()p Fx(v)1028 1180 y Fk(n)1051 1173
y FA(\))h Fz(7!)f Fx(t)1221 1180 y Fk(n)1265 941 y Fi(9)1265
978 y(>)1265 991 y(>)1265 1003 y(>)1265 1016 y(>)1265 1028
y(=)1265 1103 y(>)1265 1115 y(>)1265 1128 y(>)1265 1140 y(>)1265
1153 y(;)1310 1078 y FA(\()p Fx(t)p FA(\))299 1260 y(is)14
b(a)h(term)e(\(the)i(case)f(expression\))h(of)g(t)o(yp)q(e)f
Fx(B)s FA(.)20 b(The)15 b(v)m(ariables)f(in)h Fx(v)1571 1267
y Fm(1)1590 1260 y Fx(;)8 b(:::;)g(v)1700 1267 y Fk(n)1736
1260 y FA(are)15 b(b)q(ound)299 1360 y(in)g Fx(t)373 1367 y
Fm(1)393 1360 y Fx(;)8 b(:::;)g(t)497 1367 y Fk(n)534 1360
y FA(resp)q(ectiv)o(ely)l(.)253 1460 y Fz(\017)21 b FA(If)g
Fx(t)g FA(is)h(a)g(term)e(where)h Fx(ty)r(pe)o FA(\()p Fx(t)p
FA(\))i(=)g Fx(L)p FA(\()p Fx(A)p FA(\))e(and)i Fx(v)1245 1467
y Fm(1)1264 1460 y Fx(;)8 b(:::;)g(v)1374 1467 y Fk(n)1417
1460 y FA(are)22 b(v)m(ariable)f(bases)h(where)299 1560 y Fx(ty)r(pe)o
FA(\()p Fx(v)432 1567 y Fk(i)445 1560 y FA(\))16 b(=)g Fx(E)570
1567 y Fk(i)584 1560 y FA(\()p Fx(A;)8 b(X)t FA(\))18 b(and)g
Fx(t)857 1567 y Fm(1)876 1560 y Fx(;)8 b(:::;)g(t)980 1567
y Fk(n)1019 1560 y FA(are)18 b(terms)e(where)h Fx(ty)r(pe)o
FA(\()p Fx(t)1508 1567 y Fm(1)1527 1560 y FA(\))f(=)g Fx(:::)f
FA(=)h Fx(ty)r(pe)o FA(\()p Fx(t)1854 1567 y Fk(n)1877 1560
y FA(\))g(=)299 1659 y Fx(X)k FA(then)884 1674 y Fi(8)884 1711
y(>)884 1723 y(>)884 1736 y(>)884 1748 y(>)884 1761 y(<)884
1836 y(>)884 1848 y(>)884 1860 y(>)884 1873 y(>)884 1885 y(:)904
1674 y(\014)904 1699 y(\014)904 1723 y(\014)904 1748 y(\014)904
1773 y(\014)904 1798 y(\014)904 1823 y(\014)904 1848 y(\014)904
1873 y(\014)904 1898 y(\014)947 1726 y Fx(c)968 1733 y Fm(1)1001
1726 y FA(:)13 b Fx(v)1052 1733 y Fm(1)1113 1726 y Fz(7!)42
b Fx(t)1223 1733 y Fm(1)1131 1783 y FA(.)1131 1800 y(.)1131
1816 y(.)939 1906 y Fx(c)960 1913 y Fk(n)997 1906 y FA(:)14
b Fx(v)1049 1913 y Fk(n)1113 1906 y Fz(7!)42 b Fx(t)1223 1913
y Fk(n)1266 1674 y Fi(\014)1266 1699 y(\014)1266 1723 y(\014)1266
1748 y(\014)1266 1773 y(\014)1266 1798 y(\014)1266 1823 y(\014)1266
1848 y(\014)1266 1873 y(\014)1266 1898 y(\014)1264 1674 y(9)1264
1711 y(>)1264 1723 y(>)1264 1736 y(>)1264 1748 y(>)1264 1761
y(=)1264 1836 y(>)1264 1848 y(>)1264 1860 y(>)1264 1873 y(>)1264
1885 y(;)1309 1811 y FA(\()p Fx(t)p FA(\))299 1993 y(is)14
b(a)i(term)d(\(the)h(fold\))h(of)g(t)o(yp)q(e)g Fx(X)t FA(.)21
b(The)15 b(v)m(ariables)g(in)f Fx(v)1337 2000 y Fm(1)1356 1993
y Fx(;)8 b(:::;)g(v)1466 2000 y Fk(n)1503 1993 y FA(are)15
b(b)q(ound)h(in)e Fx(t)1805 2000 y Fm(1)1825 1993 y Fx(;)8
b(:::;)g(t)1929 2000 y Fk(n)299 2093 y FA(resp)q(ectiv)o(ely)l(.)253
2193 y Fz(\017)21 b FA(If)d Fx(t)h FA(is)g(a)g(term)f(where)g
Fx(ty)r(pe)p FA(\()p Fx(t)p FA(\))g(=)g Fx(L)p FA(\()p Fx(A)1055
2200 y Fm(1)1075 2193 y Fx(;)8 b(:::;)g(A)1198 2200 y Fk(m)1229
2193 y FA(\))19 b(and)h Fx(v)1389 2200 y Fm(1)1408 2193 y Fx(;)8
b(:::;)g(v)1518 2200 y Fk(m)1568 2193 y FA(are)20 b(v)m(ariable)e(bases)299
2292 y(where)d Fx(ty)r(pe)p FA(\()p Fx(v)573 2299 y Fk(j)590
2292 y FA(\))f(=)g Fx(A)712 2299 y Fk(j)746 2292 y FA(and)j
Fx(t)859 2299 y Fm(1)878 2292 y Fx(;)8 b(:::;)g(t)982 2299
y Fk(m)1030 2292 y FA(are)16 b(terms)f(where)h Fx(ty)r(pe)o
FA(\()p Fx(t)1515 2299 y Fk(j)1533 2292 y FA(\))e(=)f Fx(B)1654
2299 y Fk(j)1689 2292 y FA(then)894 2495 y Fx(L)935 2358 y
Fi(8)935 2395 y(>)935 2408 y(>)935 2420 y(>)935 2433 y(>)935
2445 y(<)935 2520 y(>)935 2532 y(>)935 2545 y(>)935 2557 y(>)935
2570 y(:)1006 2411 y Fx(v)1030 2418 y Fm(1)1091 2411 y Fz(7!)41
b Fx(t)1200 2418 y Fm(1)1109 2467 y FA(.)1109 2484 y(.)1109
2500 y(.)993 2590 y Fx(v)1017 2597 y Fk(m)1091 2590 y Fz(7!)g
Fx(t)1200 2597 y Fk(m)1254 2358 y Fi(9)1254 2395 y(>)1254 2408
y(>)1254 2420 y(>)1254 2433 y(>)1254 2445 y(=)1254 2520 y(>)1254
2532 y(>)1254 2545 y(>)1254 2557 y(>)1254 2570 y(;)1299 2495
y FA(\()p Fx(t)p FA(\))p eop
%%Page: 111 120
119 bop 605 33 a Fy(A.)19 b(F)o(ORMAL)e(DEFINITION)j(OF)f(CHARITY)386
b(111)299 141 y FA(is)11 b(a)i(term)d(\(the)i(map)f(expression\))h(of)h(t)o
(yp)q(e)e Fx(L)p FA(\()p Fx(B)1191 148 y Fm(1)1211 141 y Fx(;)d(:::;)g(B)1334
148 y Fk(m)1366 141 y FA(\).)20 b(The)12 b(v)m(ariables)g(in)f
Fx(v)1789 148 y Fm(1)1809 141 y Fx(;)d(:::;)g(v)1919 148 y
Fk(m)299 231 y FA(are)16 b(b)q(ound)h(in)f Fx(t)605 238 y Fm(1)624
231 y Fx(;)8 b(:::;)g(t)728 238 y Fk(m)776 231 y FA(resp)q(ectiv)o(ely)l(.)
253 320 y Fz(\017)21 b FA(If)d Fx(t)g FA(is)g(a)i(term)c(where)j
Fx(ty)r(pe)o FA(\()p Fx(t)p FA(\))f(=)f Fx(S)22 b FA(and)d
Fx(v)h FA(is)f(a)g(v)m(ariable)f(base)h(where)g Fx(ty)r(pe)o
FA(\()p Fx(v)r FA(\))e(=)h Fx(S)299 410 y FA(and)e Fx(t)411
417 y Fm(1)431 410 y Fx(;)8 b(:::;)g(t)535 417 y Fk(n)572 410
y FA(are)17 b(terms)d(where)i Fx(ty)r(pe)p FA(\()p Fx(t)1058
417 y Fk(j)1075 410 y FA(\))e(=)g Fx(F)1192 417 y Fk(j)1210
410 y FA(\()p Fx(A;)8 b(S)s FA(\))15 b(then)885 477 y Fi(0)885
550 y(B)885 575 y(B)885 600 y(B)885 625 y(B)885 652 y(@)913
476 y(\014)913 501 y(\014)913 525 y(\014)913 550 y(\014)913
575 y(\014)913 600 y(\014)913 625 y(\014)913 650 y(\014)913
675 y(\014)913 700 y(\014)927 613 y Fx(v)g Fz(7!)1054 528 y
Fx(d)1079 535 y Fm(1)1141 528 y FA(:)41 b Fx(t)1214 535 y Fm(1)1141
585 y FA(.)1141 602 y(.)1141 618 y(.)1051 708 y Fx(d)1076 715
y Fk(n)1141 708 y FA(:)g Fx(t)1214 715 y Fk(n)1258 476 y Fi(\014)1258
501 y(\014)1258 525 y(\014)1258 550 y(\014)1258 575 y(\014)1258
600 y(\014)1258 625 y(\014)1258 650 y(\014)1258 675 y(\014)1258
700 y(\014)1263 477 y(1)1263 550 y(C)1263 575 y(C)1263 600
y(C)1263 625 y(C)1263 652 y(A)1308 613 y FA(\()p Fx(t)p FA(\))299
814 y(is)16 b(a)h(term)e(\(the)i(unfold\))f(of)h(t)o(yp)q(e)g
Fx(R)p FA(\()p Fx(A)p FA(\).)22 b(The)17 b(v)m(ariables)g(in)f
Fx(v)i FA(are)f(b)q(ound)h(in)e Fx(t)1805 821 y Fm(1)1825 814
y Fx(;)8 b(:::;)g(t)1929 821 y Fk(n)299 903 y FA(resp)q(ectiv)o(ely)l(.)253
993 y Fz(\017)21 b FA(If)15 b Fx(t)365 1000 y Fm(1)385 993
y Fx(;)8 b(:::;)g(t)489 1000 y Fk(n)526 993 y FA(are)17 b(terms)d(where)i
Fx(ty)r(pe)p FA(\()p Fx(t)1012 1000 y Fk(j)1029 993 y FA(\))e(=)g
Fx(F)1146 1000 y Fk(j)1164 993 y FA(\()p Fx(A;)8 b(R)p FA(\()p
Fx(A)p FA(\)\))15 b(then)974 1060 y Fi(0)974 1133 y(B)974 1158
y(B)974 1183 y(B)974 1208 y(B)974 1234 y(@)1035 1111 y Fx(d)1060
1118 y Fm(1)1121 1111 y FA(:)41 b Fx(t)1194 1118 y Fm(1)1121
1168 y FA(.)1121 1184 y(.)1121 1201 y(.)1031 1291 y Fx(d)1056
1298 y Fk(n)1121 1291 y FA(:)g Fx(t)1194 1298 y Fk(n)1238 1060
y Fi(1)1238 1133 y(C)1238 1158 y(C)1238 1183 y(C)1238 1208
y(C)1238 1234 y(A)299 1396 y FA(is)16 b(a)g(term)f(\(the)h(record\))g(of)g(t)
o(yp)q(e)g Fx(R)p FA(\()p Fx(A)p FA(\).)150 1571 y FB(A.3.)41
b(Abstracted)27 b(maps)200 1685 y FA(A)16 b(program)g(is)g(not)g(a)h(term,)d
(but)j(an)f FC(abstracted)j(map)p FA(.)h(This)d(is)f(a)g(pair)965
1812 y Fz(f)p Fx(v)f Fz(7!)f Fx(t)p Fz(g)150 1939 y FA(where)i
Fx(v)i FA(is)e(a)g(v)m(ariable)g(base)h(con)o(taining)f(all)g(the)g(free)f(v)
m(ariables)h(of)h(the)f(term)e Fx(t)p FA(.)p eop
%%Page: 112 121
120 bop 1537 509 a Fw(Appendix)33 b Fv(B)999 633 y FB(A)26
b(sample)h(Charit)n(y)f(program)p 150 689 1800 2 v 150 948
a(B.1.)42 b(Quic)n(ksort)200 1063 y FA(The)16 b(quic)o(ksort)f(program)h(for)
g(sorting)g(elemen)o(ts)e(can)i(b)q(e)g(de\014ned)g(in)f(Charit)o(y)l(.)21
b(Recall)15 b(that)150 1152 y(the)d(quic)o(ksort)g(algorithm)f(\014rst)i
(splits)f(a)h(list)f(in)o(to)g(a)h(tree,)f(then)h(p)q(erforms)f(an)h(inorder)
f(tra)o(v)o(ersal)150 1242 y(of)17 b(to)f(tree)g(to)g(collect)f(the)h
(result.)200 1332 y(The)g(data)g(de\014nition)f(required)g(to)h(hold)g(the)f
(v)m(alues)h(in)f(a)h(tree)f(is)h(the)f Fj(coBTree)e FA(data)k(t)o(yp)q(e.)
176 1434 y Fj(data)24 b(C)h(->)g(coBTree\(A\))d(=)j(deBtree:)e(C)i(->)g
(sf\(A)f(*)h(\(C)g(*)h(C\)\).)150 1536 y FA(Lea)o(v)o(es)15
b(are)g(lab)q(eled)g(with)g(the)g Fj(ff)g FA(constructor,)h(while)e(no)q(des)
i(con)o(taining)g(v)m(alues)f(along)h(with)150 1626 y(their)g(left)f(and)i
(righ)o(t)f(c)o(hildren)e(are)i(lab)q(eled)g(with)g Fj(ss)p
FA(.)200 1715 y(The)k(\014rst)h(function)f(required)f(is)h
Fj(split)f FA(whic)o(h)g(tak)o(es)h(a)h(list)e(and)i(separates)g(it)f(in)o
(to)g(t)o(w)o(o)150 1805 y(lists,)15 b(based)i(on)g(some)e(predicate)g
Fj(P)p FA(.)176 1937 y Fj(def)24 b(split)g({P})g(\(a,)h(L\))g(=)253
1997 y({|)f(nil:)h(\(\))332 b(=>)25 b(\([],[]\))278 2056 y(|)g(cons:)f(\(b,)h
(\(L1,)f(L2\)\))g(=>)h({)g(true\(\))49 b(=>)25 b(\(cons\(b,)e(L1\),)h(L2\))
919 2116 y(|)h(false\(\))e(=>)i(\(L1,)f(cons\(b,)f(L2\)\))919
2176 y(}\(P\(b,a\)\))278 2236 y(|}\(L\).)150 2338 y FA(F)l(rom)d
Fj(split)p FA(,)g(the)h(function)g Fj(pivot)f FA(will)g(separate)h(the)g(piv)
o(ot)g(from)f(those)i(elemen)n(ts)d(\\less)150 2428 y(than")e(the)f(piv)o
(ot,)f(and)i(\\greater)g(than")g(the)f(piv)o(ot.)1016 2700
y Fy(112)p eop
%%Page: 113 122
121 bop 645 33 a Fy(B.)19 b(A)h(SAMPLE)f(CHARITY)h(PR)o(OGRAM)424
b(113)176 201 y Fj(def)24 b(pivot)g({P})g(\(L\))h(=)253 261
y({)g(nil\(\))177 b(=>)25 b(ff\(\))253 320 y(|)g(cons\(a,)e(L\))50
b(=>)25 b(ss\(a,)f(split{P})f(\(a,)h(L\)\))253 380 y(}\(L\).)150
481 y FA(With)17 b(unfold)f(o)o(v)o(er)g(the)h(original)g(list,)e(a)j
Fj(coBtree)c FA(is)i(created)h(where)f(the)h(ro)q(ot)g(of)h(the)e(tree)g(is)
150 571 y(the)g(\014rst)h(elemen)o(t)c(in)j(the)g(list.)176
672 y Fj(def)24 b(pivots{P}\()o(L\))e(=)k(\(|)f(x)g(=>)g(deBTree:)d
(pivot{P}\(x\))g(|\)\(L\).)200 773 y FA(T)l(o)15 b(collect)d(the)i(v)m(alues)
g(in)g(to)h(the)f(no)q(des)h(of)f(the)g(cotree,)g(an)h(inorder)f(tra)o(v)o
(ersal)f(the)h(coBT)l(ree)150 863 y(is)20 b(required.)31 b(The)20
b(function)g Fj(collect)e FA(p)q(erforms)h(the)h(tra)o(v)o(ersal)f(b)o(y)h
(taking)g(the)g(tree)f(apart)150 952 y(from)c(the)i(ro)q(ot)g(do)o(wn,)g(un)o
(til)f(a)g(leaf)h(is)f(encoun)o(tered.)21 b(The)c(righ)o(t)f(side)g(of)h(the)
f(cotree)g(and)h(the)150 1042 y(curren)o(t)i(no)q(de,)i(starting)f(from)f
(the)g(ro)q(ot)i(no)q(de,)g(is)e(stac)o(k)o(ed)g(on)o(to)h(a)g(dump)f(so)h
(that)g(the)g(left)150 1132 y(side)c(to)h(the)f(coBtree)f(can)h(b)q(e)h(pro)q
(cessed)g(\014rst.)k(When)c(a)f(leaf)g(on)h(the)f(left)f(on)i(the)f(left)g
(side)g(of)150 1221 y(the)g(tree)g(is)h(encoun)o(tered,)e(the)i(v)m(alue)f
(of)h(the)f(no)q(de)i(is)e(app)q(ended)h(to)g(the)g(result)f(and)h(the)g
(ride)150 1311 y(side)e(of)h(the)f(no)q(de)h(is)g(p)q(opp)q(ed)g(o\013)h(the)
e(dump)f(using)i(the)g Fj(pop)e FA(function.)21 b(The)15 b(collect)f
(function)150 1401 y(con)o(tin)o(ues)i(collecting)g(v)m(alues)h(do)o(wn)h
(the)f(righ)o(t)g(side)f(of)i(the)f(tree,)f(un)o(til)g(all)h(no)q(des)h(ha)o
(v)o(e)e(b)q(een)150 1490 y(collected.)176 1561 y Fj(def)24
b(pop\(acc,du)o(mp\))e(=)j({)h(nil\(\))331 b(=>)25 b(\(acc,\(\(deB)o(Tr)o
(ee:)o(ff\()o(\)\),)o([])o(\)\))688 1621 y(|)h(cons\(\(a,t)o(\),d)o(um)o
(p'\))c(=>)j(\(cons\(a,ac)o(c\))o(,\(t)o(,du)o(mp')o(\)\))688
1681 y(}\(dump\).)176 1801 y(def)f(collect\(tr)o(ee,)e(bnd\))i(=)201
1860 y({|)h(zero:\(\))690 b(=>)25 b(\([],\(tree)o(,[])o(\)\))227
1920 y(|)g(succ:\(acc,)o(\(\(d)o(eBT)o(ree)o(:f)o(f\(\))o(\),)d(dump\)\))i
(=>)h(pop\(acc,d)o(ump)o(\))381 1980 y(|\(acc,\(\(d)o(eBT)o(ree)o(:s)o(s\(a)o
(,\(t)o(l,t)o(r\))o(\))e(=>)i(\(acc,\(tl,)o(con)o(s\()o(\(a,)o(tr\))o(,du)o
(mp)o(\)\)\))227 2040 y(|}\(bnd\).)200 2141 y FA(Finally)12
b(the)h(quic)o(ksort)g(function)g(\014rst)h(generates)f(the)g(coBtree,)g
(then)g(p)q(erforms)g(a)h(tra)o(v)o(ersal)150 2230 y(of)20
b(the)g(tree,)g(collecting)e(all)i(of)g(the)g(v)m(alues)g(in)o(to)f(a)i
(list.)31 b(Notice)19 b(that)i(the)e(upp)q(er)i(b)q(ound)g(of)150
2320 y(the)d(tra)o(v)o(ersal)f(is)i(2)12 b Fz(\002)h Fx(n)f
FA(+)g(1,)19 b(since)f(eac)o(h)f(no)q(de)i(m)o(ust)e(b)q(e)i(visited)e(t)o
(wice)g(during)h(the)g(inorder)150 2410 y(tra)o(v)o(ersal.)176
2541 y Fj(def)24 b(quick_sort)o({P})o(\(L\))e(=)253 2600 y({len)i(=>)h
(p0\(collec)o(t\(p)o(iv)o(ots)o({P})o(\(L\))o(,s)o(ucc)o(\(ad)o(d\()o(len)o
(,le)o(n\)\))o(})d(\(length\(L\)\))o(.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
